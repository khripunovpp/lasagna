"use strict";(self.webpackChunklasagna=self.webpackChunklasagna||[]).push([[375],{7375:(j,l,s)=>{s.r(l),s.d(l,{ProductListComponent:()=>$});var m=s(467),t=s(1007),f=s(7512),g=s(1119),C=s(1072),v=s(5642),y=s(1086),a=s(177),d=s(4625),F=s(553);let p=(()=>{class n{template;constructor(e){this.template=e,console.log(e)}static \u0275fac=function(o){return new(o||n)(t.rXU(t.C4Q))};static \u0275dir=t.FsC({type:n,selectors:[["","lgCardListItem",""]]})}return n})();function P(n,c){if(1&n&&(t.j41(0,"div",2),t.eu8(1,3),t.k0s()),2&n){const e=c.$implicit;t.R7$(),t.Y8G("ngTemplateOutlet",e.template)}}function h(n,c){1&n&&(t.j41(0,"div"),t.EFF(1,"No items found"),t.k0s())}let x=(()=>{class n{constructor(){}items;static \u0275fac=function(o){return new(o||n)};static \u0275cmp=t.VBU({type:n,selectors:[["lg-card-list"]],contentQueries:function(o,i,r){if(1&o&&t.wni(r,p,4),2&o){let u;t.mGM(u=t.lsd())&&(i.items=u)}},decls:5,vars:2,consts:[[3,"flat"],[1,"lg-card-list"],[1,"lg-card-list__item"],[3,"ngTemplateOutlet"]],template:function(o,i){1&o&&(t.j41(0,"lg-card",0)(1,"section",1),t.Z7z(2,P,2,1,"div",2,t.Vm6,!1,h,2,0,"div"),t.k0s()()),2&o&&(t.Y8G("flat",!0),t.R7$(2),t.Dyx(i.items))},dependencies:[F.i,a.T3],styles:[":host{display:flex;width:100%}.lg-card-list{display:flex;flex-direction:column;width:100%;gap:32px;padding:24px 0}.lg-card-list__item{padding:0 24px}\n"],encapsulation:2})}return n})();var R=s(7201);function G(n,c){if(1&n){const e=t.RV6();t.j41(0,"lg-gap-row",0)(1,"div",3)(2,"lg-gap-row",0)(3,"div",4),t.EFF(4),t.k0s(),t.j41(5,"div",5),t.EFF(6),t.k0s(),t.j41(7,"div",6),t.EFF(8),t.nI1(9,"number"),t.k0s()()(),t.j41(10,"lg-button",7),t.EFF(11," Edit "),t.k0s(),t.j41(12,"lg-button",8),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG();return t.Njj(r.deleteProduct(i))}),t.nrm(13,"mat-icon",9),t.k0s()()}if(2&n){let e;const o=t.XpG().$implicit,i=t.XpG();t.Y8G("center",!0),t.R7$(2),t.Y8G("center",!0),t.R7$(2),t.JRh(o.name),t.R7$(2),t.SpI(" ",null!==(e=o.source)&&void 0!==e?e:"",""),t.R7$(2),t.SpI("",t.i5U(9,14,i.getPricePerGram(o),"1.2-5")," per gram "),t.R7$(2),t.Aen("primary"),t.Y8G("size","small")("link","/edit-product/"+o.uuid)("flat",!0),t.R7$(2),t.Aen("danger"),t.Y8G("size","small")("icon",!0)}}function L(n,c){1&n&&t.DNE(0,G,14,17,"ng-template",2)}let $=(()=>{class n{_productsRepository;constructor(e){this._productsRepository=e}products=(0,t.vPA)([]);getPricePerGram(e){return((0,d.N)(e.price)||1)/((0,d.N)(e.amount)||1)}deleteProduct(e){this._productsRepository.deleteProduct(e.uuid,()=>{this.loadProducts()})}ngOnInit(){var e=this;return(0,m.A)(function*(){yield e.loadProducts()})()}loadProducts(){this._productsRepository.getProducts(e=>{const o=e.toSorted((i,r)=>i.name.localeCompare(r.name));this.products.set(o)})}static \u0275fac=function(o){return new(o||n)(t.rXU(R.d))};static \u0275cmp=t.VBU({type:n,selectors:[["lg-product-list"]],decls:9,vars:6,consts:[[3,"center"],[3,"flat","link","size"],["lgCardListItem",""],[1,"expand"],[2,"flex","20%"],[2,"flex","10%"],[2,"flex","70%"],[3,"size","link","flat"],[3,"click","size","icon"],["aria-hidden","false","aria-label","Example home icon","fontIcon","close"]],template:function(o,i){1&o&&(t.j41(0,"lg-container")(1,"lg-gap-row",0)(2,"lg-title"),t.EFF(3," Products "),t.k0s(),t.j41(4,"lg-button",1),t.EFF(5," Add "),t.k0s()(),t.j41(6,"lg-card-list"),t.Z7z(7,L,1,0,null,2,t.Vm6),t.k0s()()),2&o&&(t.R7$(),t.Y8G("center",!0),t.R7$(3),t.Aen("primary"),t.Y8G("flat",!0)("link","/add-product")("size","small"),t.R7$(3),t.Dyx(i.products()))},dependencies:[f.I,g.Q,C.d,v.H,y.W,a.QX,x,p],styles:["[_nghost-%COMP%]{display:block}"]})}return n})()}}]);