"use strict";(self.webpackChunklasagna=self.webpackChunklasagna||[]).push([[892],{416:(b,g,n)=>{n.d(g,{n:()=>C});var t=n(467);const i={products:{name:"products",loaderConfig:{name:"indexDb",storeName:"productsStore"}},categories:{name:"categories",loaderConfig:{name:"indexDb",storeName:"categoryStore"}},recipes:{name:"recipes",loaderConfig:{name:"indexDb",storeName:"recipesStore"}}};var y=n(4412),d=n(1007),s=n(2890);let C=(()=>{class o{_indexDbSelectLoaderService;constructor(e){this._indexDbSelectLoaderService=e}_registry=new Map;_registry$=new y.t(new Map);register(e){if(this._registry.has(e))return;const r=i[e];if(!r)throw new Error(`SelectResource ${e} not found`);this._registry.set(r.name,{name:r.name,list:[],lists:{},loader:{load:()=>this._indexDbSelectLoaderService.load(r.loaderConfig?.storeName)}})}get(e){return this._registry.get(e)}load(e){var r=this;const c=e||Array.from(this._registry.keys());return Promise.all(c.map(function(){var a=(0,t.A)(function*(p){const _=r.get(p),v=yield _.loader.load(_.name);Array.isArray(v)?_.list=v:_.lists=v});return function(p){return a.apply(this,arguments)}}())).then(()=>c.reduce((a,p)=>(a[p]=this.get(p),a),{})).then(()=>{this._registry$.next(this._registry)})}subscribe(e){return this._registry$.subscribe(e)}static \u0275fac=function(r){return new(r||o)(d.KVO(s.L,8))};static \u0275prov=d.jDH({token:o,factory:o.\u0275fac})}return o})()},2890:(b,g,n)=>{n.d(g,{L:()=>y});var t=n(1007),i=n(5559);let y=(()=>{class d{_indexDb;constructor(C){this._indexDb=C}load(C){return new Promise((o,u)=>{this._indexDb.openDb(e=>{const a=e.transaction(C,"readonly").objectStore(C).getAll();a.onsuccess=()=>{o(a.result)}})})}static \u0275fac=function(o){return new(o||d)(t.KVO(i.Q))};static \u0275prov=t.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},2892:(b,g,n)=>{n.r(g),n.d(g,{AddCategoryComponent:()=>E});var t=n(1007),i=n(5642),y=n(553),d=n(1086),s=n(9417),C=n(3333),o=n(7504),u=n(7782),e=n(1119),r=n(416),c=n(2933),a=n(1338);function p(m,x){if(1&m){const l=t.RV6();t.j41(0,"lg-button",3),t.bIt("click",function(){t.eBV(l);const h=t.XpG();return t.Njj(h.editCategory(h.value))}),t.EFF(1," Edit Category "),t.k0s()}}function _(m,x){if(1&m){const l=t.RV6();t.j41(0,"lg-button",3),t.bIt("click",function(){t.eBV(l);const h=t.XpG();return t.Njj(h.addCategory(h.value))}),t.EFF(1," Add Category "),t.k0s()}}let v=(()=>{class m{_categoryRepository;_selectResourcesService;_router;constructor(l,f,h){this._categoryRepository=l,this._selectResourcesService=f,this._router=h}form=new s.gE({name:new s.MJ("",s.k0.required)});uuid=(0,t.hFB)("");uuidEffect=(0,t.QZP)(()=>{this.uuid()&&this._categoryRepository.getOne(this.uuid(),l=>{this.form.reset(l),this.form.updateValueAndValidity()})});get value(){return this.form.value}ngOnInit(){}addCategory(l){this._categoryRepository.addCategory(l).then(()=>{this._router.navigate(["/categories"])})}editCategory(l){this._categoryRepository.editCategory(this.uuid(),l).then(()=>{this._router.navigate(["/categories"])})}static \u0275fac=function(f){return new(f||m)(t.rXU(c.P),t.rXU(r.n),t.rXU(a.Ix))};static \u0275cmp=t.VBU({type:m,selectors:[["lg-add-category-form"]],inputs:{uuid:[1,"uuid"]},features:[t.Jv_([{provide:r.n,useClass:r.n}])],decls:6,vars:3,consts:[[3,"formGroup"],["label","Name"],["formControlName","name",3,"placeholder"],[3,"click"]],template:function(f,h){1&f&&(t.j41(0,"form",0)(1,"lg-gap-column")(2,"lg-control",1),t.nrm(3,"lg-input",2),t.k0s(),t.DNE(4,p,2,0,"lg-button")(5,_,2,0,"lg-button"),t.k0s()()),2&f&&(t.Y8G("formGroup",h.form),t.R7$(3),t.Y8G("placeholder","Your category name"),t.R7$(),t.vxM(h.uuid()?4:5))},dependencies:[s.X1,s.qT,s.BC,s.cb,s.j4,s.JD,C.S,o.X,u.K,e.Q],encapsulation:2})}return m})();var S=n(7512);let E=(()=>{class m{_aRoute;constructor(l){this._aRoute=l}uuid=(0,t.vPA)("");ngOnInit(){this._aRoute.params.subscribe(l=>{this.uuid.set(l.uuid)})}static \u0275fac=function(f){return new(f||m)(t.rXU(a.nX))};static \u0275cmp=t.VBU({type:m,selectors:[["lg-add-category"]],decls:8,vars:8,consts:[[3,"center"],[3,"flat","link","size"],[3,"uuid"]],template:function(f,h){1&f&&(t.j41(0,"lg-container")(1,"lg-gap-row",0)(2,"lg-title"),t.EFF(3),t.k0s(),t.j41(4,"lg-button",1),t.EFF(5," Back to list "),t.k0s()(),t.j41(6,"lg-card"),t.nrm(7,"lg-add-category-form",2),t.k0s()()),2&f&&(t.R7$(),t.Y8G("center",!0),t.R7$(2),t.SpI("",h.uuid()?"Edit":"Add"," Category"),t.R7$(),t.Aen("warning"),t.Y8G("flat",!0)("link","/categories")("size","small"),t.R7$(3),t.Y8G("uuid",h.uuid()))},dependencies:[i.H,y.i,d.W,v,S.I,e.Q],encapsulation:2})}return m})()},3333:(b,g,n)=>{n.d(g,{S:()=>C});var t=n(1007),i=n(9417);const y=["input"],d=[[["after"]]],s=["after"];let C=(()=>{class o{constructor(){}input;value="";placeholder=(0,t.hFB)("Enter text here");onInputChanged=(0,t.CGW)();theme=(0,t.hFB)("default");onChange=()=>{};onTouched=()=>{};writeValue(e){this._change(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onChangeInput(e){this._change(e.target.value)}_change(e){this.value=e,this.onChange(this.value)}focus(){this.input?.nativeElement.focus()}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=t.VBU({type:o,selectors:[["lg-input"]],viewQuery:function(r,c){if(1&r&&t.GBs(y,7),2&r){let a;t.mGM(a=t.lsd())&&(c.input=a.first)}},inputs:{placeholder:[1,"placeholder"],theme:[1,"theme"]},outputs:{onInputChanged:"onInputChanged"},features:[t.Jv_([{provide:i.kq,useExisting:(0,t.Rfq)(()=>o),multi:!0}])],ngContentSelectors:s,decls:5,vars:4,consts:[["input",""],[1,"lg-input"],["type","text",1,"input",3,"change","input","placeholder","value"],[1,"lg-input__after"]],template:function(r,c){if(1&r){const a=t.RV6();t.NAR(d),t.j41(0,"div",1)(1,"input",2,0),t.bIt("change",function(){return t.eBV(a),t.Njj(c.onInputChanged.emit(c.value))})("input",function(_){return t.eBV(a),t.Njj(c.onChangeInput(_))}),t.k0s(),t.j41(3,"div",3),t.SdG(4),t.k0s()()}2&r&&(t.AVh("contrast","contrast"===c.theme()),t.R7$(),t.Y8G("placeholder",c.placeholder())("value",c.value))},dependencies:[i.YN],styles:["[_nghost-%COMP%]{display:flex;flex:1}.lg-input[_ngcontent-%COMP%]{display:flex;flex:1;background-color:var(--control-bg);border-radius:12px;gap:16px}.lg-input__after[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.input[_ngcontent-%COMP%]{flex:1;border:none;padding:16px;border-radius:12px;font-family:inherit;font-size:inherit;background-color:transparent}.input[_ngcontent-%COMP%]::placeholder{color:var(--placeholder)}.input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:var(--focus-shadow)}"]})}return o})()},4374:(b,g,n)=>{n.d(g,{F:()=>t});var t=function(i){return i.PRODUCTS="productsStore",i.RECIPES="recipesStore",i.CATEGORIES="categoryStore",i}(t||{})},5559:(b,g,n)=>{n.d(g,{Q:()=>d});var t=n(467),i=n(4374),y=n(1007);let d=(()=>{class s{constructor(){}get _uuid(){return Math.random().toString(36).substring(2)+Date.now().toString(36)}openDb(o){return new Promise(function(){var u=(0,t.A)(function*(e,r){const c=yield window.indexedDB.open("lasagna-db",1);c.onerror=a=>{r(a)},c.onsuccess=a=>{o(a.target?.result)},c.onupgradeneeded=a=>{const p=a.target?.result;p.createObjectStore(i.F.PRODUCTS,{keyPath:"uuid",autoIncrement:!0}).createIndex("name","name",{unique:!1}),p.createObjectStore(i.F.RECIPES,{keyPath:"uuid",autoIncrement:!0}).createIndex("name","name",{unique:!1}),p.createObjectStore(i.F.CATEGORIES,{keyPath:"uuid",autoIncrement:!0}).createIndex("name","name",{unique:!1})},e()});return function(e,r){return u.apply(this,arguments)}}())}addData(o,u){this.openDb(e=>{e.transaction(o,"readwrite").objectStore(o).add({...u,uuid:this._uuid})})}replaceData(o,u,e){return this.openDb(r=>{r.transaction(o,"readwrite").objectStore(o).put(e,"uuid")})}search(o,u,e,r){this.openDb(c=>{c.transaction(o,"readonly").objectStore(o).index(u).getAll(e).onsuccess=S=>{r(S.target.result)}})}getOne(o,u,e){this.openDb(r=>{r.transaction(o,"readonly").objectStore(o).get(u).onsuccess=_=>{e(_.target.result)}})}static \u0275fac=function(u){return new(u||s)};static \u0275prov=y.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()},7504:(b,g,n)=>{n.d(g,{X:()=>d});var t=n(1007);const i=[[["beforeLabelTpl"]],[["labelTpl"]],[["afterLabelTpl"]],[["endLabelTpl"]],"*"],y=["beforeLabelTpl","labelTpl","afterLabelTpl","endLabelTpl","*"];let d=(()=>{class s{constructor(){}label=(0,t.hFB)("");static \u0275fac=function(u){return new(u||s)};static \u0275cmp=t.VBU({type:s,selectors:[["lg-control"]],inputs:{label:[1,"label"]},ngContentSelectors:y,decls:11,vars:1,consts:[[1,"control"],[1,"control__label"],[1,"control__label-string"],[1,"control__label-end"],[1,"control__content"]],template:function(u,e){1&u&&(t.NAR(i),t.j41(0,"div",0)(1,"label",1),t.SdG(2),t.j41(3,"span",2),t.SdG(4,1),t.EFF(5),t.k0s(),t.SdG(6,2),t.j41(7,"div",3),t.SdG(8,3),t.k0s()(),t.j41(9,"div",4),t.SdG(10,4),t.k0s()()),2&u&&(t.R7$(5),t.SpI(" ",e.label()," "))},styles:[".control{display:flex;flex-direction:column;gap:8px}.control__label{font-size:.9rem;display:flex;align-items:flex-end;gap:8px}.control__label-end{display:flex;align-items:flex-end;gap:8px;margin-left:auto}.control__content{display:flex}\n"],encapsulation:2})}return s})()}}]);