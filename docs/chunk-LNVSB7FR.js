import{a as Z}from"./chunk-3XWLM6KQ.js";import{a as Y}from"./chunk-6MKBKDFP.js";import{a as X}from"./chunk-GNM2PBYD.js";import"./chunk-CEPNEZXV.js";import{a as U}from"./chunk-C5H2I4FC.js";import{a as J}from"./chunk-EIVKJBV7.js";import{a as H}from"./chunk-TBBEROLX.js";import{a as h}from"./chunk-U5RG623K.js";import"./chunk-4U4Z3QUR.js";import{a as L}from"./chunk-VPY63KRA.js";import"./chunk-MPFUNZLY.js";import{a as K}from"./chunk-O2QGAP6D.js";import{c as T}from"./chunk-N7V5TNMA.js";import"./chunk-3KIH2YCB.js";import{C as D,E as V,F as k,G as O,I as B,K as M,N as G,Q as j,U as W,b as N,ca as q,j as R,k as S,la as z,na as Q}from"./chunk-4GDVHNJM.js";import{m as E}from"./chunk-I72ENH6O.js";import"./chunk-CABIONZL.js";import"./chunk-EMIJRNYJ.js";import"./chunk-ZA7VU5CB.js";import{$a as i,Cc as c,Db as y,Dc as p,Fb as _,Kb as r,Lb as n,Mb as d,Nb as w,Nc as I,Rb as A,Rc as P,Vb as v,Wb as u,eb as l,jc as s,la as F,lb as C,lc as m,ma as b,va as f}from"./chunk-X5WXA3YI.js";import"./chunk-2RGDSI3Q.js";import"./chunk-FK6H3RFT.js";import"./chunk-C6Q5SG76.js";function ot(t,e){t&1&&(s(0),c(1,"translate")),t&2&&m(" ",p(1,1,"settings.category.save")," ")}function it(t,e){t&1&&(s(0),c(1,"translate")),t&2&&m(" ",p(1,1,"settings.category.no-changes")," ")}function rt(t,e){if(t&1){let o=A();n(0,"lg-button",6),v("click",function(){F(o);let g=u();return b(g.editCategory())}),y(1,ot,2,3)(2,it,2,3),d()}if(t&2){let o=u();r("disabled",!o.form.dirty),i(),_(o.form.dirty?1:2)}}function nt(t,e){t&1&&(s(0),c(1,"translate")),t&2&&m(" ",p(1,1,"settings.category.add")," ")}function at(t,e){t&1&&(s(0),c(1,"translate")),t&2&&m(" ",p(1,1,"settings.category.enter-name")," ")}function dt(t,e){if(t&1){let o=A();n(0,"lg-button",6),v("click",function(){F(o);let g=u();return b(g.addCategory())}),y(1,nt,2,3)(2,at,2,3),d()}if(t&2){let o=u();r("disabled",!o.form.dirty),i(),_(o.form.dirty?1:2)}}var x=class t{constructor(e,o){this._categoryRepository=e;this._notificationsService=o}form=new O({name:new B("",D.required)});category=f(void 0);uuid=P("");uuidEffect=I(()=>{if(!this.uuid()){this.category.set(N.empty());return}this._categoryRepository.getOne(this.uuid()).then(e=>{this.reset(e)})});reset(e){this.form.reset(R(e)),this.category.set(e),this.form.markAsPristine()}ngOnInit(){this.form.valueChanges.subscribe(e=>{this.category()?.update(S(e))})}addCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.addOne(this.category()).then(()=>{this.form.reset({name:""}),this._notificationsService.success("settings.category.added"),this.form.markAsPristine()})}editCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.updateOne(this.uuid(),this.category()).then(()=>{this._notificationsService.success("settings.category.edited"),this.form.markAsPristine()})}onEnter(){this.uuid()?this.editCategory():this.addCategory()}static \u0275fac=function(o){return new(o||t)(l(T),l(z))};static \u0275cmp=C({type:t,selectors:[["lg-add-category-form"]],inputs:{uuid:[1,"uuid"]},decls:9,vars:10,consts:[[3,"formGroup"],[3,"bottom","mobileMode"],["lgExpand","",3,"label"],["formControlName","name",3,"onEnter","placeholder"],["lgNoWrap",""],[3,"disabled"],[3,"click","disabled"]],template:function(o,a){o&1&&(n(0,"form",0)(1,"lg-flex-row",1)(2,"lg-control",2),c(3,"translate"),n(4,"lg-input",3),c(5,"translate"),v("onEnter",function(){return a.onEnter()}),d()(),n(6,"div",4),y(7,rt,3,2,"lg-button",5)(8,dt,3,2,"lg-button",5),d()()()),o&2&&(r("formGroup",a.form),i(),r("bottom",!0)("mobileMode",!0),i(),r("label",p(3,6,"settings.category.name")),i(2),r("placeholder",p(5,8,"settings.category.placeholder")),i(3),_(a.uuid()?7:8))},dependencies:[W,M,V,k,G,j,X,Y,Q,h,U,Z,q],encapsulation:2})};var $=class t{constructor(e){this._aRoute=e}uuid=f("");ngOnInit(){this._aRoute.params.subscribe(e=>{this.uuid.set(e.uuid)})}static \u0275fac=function(o){return new(o||t)(l(E))};static \u0275cmp=C({type:t,selectors:[["lg-add-category"]],decls:7,vars:3,consts:[[3,"center"],[3,"uuid"]],template:function(o,a){o&1&&(n(0,"lg-fade-in")(1,"lg-container")(2,"lg-flex-row",0)(3,"lg-title"),s(4),d()(),n(5,"lg-card"),w(6,"lg-add-category-form",1),d()()()),o&2&&(i(2),r("center",!0),i(2),m("",a.uuid()?"Edit":"Add"," product category"),i(2),r("uuid",a.uuid()))},dependencies:[H,J,K,x,h,L],encapsulation:2})};export{$ as AddCategoryComponent};
