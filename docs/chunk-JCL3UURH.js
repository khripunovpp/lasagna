import{a as z,b as Q,c as T}from"./chunk-CBSHI3BF.js";import{a as q}from"./chunk-WR5RQKJP.js";import{a as C,e as W,i as U,p as j}from"./chunk-5WZP2QKH.js";import{d as P}from"./chunk-X7YFISNV.js";import{$a as u,B as A,Fa as M,Ga as b,H as V,Ha as w,Ia as a,Ja as l,L as m,Oa as S,Pa as g,Qa as h,U as v,V as y,Ya as $,Z as _,Za as N,bb as p,gb as f,ia as s,j as k,la as R,na as d,o as I,ra as O,ub as B,va as E,wa as x,xb as D,ya as F,yb as c,za as L,zb as G}from"./chunk-LOAPDVIX.js";var te=n=>{let e={};for(let t in n)Array.isArray(n[t])?e[t]=n[t].reduce((o,i)=>(o.push(te(i)),o),[]):n[t]?.uuid!=null?e[t]=n[t].uuid:e[t]=n[t];return e},ne=n=>{let e={};for(let t in n)Array.isArray(n[t])?e[t]=n[t].filter(o=>o!=null).map(ne):n[t]!=null&&(e[t]=n[t]);return e};var oe=(n,e)=>e.value;function ie(n,e){if(n&1){let t=S();a(0,"lg-button",2),g("click",function(){let i=v(t),r=i.$implicit,Z=i.$index,ee=h();return y(ee.onClickItem(r,Z))}),u(1),l()}if(n&2){let t=e.$implicit,o=e.$index,i=e.$count,r=h();L(t.style||"default"),x("active",r.activeIndex()==o)("noLeftRadius",o===i-1)("noRightRadius",o===0)("noRadius",o!==0&&o!==i-1),s(),p(" ",t.label," ")}}var H=class n{items=c();activeIndex=_(0);onClickItem(e,t){this.activeIndex.set(t),this.writeValue(e.value),e.onClick()}value=_("");effect=B(()=>{let e=this.items()?.findIndex(t=>t.value===this.value())??-1;this.activeIndex.set(e===-1?0:e)});onChange=()=>{};onTouched=()=>{};writeValue(e){this._change(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onChangeInput(e){this._change(e.target.value)}_change(e){this.value.set(e),this.onChange(this.value())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=d({type:n,selectors:[["lg-buttons-group"]],inputs:{items:[1,"items"]},features:[f([{provide:C,useExisting:m(()=>n),multi:!0}])],decls:3,vars:0,consts:[[1,"buttons-group"],[3,"active","style","noLeftRadius","noRightRadius","noRadius"],[3,"click","active","noLeftRadius","noRightRadius","noRadius"]],template:function(t,o){t&1&&(a(0,"div",0),b(1,ie,2,7,"lg-button",1,oe),l()),t&2&&(s(),w(o.items()))},dependencies:[P],styles:[`.buttons-group{display:flex}.buttons-group lg-button{flex:1}.buttons-group lg-button button{width:100%}
`],encapsulation:2})};function re(n,e){if(n&1){let t=S();a(0,"span",2),g("click",function(){let i=v(t).$implicit,r=h();return y(r.onSelect(i))}),u(1),l()}if(n&2){let t=e.$implicit,o=e.$index,i=e.$count,r=h();F("selected",t.value===r.value),E("data-last",o===i-1?!0:null),s(),p(" ",t.label," ")}}var X=class n{constructor(){}control=c();items=[];onChangeFn;value;selectedItem;onSelect=e=>{this.applyValue(e.value)};registerOnChange(e){this.onChangeFn=e}registerOnTouched(e){}writeValue(e){this.applyValue(e)}applyValue(e){this.value=e,this.onChangeFn?.(e),this.control()?.writeValue(e)}ngOnInit(){}clearSelected(){this.value=null}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=d({type:n,selectors:[["lg-chips-list"]],inputs:{control:[1,"control"],items:"items"},features:[f([{provide:C,useExisting:m(()=>n),multi:!0}])],decls:3,vars:0,consts:[[1,"chips-list"],[1,"chip",3,"selected"],[1,"chip",3,"click"]],template:function(t,o){t&1&&(a(0,"div",0),b(1,re,2,4,"span",1,M),l()),t&2&&(s(),w(o.items))},styles:[".chips-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.chip[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:4px 8px;border-radius:16px;font-size:.875rem;display:inline-block;cursor:pointer}.chip.selected[_ngcontent-%COMP%]{background-color:#0d59ab}"]})};function se(n,e){if(n&1&&u(0),n&2){let t=e.item;p(" ",(t==null?null:t.name)??t.value??t," ")}}function ae(n,e){if(n&1&&u(0),n&2){let t=e.item;p(" ",(t==null?null:t.name)??t.value??t," ")}}var Y=class n{constructor(e){this._selectResourcesService=e}resource=c("");key=c("");strict=c(!1);loadedList=_([]);onSelected=D();selectComponent=G(T);value=null;_onSearch$=new k;onChange=()=>{};onTouched=()=>{};searchFn=(e,t)=>t.name?.toLowerCase().includes(e.toLowerCase());compareWith=(e,t)=>{let o=e,i=t;return o?.uuid===i||o===i||o?.uuid===i?.uuid||o===i?.uuid};writeValue(e){this.change(e),this.selectComponent().searchTerm=""}change(e){this.value=e,this.onChange(this.value)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onChangeInput(e){this.change(e)}onChangeSelect(e){let t=typeof e=="string"?e:e?.[this.key()];this.change(t),this.onSelected.emit(t)}onSearch(e){this._onSearch$.next(e)}ngOnInit(){this._selectResourcesService.register(this.resource()),this._onSearch$.asObservable().pipe(A(300)).subscribe(e=>{this._selectResourcesService.autocomplete(this.resource(),this.key(),e.term)}),this._selectResourcesService.registryStream.pipe(V(e=>e.get(this.resource())?.stream??I([]))).subscribe(e=>{this.loadedList.set(e)})}reload(){}static \u0275fac=function(t){return new(t||n)(R(q,8))};static \u0275cmp=d({type:n,selectors:[["lg-autocomplete"]],viewQuery:function(t,o){t&1&&$(o.selectComponent,T,5),t&2&&N()},inputs:{resource:[1,"resource"],key:[1,"key"],strict:[1,"strict"]},outputs:{onSelected:"onSelected"},features:[f([{provide:C,useExisting:m(()=>n),multi:!0}])],decls:4,vars:8,consts:[[1,"autocomplete"],["bindLabel","name","notFoundText","Start typing to search",3,"change","ngModelChange","search","addTagText","addTag","bindValue","compareWith","editableSearchTerm","items","ngModel","searchFn"],["ng-label-tmp",""],["ng-option-tmp",""]],template:function(t,o){t&1&&(a(0,"div",0)(1,"ng-select",1),g("change",function(r){return o.onChangeSelect(r)})("ngModelChange",function(r){return o.onChangeInput(r)})("search",function(r){return o.onSearch(r)}),O(2,se,1,1,"ng-template",2)(3,ae,1,1,"ng-template",3),l()()),t&2&&(s(),x("addTagText","Apply by enter")("addTag",!0)("bindValue",o.key())("compareWith",o.compareWith)("editableSearchTerm",!0)("items",o.loadedList())("ngModel",o.value)("searchFn",o.searchFn))},dependencies:[T,j,W,U,z,Q],styles:[`lg-autocomplete{display:flex;flex:1;min-width:150px}.autocomplete{flex:1}.autocomplete .ng-select.ng-select-single .ng-select-container{height:51px}.autocomplete .ng-select .ng-select-container{border:none;border-radius:12px;background-color:var(--control-bg)}.autocomplete .ng-select .ng-select-container .ng-input{top:16px!important}.autocomplete .ng-select .ng-select-container .ng-input>input{color:var(--text);font-family:inherit;font-size:inherit}.autocomplete .ng-dropdown-panel{border:none;box-shadow:0 4px 16px #0000001a;border-radius:12px;overflow:hidden}.autocomplete .ng-dropdown-panel .ng-option{padding:16px;border-radius:12px}.autocomplete .ng-arrow-wrapper{display:none}
`],encapsulation:2})};export{te as a,ne as b,H as c,X as d,Y as e};
