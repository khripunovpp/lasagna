{
  "version": 3,
  "sources": ["src/app/features/documentation/service/faq.service.ts"],
  "sourcesContent": ["import {BehaviorSubject} from 'rxjs';\nimport {DocFile, SharedDocLoaderService, TreeNode} from './docs-loader.service';\nimport {USER_LANGUAGE} from '../../settings/service/providers/user-language.token';\nimport {inject, Injectable} from '@angular/core';\nimport {Stores} from '../../../shared/service/db/const/stores';\n\n@Injectable({ providedIn: 'root' })\nexport class FaqService {\n  private faqs$ = new BehaviorSubject<DocFile[]>([]);\n  private tree$ = new BehaviorSubject<TreeNode[]>([]);\n\n  private _userLang = inject(USER_LANGUAGE);\n  private _sharedLoader = inject(SharedDocLoaderService);\n\n  constructor() {}\n\n  async init() {\n    try {\n      const { docs, tree } = await this._sharedLoader.load('./faq', Stores.FAQ);\n      const filteredTree = this._filterLanguage(tree, this._userLang());\n      this.tree$.next(filteredTree);\n      this.faqs$.next(docs);\n    } catch (e) {\n      console.error('FaqService init failed', e);\n    }\n  }\n\n  private _filterLanguage(nodes: TreeNode[], lang: string): TreeNode[] {\n    return nodes\n      .map(node => this._sharedLoader.filterLanguage(node, lang))\n      .filter((n): n is TreeNode => !!n);\n  }\n\n  getFaqs() {\n    return this.faqs$.asObservable();\n  }\n\n  getTree() {\n    return this.tree$.asObservable();\n  }\n\n  getFaqsView() {\n    return this.faqs$.getValue();\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;AAOM,IAAO,aAAP,MAAO,YAAU;EACb,QAAQ,IAAI,gBAA2B,CAAA,CAAE;EACzC,QAAQ,IAAI,gBAA4B,CAAA,CAAE;EAE1C,YAAY,OAAO,aAAa;EAChC,gBAAgB,OAAO,sBAAsB;EAErD,cAAA;EAAe;EAEf,MAAM,OAAI;AACR,QAAI;AACF,YAAM,EAAE,MAAM,KAAI,IAAK,MAAM,KAAK,cAAc,KAAK,SAAS,OAAO,GAAG;AACxE,YAAM,eAAe,KAAK,gBAAgB,MAAM,KAAK,UAAS,CAAE;AAChE,WAAK,MAAM,KAAK,YAAY;AAC5B,WAAK,MAAM,KAAK,IAAI;IACtB,SAAS,GAAG;AACV,cAAQ,MAAM,0BAA0B,CAAC;IAC3C;EACF;EAEQ,gBAAgB,OAAmB,MAAY;AACrD,WAAO,MACJ,IAAI,UAAQ,KAAK,cAAc,eAAe,MAAM,IAAI,CAAC,EACzD,OAAO,CAAC,MAAqB,CAAC,CAAC,CAAC;EACrC;EAEA,UAAO;AACL,WAAO,KAAK,MAAM,aAAY;EAChC;EAEA,UAAO;AACL,WAAO,KAAK,MAAM,aAAY;EAChC;EAEA,cAAW;AACT,WAAO,KAAK,MAAM,SAAQ;EAC5B;;qCApCW,aAAU;EAAA;4EAAV,aAAU,SAAV,YAAU,WAAA,YADG,OAAM,CAAA;;;sEACnB,YAAU,CAAA;UADtB;WAAW,EAAE,YAAY,OAAM,CAAE;;;",
  "names": []
}
