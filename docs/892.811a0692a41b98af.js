"use strict";(self.webpackChunklasagna=self.webpackChunklasagna||[]).push([[892],{416:(y,h,t)=>{t.d(h,{n:()=>u});var e=t(467);const i={products:{name:"products",loaderConfig:{name:"indexDb",storeName:"productsStore"}},categories:{name:"categories",loaderConfig:{name:"indexDb",storeName:"categoryStore"}},recipes:{name:"recipes",loaderConfig:{name:"indexDb",storeName:"recipesStore"}}};var _=t(4412),c=t(1007),o=t(2890);let u=(()=>{class l{_indexDbSelectLoaderService;constructor(n){this._indexDbSelectLoaderService=n}_registry=new Map;_registry$=new _.t(new Map);register(n){if(this._registry.has(n))return;const r=i[n];if(!r)throw new Error(`SelectResource ${n} not found`);this._registry.set(r.name,{name:r.name,list:[],lists:{},loader:{load:()=>this._indexDbSelectLoaderService.load(r.loaderConfig?.storeName)}})}get(n){return this._registry.get(n)}load(n){var r=this;const d=n||Array.from(this._registry.keys());return Promise.all(d.map(function(){var g=(0,e.A)(function*(v){const C=r.get(v),E=yield C.loader.load(C.name);Array.isArray(E)?C.list=E:C.lists=E});return function(v){return g.apply(this,arguments)}}())).then(()=>d.reduce((g,v)=>(g[v]=this.get(v),g),{})).then(()=>{this._registry$.next(this._registry)})}subscribe(n){return this._registry$.subscribe(n)}static \u0275fac=function(r){return new(r||l)(c.KVO(o.L,8))};static \u0275prov=c.jDH({token:l,factory:l.\u0275fac})}return l})()},2890:(y,h,t)=>{t.d(h,{L:()=>_});var e=t(1007),i=t(6659);let _=(()=>{class c{_indexDb;constructor(u){this._indexDb=u}load(u){return this._indexDb.getAll(u)}static \u0275fac=function(l){return new(l||c)(e.KVO(i.j))};static \u0275prov=e.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},2892:(y,h,t)=>{t.r(h),t.d(h,{AddCategoryComponent:()=>x});var e=t(1007),i=t(5642),_=t(553),c=t(1086),o=t(9417),u=t(3333),l=t(7504),a=t(7782),n=t(1119),r=t(416),d=t(2933),g=t(1636);function v(p,A){if(1&p){const s=e.RV6();e.j41(0,"lg-button",3),e.bIt("click",function(){e.eBV(s);const m=e.XpG();return e.Njj(m.editCategory(m.value))}),e.EFF(1," Edit Category "),e.k0s()}}function C(p,A){if(1&p){const s=e.RV6();e.j41(0,"lg-button",3),e.bIt("click",function(){e.eBV(s);const m=e.XpG();return e.Njj(m.addCategory(m.value))}),e.EFF(1," Add Category "),e.k0s()}}let E=(()=>{class p{_categoryRepository;_selectResourcesService;_router;constructor(s,f,m){this._categoryRepository=s,this._selectResourcesService=f,this._router=m}form=new o.gE({name:new o.MJ("",o.k0.required)});uuid=(0,e.hFB)("");uuidEffect=(0,e.QZP)(()=>{this.uuid()&&this._categoryRepository.getOne(this.uuid()).then(s=>{this.form.reset(s),this.form.updateValueAndValidity()})});get value(){return this.form.value}ngOnInit(){}addCategory(s){this._categoryRepository.addCategory(s).then(()=>{this._router.navigate(["/categories"])})}editCategory(s){this._categoryRepository.editCategory(this.uuid(),s).then(()=>{this._router.navigate(["/categories"])})}static \u0275fac=function(f){return new(f||p)(e.rXU(d.P),e.rXU(r.n),e.rXU(g.Ix))};static \u0275cmp=e.VBU({type:p,selectors:[["lg-add-category-form"]],inputs:{uuid:[1,"uuid"]},features:[e.Jv_([{provide:r.n,useClass:r.n}])],decls:6,vars:3,consts:[[3,"formGroup"],["label","Name"],["formControlName","name",3,"placeholder"],[3,"click"]],template:function(f,m){1&f&&(e.j41(0,"form",0)(1,"lg-gap-column")(2,"lg-control",1),e.nrm(3,"lg-input",2),e.k0s(),e.DNE(4,v,2,0,"lg-button")(5,C,2,0,"lg-button"),e.k0s()()),2&f&&(e.Y8G("formGroup",m.form),e.R7$(3),e.Y8G("placeholder","Your category name"),e.R7$(),e.vxM(m.uuid()?4:5))},dependencies:[o.X1,o.qT,o.BC,o.cb,o.j4,o.JD,u.S,l.X,a.K,n.Q],encapsulation:2})}return p})();var b=t(7512);let x=(()=>{class p{_aRoute;constructor(s){this._aRoute=s}uuid=(0,e.vPA)("");ngOnInit(){this._aRoute.params.subscribe(s=>{this.uuid.set(s.uuid)})}static \u0275fac=function(f){return new(f||p)(e.rXU(g.nX))};static \u0275cmp=e.VBU({type:p,selectors:[["lg-add-category"]],decls:8,vars:8,consts:[[3,"center"],[3,"flat","link","size"],[3,"uuid"]],template:function(f,m){1&f&&(e.j41(0,"lg-container")(1,"lg-gap-row",0)(2,"lg-title"),e.EFF(3),e.k0s(),e.j41(4,"lg-button",1),e.EFF(5," Back to list "),e.k0s()(),e.j41(6,"lg-card"),e.nrm(7,"lg-add-category-form",2),e.k0s()()),2&f&&(e.R7$(),e.Y8G("center",!0),e.R7$(2),e.SpI("",m.uuid()?"Edit":"Add"," Category"),e.R7$(),e.Aen("warning"),e.Y8G("flat",!0)("link","/categories")("size","small"),e.R7$(3),e.Y8G("uuid",m.uuid()))},dependencies:[i.H,_.i,c.W,E,b.I,n.Q],encapsulation:2})}return p})()},2933:(y,h,t)=>{t.d(h,{P:()=>o});var e=t(467),i=t(4374),_=t(1007),c=t(6659);let o=(()=>{class u{_indexDbService;constructor(a){this._indexDbService=a}addCategory(a){return this._indexDbService.addData(i.F.CATEGORIES,a)}getOne(a){var n=this;return(0,e.A)(function*(){return n._indexDbService.getOne(i.F.CATEGORIES,a)})()}getCategories(){return this._indexDbService.getAll(i.F.CATEGORIES)}getManyCategories(a){return this._indexDbService.getMany(i.F.CATEGORIES,a)}editCategory(a,n){return this._indexDbService.replaceData(i.F.CATEGORIES,a,n)}deleteCategory(a){return this._indexDbService.remove(i.F.CATEGORIES,a)}static \u0275fac=function(n){return new(n||u)(_.KVO(c.j))};static \u0275prov=_.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},3333:(y,h,t)=>{t.d(h,{S:()=>u});var e=t(1007),i=t(9417);const _=["input"],c=[[["after"]]],o=["after"];let u=(()=>{class l{constructor(){}input;value="";placeholder=(0,e.hFB)("Enter text here");onInputChanged=(0,e.CGW)();theme=(0,e.hFB)("default");noAfter=(0,e.vPA)(!1);onChange=()=>{};onTouched=()=>{};writeValue(n){this._change(n)}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}onChangeInput(n){this._change(n.target.value)}focus(){this.input?.nativeElement.focus()}ngAfterViewInit(){0===this.input?.nativeElement.nextElementSibling?.childElementCount&&this.noAfter.set(!0)}_change(n){this.value=n,this.onChange(this.value)}static \u0275fac=function(r){return new(r||l)};static \u0275cmp=e.VBU({type:l,selectors:[["lg-input"]],viewQuery:function(r,d){if(1&r&&e.GBs(_,7),2&r){let g;e.mGM(g=e.lsd())&&(d.input=g.first)}},inputs:{placeholder:[1,"placeholder"],theme:[1,"theme"]},outputs:{onInputChanged:"onInputChanged"},features:[e.Jv_([{provide:i.kq,useExisting:(0,e.Rfq)(()=>l),multi:!0}])],ngContentSelectors:o,decls:5,vars:6,consts:[["input",""],[1,"lg-input"],["type","text",1,"input",3,"change","input","placeholder","value"],[1,"lg-input__after"]],template:function(r,d){if(1&r){const g=e.RV6();e.NAR(c),e.j41(0,"div",1)(1,"input",2,0),e.bIt("change",function(){return e.eBV(g),e.Njj(d.onInputChanged.emit(d.value))})("input",function(C){return e.eBV(g),e.Njj(d.onChangeInput(C))}),e.k0s(),e.j41(3,"div",3),e.SdG(4),e.k0s()()}2&r&&(e.AVh("contrast","contrast"===d.theme()),e.R7$(),e.Y8G("placeholder",d.placeholder())("value",d.value),e.R7$(2),e.xc7("display",d.noAfter()?"none":"flex"))},dependencies:[i.YN],styles:["[_nghost-%COMP%]{display:flex;flex:1}.lg-input[_ngcontent-%COMP%]{display:flex;flex:1;background-color:var(--control-bg);border-radius:12px;gap:16px}.lg-input__after[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.input[_ngcontent-%COMP%]{flex:1;border:none;padding:16px;border-radius:12px;font-family:inherit;font-size:inherit;background-color:transparent}.input[_ngcontent-%COMP%]::placeholder{color:var(--placeholder)}.input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:var(--focus-shadow)}"]})}return l})()},7504:(y,h,t)=>{t.d(h,{X:()=>c});var e=t(1007);const i=[[["beforeLabelTpl"]],[["labelTpl"]],[["afterLabelTpl"]],[["endLabelTpl"]],"*"],_=["beforeLabelTpl","labelTpl","afterLabelTpl","endLabelTpl","*"];let c=(()=>{class o{constructor(){}label=(0,e.hFB)("");static \u0275fac=function(a){return new(a||o)};static \u0275cmp=e.VBU({type:o,selectors:[["lg-control"]],inputs:{label:[1,"label"]},ngContentSelectors:_,decls:11,vars:1,consts:[[1,"control"],[1,"control__label"],[1,"control__label-string"],[1,"control__label-end"],[1,"control__content"]],template:function(a,n){1&a&&(e.NAR(i),e.j41(0,"div",0)(1,"label",1),e.SdG(2),e.j41(3,"span",2),e.SdG(4,1),e.EFF(5),e.k0s(),e.SdG(6,2),e.j41(7,"div",3),e.SdG(8,3),e.k0s()(),e.j41(9,"div",4),e.SdG(10,4),e.k0s()()),2&a&&(e.R7$(5),e.SpI(" ",n.label()," "))},styles:[".control{display:flex;flex-direction:column;gap:8px}.control__label{font-size:.9rem;display:flex;align-items:flex-end;gap:8px}.control__label-end{display:flex;align-items:flex-end;gap:8px;margin-left:auto}.control__content{display:flex}\n"],encapsulation:2})}return o})()}}]);