{
  "version": 3,
  "sources": ["src/app/features/settings/view/categories/category-recipe/list/category-recipe-list.component.ts"],
  "sourcesContent": ["import {Component, EventEmitter, inject, OnInit, Output} from '@angular/core';\nimport {FlexRowComponent} from '../../../../../../shared/view/layout/flex-row.component';\nimport {ButtonComponent} from '../../../../../../shared/view/ui/button/button.component';\nimport {MatIcon} from '@angular/material/icon';\nimport {CardListComponent} from '../../../../../../shared/view/ui/card/card-list.component';\nimport {CardListItemDirective} from '../../../../../../shared/view/ui/card/card-list-item.directive';\nimport {FadeInComponent} from '../../../../../../shared/view/ui/fade-in.component';\nimport {NotificationsService} from '../../../../../../shared/service/services';\nimport {CategoryRecipesRepository} from '../../../../../../shared/service/repositories';\nimport {CategoryRecipe} from '../../../../service/models/CategoryRecipe';\nimport {TranslatePipe} from '@ngx-translate/core';\nimport {ExpandDirective} from '../../../../../../shared/view/directives/expand.directive';\nimport {defer} from 'rxjs';\nimport {errorHandler} from '../../../../../../shared/helpers';\nimport {AsyncPipe} from '@angular/common';\nimport {FlexColumnComponent} from '../../../../../../shared/view/layout/flex-column.component';\nimport {IS_CLIENT} from '../../../../../../shared/service/tokens/isClient.token';\n\n@Component({\n  selector: 'lg-category-recipe-list',\n  standalone: true,\n  template: `\n    <lg-fade-in>\n      <lg-flex-column [size]=\"'small'\">\n        <div class=\"text-small\"> {{ 'categories.recipes.title' | translate }}</div>\n\n        <lg-card-list style=\"--card-list-bg: var(--control-bg)\">\n          @let cats = (categories | async) ?? [];\n          @for (category of cats; track i; let i = $index) {\n            <ng-template lgCardListItem>\n              <lg-flex-row [center]=\"true\">\n                <div lgExpand (click)=\"onEdit.emit(category.uuid)\" style=\"cursor: pointer;\">\n                  {{ category.name }}\n                </div>\n\n                <lg-button [style]=\"'danger'\"\n                           [size]=\"'tiny'\"\n                           [icon]=\"true\"\n                           (click)=\"deleteCategory(category)\">\n                  <mat-icon aria-hidden=\"false\" aria-label=\"Delete\"\n                            fontIcon=\"close\"></mat-icon>\n                </lg-button>\n              </lg-flex-row>\n            </ng-template>\n          }\n        </lg-card-list>\n      </lg-flex-column>\n    </lg-fade-in>\n  `,\n  imports: [\n    FlexRowComponent,\n    ButtonComponent,\n    MatIcon,\n    CardListComponent,\n    CardListItemDirective,\n    FadeInComponent,\n    TranslatePipe,\n    ExpandDirective,\n    AsyncPipe,\n    FlexColumnComponent\n  ],\n  styles: [\n    `:host {\n      display: block;\n    }\n    `\n  ]\n})\nexport class CategoryRecipeListComponent\n  implements OnInit {\n  constructor(\n    public categoryRepository: CategoryRecipesRepository,\n    private _notificationsService: NotificationsService,\n  ) {\n\n  }\n\n  @Output() onEdit = new EventEmitter<string>();\n  categories = defer(() => this.categoryRepository.categories$);\n  isClient = inject(IS_CLIENT);\n\n  deleteCategory(\n    category: CategoryRecipe,\n  ) {\n\n    if (!category.uuid) return Promise.resolve();\n    return this.categoryRepository.deleteCategory(category.uuid)\n      .then(() => {\n        this.loadCategory();\n        this._notificationsService.success('categories.deleted');\n      })\n      .catch(e => {\n        this._notificationsService.error(errorHandler(e));\n      });\n  }\n\n  ngOnInit() {\n    if (!this.isClient) {\n      return;\n    }\n    this.loadCategory();\n  }\n\n  async loadCategory() {\n    try {\n      await this.categoryRepository.loadAll();\n    } catch (e) {\n      this._notificationsService.error(errorHandler(e));\n    }\n  }\n\n}\n"],
  "mappings": "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",
  "names": []
}
