import{a as Z}from"./chunk-CX6OVVWR.js";import{b as U,c as X}from"./chunk-K5DQMW66.js";import{a as Q}from"./chunk-OW4OSQWU.js";import{a as L}from"./chunk-D6TZV7MY.js";import{a as K}from"./chunk-UZ4ZOUQK.js";import{b as H}from"./chunk-CBJ5O2TR.js";import{a as J}from"./chunk-YSX2TPIK.js";import{a as D,b as V,c as _}from"./chunk-UYEJDPNH.js";import{a as y}from"./chunk-DKKRBT3L.js";import{a as I,b as T}from"./chunk-P7L2C53Q.js";import{a as P}from"./chunk-LVIA722N.js";import{a as k}from"./chunk-2ZEJWSE3.js";import"./chunk-SNDQO5FA.js";import{d as G,f as M,g as j,h as O,i as W,k as q,m as B,p as Y,s as z}from"./chunk-TYLDJUNJ.js";import{o as w,r as E}from"./chunk-K7R7MOA3.js";import"./chunk-IZT3LVRQ.js";import{Ab as a,Bb as c,Cb as x,Gb as b,Jb as C,Kb as s,Ta as i,Wb as d,Ya as m,Yb as F,bb as u,bc as A,fa as R,ga as h,ma as l,ob as n,rc as S,ub as g,vb as f,vc as N}from"./chunk-PNZYYIKS.js";import"./chunk-DELOOZDJ.js";import"./chunk-2WH2EVR6.js";function ie(t,o){t&1&&d(0," Save category ")}function re(t,o){t&1&&d(0," No changes ")}function ne(t,o){if(t&1){let e=b();a(0,"lg-button",6),C("click",function(){R(e);let p=s();return h(p.editCategory())}),g(1,ie,1,0)(2,re,1,0),c()}if(t&2){let e=s();n("disabled",!e.form.dirty),i(),f(e.form.dirty?1:2)}}function ae(t,o){t&1&&d(0," Add category ")}function ce(t,o){t&1&&d(0," Enter a name ")}function me(t,o){if(t&1){let e=b();a(0,"lg-button",6),C("click",function(){R(e);let p=s();return h(p.addCategory())}),g(1,ae,1,0)(2,ce,1,0),c()}if(t&2){let e=s();n("disabled",!e.form.dirty),i(),f(e.form.dirty?1:2)}}var v=class t{constructor(o,e,r,p){this._categoryRepository=o;this._selectResourcesService=e;this._router=r;this._notificationsService=p}form=new O({name:new W("",G.required)});category=l(void 0);uuid=N("");uuidEffect=S(()=>{if(!this.uuid()){this.category.set(I.empty());return}this._categoryRepository.getOne(this.uuid()).then(o=>{this.form.reset(U(o)),this.category.set(o),this.form.markAsPristine()})});ngOnInit(){this.form.valueChanges.subscribe(o=>{this.category()?.update(X(o))})}addCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.addCategory(this.category()).then(()=>{this.form.reset({}),this._notificationsService.success("Category added"),this.form.markAsPristine()})}editCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.editCategory(this.uuid(),this.category()).then(()=>{this._notificationsService.success("Category edited"),this.form.markAsPristine()})}onEnter(){this.uuid()?this.editCategory():this.addCategory()}static \u0275fac=function(e){return new(e||t)(m(T),m(y),m(E),m(H))};static \u0275cmp=u({type:t,selectors:[["lg-add-category-recipe-form"]],inputs:{uuid:[1,"uuid"]},features:[A([{provide:y,useClass:y}])],decls:7,vars:5,consts:[[3,"formGroup"],[3,"bottom","mobileMode"],["label","Name","lgExpand",""],["formControlName","name",3,"onEnter","placeholder"],["lgNoWrap",""],[3,"disabled"],[3,"click","disabled"]],template:function(e,r){e&1&&(a(0,"form",0)(1,"lg-gap-row",1)(2,"lg-control",2)(3,"lg-input",3),C("onEnter",function(){return r.onEnter()}),c()(),a(4,"div",4),g(5,ne,3,2,"lg-button",5)(6,me,3,2,"lg-button",5),c()()()),e&2&&(n("formGroup",r.form),i(),n("bottom",!0)("mobileMode",!0),i(2),n("placeholder","Your category name"),i(2),f(r.uuid()?5:6))},dependencies:[z,q,M,j,B,Y,L,Q,J,_,K,Z],encapsulation:2})};var $=class t{constructor(o){this._aRoute=o}uuid=l("");ngOnInit(){this._aRoute.params.subscribe(o=>{this.uuid.set(o.uuid)})}static \u0275fac=function(e){return new(e||t)(m(w))};static \u0275cmp=u({type:t,selectors:[["lg-add-category-recipe"]],decls:7,vars:3,consts:[[3,"center"],[3,"uuid"]],template:function(e,r){e&1&&(a(0,"lg-fade-in")(1,"lg-container")(2,"lg-gap-row",0)(3,"lg-title"),d(4),c()(),a(5,"lg-card"),x(6,"lg-add-category-recipe-form",1),c()()()),e&2&&(i(2),n("center",!0),i(2),F("",r.uuid()?"Edit":"Add"," recipe category"),i(2),n("uuid",r.uuid()))},dependencies:[D,V,k,v,_,P],encapsulation:2})};export{$ as AddCategoryRecipeComponent};
