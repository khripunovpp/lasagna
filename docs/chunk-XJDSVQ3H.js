import{b as P}from"./chunk-VMMMHXZT.js";import{a as M,c as L}from"./chunk-3QMXLQV4.js";import"./chunk-KDUMQODS.js";import{a as T}from"./chunk-J2K5ABP5.js";import{a as I}from"./chunk-PPDBLFGO.js";import"./chunk-QT2W4FE2.js";import{a as E}from"./chunk-VPXNHWVB.js";import{a as R}from"./chunk-KR57NMDX.js";import{a as B}from"./chunk-CA3BWXEG.js";import{a as b,b as _,c as A}from"./chunk-VAYFVNOG.js";import{a as D}from"./chunk-YPG4XL3K.js";import{a as h}from"./chunk-EDJCHXES.js";import"./chunk-SNDQO5FA.js";import{s as x,t as w}from"./chunk-ARNKAMDX.js";import"./chunk-4F4HA4I6.js";import{Ab as o,Bb as v,Ib as d,Jb as S,Sa as e,Vb as i,Xb as k,Z as p,ab as u,gc as y,hc as C,nb as r,qb as m,tb as f,ub as g,zb as n}from"./chunk-VOOOUGHD.js";import"./chunk-DELOOZDJ.js";import{f as l}from"./chunk-2WH2EVR6.js";function F(s,a){if(s&1&&(i(0),y(1,"timeAgo")),s&2){let t=S();k(" Last backup: ",C(1,1,t.transferDataService.currenBackupDate)," ")}}var N=class s{constructor(){}downloadBackupParam=P("download_backup");transferDataService=p(L);notificationsService=p(I);ngAfterViewInit(){this.downloadBackupParam()&&this.onBackup()}onBackup(){return l(this,null,function*(){let a=this.notificationsService.loading("Creating backup");try{yield this.transferDataService.exportAll("json"),this.notificationsService.success("Backup created successfully"),localStorage.setItem("lastBackupDate",Date.now().toString())}catch(t){this.notificationsService.showJsonErrors([JSON.stringify(t)],"Backup failed"),console.error(t)}finally{a.close()}})}onRestore(a){return l(this,null,function*(){let t=this.notificationsService.loading("Restoring backup");try{yield this.transferDataService.restoreAllData(a),this.notificationsService.success("Restore completed successfully")}catch(c){this.notificationsService.showJsonErrors([JSON.stringify(c)],"Restore failed"),console.error(c)}finally{t.close()}})}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=u({type:s,selectors:[["lg-settings"]],decls:29,vars:15,consts:[[3,"level"],[3,"mobileMode","top"],["lgExpand","","routerLink","/settings/categories/products","routerLinkActive","active"],[3,"center"],["lgExpand","","routerLink","/settings/categories/recipes","routerLinkActive","active"],[3,"mobileMode","center"],[3,"click"],[3,"filesSelected","accept"],[2,"--card-bg","#e78888"],[3,"position"],[1,"text-center","text-inverse"]],template:function(t,c){t&1&&(n(0,"lg-fade-in")(1,"lg-container")(2,"lg-title"),i(3,"Settings"),o(),n(4,"lg-title",0),i(5,"Categories"),o(),n(6,"lg-gap-row",1)(7,"a",2)(8,"lg-card",3),i(9," Products categories "),o()(),n(10,"a",4)(11,"lg-card",3),i(12," Recipes categories "),o()()(),n(13,"lg-title",0),i(14,"Backup"),o(),n(15,"lg-gap-column")(16,"lg-gap-row",5)(17,"lg-button",6),d("click",function(){return c.onBackup()}),i(18," Make backup "),o(),f(19,F,2,3),o(),n(20,"lg-upload",7),d("filesSelected",function(J){return c.onRestore(J)}),n(21,"lg-card",8)(22,"lg-gap-column",9)(23,"span",10),i(24," Be aware! "),v(25,"br"),i(26," This will override all your data! "),o(),n(27,"lg-button"),i(28," Restore backup "),o()()()()()()()),t&2&&(e(4),r("level",3),e(2),r("mobileMode",!0)("top",!0),e(2),r("center",!0),e(3),r("center",!0),e(2),r("level",3),e(3),r("mobileMode",!0)("center",!0),e(),m("success"),e(2),g(c.transferDataService.currenBackupDate?19:-1),e(),r("accept",".json"),e(2),r("position","center"),e(5),m("danger"))},dependencies:[_,b,A,h,x,w,B,D,T,R,M,E],encapsulation:2})};export{N as SettingsComponent};
