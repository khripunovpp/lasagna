import{a as ee}from"./chunk-3XWLM6KQ.js";import{a as $}from"./chunk-6MKBKDFP.js";import{a as Z}from"./chunk-IFILGF77.js";import"./chunk-CEPNEZXV.js";import{a as Y}from"./chunk-C5H2I4FC.js";import{a as L}from"./chunk-EIVKJBV7.js";import{a as K}from"./chunk-TBBEROLX.js";import{a as R}from"./chunk-U5RG623K.js";import"./chunk-4U4Z3QUR.js";import{a as U}from"./chunk-VPY63KRA.js";import"./chunk-MPFUNZLY.js";import{a as Q}from"./chunk-O2QGAP6D.js";import{b as k,j as J}from"./chunk-F7IPTZBX.js";import"./chunk-JIYA5WDW.js";import{G as P,I as B,J as M,K as j,M as O,O as G,R as W,U as q,Y as z,f as N,m as T,ma as H,n as D,oa as X,z as V}from"./chunk-SCGAETAM.js";import{m as w,p as E}from"./chunk-J6CDYHKM.js";import"./chunk-CABIONZL.js";import"./chunk-EMIJRNYJ.js";import"./chunk-ZA7VU5CB.js";import{$a as o,Cc as d,Db as y,Dc as l,Fb as _,Kb as r,Lb as a,Mb as c,Nb as A,Nc as S,Rb as F,Rc as I,Vb as v,Wb as g,eb as p,jc as s,la as x,lb as C,lc as m,ma as b,va as f}from"./chunk-X5WXA3YI.js";import"./chunk-2RGDSI3Q.js";import"./chunk-FK6H3RFT.js";import"./chunk-C6Q5SG76.js";function ne(e,i){e&1&&(s(0),d(1,"translate")),e&2&&m(" ",l(1,1,"settings.category.save")," ")}function ae(e,i){e&1&&(s(0),d(1,"translate")),e&2&&m(" ",l(1,1,"settings.category.no-changes")," ")}function ce(e,i){if(e&1){let t=F();a(0,"lg-button",6),v("click",function(){x(t);let u=g();return b(u.editCategory())}),y(1,ne,2,3)(2,ae,2,3),c()}if(e&2){let t=g();r("disabled",!t.form.dirty),o(),_(t.form.dirty?1:2)}}function pe(e,i){e&1&&(s(0),d(1,"translate")),e&2&&m(" ",l(1,1,"settings.category.add")," ")}function se(e,i){e&1&&(s(0),d(1,"translate")),e&2&&m(" ",l(1,1,"settings.category.enter-name")," ")}function me(e,i){if(e&1){let t=F();a(0,"lg-button",6),v("click",function(){x(t);let u=g();return b(u.addCategory())}),y(1,pe,2,3)(2,se,2,3),c()}if(e&2){let t=g();r("disabled",!t.form.dirty),o(),_(t.form.dirty?1:2)}}var h=class e{constructor(i,t,n,u){this._categoryRepository=i;this._selectResourcesService=t;this._router=n;this._notificationsService=u}form=new j({name:new O("",P.required)});category=f(void 0);uuid=I("");uuidEffect=S(()=>{if(!this.uuid()){this.category.set(N.empty());return}this._categoryRepository.getOne(this.uuid()).then(i=>{this.form.reset(T(i)),this.category.set(i),this.form.markAsPristine()})});ngOnInit(){this.form.valueChanges.subscribe(i=>{this.category()?.update(D(i))})}addCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.addCategory(this.category()).then(()=>{this.form.reset({name:""}),this._notificationsService.success("settings.category.added"),this.form.markAsPristine()})}editCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.editCategory(this.uuid(),this.category()).then(()=>{this._notificationsService.success("settings.category.edited"),this.form.markAsPristine()})}onEnter(){this.uuid()?this.editCategory():this.addCategory()}static \u0275fac=function(t){return new(t||e)(p(k),p(J),p(E),p(H))};static \u0275cmp=C({type:e,selectors:[["lg-add-category-recipe-form"]],inputs:{uuid:[1,"uuid"]},decls:9,vars:10,consts:[[3,"formGroup"],[3,"bottom","mobileMode"],["lgExpand","",3,"label"],["formControlName","name",3,"onEnter","placeholder"],["lgNoWrap",""],[3,"disabled"],[3,"click","disabled"]],template:function(t,n){t&1&&(a(0,"form",0)(1,"lg-flex-row",1)(2,"lg-control",2),d(3,"translate"),a(4,"lg-input",3),d(5,"translate"),v("onEnter",function(){return n.onEnter()}),c()(),a(6,"div",4),y(7,ce,3,2,"lg-button",5)(8,me,3,2,"lg-button",5),c()()()),t&2&&(r("formGroup",n.form),o(),r("bottom",!0)("mobileMode",!0),o(),r("label",l(3,6,"settings.category.name")),o(2),r("placeholder",l(5,8,"settings.category.placeholder")),o(3),_(n.uuid()?7:8))},dependencies:[z,G,B,M,W,q,Z,$,X,R,Y,ee,V],encapsulation:2})};var te=class e{constructor(i){this._aRoute=i}uuid=f("");ngOnInit(){this._aRoute.params.subscribe(i=>{this.uuid.set(i.uuid)})}static \u0275fac=function(t){return new(t||e)(p(w))};static \u0275cmp=C({type:e,selectors:[["lg-add-category-recipe"]],decls:7,vars:3,consts:[[3,"center"],[3,"uuid"]],template:function(t,n){t&1&&(a(0,"lg-fade-in")(1,"lg-container")(2,"lg-flex-row",0)(3,"lg-title"),s(4),c()(),a(5,"lg-card"),A(6,"lg-add-category-recipe-form",1),c()()()),t&2&&(o(2),r("center",!0),o(2),m("",n.uuid()?"Edit":"Add"," recipe category"),o(2),r("uuid",n.uuid()))},dependencies:[U,K,R,Q,h,L],encapsulation:2})};export{te as AddCategoryRecipeComponent};
