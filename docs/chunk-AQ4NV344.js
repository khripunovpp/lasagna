import{b as m}from"./chunk-KZEI6RKT.js";import{M as s,P as n,f as l,k as d}from"./chunk-7BPNVVWP.js";var g={products:{name:"products",loaderConfig:{name:"indexDb",storeName:"productsStore"}},categories:{name:"categories",loaderConfig:{name:"indexDb",storeName:"categoryStore"}},recipes:{name:"recipes",loaderConfig:{name:"indexDb",storeName:"recipesStore"}}};var c=class t{constructor(e){this._indexDb=e}load(e){return this._indexDb.getAll(e)}static \u0275fac=function(r){return new(r||t)(n(m))};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};var u=class t{constructor(e){this._indexDbSelectLoaderService=e}_registry=new Map;_registry$=new d(new Map);register(e){if(this._registry.has(e))return;let r=g[e];if(!r)throw new Error(`SelectResource ${e} not found`);this._registry.set(r.name,{name:r.name,list:[],lists:{},loader:{load:()=>this._indexDbSelectLoaderService.load(r.loaderConfig?.storeName)}})}get(e){return this._registry.get(e)}load(e){let r=e||Array.from(this._registry.keys());return Promise.all(r.map(i=>l(this,null,function*(){let o=this.get(i),a=yield o.loader.load(o.name);Array.isArray(a)?o.list=a:o.lists=a}))).then(()=>r.reduce((i,o)=>(i[o]=this.get(o),i),{})).then(()=>{console.log("SelectResourcesService loaded",this._registry),this._registry$.next(this._registry)})}subscribe(e){return this._registry$.subscribe(e)}static \u0275fac=function(r){return new(r||t)(n(c,8))};static \u0275prov=s({token:t,factory:t.\u0275fac})};export{c as a,u as b};
