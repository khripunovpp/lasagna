import{a as Ie,b as Oe}from"./chunk-Z7EECURK.js";import{a as N}from"./chunk-VIJEPYVH.js";import{a as Me}from"./chunk-ERWTPTKN.js";import{a as Fe}from"./chunk-7FCO3ACG.js";import{b as De}from"./chunk-CEEQQY3I.js";import"./chunk-E2BQUR23.js";import{a as xe}from"./chunk-BO7SREKA.js";import"./chunk-RKFCCI7E.js";import"./chunk-KPGIGGUF.js";import{d as G}from"./chunk-NQH67WTM.js";import{i as be,j as we,l as Re,n as Ae,o as Se,q as _e,s as Ee,t as ke,u as Pe,v as Te}from"./chunk-2WRE22FH.js";import{$ as A,Bc as ve,Ca as te,Cb as ae,Db as pe,Eb as p,Ec as ye,Fb as l,G as f,Ga as ne,Gb as m,H,Ia as T,Kb as le,Nb as ce,Nc as Ce,O as g,Ob as de,W as R,Xa as v,Xb as ue,Yb as me,Z as q,_a as re,_b as D,a as $,ac as he,bb as oe,ca as x,da as z,ea as a,f as u,fa as I,fb as y,fc as fe,gc as d,j as P,ka as X,la as J,m as M,na as O,ob as F,qb as Z,ra as K,rc as ge,sa as ee,sb as S,x as w,yb as ie,zb as se}from"./chunk-7IKCFNVS.js";var Q=(n,t)=>u(void 0,null,function*(){let e=n.paramMap.get("uuid");return a(N)?.getOne(e)});var Ne=(n,t)=>u(void 0,null,function*(){let e=n.paramMap.get("uuid");return a(Ie)?.calculateRecipe(e)});var Le=(n,t)=>u(void 0,null,function*(){let e=n.paramMap.get("uuid"),r=a(N),o=a(Oe),i=(yield r.getOne(e))?.taxTemplateName;return i?o.getTemplateByName("tax",i):null});var je=[{path:"",children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadComponent:()=>import("./chunk-QY4LN5KJ.js").then(n=>n.ApplicationComponent)},{path:"recipes",children:[{path:"",loadComponent:()=>import("./chunk-3MD5KQIS.js").then(n=>n.RecipesListComponent)},{path:"add",loadComponent:()=>import("./chunk-4U3BUOZU.js").then(n=>n.AddRecipeComponent)},{path:"edit/:uuid",loadComponent:()=>import("./chunk-4U3BUOZU.js").then(n=>n.AddRecipeComponent),resolve:{recipe:Q}},{path:"calculate/:uuid",loadComponent:()=>import("./chunk-DBWLYU5X.js").then(n=>n.CalculateRecipeComponent),resolve:{result:Ne,template:Le}}]},{path:"products",children:[{path:"",loadComponent:()=>import("./chunk-4HVEOL4H.js").then(n=>n.ProductListComponent)},{path:"add",loadComponent:()=>import("./chunk-DEUMNG2F.js").then(n=>n.AddProductComponent)},{path:"edit/:uuid",loadComponent:()=>import("./chunk-DEUMNG2F.js").then(n=>n.AddProductComponent),resolve:{product:Q}}]},{path:"settings",children:[{path:"",loadComponent:()=>import("./chunk-R6NUNRFO.js").then(n=>n.SettingsComponent)},{path:"categories",children:[{path:"products",children:[{path:"",loadComponent:()=>import("./chunk-SDHVIZLN.js").then(n=>n.CategoryListComponent)},{path:"add",loadComponent:()=>import("./chunk-PJ5UJAPQ.js").then(n=>n.AddCategoryComponent)},{path:"edit/:uuid",loadComponent:()=>import("./chunk-PJ5UJAPQ.js").then(n=>n.AddCategoryComponent)}]},{path:"recipes",children:[{path:"",loadComponent:()=>import("./chunk-S6VPZVBK.js").then(n=>n.CategoryRecipeListComponent)},{path:"add",loadComponent:()=>import("./chunk-XU63H625.js").then(n=>n.AddCategoryRecipeComponent)},{path:"edit/:uuid",loadComponent:()=>import("./chunk-XU63H625.js").then(n=>n.AddCategoryRecipeComponent)}]}]}]},{path:"widgets",loadComponent:()=>import("./chunk-BTC5H3D6.js").then(n=>n.WidgetsPageComponent)}]}];var _="Service workers are disabled or not supported by this browser",C=class{serviceWorker;worker;registration;events;constructor(t,e){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=new P(r=>r.error(new Error(_)));else{let r=null,o=new M;this.worker=new P(h=>(r!==null&&h.next(r),o.subscribe(k=>h.next(k))));let s=()=>{let{controller:h}=t;h!==null&&(r=h,o.next(r))};t.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(R(()=>t.getRegistration()));let i=new M;this.events=i.asObservable();let c=h=>{let{data:k}=h;k?.type&&i.next(k)};t.addEventListener("message",c),e?.get(Z,null,{optional:!0})?.onDestroy(()=>{t.removeEventListener("controllerchange",s),t.removeEventListener("message",c)})}}postMessage(t,e){return new Promise(r=>{this.worker.pipe(g(1)).subscribe(o=>{o.postMessage($({action:t},e)),r()})})}postMessageWithOperation(t,e,r){let o=this.waitForOperationCompleted(r),s=this.postMessage(t,e);return Promise.all([s,o]).then(([,i])=>i)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let e;return typeof t=="string"?e=r=>r.type===t:e=r=>t.includes(r.type),this.events.pipe(H(e))}nextEventOfType(t){return this.eventsOfType(t).pipe(g(1))}waitForOperationCompleted(t){return new Promise((e,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(H(o=>o.nonce===t),g(1),w(o=>{if(o.result!==void 0)return o.result;throw new Error(o.error)})).subscribe({next:e,error:r})})}get isEnabled(){return!!this.serviceWorker}},Ke=(()=>{class n{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new M;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=f,this.notificationClicks=f,this.subscription=f;return}this.messages=this.sw.eventsOfType("PUSH").pipe(w(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(w(o=>o.data)),this.pushManager=this.sw.registration.pipe(w(o=>o.pushManager));let r=this.pushManager.pipe(R(o=>o.getSubscription()));this.subscription=new P(o=>{let s=r.subscribe(o),i=this.subscriptionChanges.subscribe(o);return()=>{s.unsubscribe(),i.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(_));let r={userVisibleOnly:!0},o=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(o.length));for(let i=0;i<o.length;i++)s[i]=o.charCodeAt(i);return r.applicationServerKey=s,new Promise((i,c)=>{this.pushManager.pipe(R(b=>b.subscribe(r)),g(1)).subscribe({next:b=>{this.subscriptionChanges.next(b),i(b)},error:c})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(_));let e=r=>{if(r===null)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return new Promise((r,o)=>{this.subscription.pipe(g(1),R(e)).subscribe({next:r,error:o})})}decodeBase64(e){return atob(e)}static \u0275fac=function(r){return new(r||n)(z(C))};static \u0275prov=A({token:n,factory:n.\u0275fac})}return n})(),Ze=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=f,this.unrecoverable=f;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(_));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(_));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(r){return new(r||n)(z(C))};static \u0275prov=A({token:n,factory:n.\u0275fac})}return n})();var Be=new x("");function Ge(){let n=a(E);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let t=a(Be),e=a(T),r=a(Z);e.runOutsideAngular(()=>{let o=navigator.serviceWorker,s=()=>o.controller?.postMessage({action:"INITIALIZE"});o.addEventListener("controllerchange",s),r.onDestroy(()=>{o.removeEventListener("controllerchange",s)})}),e.runOutsideAngular(()=>{let o,{registrationStrategy:s}=n;if(typeof s=="function")o=new Promise(i=>s().subscribe(()=>i()));else{let[i,...c]=(s||"registerWhenStable:30000").split(":");switch(i){case"registerImmediately":o=Promise.resolve();break;case"registerWithDelay":o=We(+c[0]||0);break;case"registerWhenStable":o=Promise.race([r.whenStable(),We(+c[0])]);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}o.then(()=>navigator.serviceWorker.register(t,{scope:n.scope}).catch(i=>console.error("Service worker registration failed with:",i)))})}function We(n){return new Promise(t=>setTimeout(t,n))}function Qe(n,t){return new C(n.enabled!==!1?navigator.serviceWorker:void 0,t)}var E=class{enabled;scope;registrationStrategy};function Ue(n,t={}){return I([Ke,Ze,{provide:Be,useValue:n},{provide:E,useValue:t},{provide:C,useFactory:Qe,deps:[E,O]},F(Ge)])}var Ye="@",$e=(()=>{class n{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=a(O);loadingSchedulerFn=a(qe,{optional:!0});_engine;constructor(e,r,o,s,i){this.doc=e,this.delegate=r,this.zone=o,this.animationType=s,this.moduleImpl=i}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-I4CC4PEO.js").then(o=>o),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(e):r=e(),r.catch(o=>{throw new q(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:s})=>{this._engine=o(this.animationType,this.doc);let i=new s(this.delegate,this._engine,this.zone);return this.delegate=i,i})}createRenderer(e,r){let o=this.delegate.createRenderer(e,r);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let s=new Y(o);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(i=>{let c=i.createRenderer(e,r);s.use(c),this.scheduler??=this.injector.get(ee,null,{optional:!0}),this.scheduler?.notify(10)}).catch(i=>{s.use(o)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(r){oe()};static \u0275prov=A({token:n,factory:n.\u0275fac})}return n})(),Y=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,r,o){this.delegate.insertBefore(t,e,r,o)}removeChild(t,e,r){this.delegate.removeChild(t,e,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,o){this.delegate.setAttribute(t,e,r,o)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,o){this.delegate.setStyle(t,e,r,o)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){this.shouldReplay(e)&&this.replay.push(o=>o.setProperty(t,e,r)),this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r,o){return this.shouldReplay(e)&&this.replay.push(s=>s.listen(t,e,r,o)),this.delegate.listen(t,e,r,o)}shouldReplay(t){return this.replay!==null&&t.startsWith(Ye)}},qe=new x("");function Ve(n="animations"){return ne("NgAsyncAnimations"),I([{provide:re,useFactory:(t,e,r)=>new $e(t,e,r,n),deps:[Ce,be,T]},{provide:te,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var He={providers:[ge({eventCoalescing:!0}),Pe(je),Se(Ae()),De(),Re(),Ve(),F(()=>{let n=a(xe),t=a(Me);return Promise.all([n.preloadCategories(),t.preloadCategories()])}),Ue("ngsw-worker.js",{enabled:!ye(),registrationStrategy:"registerWhenStable:30000"})]};function Xe(n,t){if(n&1){let e=le();p(0,"button",0),ce("click",function(){X(e);let o=de();return J(o.installPWA())}),D(1,"\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C PWA"),l()}}var j=class n{deferredPrompt=null;showButton=!1;ngOnInit(){window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.deferredPrompt=t,this.showButton=!0})}installPWA(){return u(this,null,function*(){if(!this.deferredPrompt)return;this.deferredPrompt.prompt();let{outcome:t}=yield this.deferredPrompt.userChoice;t==="accepted"?(this.showButton=!1,console.log("PWA \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0430!")):console.log("\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u043E\u0442\u043A\u0430\u0437\u0430\u043B\u0441\u044F \u043E\u0442 \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438"),this.deferredPrompt=null,this.showButton=!1})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["lg-pwa-install"]],decls:1,vars:1,consts:[[3,"click"]],template:function(e,r){e&1&&ie(0,Xe,2,0,"button"),e&2&&se(r.showButton?0:-1)},styles:["lg-pwa-install[_ngcontent-%COMP%]{display:flex}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;cursor:pointer;width:100%}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})};var W=()=>({exact:!1}),B=()=>["route-active"],Je=(n,t)=>t.label;function et(n,t){if(n&1&&(p(0,"a",4),D(1),l()),n&2){let e=t.$implicit;S("routerLink",e.link)("routerLinkActive",d(4,B))("routerLinkActiveOptions",d(5,W)),v(),he(" ",e.label," ")}}var U=class n{constructor(){}items=K([{label:"Recipes",link:"/recipes"},{label:"Products",link:"/products"}]);activeIndex=K(0);links=ve(G);setActive(t){this.activeIndex.set(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["lg-header"]],viewQuery:function(e,r){e&1&&ue(r.links,G,5),e&2&&me()},decls:10,vars:15,consts:[[1,"lg-header"],[1,"lg-header__icon",3,"routerLinkActiveOptions","routerLinkActive","routerLink"],["aria-hidden","false","fontIcon","home"],[1,"lg-header__inner"],[1,"lg-header__link",3,"routerLink","routerLinkActive","routerLinkActiveOptions"],["aria-hidden","false","fontIcon","settings"],["aria-hidden","false","fontIcon","widgets"]],template:function(e,r){e&1&&(p(0,"header",0)(1,"a",1),m(2,"mat-icon",2),l(),p(3,"div",3),ae(4,et,2,6,"a",4,Je),l(),p(6,"a",1),m(7,"mat-icon",5),l(),p(8,"a",1),m(9,"mat-icon",6),l()()),e&2&&(v(),S("routerLinkActiveOptions",d(9,W))("routerLinkActive",d(10,B))("routerLink","/home"),v(3),pe(r.items()),v(2),S("routerLinkActiveOptions",d(11,W))("routerLinkActive",d(12,B))("routerLink","/settings"),v(2),S("routerLinkActiveOptions",d(13,W))("routerLinkActive",d(14,B))("routerLink","/widgets"))},dependencies:[Ee,ke,Fe],styles:[".lg-header[_ngcontent-%COMP%]{position:fixed;z-index:3;height:var(--header-height);left:0;right:0;top:12px;display:flex;align-items:center;justify-content:center;gap:16px;overflow-x:auto;white-space:nowrap;padding:0 16px}@media (max-width: 768px){.lg-header[_ngcontent-%COMP%]{justify-content:normal;scroll-snap-type:both mandatory;overscroll-behavior-x:contain;scrollbar-width:none}}.lg-header__inner[_ngcontent-%COMP%]{display:flex;border-radius:35px;padding:8px;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);background-color:#ffffffb3}.lg-header__link[_ngcontent-%COMP%]{font-size:1rem;font-family:inherit;text-decoration:none;padding:8px 24px;border-radius:32px;cursor:pointer;display:flex;align-items:center;justify-content:center;scroll-snap-align:center}.lg-header__link.route-active[_ngcontent-%COMP%]{background-color:#a26dc7;color:#fff}.lg-header__icon[_ngcontent-%COMP%]{border-radius:50%;display:flex;align-items:center;justify-content:center;padding:8px;cursor:pointer;scroll-snap-align:center;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);background-color:#ffffffb3}.lg-header__icon.route-active[_ngcontent-%COMP%]{background-color:#a26dc7;color:#fff}"]})};var V=class n{title="lasagna";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=y({type:n,selectors:[["app-root"]],features:[fe([])],decls:6,vars:0,consts:[[1,"app"],[1,"app-content"]],template:function(e,r){e&1&&(m(0,"lg-pwa-install"),p(1,"main",0)(2,"lg-fade-in"),m(3,"lg-header"),l(),p(4,"div",1),m(5,"router-outlet"),l()())},dependencies:[_e,j,U,Te],styles:[".app-content[_ngcontent-%COMP%]{padding-top:calc(var(--header-height) + 44px);padding-bottom:32px}"]})};we(V,He).catch(n=>console.error(n));
