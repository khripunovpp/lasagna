{
  "version": 3,
  "sources": ["src/app/shared/service/analytics.service.ts", "src/app/shared/view/ui/unit-switcher.component.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\n\nexport interface AnalyticsEvent {\n  event_category: string;\n  event_label?: string;\n  value?: number;\n  [key: string]: any;\n}\n\nexport interface AnalyticsGoal {\n  goal_id: string;\n  goal_name: string;\n  event_category: string;\n  event_label?: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnalyticsService {\n  private readonly GOALS = {\n    RECIPE_CREATED: {\n      goal_id: 'recipe_created',\n      goal_name: 'Recipe Created',\n      event_category: 'recipe',\n      event_label: 'recipe_creation'\n    },\n    PRODUCT_CREATED: {\n      goal_id: 'product_created', \n      goal_name: 'Product Created',\n      event_category: 'product',\n      event_label: 'product_creation'\n    },\n    RECIPE_CALCULATED: {\n      goal_id: 'recipe_calculated',\n      goal_name: 'Recipe Calculated',\n      event_category: 'recipe',\n      event_label: 'recipe_calculation'\n    },\n    INVOICE_CREATED: {\n      goal_id: 'invoice_created',\n      goal_name: 'Invoice Created', \n      event_category: 'invoice',\n      event_label: 'invoice_creation'\n    }\n  };\n\n  constructor() {}\n\n  /**\n   * Track a custom event\n   */\n  trackEvent(eventName: string, parameters: AnalyticsEvent): void {\n    if (typeof window !== 'undefined' && window.gtag) {\n      // Check if analytics storage is granted\n      const consent = localStorage.getItem('cookie-consent');\n      if (consent === 'all' || consent === 'analytics') {\n        window.gtag('event', eventName, parameters);\n        console.log('Analytics event tracked:', eventName, parameters);\n      } else {\n        console.warn('Analytics consent not granted for event:', eventName);\n      }\n    } else {\n      console.warn('Google Analytics not available for event:', eventName);\n    }\n  }\n\n  /**\n   * Track recipe creation\n   */\n  trackRecipeCreated(recipeName?: string, additionalData?: any): void {\n    const eventData: AnalyticsEvent = {\n      event_category: this.GOALS.RECIPE_CREATED.event_category,\n      event_label: this.GOALS.RECIPE_CREATED.event_label,\n      value: 1\n    };\n\n    if (recipeName) {\n      eventData['recipe_name'] = recipeName;\n    }\n\n    if (additionalData) {\n      Object.assign(eventData, additionalData);\n    }\n\n    this.trackEvent('recipe_created', eventData);\n  }\n\n  /**\n   * Track product creation\n   */\n  trackProductCreated(productName?: string, additionalData?: any): void {\n    const eventData: AnalyticsEvent = {\n      event_category: this.GOALS.PRODUCT_CREATED.event_category,\n      event_label: this.GOALS.PRODUCT_CREATED.event_label,\n      value: 1\n    };\n\n    if (productName) {\n      eventData['product_name'] = productName;\n    }\n\n    if (additionalData) {\n      Object.assign(eventData, additionalData);\n    }\n\n    this.trackEvent('product_created', eventData);\n  }\n\n  /**\n   * Track recipe calculation\n   */\n  trackRecipeCalculated(recipeName?: string, servings?: number, additionalData?: any): void {\n    const eventData: AnalyticsEvent = {\n      event_category: this.GOALS.RECIPE_CALCULATED.event_category,\n      event_label: this.GOALS.RECIPE_CALCULATED.event_label,\n      value: 1\n    };\n\n    if (recipeName) {\n      eventData['recipe_name'] = recipeName;\n    }\n\n    if (servings) {\n      eventData['servings'] = servings;\n    }\n\n    if (additionalData) {\n      Object.assign(eventData, additionalData);\n    }\n\n    this.trackEvent('recipe_calculated', eventData);\n  }\n\n  /**\n   * Track invoice creation\n   */\n  trackInvoiceCreated(invoiceNumber?: string, totalAmount?: number, additionalData?: any): void {\n    const eventData: AnalyticsEvent = {\n      event_category: this.GOALS.INVOICE_CREATED.event_category,\n      event_label: this.GOALS.INVOICE_CREATED.event_label,\n      value: 1\n    };\n\n    if (invoiceNumber) {\n      eventData['invoice_number'] = invoiceNumber;\n    }\n\n    if (totalAmount) {\n      eventData['total_amount'] = totalAmount;\n    }\n\n    if (additionalData) {\n      Object.assign(eventData, additionalData);\n    }\n\n    this.trackEvent('invoice_created', eventData);\n  }\n\n  /**\n   * Track page view\n   */\n  trackPageView(pageTitle: string, pagePath?: string): void {\n    if (typeof window !== 'undefined' && window.gtag) {\n      window.gtag('config', 'G-GWN769JKRP', {\n        page_title: pageTitle,\n        page_path: pagePath || window.location.pathname\n      });\n      console.log('Page view tracked:', pageTitle);\n    }\n  }\n\n  /**\n   * Track user engagement\n   */\n  trackUserEngagement(action: string, category: string, label?: string, value?: number): void {\n    this.trackEvent('user_engagement', {\n      event_category: category,\n      event_label: label,\n      action: action,\n      value: value\n    });\n  }\n\n  /**\n   * Track error events\n   */\n  trackError(errorType: string, errorMessage: string, additionalData?: any): void {\n    const eventData: AnalyticsEvent = {\n      event_category: 'error',\n      event_label: errorType,\n      error_message: errorMessage\n    };\n\n    if (additionalData) {\n      Object.assign(eventData, additionalData);\n    }\n\n    this.trackEvent('exception', eventData);\n  }\n\n  /**\n   * Get available goals\n   */\n  getGoals(): Record<string, AnalyticsGoal> {\n    return this.GOALS;\n  }\n\n  /**\n   * Check if analytics is available and consented\n   */\n  isAnalyticsAvailable(): boolean {\n    if (typeof window === 'undefined') return false;\n    \n    const consent = localStorage.getItem('cookie-consent');\n    const hasConsent = consent === 'all' || consent === 'analytics';\n    const hasGtag = typeof window.gtag === 'function';\n    \n    return hasConsent && hasGtag;\n  }\n\n  /**\n   * Get analytics status for debugging\n   */\n  getAnalyticsStatus(): { available: boolean; consent: string | null; gtag: boolean } {\n    if (typeof window === 'undefined') {\n      return { available: false, consent: null, gtag: false };\n    }\n    \n    const consent = localStorage.getItem('cookie-consent');\n    const hasGtag = typeof window.gtag === 'function';\n    \n    return {\n      available: (consent === 'all' || consent === 'analytics') && hasGtag,\n      consent,\n      gtag: hasGtag\n    };\n  }\n}\n\n// Extend Window interface for TypeScript\ndeclare global {\n  interface Window {\n    gtag: (...args: any[]) => void;\n  }\n} ", "import {Component, effect, forwardRef, input, Input, signal, ViewEncapsulation} from '@angular/core';\nimport {ButtonSizes, ButtonStyle} from './layout/button.component';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\n\nexport interface UnitGroupItem {\n  label: string\n  value: string\n  onClick?: () => void\n  style?: ButtonStyle\n  size?: ButtonSizes\n}\n\n@Component({\n  selector: 'lg-unit-switcher',\n  standalone: true,\n  template: `\n      <div class=\"unit-switcher\"\n           [class.disable]=\"disable\">\n          @for (item of items();track item.value;let last = $last, first = $first, index = $index) {\n              <button (click)=\"onClickItem(item,index)\"\n                      [style]=\"item.style || 'default'\"\n                      [class.active]=\"activeIndex() == index\"\n                      class=\"unit-switcher__item\"\n                      [class.unit-switcher__item--active]=\"activeIndex() == index\">\n                  {{ item.label }}\n              </button>@if (!last) {\n                  <span class=\"unit-switcher__item-separator\">/</span>\n              }\n          }\n      </div>\n  `,\n  styles: [\n    `\n\n      .unit-switcher {\n        --unit-switcher-gap: 2px;\n        display: flex;\n        gap: var(--unit-switcher-gap);\n        align-items: center;\n        justify-content: center;\n      }\n\n      .unit-switcher.disable {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n\n      .unit-switcher__item {\n        display: flex;\n        gap: var(--unit-switcher-gap);\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        padding: var(--unit-switcher-gap);\n        appearance: none;\n        border: none;\n        background: none;\n        color: inherit;\n        font-family: inherit;\n        font-size: 0.8rem;\n\n        &.active {\n          color: var(--active-color);\n\n          .unit-switcher__item-separator {\n            color: var(--text-color);\n          }\n        }\n      }\n\n    `\n  ],\n  imports: [],\n  encapsulation: ViewEncapsulation.None,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => UnitSwitcherComponent),\n      multi: true\n    }\n  ]\n})\nexport class UnitSwitcherComponent implements ControlValueAccessor {\n  @Input() flat = false;\n  @Input() disable = false;\n  items = input<UnitGroupItem[]>([\n    {\n      label: 'gr.',\n      value: 'gram',\n      style: 'secondary',\n    },\n    {\n      label: 'pc.',\n      value: 'piece',\n      style: 'secondary',\n    },\n  ]);\n  activeIndex = signal<number>(0);\n  value = signal<string>('');\n  effect = effect(() => {\n    const activeIndex = this.items()?.findIndex(item => item.value === this.value()) ?? -1;\n    this.activeIndex.set(activeIndex === -1 ? 0 : activeIndex);\n  });\n\n  onClickItem(item: UnitGroupItem, index: number) {\n    this.activeIndex.set(index);\n    this.writeValue(item.value);\n    item.onClick?.();\n  }\n\n  onChange: (value: string) => void = () => {\n  };\n  onTouched: () => void = () => {\n  };\n\n  writeValue(value: string): void {\n    this._change(value);\n  }\n\n  registerOnChange(fn: any) {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any) {\n    this.onTouched = fn;\n  }\n\n  onChangeInput(\n    event: Event\n  ) {\n    this._change((event.target as HTMLInputElement).value);\n  }\n\n  private _change(value: string) {\n    this.value.set(value);\n    this.onChange(this.value());\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
