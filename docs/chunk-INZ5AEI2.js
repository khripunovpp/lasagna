import{a as Oe}from"./chunk-GYI5N6TZ.js";import{b as Q}from"./chunk-GGFJO4G3.js";import{a as Be}from"./chunk-G7WHOHFE.js";import"./chunk-3IFB2OYN.js";import{a as Re}from"./chunk-WXZWFVNE.js";import{a as Ee}from"./chunk-JNREQVWR.js";import{a as Ve}from"./chunk-64JY2A5S.js";import{a as De}from"./chunk-JXHZXNSN.js";import{a as Ie}from"./chunk-BWGYIJEG.js";import{a as k}from"./chunk-C737TW6Q.js";import{a as H}from"./chunk-7P2DAV6F.js";import{a as Me,b as S}from"./chunk-CBPIWMMR.js";import{a as Le}from"./chunk-4EGTEAFI.js";import{a as j}from"./chunk-72REWZLE.js";import"./chunk-SNDQO5FA.js";import{j as P,o as we}from"./chunk-Y5KAKHAZ.js";import"./chunk-33U52G7J.js";import"./chunk-5KSZNU56.js";import"./chunk-KAGJE7I3.js";import"./chunk-XVI445TZ.js";import{a as ke,c as Se,f as z,j as F,r as x,u as Te}from"./chunk-XFMMXZ22.js";import"./chunk-LOPFG4AH.js";import{r as he,s as ye,t as xe}from"./chunk-D66Q4FT5.js";import"./chunk-652DFWNF.js";import{f as Ce,h as ve}from"./chunk-JDBIU23B.js";import{$ as w,$b as u,Ab as O,Bb as N,Cb as r,Db as a,Eb as y,Ec as Y,Hb as ie,Ib as A,Lb as f,Mb as g,Nb as oe,Ob as ae,Pb as E,Ra as ee,Rb as re,Tb as le,Ub as se,V as X,Va as o,Xa as te,Zb as p,_a as M,_b as ce,ac as pe,bc as me,cc as de,db as _,dc as ge,ec as ue,fb as ne,ga as B,ha as D,ia as Z,ib as h,kc as m,lc as d,na as R,pb as L,qb as c,sb as V,tb as W,uc as fe,vc as _e,wb as b,xb as C,yc as be,zc as v}from"./chunk-CG2HRCOU.js";import"./chunk-DELOOZDJ.js";import{f as q}from"./chunk-2WH2EVR6.js";var Pe=["*"];function ze(n,e){if(n&1&&y(0,"span",4),n&2){let t=g(2);c("innerHTML",t.customMark(),ee)}}function Fe(n,e){n&1&&(Z(),r(0,"svg",5),y(1,"path",6),a())}function He(n,e){if(n&1&&b(0,ze,1,1,"span",4)(1,Fe,2,0,":svg:svg",5),n&2){let t=g();C(t.customMark()?0:1)}}var $=class n{constructor(){}modelValue=!1;customMark=v("");name=v("");value=v("");size=v("default");markOnHover=v(!1);radio=v(!1);noMark=v(!1);onCheckboxChanged=be();onKeydown(e){e.preventDefault(),this.onChangeCheckbox(!this.modelValue)}onChange=()=>{};onTouched=()=>{};writeValue(e){this._change(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onChangeCheckbox(e){this._change(e)}_change(e){typeof e=="boolean"?this.modelValue=e:this.modelValue=["true","false"].includes(e)?e==="true":e,this.onChange(this.modelValue),this.onCheckboxChanged.emit(this.modelValue)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_({type:n,selectors:[["lg-radio"]],hostBindings:function(t,i){t&1&&f("keydown.enter",function(s){return i.onKeydown(s)})("keydown.space",function(s){return i.onKeydown(s)})},inputs:{customMark:[1,"customMark"],name:[1,"name"],value:[1,"value"],size:[1,"size"],markOnHover:[1,"markOnHover"],radio:[1,"radio"],noMark:[1,"noMark"]},outputs:{onCheckboxChanged:"onCheckboxChanged"},features:[ue([{provide:ke,useExisting:X(()=>n),multi:!0}])],ngContentSelectors:Pe,decls:6,vars:11,consts:[["tabindex","0",1,"lg-radio",3,"ngClass"],[1,"checkbox",3,"ngModelChange","checked","ngModel","type"],[1,"lg-radio__mark"],[1,"lg-radio__mark-inner"],[3,"innerHTML"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","currentColor","d","M9.5 16.5l-4.25-4.25 1.4-1.4L9.5 13.7l7.35-7.35 1.4 1.4z"]],template:function(t,i){t&1&&(oe(),r(0,"label",0)(1,"input",1),f("ngModelChange",function(s){return i.onChangeCheckbox(s)}),a(),r(2,"span",2)(3,"span",3),b(4,He,2,1),a()(),ae(5),a()),t&2&&(c("ngClass",i.size()),L("for",i.name()+"-"+i.value()),o(),c("checked",i.modelValue)("ngModel",i.modelValue)("type",i.radio()?"radio":"checkbox"),L("id",i.name()+"-"+i.value())("name",i.name())("value",i.radio()?i.value():i.modelValue),o(),V("lg-radio__hoverOnly",i.markOnHover()),o(2),C(i.noMark()?-1:4))},dependencies:[x,Se,z,F,Ce],styles:[`.lg-radio{display:flex;border-radius:12px;gap:8px}.lg-radio:focus-within{outline-color:var(--active-color)}.lg-radio__mark{display:flex;align-items:center;justify-content:center;width:51px;height:51px;border-radius:12px;background-color:var(--control-bg);opacity:.2;cursor:pointer;transition:all .2s ease-in-out;border:1px solid transparent}.lg-radio__hoverOnly{background-color:transparent;border-color:var(--text-color)}.lg-radio__hoverOnly .lg-radio__mark-inner{opacity:0;transition:all .2s ease-in-out}@media (hover: hover){.lg-radio__mark:hover,.lg-radio__hoverOnly:hover .lg-radio__mark-inner{opacity:1}}.checkbox{display:none}.checkbox:checked+.lg-radio__mark{background-color:var(--control-bg-selected);opacity:1;font-weight:700}.checkbox:checked+.lg-radio__hoverOnly{border-color:var(--control-bg-selected)}.checkbox:checked+.lg-radio__hoverOnly .lg-radio__mark-inner{opacity:1}.lg-radio.small .lg-radio__mark{width:16px;height:16px;border-radius:6px}
`],encapsulation:2})};var je=(n,e)=>e.code;function Qe(n,e){if(n&1){let t=A();r(0,"lg-gap-row",4)(1,"lg-radio",7),f("change",function(){let l=B(t).$implicit,s=g();return D(s.changeLang(l.code))}),p(2),a()()}if(n&2){let t=e.$implicit,i=e.$index,l=g();c("center",!0)("mobileMode",!0)("size","small"),o(),c("markOnHover",!0)("radio",!0)("name","lang")("value",t.code)("ngModel",l.selectedLangModel()[i])("size","small")("noMark",!0),o(),u(" ",t.name," ")}}var U=class n{constructor(e,t){this._settingsService=e;this._userCurrency=t;this.selectedLang=this._settingsService.lang,this.selectedLangModel.update(i=>this._settingsService.languages.map(l=>this.selectedLang()===l)),this.currency.set(t)}currency=Y("EUR");langsMap={en:"English",pt:"Portugu\xEAs",ru:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"};selectedLang;selectedLangModel=Y([]);languages=fe(()=>this._settingsService.languages.map(e=>({code:e,name:this.langsMap[e]||e})));changeLang(e){this._settingsService.changeLang(e)}changeCurrency(e){this._settingsService.changeCurrency(String(e).toUpperCase())}static \u0275fac=function(t){return new(t||n)(M(Oe),M(Ve))};static \u0275cmp=_({type:n,selectors:[["lg-language-settings"]],inputs:{currency:[1,"currency"],selectedLangModel:[1,"selectedLangModel"]},outputs:{currency:"currencyChange",selectedLangModel:"selectedLangModelChange"},decls:14,vars:5,consts:[["size","medium"],[3,"level"],[1,"language-settings"],[3,"size"],[3,"center","mobileMode","size"],["href","https://en.wikipedia.org/wiki/ISO_4217","target","_blank"],[3,"ngModelChange","ngModel"],[3,"change","markOnHover","radio","name","value","ngModel","size","noMark"]],template:function(t,i){t&1&&(r(0,"lg-gap-column",0)(1,"lg-title",1),p(2,"Language"),a(),r(3,"section",2)(4,"lg-gap-column",3)(5,"lg-gap-column",3),O(6,Qe,3,11,"lg-gap-row",4,je),a()()(),r(8,"lg-title",1),p(9," Currency (in "),r(10,"a",5),p(11,"ISO 4217"),a(),p(12," format) "),a(),r(13,"lg-input",6),ge("ngModelChange",function(s){return de(i.currency,s)||(i.currency=s),s}),f("ngModelChange",function(s){return i.changeCurrency(s)}),a()()),t&2&&(o(),c("level",6),o(3),c("size","medium"),o(),c("size","small"),o(),N(i.languages()),o(2),c("level",6),o(5),me("ngModel",i.currency))},dependencies:[S,k,x,z,F,$,Re,j],encapsulation:2})};function $e(n,e){if(n&1&&(p(0),m(1,"translate"),m(2,"timeAgo")),n&2){let t=g();pe(" ",d(1,2,"backup.last-label")," ",d(2,4,t.transferDataService.currenBackupDate)," ")}}var J=class n{constructor(){}downloadBackupParam=Q("download_backup");transferDataService=w(we);notificationsService=w(Te);ngAfterViewInit(){this.downloadBackupParam()&&this.onBackup()}onBackup(){return q(this,null,function*(){let e=this.notificationsService.loading("Creating backup");try{yield this.transferDataService.exportAll("json"),this.notificationsService.success("Backup created successfully"),localStorage.setItem("lastBackupDate",Date.now().toString())}catch(t){this.notificationsService.showJsonErrors([JSON.stringify(t)],"Backup failed"),console.error(t)}finally{e.close()}})}onRestore(e){return q(this,null,function*(){let t=this.notificationsService.loading("Restoring backup");try{yield this.transferDataService.restoreAllData(e),this.notificationsService.success("Restore completed successfully")}catch(i){this.notificationsService.showJsonErrors([JSON.stringify(i)],"Restore failed"),console.error(i)}finally{t.close()}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_({type:n,selectors:[["lg-backup-settings"]],decls:15,vars:18,consts:[[3,"center","mobileMode"],[3,"click"],[3,"filesSelected","accept"],[2,"--card-bg","#e78888"],[3,"position"],[1,"text-center","text-inverse"]],template:function(t,i){t&1&&(r(0,"lg-gap-column")(1,"lg-gap-row",0)(2,"lg-button",1),f("click",function(){return i.onBackup()}),p(3),m(4,"translate"),a(),b(5,$e,3,6),a(),r(6,"lg-upload",2),f("filesSelected",function(s){return i.onRestore(s)}),r(7,"lg-card",3)(8,"lg-gap-column",4)(9,"div",5),p(10),m(11,"translate"),a(),r(12,"lg-button"),p(13),m(14,"translate"),a()()()()()),t&2&&(o(),c("center",!0)("mobileMode",!0),o(),W("success"),o(),u(" ",d(4,12,"backup.make-btn")," "),o(2),C(i.transferDataService.currenBackupDate?5:-1),o(),c("accept",".json"),o(2),c("position","center"),o(2),u(" ",d(11,14,"backup.restore-informer")," "),o(2),W("danger"),o(),u(" ",d(14,16,"backup.restore-btn")," "))},dependencies:[H,S,k,x,Ee,Ie,Be,P],encapsulation:2})};var T=class n{constructor(e){this.templateRef=e}label;alias;static \u0275fac=function(t){return new(t||n)(M(te))};static \u0275dir=ne({type:n,selectors:[["ng-template","lgTab",""]],inputs:{label:"label",alias:"alias"}})};var Ge=(n,e)=>e.label;function Ue(n,e){if(n&1){let t=A();r(0,"button",4),f("click",function(){let l=B(t).$index,s=g();return D(s.selectTab(l))}),p(1),a()}if(n&2){let t=e.$implicit,i=e.$index,l=g();V("active",l.activated()[i]),L("aria-selected",l.activated()[i])("aria-controls","tab-"+i)("id","tab-"+i),o(),u(" ",t.label," ")}}function Je(n,e){n&1&&ie(0)}function Ke(n,e){if(n&1&&(r(0,"lg-gap-column",5),h(1,Je,1,0,"ng-container",6),a()),n&2){let t=g(2);c("size","small"),o(),c("ngTemplateOutlet",t.tabs()[t.selectedIndex()].templateRef)}}function qe(n,e){if(n&1&&b(0,Ke,2,2,"lg-gap-column",5),n&2){let t=g();C(t.activated()[t.selectedIndex()]?0:-1)}}var K=class n{tabTemplates;router=w(he);tabs=R([]);activated=R([]);selectedIndex=R(0);tabQuery=Q("tab");tabQueryEffect=_e(()=>{let e=this.tabQuery();if(e){let t=this.tabs().findIndex(i=>i.alias?.toLowerCase()?.includes(e.toString().toLowerCase()??""));t!==-1&&this.selectTab(t)}});ngAfterContentInit(){let e=this.tabTemplates.toArray();this.tabs.set(e),this.activated.set(e.map((t,i)=>i===0))}selectTab(e){this.selectedIndex.set(e),this.activated.update(t=>t.map((i,l)=>l===e)),this.router.navigate([],{queryParams:{tab:this.tabs()[e].alias},queryParamsHandling:"merge"})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_({type:n,selectors:[["lg-tabs"]],contentQueries:function(t,i,l){if(t&1&&re(l,T,4),t&2){let s;le(s=se())&&(i.tabTemplates=s)}},decls:7,vars:1,consts:[[1,"tabs"],[1,"tabs__labels"],[3,"active"],[1,"tabs__body"],[3,"click"],[3,"size"],[4,"ngTemplateOutlet"]],template:function(t,i){t&1&&(r(0,"lg-card")(1,"div",0)(2,"div",1),O(3,Ue,2,6,"button",2,Ge),a(),r(5,"div",3),b(6,qe,1,1),a()()()),t&2&&(o(3),N(i.tabs()),o(3),C(i.tabs().length>0?6:-1))},dependencies:[ve,k,H],styles:[`.tabs{display:flex;flex-direction:column;gap:1rem}.tabs__labels{display:flex;gap:1rem;margin:-25px;padding:25px;background-color:#eed2f0;border-bottom:2px solid #ecc9ee;overflow-x:auto;white-space:nowrap;scroll-behavior:smooth;scroll-snap-type:x mandatory;overscroll-behavior-x:contain}.tabs__labels button{background:#fff;border:none;border-radius:12px;padding:.5rem 1rem;cursor:pointer;font-size:1rem;transition:background-color .3s ease;font-family:inherit;text-decoration:none}.tabs__labels button:hover{background-color:#f0f0f0}.tabs__labels button:focus{outline:2px solid #007bff}.tabs__labels button.active{background-color:#a26dc7;color:#fff}.tabs__body{display:flex;flex-direction:column;gap:1rem;margin-top:25px}.tabs__body>*{flex:1}
`],encapsulation:2})};function We(n,e){n&1&&y(0,"lg-language-settings")}function Ye(n,e){n&1&&(r(0,"lg-gap-row",4)(1,"a",5),p(2),m(3,"translate"),a(),r(4,"a",6),p(5),m(6,"translate"),a()()),n&2&&(c("mobileMode",!0)("top",!0),o(2),u(" ",d(3,4,"categories.products.link-label")," "),o(3),u(" ",d(6,6,"categories.recipes.link-label")," "))}function Xe(n,e){n&1&&(r(0,"a",7),p(1),m(2,"translate"),a()),n&2&&(o(),u(" ",d(2,1,"taxes.link-label")," "))}function Ze(n,e){n&1&&y(0,"lg-backup-settings")}var Ne=class n{constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_({type:n,selectors:[["lg-settings"]],decls:14,vars:15,consts:[["alias","language","lgTab","",3,"label"],["alias","categoires","lgTab","",3,"label"],["alias","taxes","lgTab","",3,"label"],["alias","backup","lgTab","",3,"label"],[3,"mobileMode","top"],["lgExpand","","routerLink","/settings/categories/products","routerLinkActive","active"],["lgExpand","","routerLink","/settings/categories/recipes","routerLinkActive","active"],["lgExpand","","routerLink","/settings/taxes","routerLinkActive","active"]],template:function(t,i){t&1&&(r(0,"lg-fade-in")(1,"lg-container")(2,"lg-title"),p(3),m(4,"translate"),a(),r(5,"lg-tabs"),h(6,We,1,0,"ng-template",0),m(7,"translate"),h(8,Ye,7,8,"ng-template",1),m(9,"translate"),h(10,Xe,3,3,"ng-template",2),m(11,"translate"),h(12,Ze,1,0,"ng-template",3),m(13,"translate"),a()()()),t&2&&(o(3),ce(d(4,5,"settings.title")),o(3),E("label",d(7,7,"language.settings-title")),o(2),E("label",d(9,9,"categories.settings-title")),o(2),E("label",d(11,11,"taxes.settings-title")),o(2),E("label",d(13,13,"backup.settings-title")))},dependencies:[Me,S,j,ye,xe,Le,De,U,J,P,T,K],encapsulation:2})};export{Ne as SettingsComponent};
