import{$ as i}from"./chunk-46OIECST.js";var d=class c{constructor(){}read(e){try{let t=JSON.parse(localStorage.getItem(e+"_top")||"{}"),n=JSON.parse(localStorage.getItem(e+"_recent")||"{}");return{top:t,recent:n}}catch(t){return console.error("Error reading from localStorage:",t),{top:{},recent:{}}}}count(e,t){if(!t)return;let n=e+"_history",l=e+"_recent",p=e+"_top",s=JSON.parse(localStorage.getItem(n)||"{}"),u=Date.now(),g=u-30*24*60*60*1e3;s[t]={count:(s[t]?.count||0)+1,updatedAt:u};let a=Object.entries(s).filter(([o,r])=>r.updatedAt>=g),m=a.sort((o,r)=>r[1].updatedAt-o[1].updatedAt).slice(0,5),S=a.sort((o,r)=>r[1].count-o[1].count||r[1].updatedAt-o[1].updatedAt).slice(0,5);localStorage.setItem(n,JSON.stringify(Object.fromEntries(a))),localStorage.setItem(l,JSON.stringify(Object.fromEntries(m))),localStorage.setItem(p,JSON.stringify(Object.fromEntries(S)))}static \u0275fac=function(t){return new(t||c)};static \u0275prov=i({token:c,factory:c.\u0275fac,providedIn:"root"})};export{d as a};
