import{a as ve}from"./chunk-EO5SYJ34.js";import{b as fe}from"./chunk-5VR5YUUD.js";import{a as me}from"./chunk-DIQ4RGBD.js";import{b as ue}from"./chunk-5AOZZ2NF.js";import"./chunk-3QIAGCJF.js";import{c as w}from"./chunk-CR46UX4Z.js";import{a as de}from"./chunk-UZ4ZOUQK.js";import{a as ge}from"./chunk-TOH5IIUM.js";import"./chunk-H46Y7ZP7.js";import{a as le}from"./chunk-GMS3E2FY.js";import{a as se,b as ce,d as pe,g as L,k as B,s as x}from"./chunk-E5I57XC6.js";import{a as M}from"./chunk-C3YIVVSQ.js";import{a as oe,b as k,c as b}from"./chunk-UYEJDPNH.js";import{a as re}from"./chunk-LVIA722N.js";import{a as ae}from"./chunk-2ZEJWSE3.js";import"./chunk-SNDQO5FA.js";import{s as ne,t as ie}from"./chunk-K7R7MOA3.js";import{f as te}from"./chunk-IZT3LVRQ.js";import{Ab as l,Bb as a,Cb as _,Gb as U,Jb as f,Kb as v,Lb as Q,Mb as q,Qa as j,Ta as n,U as P,Wb as s,Xb as h,Ya as G,Yb as d,Zb as W,_ as I,bb as u,bc as X,fa as H,ga as z,ha as F,hc as c,ic as p,nb as V,ob as r,qb as J,qc as Y,rb as A,ub as y,uc as Z,vb as S,vc as C,yb as $,zb as K,zc as ee}from"./chunk-PNZYYIKS.js";import"./chunk-DELOOZDJ.js";import{f as R}from"./chunk-2WH2EVR6.js";var _e=["*"];function ke(o,e){if(o&1&&_(0,"span",4),o&2){let t=v(2);r("innerHTML",t.customMark(),j)}}function be(o,e){o&1&&(F(),l(0,"svg",5),_(1,"path",6),a())}function xe(o,e){if(o&1&&y(0,ke,1,1,"span",4)(1,be,2,0,":svg:svg",5),o&2){let t=v();S(t.customMark()?0:1)}}var E=class o{constructor(){}modelValue=!1;customMark=C("");name=C("");value=C("");size=C("default");markOnHover=C(!1);radio=C(!1);noMark=C(!1);onCheckboxChanged=Z();onKeydown(e){e.preventDefault(),this.onChangeCheckbox(!this.modelValue)}onChange=()=>{};onTouched=()=>{};writeValue(e){this._change(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onChangeCheckbox(e){this._change(e)}_change(e){typeof e=="boolean"?this.modelValue=e:this.modelValue=["true","false"].includes(e)?e==="true":e,this.onChange(this.modelValue),this.onCheckboxChanged.emit(this.modelValue)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=u({type:o,selectors:[["lg-radio"]],hostBindings:function(t,i){t&1&&f("keydown.enter",function(m){return i.onKeydown(m)})("keydown.space",function(m){return i.onKeydown(m)})},inputs:{customMark:[1,"customMark"],name:[1,"name"],value:[1,"value"],size:[1,"size"],markOnHover:[1,"markOnHover"],radio:[1,"radio"],noMark:[1,"noMark"]},outputs:{onCheckboxChanged:"onCheckboxChanged"},features:[X([{provide:ce,useExisting:P(()=>o),multi:!0}])],ngContentSelectors:_e,decls:6,vars:11,consts:[["tabindex","0",1,"lg-radio",3,"ngClass"],[1,"checkbox",3,"ngModelChange","checked","ngModel","type"],[1,"lg-radio__mark"],[1,"lg-radio__mark-inner"],[3,"innerHTML"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","currentColor","d","M9.5 16.5l-4.25-4.25 1.4-1.4L9.5 13.7l7.35-7.35 1.4 1.4z"]],template:function(t,i){t&1&&(Q(),l(0,"label",0)(1,"input",1),f("ngModelChange",function(m){return i.onChangeCheckbox(m)}),a(),l(2,"span",2)(3,"span",3),y(4,xe,2,1),a()(),q(5),a()),t&2&&(r("ngClass",i.size()),V("for",i.name()+"-"+i.value()),n(),r("checked",i.modelValue)("ngModel",i.modelValue)("type",i.radio()?"radio":"checkbox"),V("id",i.name()+"-"+i.value())("name",i.name())("value",i.radio()?i.value():i.modelValue),n(),J("lg-radio__hoverOnly",i.markOnHover()),n(2),S(i.noMark()?-1:4))},dependencies:[x,pe,L,B,te],styles:[`.lg-radio{display:flex;border-radius:12px;gap:8px}.lg-radio:focus-within{outline-color:var(--active-color)}.lg-radio__mark{display:flex;align-items:center;justify-content:center;width:51px;height:51px;border-radius:12px;background-color:var(--control-bg);opacity:.2;cursor:pointer;transition:all .2s ease-in-out;border:1px solid transparent}.lg-radio__hoverOnly{background-color:transparent;border-color:var(--text-color)}.lg-radio__hoverOnly .lg-radio__mark-inner{opacity:0;transition:all .2s ease-in-out}@media (hover: hover){.lg-radio__mark:hover,.lg-radio__hoverOnly:hover .lg-radio__mark-inner{opacity:1}}.checkbox{display:none}.checkbox:checked+.lg-radio__mark{background-color:var(--control-bg-selected);opacity:1;font-weight:700}.checkbox:checked+.lg-radio__hoverOnly{border-color:var(--control-bg-selected)}.checkbox:checked+.lg-radio__hoverOnly .lg-radio__mark-inner{opacity:1}.lg-radio.small .lg-radio__mark{width:16px;height:16px;border-radius:6px}
`],encapsulation:2})};var ye=(o,e)=>e.code;function Se(o,e){if(o&1){let t=U();l(0,"lg-gap-row",2)(1,"lg-radio",3),f("change",function(){let g=H(t).$implicit,m=v();return z(m.changeLang(g.code))}),s(2),a()()}if(o&2){let t=e.$implicit,i=e.$index,g=v();r("center",!0)("mobileMode",!0)("size","small"),n(),r("markOnHover",!0)("radio",!0)("name","lang")("value",t.code)("ngModel",g.selectedLangModel()[i])("size","small")("noMark",!0),n(),d(" ",t.name," ")}}var D=class o{constructor(e){this._localisationService=e;this.selectedLang=this._localisationService.lang,this.selectedLangModel.update(t=>this._localisationService.languages.map(i=>this.selectedLang()===i)),console.log({selectedLang:this.selectedLang(),selectedLangModel:this.selectedLangModel(),languages:this._localisationService.languages})}langsMap={en:"English",pt:"Portugu\xEAs",ru:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"};selectedLang;selectedLangModel=ee([]);languages=Y(()=>this._localisationService.languages.map(e=>({code:e,name:this.langsMap[e]||e})));changeLang(e){this._localisationService.changeLang(e)}static \u0275fac=function(t){return new(t||o)(G(ve))};static \u0275cmp=u({type:o,selectors:[["lg-language-settings"]],inputs:{selectedLangModel:[1,"selectedLangModel"]},outputs:{selectedLangModel:"selectedLangModelChange"},decls:6,vars:2,consts:[[1,"language-settings"],[3,"size"],[3,"center","mobileMode","size"],[3,"change","markOnHover","radio","name","value","ngModel","size","noMark"]],template:function(t,i){t&1&&(l(0,"section",0)(1,"lg-card")(2,"lg-gap-column",1)(3,"lg-gap-column",1),$(4,Se,3,11,"lg-gap-row",2,ye),a()()()()),t&2&&(n(2),r("size","medium"),n(),r("size","small"),n(),K(i.languages()))},dependencies:[k,b,M,x,L,B,E],encapsulation:2})};function Me(o,e){if(o&1&&(s(0),c(1,"translate"),c(2,"timeAgo")),o&2){let t=v();W(" ",p(1,2,"backup.last-label")," ",p(2,4,t.transferDataService.currenBackupDate)," ")}}var T=class o{constructor(){}downloadBackupParam=fe("download_backup");transferDataService=I(ue);notificationsService=I(ge);ngAfterViewInit(){this.downloadBackupParam()&&this.onBackup()}onBackup(){return R(this,null,function*(){let e=this.notificationsService.loading("Creating backup");try{yield this.transferDataService.exportAll("json"),this.notificationsService.success("Backup created successfully"),localStorage.setItem("lastBackupDate",Date.now().toString())}catch(t){this.notificationsService.showJsonErrors([JSON.stringify(t)],"Backup failed"),console.error(t)}finally{e.close()}})}onRestore(e){return R(this,null,function*(){let t=this.notificationsService.loading("Restoring backup");try{yield this.transferDataService.restoreAllData(e),this.notificationsService.success("Restore completed successfully")}catch(i){this.notificationsService.showJsonErrors([JSON.stringify(i)],"Restore failed"),console.error(i)}finally{t.close()}})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=u({type:o,selectors:[["lg-backup-settings"]],decls:15,vars:18,consts:[[3,"center","mobileMode"],[3,"click"],[3,"filesSelected","accept"],[2,"--card-bg","#e78888"],[3,"position"],[1,"text-center","text-inverse"]],template:function(t,i){t&1&&(l(0,"lg-gap-column")(1,"lg-gap-row",0)(2,"lg-button",1),f("click",function(){return i.onBackup()}),s(3),c(4,"translate"),a(),y(5,Me,3,6),a(),l(6,"lg-upload",2),f("filesSelected",function(m){return i.onRestore(m)}),l(7,"lg-card",3)(8,"lg-gap-column",4)(9,"div",5),s(10),c(11,"translate"),a(),l(12,"lg-button"),s(13),c(14,"translate"),a()()()()()),t&2&&(n(),r("center",!0)("mobileMode",!0),n(),A("success"),n(),d(" ",p(4,12,"backup.make-btn")," "),n(2),S(i.transferDataService.currenBackupDate?5:-1),n(),r("accept",".json"),n(2),r("position","center"),n(2),d(" ",p(11,14,"backup.restore-informer")," "),n(2),A("danger"),n(),d(" ",p(14,16,"backup.restore-btn")," "))},dependencies:[k,b,M,x,le,se,me,w],encapsulation:2})};var Ce=class o{constructor(){}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=u({type:o,selectors:[["lg-settings"]],decls:32,vars:33,consts:[[3,"level"],[3,"mobileMode","top"],["lgExpand","","routerLink","/settings/categories/products","routerLinkActive","active"],[3,"center"],["lgExpand","","routerLink","/settings/categories/recipes","routerLinkActive","active"],["lgExpand","","routerLink","/settings/taxes","routerLinkActive","active"]],template:function(t,i){t&1&&(l(0,"lg-fade-in")(1,"lg-container")(2,"lg-title"),s(3),c(4,"translate"),a(),l(5,"lg-title",0),s(6),c(7,"translate"),a(),l(8,"lg-gap-row",1)(9,"a",2)(10,"lg-card",3),s(11),c(12,"translate"),a()(),l(13,"a",4)(14,"lg-card",3),s(15),c(16,"translate"),a()()(),l(17,"lg-title",0),s(18),c(19,"translate"),a(),_(20,"lg-language-settings"),l(21,"lg-title",0),s(22),c(23,"translate"),a(),l(24,"a",5)(25,"lg-card",3),s(26),c(27,"translate"),a()(),l(28,"lg-title",0),s(29),c(30,"translate"),a(),_(31,"lg-backup-settings"),a()()),t&2&&(n(3),h(p(4,17,"settings.title")),n(2),r("level",3),n(),h(p(7,19,"categories.settings-title")),n(2),r("mobileMode",!0)("top",!0),n(2),r("center",!0),n(),d(" ",p(12,21,"categories.products.link-label")," "),n(3),r("center",!0),n(),d(" ",p(16,23,"categories.recipes.link-label")," "),n(2),r("level",3),n(),h(p(19,25,"language.settings-title")),n(3),r("level",3),n(),h(p(23,27,"taxes.settings-title")),n(3),r("center",!0),n(),h(p(27,29,"taxes.link-label")),n(2),r("level",3),n(),h(p(30,31,"backup.settings-title")))},dependencies:[k,oe,b,ae,ne,ie,re,de,D,T,w],encapsulation:2})};export{Ce as SettingsComponent};
