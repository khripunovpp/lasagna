import{a as y}from"./chunk-IQ2N57HJ.js";import{a as A}from"./chunk-5Y7LIOML.js";import{a as K,c as Q,d as W,e as Y}from"./chunk-CL2YXL2O.js";import{a as q,b as H}from"./chunk-572RCR4K.js";import{a as U}from"./chunk-RQHIUHWL.js";import{b as J}from"./chunk-GT7COLCQ.js";import{a as X}from"./chunk-AIQH2UTR.js";import"./chunk-BIKB4Y5Y.js";import{a as e}from"./chunk-6L5LI2P6.js";import"./chunk-KZZMX7TE.js";import"./chunk-GORGKC4U.js";import{a as $,d as Z}from"./chunk-YBVUJ3DZ.js";import"./chunk-7XJBFH7X.js";import{a as V}from"./chunk-OIABF7X4.js";import{a as B,c as G}from"./chunk-JVT2USDN.js";import{Aa as u,Fa as N,Ha as I,I as L,Ia as x,Ja as c,Ka as p,La as j,P as k,Pa as F,Qa as g,R as d,Ra as R,V as w,W as z,ac as P,bb as l,cb as E,db as O,f as T,ja as n,ma as _,n as h,oa as M,r as C,s as D,sa as S,xa as a}from"./chunk-AWPX63HX.js";var ee=e.object({uuid:e.string().optional(),name:e.string().min(1).optional(),description:e.string().optional(),ingredients:e.array(e.object({name:e.string().min(1).optional(),uuid:e.string().optional(),amount:e.union([e.string(),e.number()]).optional(),product_id:e.string().optional(),recipe_id:e.string().optional(),unit:e.string().optional()})),outcome_amount:e.union([e.string(),e.number()]).optional(),outcome_unit:e.string().optional(),taxTemplateName:e.string().optional(),category_id:e.string().optional()});var te=new k("CategorizedRecipesList",{factory:()=>{let t=d(y),o=d(A);return h(t.loadRecipes()).pipe(L(()=>t.recipes$)).pipe(C(r=>r.toSorted((s,m)=>s.name.localeCompare(m.name))),C(r=>W(r,"category_id")),D(r=>T(void 0,null,function*(){let s=[];for(let f in r){let v=r[f],oe=yield o.getOne(f);s.push({category:oe?.name,recipes:v})}if(!s.length)return[];let[m,...b]=s.toSorted((f,v)=>f.category>v.category?1:-1);return m?.category?[m].concat(b):b.concat([m])})))}});var re=(t,o)=>o==null?null:o.category;function ne(t,o){if(t&1&&(c(0,"span"),l(1),p()),t&2){let i=o.$implicit;n(),E(i==null?null:i.name)}}function pe(t,o){if(t&1){let i=F();c(0,"lg-gap-row",0)(1,"div",7)(2,"a",8),l(3),p()(),c(4,"lg-button",9),l(5," Calculate "),p(),c(6,"lg-button",10),g("click",function(){w(i);let s=R().$implicit,m=R(2);return z(m.deleteRecipe(s))}),j(7,"mat-icon",11),p()()}if(t&2){let i=R().$implicit;a("center",!0),n(2),a("routerLink","/recipes/edit/"+i.uuid),n(),E(i.name),n(),u("primary"),a("size","small")("link","/recipes/calculate/"+i.uuid)("flat",!0),n(2),u("danger"),a("size","small")("icon",!0)}}function ae(t,o){t&1&&S(0,pe,8,12,"ng-template",6)}function ce(t,o){if(t&1&&(c(0,"lg-title",5),l(1),p(),c(2,"lg-card-list"),I(3,ae,1,0,null,6,N),p()),t&2){let i=o.$implicit;a("level",3),n(),O(" ",(i==null?null:i.category)||"Uncategorized"," "),n(2),x(i.recipes)}}function se(t,o){t&1&&(c(0,"lg-gap-row",0)(1,"lg-title",5),l(2," No recipes found "),p()()),t&2&&(a("center",!0),n(),a("level",5))}var ie=class t{constructor(o,i,r){this._recipesRepository=o;this._notificationsService=i;this._transferDataService=r}recipes=J(d(te));Stores=$;RecipeDbInputScheme=ee;ngOnInit(){this.loadRecipes()}deleteRecipe(o){this._recipesRepository.deleteRecipe(o.uuid).then(()=>{this.loadRecipes(),this._notificationsService.success("Recipe deleted")})}loadRecipes(){this._recipesRepository.loadRecipes()}exportRecipes(){this._transferDataService.exportTable("recipesStore","json")}static \u0275fac=function(i){return new(i||t)(_(y),_(X),_(Y))};static \u0275cmp=M({type:t,selectors:[["lg-recipes-list"]],decls:13,vars:13,consts:[[3,"center"],[3,"flat","link","size"],[3,"click","flat","size"],[3,"onDone","schema","storeName"],["lgImportRowTpl",""],[3,"level"],["lgCardListItem",""],[1,"expand"],[3,"routerLink"],[3,"size","link","flat"],[3,"click","size","icon"],["aria-hidden","false","aria-label","Example home icon","fontIcon","close"]],template:function(i,r){i&1&&(c(0,"lg-container")(1,"lg-gap-row",0)(2,"lg-title"),l(3," Recipes "),p(),c(4,"lg-button",1),l(5," Add "),p(),c(6,"lg-button",2),g("click",function(){return r.exportRecipes()}),l(7," Export "),p(),c(8,"lg-import",3),g("onDone",function(){return r.loadRecipes()}),S(9,ne,2,1,"ng-template",4),p()(),I(10,ce,5,2,null,null,re,!1,se,3,2,"lg-gap-row",0),p()),i&2&&(n(),a("center",!0),n(3),u("primary"),a("flat",!0)("link","/recipes/add")("size","small"),n(2),u("info"),a("flat",!0)("size","small"),n(2),a("schema",r.RecipeDbInputScheme)("storeName",r.Stores.RECIPES),n(2),x(r.recipes()))},dependencies:[V,Z,P,U,B,G,H,q,Q,K],styles:["[_nghost-%COMP%]{display:block}"]})};export{ie as RecipesListComponent};
