import{a as Se,b as xe}from"./chunk-MLWLSOXH.js";import{a as ye}from"./chunk-U6W636QP.js";import{b as ke}from"./chunk-VKWU2J5T.js";import{a as Ce}from"./chunk-6ZKMU4GX.js";import"./chunk-DECIG3UW.js";import{a as be}from"./chunk-QILXMN5K.js";import{a as _e}from"./chunk-Q3MS5KTD.js";import{a as he}from"./chunk-MTKE3TKK.js";import{a as E}from"./chunk-KB5VWG36.js";import{a as ue}from"./chunk-ACHQGNI7.js";import{a as ge,b}from"./chunk-4GMAHVOM.js";import{a as fe}from"./chunk-2AG3W6NR.js";import{a as L}from"./chunk-6OA5NOZV.js";import"./chunk-SNDQO5FA.js";import{j as h,o as de}from"./chunk-EKJQYQH6.js";import"./chunk-PPZB7COH.js";import"./chunk-5KSZNU56.js";import"./chunk-TCTFHDUI.js";import"./chunk-H5OOR6F4.js";import{a as pe,c as ce,f as B,j as T,s as k,v as me,w as ve}from"./chunk-N4C567K3.js";import"./chunk-6D4L3YT6.js";import{s as le,t as se}from"./chunk-2UE5YCBQ.js";import"./chunk-652DFWNF.js";import{f as re}from"./chunk-GM4BKM5X.js";import{$ as O,$b as w,Bb as $,Cb as Q,Cc as ae,Db as r,Dc as v,Eb as a,Fb as C,Ic as P,Jb as q,Mb as u,Nb as _,Ob as X,Pb as Y,Qb as M,Ra as J,V as F,Va as o,_a as K,_b as c,ac as d,bc as Z,cc as ee,db as f,dc as te,ec as ne,ga as j,ha as G,ia as U,ib as y,ic as ie,oc as l,pb as N,pc as s,qb as p,sb as W,tb as H,wb as S,yb as x,yc as oe}from"./chunk-ESI6QU3H.js";import"./chunk-DELOOZDJ.js";import{f as V}from"./chunk-2WH2EVR6.js";var Be=["*"];function Te(n,e){if(n&1&&C(0,"span",4),n&2){let t=_(2);p("innerHTML",t.customMark(),J)}}function Le(n,e){n&1&&(U(),r(0,"svg",5),C(1,"path",6),a())}function Ee(n,e){if(n&1&&S(0,Te,1,1,"span",4)(1,Le,2,0,":svg:svg",5),n&2){let t=_();x(t.customMark()?0:1)}}var D=class n{constructor(){}modelValue=!1;customMark=v("");name=v("");value=v("");size=v("default");markOnHover=v(!1);radio=v(!1);noMark=v(!1);onCheckboxChanged=ae();onKeydown(e){e.preventDefault(),this.onChangeCheckbox(!this.modelValue)}onChange=()=>{};onTouched=()=>{};writeValue(e){this._change(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onChangeCheckbox(e){this._change(e)}_change(e){typeof e=="boolean"?this.modelValue=e:this.modelValue=["true","false"].includes(e)?e==="true":e,this.onChange(this.modelValue),this.onCheckboxChanged.emit(this.modelValue)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["lg-radio"]],hostBindings:function(t,i){t&1&&u("keydown.enter",function(m){return i.onKeydown(m)})("keydown.space",function(m){return i.onKeydown(m)})},inputs:{customMark:[1,"customMark"],name:[1,"name"],value:[1,"value"],size:[1,"size"],markOnHover:[1,"markOnHover"],radio:[1,"radio"],noMark:[1,"noMark"]},outputs:{onCheckboxChanged:"onCheckboxChanged"},features:[ie([{provide:pe,useExisting:F(()=>n),multi:!0}])],ngContentSelectors:Be,decls:6,vars:11,consts:[["tabindex","0",1,"lg-radio",3,"ngClass"],[1,"checkbox",3,"ngModelChange","checked","ngModel","type"],[1,"lg-radio__mark"],[1,"lg-radio__mark-inner"],[3,"innerHTML"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","currentColor","d","M9.5 16.5l-4.25-4.25 1.4-1.4L9.5 13.7l7.35-7.35 1.4 1.4z"]],template:function(t,i){t&1&&(X(),r(0,"label",0)(1,"input",1),u("ngModelChange",function(m){return i.onChangeCheckbox(m)}),a(),r(2,"span",2)(3,"span",3),S(4,Ee,2,1),a()(),Y(5),a()),t&2&&(p("ngClass",i.size()),N("for",i.name()+"-"+i.value()),o(),p("checked",i.modelValue)("ngModel",i.modelValue)("type",i.radio()?"radio":"checkbox"),N("id",i.name()+"-"+i.value())("name",i.name())("value",i.radio()?i.value():i.modelValue),o(),W("lg-radio__hoverOnly",i.markOnHover()),o(2),x(i.noMark()?-1:4))},dependencies:[k,ce,B,T,re],styles:[`.lg-radio{display:flex;border-radius:12px;gap:8px}.lg-radio:focus-within{outline-color:var(--active-color)}.lg-radio__mark{display:flex;align-items:center;justify-content:center;width:51px;height:51px;border-radius:12px;background-color:var(--control-bg);opacity:.2;cursor:pointer;transition:all .2s ease-in-out;border:1px solid transparent}.lg-radio__hoverOnly{background-color:transparent;border-color:var(--text-color)}.lg-radio__hoverOnly .lg-radio__mark-inner{opacity:0;transition:all .2s ease-in-out}@media (hover: hover){.lg-radio__mark:hover,.lg-radio__hoverOnly:hover .lg-radio__mark-inner{opacity:1}}.checkbox{display:none}.checkbox:checked+.lg-radio__mark{background-color:var(--control-bg-selected);opacity:1;font-weight:700}.checkbox:checked+.lg-radio__hoverOnly{border-color:var(--control-bg-selected)}.checkbox:checked+.lg-radio__hoverOnly .lg-radio__mark-inner{opacity:1}.lg-radio.small .lg-radio__mark{width:16px;height:16px;border-radius:6px}
`],encapsulation:2})};var De=(n,e)=>e.code;function Ie(n,e){if(n&1){let t=q();r(0,"lg-gap-row",4)(1,"lg-radio",7),u("change",function(){let g=j(t).$implicit,m=_();return G(m.changeLang(g.code))}),c(2),a()()}if(n&2){let t=e.$implicit,i=e.$index,g=_();p("center",!0)("mobileMode",!0)("size","small"),o(),p("markOnHover",!0)("radio",!0)("name","lang")("value",t.code)("ngModel",g.selectedLangModel()[i])("size","small")("noMark",!0),o(),d(" ",t.name," ")}}var I=class n{constructor(e){this._settingsService=e;this.selectedLang=this._settingsService.lang,this.selectedLangModel.update(t=>this._settingsService.languages.map(i=>this.selectedLang()===i)),this.currency.set(this._settingsService.settingsSignal()?.getSetting("currency")?.data||"USD")}currency=P("EUR");langsMap={en:"English",pt:"Portugu\xEAs",ru:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"};selectedLang;selectedLangModel=P([]);languages=oe(()=>this._settingsService.languages.map(e=>({code:e,name:this.langsMap[e]||e})));changeLang(e){this._settingsService.changeLang(e)}changeCurrency(e){this._settingsService.changeCurrency(String(e).toUpperCase())}static \u0275fac=function(t){return new(t||n)(K(ye))};static \u0275cmp=f({type:n,selectors:[["lg-language-settings"]],inputs:{currency:[1,"currency"],selectedLangModel:[1,"selectedLangModel"]},outputs:{currency:"currencyChange",selectedLangModel:"selectedLangModelChange"},decls:16,vars:11,consts:[["size","medium"],[3,"level"],[1,"language-settings"],[3,"size"],[3,"center","mobileMode","size"],["href","https://en.wikipedia.org/wiki/ISO_4217","target","_blank"],[3,"ngModelChange","ngModel"],[3,"change","markOnHover","radio","name","value","ngModel","size","noMark"]],template:function(t,i){t&1&&(r(0,"lg-gap-column",0)(1,"lg-title",1),c(2),l(3,"translate"),a(),r(4,"section",2)(5,"lg-gap-column",3)(6,"lg-gap-column",3),$(7,Ie,3,11,"lg-gap-row",4,De),a()()(),r(9,"lg-title",1),c(10),l(11,"translate"),r(12,"a",5),c(13,"ISO 4217"),a(),c(14,") "),a(),r(15,"lg-input",6),ne("ngModelChange",function(m){return te(i.currency,m)||(i.currency=m),m}),u("ngModelChange",function(m){return i.changeCurrency(m)}),a()()),t&2&&(o(),p("level",6),o(),w(s(3,7,"language.settings.language-title")),o(3),p("size","medium"),o(),p("size","small"),o(),Q(i.languages()),o(2),p("level",6),o(),d(" ",s(11,9,"language.settings.currency-title")," ("),o(5),ee("ngModel",i.currency))},dependencies:[b,E,k,B,T,D,be,L,h],encapsulation:2})};function Re(n,e){if(n&1&&(c(0),l(1,"translate"),l(2,"timeAgo")),n&2){let t=_();Z(" ",s(1,2,"backup.last-label")," ",s(2,4,t.transferDataService.currenBackupDate)," ")}}var R=class n{constructor(){}downloadBackupParam=ke("download_backup");transferDataService=O(de);notificationsService=O(me);ngAfterViewInit(){this.downloadBackupParam()&&this.onBackup()}onBackup(){return V(this,null,function*(){let e=this.notificationsService.loading("Creating backup");try{yield this.transferDataService.exportAll("json"),this.notificationsService.success("Backup created successfully"),localStorage.setItem("lastBackupDate",Date.now().toString())}catch(t){this.notificationsService.showJsonErrors([JSON.stringify(t)],"Backup failed"),console.error(t)}finally{e.close()}})}onRestore(e){return V(this,null,function*(){let t=this.notificationsService.loading("Restoring backup");try{yield this.transferDataService.restoreAllData(e),this.notificationsService.success("Restore completed successfully")}catch(i){this.notificationsService.showJsonErrors([JSON.stringify(i)],"Restore failed"),console.error(i)}finally{t.close()}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["lg-backup-settings"]],decls:15,vars:18,consts:[[3,"center","mobileMode"],[3,"click"],[3,"filesSelected","accept"],[2,"--card-bg","#e78888"],[3,"position"],[1,"text-center","text-inverse"]],template:function(t,i){t&1&&(r(0,"lg-gap-column")(1,"lg-gap-row",0)(2,"lg-button",1),u("click",function(){return i.onBackup()}),c(3),l(4,"translate"),a(),S(5,Re,3,6),a(),r(6,"lg-upload",2),u("filesSelected",function(m){return i.onRestore(m)}),r(7,"lg-card",3)(8,"lg-gap-column",4)(9,"div",5),c(10),l(11,"translate"),a(),r(12,"lg-button"),c(13),l(14,"translate"),a()()()()()),t&2&&(o(),p("center",!0)("mobileMode",!0),o(),H("success"),o(),d(" ",s(4,12,"backup.make-btn")," "),o(2),x(i.transferDataService.currenBackupDate?5:-1),o(),p("accept",".json"),o(2),p("position","center"),o(2),d(" ",s(11,14,"backup.restore-informer")," "),o(2),H("danger"),o(),d(" ",s(14,16,"backup.restore-btn")," "))},dependencies:[ue,b,E,k,_e,ve,Ce,h],encapsulation:2})};function Ve(n,e){n&1&&C(0,"lg-language-settings")}function Oe(n,e){n&1&&(r(0,"lg-gap-row",4)(1,"a",5),c(2),l(3,"translate"),a(),r(4,"a",6),c(5),l(6,"translate"),a()()),n&2&&(p("mobileMode",!0)("top",!0),o(2),d(" ",s(3,4,"categories.products.link-label")," "),o(3),d(" ",s(6,6,"categories.recipes.link-label")," "))}function Ne(n,e){n&1&&(r(0,"a",7),c(1),l(2,"translate"),a()),n&2&&(o(),d(" ",s(2,1,"taxes.link-label")," "))}function He(n,e){n&1&&C(0,"lg-backup-settings")}var Me=class n{constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=f({type:n,selectors:[["lg-settings"]],decls:14,vars:15,consts:[["alias","language","lgTab","",3,"label"],["alias","categoires","lgTab","",3,"label"],["alias","taxes","lgTab","",3,"label"],["alias","backup","lgTab","",3,"label"],[3,"mobileMode","top"],["lgExpand","","routerLink","/settings/categories/products","routerLinkActive","active"],["lgExpand","","routerLink","/settings/categories/recipes","routerLinkActive","active"],["lgExpand","","routerLink","/settings/taxes","routerLinkActive","active"]],template:function(t,i){t&1&&(r(0,"lg-fade-in")(1,"lg-container")(2,"lg-title"),c(3),l(4,"translate"),a(),r(5,"lg-tabs"),y(6,Ve,1,0,"ng-template",0),l(7,"translate"),y(8,Oe,7,8,"ng-template",1),l(9,"translate"),y(10,Ne,3,3,"ng-template",2),l(11,"translate"),y(12,He,1,0,"ng-template",3),l(13,"translate"),a()()()),t&2&&(o(3),w(s(4,5,"settings.title")),o(3),M("label",s(7,7,"language.settings-title")),o(2),M("label",s(9,9,"categories.settings-title")),o(2),M("label",s(11,11,"taxes.settings-title")),o(2),M("label",s(13,13,"backup.settings-title")))},dependencies:[ge,b,L,le,se,fe,he,I,R,h,Se,xe],encapsulation:2})};export{Me as SettingsComponent};
