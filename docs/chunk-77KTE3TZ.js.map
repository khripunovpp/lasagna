{
  "version": 3,
  "sources": ["src/app/features/recipes/view/list/recipes-filters.component.ts"],
  "sourcesContent": ["import {ChangeDetectionStrategy, Component, computed, inject, signal} from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {TranslatePipe, TranslateService} from '@ngx-translate/core';\nimport {FlexRowComponent} from '../../../../shared/view/layout/flex-row.component';\nimport {injectQueryParams} from '../../../../shared/helpers';\nimport {ButtonComponent} from '../../../../shared/view/ui/button/button.component';\nimport {DropdownComponent} from '../../../controls/dropdown/dropdown.component';\nimport {FlexColumnComponent} from '../../../../shared/view/layout/flex-column.component';\nimport {WINDOW} from '../../../../shared/service/tokens/window.token';\n\n@Component({\n  selector: 'lg-recipes-filters',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  imports: [\n    FlexRowComponent,\n    ButtonComponent,\n    DropdownComponent,\n    FlexColumnComponent,\n    TranslatePipe\n  ],\n  template: `\n    <lg-flex-row [mobileMode]=\"true\"\n                 size=\"medium\">\n      <lg-dropdown>\n        <lg-button [outlined]=\"true\"\n                   [size]=\"'small'\"\n                   [style]=\"'default'\"\n                   lgDropdownAnchor>\n          {{ filterLabel() }}\n        </lg-button>\n\n        <lg-flex-column [size]=\"'small'\">\n          <lg-button (click)=\"onFilterChange({field: 'master', value: 'true'})\"\n                     [flat]=\"true\"\n                     [size]=\"'small'\"\n                     [style]=\"'warning'\">\n            {{ 'recipes.filters.master' | translate }}\n          </lg-button>\n          <lg-button (click)=\"onFilterChange({field: 'master', value: 'false'})\"\n                     [flat]=\"true\"\n                     [size]=\"'small'\"\n                     [style]=\"'warning'\">\n            {{ 'recipes.filters.chunk' | translate }}\n          </lg-button>\n\n          <lg-button (click)=\"onFilterChange({field: undefined, value: undefined})\"\n                     [flat]=\"true\"\n                     [size]=\"'small'\"\n                     [style]=\"'warning'\">\n            {{ 'recipes.filters.all' | translate }}\n          </lg-button>\n        </lg-flex-column>\n      </lg-dropdown>\n    </lg-flex-row>\n  `\n})\nexport class RecipesFiltersComponent {\n  constructor(\n    private translateService: TranslateService\n  ) {\n  }\n\n  readonly router = inject(Router);\n  readonly aRouter = inject(ActivatedRoute);\n  readonly filterValue = injectQueryParams('filterValue');\n  readonly filterField = injectQueryParams('filterField');\n  readonly filters = signal<{\n    field?: string\n    value?: string\n  }>({});\n  filterLabel = computed(() => {\n    if (this.filters().field === 'master') {\n      if (this.filters().value === 'true') {\n        return this.translateService.instant('recipes.filters.master');\n      } else if (this.filters().value === 'false') {\n        return this.translateService.instant('recipes.filters.chunk');\n      }\n    }\n    return this.translateService.instant('recipes.filters.all');\n  });\n  private readonly _window = inject(WINDOW);\n\n  ngOnInit() {\n    const value = this.filterValue();\n    const field = this.filterField();\n\n    this.filters.set({\n      field: field?.toString() || undefined,\n      value: value?.toString() || undefined\n    });\n  }\n\n  onFilterChange(\n    props: {\n      field?: string\n      value?: string\n    }\n  ) {\n    this.router.navigate([], {\n      queryParams: {\n        filterField: props.field,\n        filterValue: props.value,\n      },\n      relativeTo: this.aRouter,\n      queryParamsHandling: 'merge',\n    }).then(() => {\n      // update page\n      this._window?.location.reload();\n    })\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDM,IAAO,0BAAP,MAAO,yBAAuB;EAExB;EADV,YACU,kBAAkC;AAAlC,SAAA,mBAAA;EAEV;EAES,SAAS,OAAO,MAAM;EACtB,UAAU,OAAO,cAAc;EAC/B,cAAc,kBAAkB,aAAa;EAC7C,cAAc,kBAAkB,aAAa;EAC7C,UAAU,OAGhB,CAAA,GAAE,GAAA,YAAA,CAAA,EAAA,WAAA,UAAA,CAAA,IAAA,CAAA,CAAA;EACL,cAAc,SAAS,MAAK;AAC1B,QAAI,KAAK,QAAO,EAAG,UAAU,UAAU;AACrC,UAAI,KAAK,QAAO,EAAG,UAAU,QAAQ;AACnC,eAAO,KAAK,iBAAiB,QAAQ,wBAAwB;MAC/D,WAAW,KAAK,QAAO,EAAG,UAAU,SAAS;AAC3C,eAAO,KAAK,iBAAiB,QAAQ,uBAAuB;MAC9D;IACF;AACA,WAAO,KAAK,iBAAiB,QAAQ,qBAAqB;EAC5D,GAAC,GAAA,YAAA,CAAA,EAAA,WAAA,cAAA,CAAA,IAAA,CAAA,CAAA;EACgB,UAAU,OAAO,MAAM;EAExC,WAAQ;AACN,UAAM,QAAQ,KAAK,YAAW;AAC9B,UAAM,QAAQ,KAAK,YAAW;AAE9B,SAAK,QAAQ,IAAI;MACf,OAAO,OAAO,SAAQ,KAAM;MAC5B,OAAO,OAAO,SAAQ,KAAM;KAC7B;EACH;EAEA,eACE,OAGC;AAED,SAAK,OAAO,SAAS,CAAA,GAAI;MACvB,aAAa;QACX,aAAa,MAAM;QACnB,aAAa,MAAM;;MAErB,YAAY,KAAK;MACjB,qBAAqB;KACtB,EAAE,KAAK,MAAK;AAEX,WAAK,SAAS,SAAS,OAAM;IAC/B,CAAC;EACH;;qCArDW,0BAAuB,4BAAA,gBAAA,CAAA;EAAA;yEAAvB,0BAAuB,WAAA,CAAA,CAAA,oBAAA,CAAA,GAAA,OAAA,IAAA,MAAA,IAAA,QAAA,CAAA,CAAA,QAAA,UAAA,GAAA,YAAA,GAAA,CAAA,oBAAA,IAAA,GAAA,YAAA,MAAA,GAAA,CAAA,GAAA,MAAA,GAAA,CAAA,GAAA,SAAA,QAAA,MAAA,CAAA,GAAA,UAAA,SAAA,iCAAA,IAAA,KAAA;AAAA,QAAA,KAAA,GAAA;AAnChC,MAAA,yBAAA,GAAA,eAAA,CAAA,EAC2B,GAAA,aAAA,EACZ,GAAA,aAAA,CAAA;AAKT,MAAA,iBAAA,CAAA;AACF,MAAA,uBAAA;AAEA,MAAA,yBAAA,GAAA,kBAAA,CAAA,EAAiC,GAAA,aAAA,CAAA;AACpB,MAAA,qBAAA,SAAA,SAAA,8DAAA;AAAA,eAAS,IAAA,eAAe,EAAA,OAAQ,UAAQ,OAAS,OAAM,CAAC;MAAC,CAAA;AAIlE,MAAA,iBAAA,CAAA;;AACF,MAAA,uBAAA;AACA,MAAA,yBAAA,GAAA,aAAA,CAAA;AAAW,MAAA,qBAAA,SAAA,SAAA,8DAAA;AAAA,eAAS,IAAA,eAAe,EAAA,OAAQ,UAAQ,OAAS,QAAO,CAAC;MAAC,CAAA;AAInE,MAAA,iBAAA,CAAA;;AACF,MAAA,uBAAA;AAEA,MAAA,yBAAA,IAAA,aAAA,CAAA;AAAW,MAAA,qBAAA,SAAA,SAAA,+DAAA;AAAA,eAAS,IAAA,eAAe,EAAA,OAAQ,QAAS,OAAS,OAAS,CAAC;MAAC,CAAA;AAItE,MAAA,iBAAA,EAAA;;AACF,MAAA,uBAAA,EAAY,EACG,EACL;;;AA/BH,MAAA,qBAAA,cAAA,IAAA;AAKE,MAAA,oBAAA,CAAA;AAAA,MAAA,qBAAA,SAAA;AAFA,MAAA,qBAAA,YAAA,IAAA,EAAiB,QAAA,OAAA;AAI1B,MAAA,oBAAA;AAAA,MAAA,6BAAA,KAAA,IAAA,YAAA,GAAA,GAAA;AAGc,MAAA,oBAAA;AAAA,MAAA,qBAAA,QAAA,OAAA;AAIH,MAAA,oBAAA;AAAA,MAAA,qBAAA,SAAA;AAFA,MAAA,qBAAA,QAAA,IAAA,EAAa,QAAA,OAAA;AAGtB,MAAA,oBAAA;AAAA,MAAA,6BAAA,KAAA,sBAAA,GAAA,IAAA,wBAAA,GAAA,GAAA;AAKS,MAAA,oBAAA,CAAA;AAAA,MAAA,qBAAA,SAAA;AAFA,MAAA,qBAAA,QAAA,IAAA,EAAa,QAAA,OAAA;AAGtB,MAAA,oBAAA;AAAA,MAAA,6BAAA,KAAA,sBAAA,IAAA,IAAA,uBAAA,GAAA,GAAA;AAMS,MAAA,oBAAA,CAAA;AAAA,MAAA,qBAAA,SAAA;AAFA,MAAA,qBAAA,QAAA,IAAA,EAAa,QAAA,OAAA;AAGtB,MAAA,oBAAA;AAAA,MAAA,6BAAA,KAAA,sBAAA,IAAA,IAAA,qBAAA,GAAA,GAAA;;;IAnCR;IACA;IACA;IACA;IACA;EAAa,GAAA,eAAA,GAAA,iBAAA,EAAA,CAAA;;;sEAsCJ,yBAAuB,CAAA;UA9CnC;WAAU;MACT,UAAU;MACV,iBAAiB,wBAAwB;MACzC,SAAS;QACP;QACA;QACA;QACA;QACA;;MAEF,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAmCX;;;;6EACY,yBAAuB,EAAA,WAAA,2BAAA,UAAA,mEAAA,YAAA,GAAA,CAAA;AAAA,GAAA;",
  "names": []
}
