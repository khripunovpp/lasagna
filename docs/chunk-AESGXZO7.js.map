{
  "version": 3,
  "sources": ["src/app/features/settings/service/services/language.service.ts"],
  "sourcesContent": ["import {inject, Injectable, signal} from '@angular/core';\nimport {TranslateService} from '@ngx-translate/core';\nimport {APP_SERVER_IS_RU} from '../../../../shared/service/tokens/app-server-region.token';\nimport {WINDOW} from '../../../../shared/service/tokens/window.token';\n\nconst allowedLanguages = ['pt', 'ru', 'en'];\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LanguageService {\n  constructor(\n    private translate: TranslateService,\n  ) {\n    this.translate.addLangs(allowedLanguages);\n    const lang = this._defaultLang;\n    this.translate.setDefaultLang(lang);\n    this.changeLang(lang);\n  }\n\n  private readonly _lang = signal(this._defaultLang);\n  private readonly _isRuRegion = inject(APP_SERVER_IS_RU);\n  private readonly _window = inject(WINDOW);\n\n  get lang() {\n    return this._lang;\n  }\n\n  get currentLang(): string {\n    return this.translate.currentLang;\n  }\n\n  get languages(): string[] {\n    return this.translate.getLangs();\n  }\n\n  private get _defaultLang(): string {\n    if (this._isRuRegion) {\n      return 'ru';\n    }\n    return this.translate?.getBrowserLang() || \"en\"\n  }\n\n  getTranslate(key: string): string {\n    return this.translate.instant(key);\n  }\n\n  changeLang(lang: string): void {\n    try {\n      if (!this.languages.includes(lang)) return;\n      this.translate.use(lang);\n      this._lang.set(lang);\n      // Store language in localStorage for JavaScript files\n      this._window?.localStorage.setItem('lang', lang);\n    } catch (e) {\n      console.error('Error changing language:', e);\n      this.translate.use(this._defaultLang);\n    }\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAKA,IAAM,mBAAmB,CAAC,MAAM,MAAM,IAAI;AAKpC,IAAO,kBAAP,MAAO,iBAAe;EAEhB;EADV,YACU,WAA2B;AAA3B,SAAA,YAAA;AAER,SAAK,UAAU,SAAS,gBAAgB;AACxC,UAAM,OAAO,KAAK;AAClB,SAAK,UAAU,eAAe,IAAI;AAClC,SAAK,WAAW,IAAI;EACtB;EAEiB,QAAQ,OAAO,KAAK,cAAY,GAAA,YAAA,CAAA,EAAA,WAAA,QAAA,CAAA,IAAA,CAAA,CAAA;EAChC,cAAc,OAAO,gBAAgB;EACrC,UAAU,OAAO,MAAM;EAExC,IAAI,OAAI;AACN,WAAO,KAAK;EACd;EAEA,IAAI,cAAW;AACb,WAAO,KAAK,UAAU;EACxB;EAEA,IAAI,YAAS;AACX,WAAO,KAAK,UAAU,SAAQ;EAChC;EAEA,IAAY,eAAY;AACtB,QAAI,KAAK,aAAa;AACpB,aAAO;IACT;AACA,WAAO,KAAK,WAAW,eAAc,KAAM;EAC7C;EAEA,aAAa,KAAW;AACtB,WAAO,KAAK,UAAU,QAAQ,GAAG;EACnC;EAEA,WAAW,MAAY;AACrB,QAAI;AACF,UAAI,CAAC,KAAK,UAAU,SAAS,IAAI;AAAG;AACpC,WAAK,UAAU,IAAI,IAAI;AACvB,WAAK,MAAM,IAAI,IAAI;AAEnB,WAAK,SAAS,aAAa,QAAQ,QAAQ,IAAI;IACjD,SAAS,GAAG;AACV,cAAQ,MAAM,4BAA4B,CAAC;AAC3C,WAAK,UAAU,IAAI,KAAK,YAAY;IACtC;EACF;;qCAhDW,kBAAe,mBAAA,gBAAA,CAAA;EAAA;4EAAf,kBAAe,SAAf,iBAAe,WAAA,YAFd,OAAM,CAAA;;;sEAEP,iBAAe,CAAA;UAH3B;WAAW;MACV,YAAY;KACb;;;",
  "names": []
}
