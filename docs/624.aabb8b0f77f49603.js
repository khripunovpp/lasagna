"use strict";(self.webpackChunklasagna=self.webpackChunklasagna||[]).push([[624],{553:(M,d,e)=>{e.d(d,{i:()=>O});var o=e(1007);const t=["*"];let O=(()=>{class c{constructor(){}flat=(0,o.hFB)(!1);center=(0,o.hFB)(!1);static \u0275fac=function(n){return new(n||c)};static \u0275cmp=o.VBU({type:c,selectors:[["lg-card"]],inputs:{flat:[1,"flat"],center:[1,"center"]},ngContentSelectors:t,decls:2,vars:4,consts:[[1,"card"]],template:function(n,r){1&n&&(o.NAR(),o.j41(0,"div",0),o.SdG(1),o.k0s()),2&n&&o.AVh("flat",r.flat())("center",r.center())},styles:["[_nghost-%COMP%]{display:flex;width:100%}.card[_ngcontent-%COMP%]{background-color:#fff;padding:24px;border-radius:32px;width:100%;display:flex;flex-direction:column}.card.flat[_ngcontent-%COMP%]{padding:0}.card.center[_ngcontent-%COMP%]{justify-content:center;align-items:center}"]})}return c})()},1086:(M,d,e)=>{e.d(d,{W:()=>O});var o=e(1007);const t=["*"];let O=(()=>{class c{level=(0,o.vPA)(1);static \u0275fac=function(n){return new(n||c)};static \u0275cmp=o.VBU({type:c,selectors:[["lg-title"]],ngContentSelectors:t,decls:2,vars:0,consts:[["role","heading",1,"title"]],template:function(n,r){1&n&&(o.NAR(),o.j41(0,"p",0),o.SdG(1),o.k0s())},styles:[".title[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin:0}"]})}return c})()},4374:(M,d,e)=>{e.d(d,{F:()=>o});var o=function(t){return t.PRODUCTS="productsStore",t.RECIPES="recipesStore",t.CATEGORIES="categoryStore",t}(o||{})},5559:(M,d,e)=>{e.d(d,{Q:()=>c});var o=e(467),t=e(4374),O=e(1007);let c=(()=>{class f{constructor(){}get _uuid(){return Math.random().toString(36).substring(2)+Date.now().toString(36)}openDb(n){return new Promise(function(){var r=(0,o.A)(function*(i,_){const l=yield window.indexedDB.open("lasagna-db",1);l.onerror=u=>{_(u)},l.onsuccess=u=>{n(u.target?.result)},l.onupgradeneeded=u=>{const p=u.target?.result;p.createObjectStore(t.F.PRODUCTS,{keyPath:"uuid",autoIncrement:!0}).createIndex("name","name",{unique:!1}),p.createObjectStore(t.F.RECIPES,{keyPath:"uuid",autoIncrement:!0}).createIndex("name","name",{unique:!1}),p.createObjectStore(t.F.CATEGORIES,{keyPath:"uuid",autoIncrement:!0}).createIndex("name","name",{unique:!1})},i()});return function(i,_){return r.apply(this,arguments)}}())}addData(n,r){this.openDb(i=>{i.transaction(n,"readwrite").objectStore(n).add({...r,uuid:this._uuid})})}replaceData(n,r,i){return this.openDb(_=>{_.transaction(n,"readwrite").objectStore(n).put(i,"uuid")})}search(n,r,i,_){this.openDb(l=>{l.transaction(n,"readonly").objectStore(n).index(r).getAll(i).onsuccess=D=>{_(D.target.result)}})}getOne(n,r,i){this.openDb(_=>{_.transaction(n,"readonly").objectStore(n).get(r).onsuccess=m=>{i(m.target.result)}})}static \u0275fac=function(r){return new(r||f)};static \u0275prov=O.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},7468:(M,d,e)=>{e.d(d,{p:()=>r});var o=e(1985),t=e(3073),O=e(8750),c=e(9326),f=e(4360),P=e(6450),n=e(8496);function r(...i){const _=(0,c.ms)(i),{args:l,keys:u}=(0,t.D)(i),p=new o.c(m=>{const{length:s}=l;if(!s)return void m.complete();const D=new Array(s);let a=s,E=s;for(let g=0;g<s;g++){let R=!1;(0,O.Tg)(l[g]).subscribe((0,f._)(m,C=>{R||(R=!0,E--),D[g]=C},()=>a--,void 0,()=>{(!a||!R)&&(E||m.next(u?(0,n.e)(u,D):D),m.complete())}))}});return _?p.pipe((0,P.I)(_)):p}},7579:(M,d,e)=>{e.r(d),e.d(d,{RecipesListComponent:()=>m});var o=e(467),t=e(1007),O=e(7782),c=e(7512),f=e(1119),P=e(1338),n=e(1072),r=e(5642),i=e(1086),_=e(553),l=e(9512);function u(s,D){if(1&s){const a=t.RV6();t.j41(0,"lg-gap-row",0)(1,"div",2)(2,"a",3),t.EFF(3),t.k0s()(),t.j41(4,"lg-button",4),t.EFF(5," Edit "),t.k0s(),t.j41(6,"lg-button",5),t.bIt("click",function(){const g=t.eBV(a).$implicit,R=t.XpG();return t.Njj(R.deleteRecipe(g))}),t.nrm(7,"mat-icon",6),t.k0s()()}if(2&s){const a=D.$implicit;t.Y8G("center",!0),t.R7$(2),t.Y8G("routerLink","/calc-recipe/"+a.uuid),t.R7$(),t.JRh(a.name),t.R7$(),t.Aen("primary"),t.Y8G("size","small")("link","/edit-recipe/"+a.uuid)("flat",!0),t.R7$(2),t.Aen("danger"),t.Y8G("size","small")("icon",!0)}}function p(s,D){1&s&&(t.j41(0,"div"),t.EFF(1,"No recipes found"),t.k0s())}let m=(()=>{class s{_recipesRepository;constructor(a){this._recipesRepository=a}recipes=(0,t.vPA)([]);deleteRecipe(a){this._recipesRepository.deleteRecipe(a.uuid,()=>{this.loadRecipes()})}ngOnInit(){var a=this;return(0,o.A)(function*(){yield a.loadRecipes()})()}loadRecipes(){this._recipesRepository.getRecipes(a=>{const E=a.toSorted((g,R)=>g.name.localeCompare(R.name));this.recipes.set(E)})}static \u0275fac=function(E){return new(E||s)(t.rXU(l.m))};static \u0275cmp=t.VBU({type:s,selectors:[["lg-recipes-list"]],decls:11,vars:7,consts:[[3,"center"],[3,"flat","link","size"],[1,"expand"],[3,"routerLink"],[3,"size","link","flat"],[3,"click","size","icon"],["aria-hidden","false","aria-label","Example home icon","fontIcon","close"]],template:function(E,g){1&E&&(t.j41(0,"lg-container")(1,"lg-gap-row",0)(2,"lg-title"),t.EFF(3," Recipes "),t.k0s(),t.j41(4,"lg-button",1),t.EFF(5," Add "),t.k0s()(),t.j41(6,"lg-card")(7,"lg-gap-column"),t.Z7z(8,u,8,12,"lg-gap-row",0,t.Vm6,!1,p,2,0,"div"),t.k0s()()()),2&E&&(t.R7$(),t.Y8G("center",!0),t.R7$(3),t.Aen("primary"),t.Y8G("flat",!0)("link","/add-recipe")("size","small"),t.R7$(4),t.Dyx(g.recipes()))},dependencies:[O.K,c.I,f.Q,P.Wk,n.d,r.H,i.W,_.i],styles:["[_nghost-%COMP%]{display:block}"]})}return s})()}}]);