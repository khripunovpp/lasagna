import{a as X}from"./chunk-77OOBQNO.js";import{b as Q,c as U}from"./chunk-4WXVQTO3.js";import{a as L}from"./chunk-YOJ5SA6X.js";import{a as K}from"./chunk-OKKSVMAH.js";import{a as J}from"./chunk-OBLGAKJH.js";import{a as H}from"./chunk-56ULCNG7.js";import{a as B}from"./chunk-HTQX2SP6.js";import{a as q,b as y}from"./chunk-XTAKXM46.js";import{a as z}from"./chunk-PCXGHPCF.js";import{a as Y}from"./chunk-R3YS3RQB.js";import"./chunk-SNDQO5FA.js";import{a as E,b as P}from"./chunk-RDYEAV3P.js";import{a as F}from"./chunk-OA6R4IIF.js";import{d as T,f as I,g as D,h as V,i as k,k as O,m as G,p as M,s as j,u as W}from"./chunk-TZJHT7D3.js";import{o as w}from"./chunk-YLOQRVGG.js";import"./chunk-652DFWNF.js";import"./chunk-E4OWUINI.js";import{Bb as a,Cb as d,Db as b,Hb as x,Kb as C,Lb as s,Ua as i,Xb as m,Za as c,Zb as A,cb as u,cc as N,ga as v,ha as h,na as l,pb as r,sc as R,vb as g,wb as f,wc as S}from"./chunk-OZXQ5JHJ.js";import"./chunk-DELOOZDJ.js";import"./chunk-2WH2EVR6.js";function et(o,t){o&1&&m(0," Save category ")}function ot(o,t){o&1&&m(0," No changes ")}function it(o,t){if(o&1){let e=x();a(0,"lg-button",6),C("click",function(){v(e);let p=s();return h(p.editCategory())}),g(1,et,1,0)(2,ot,1,0),d()}if(o&2){let e=s();r("disabled",!e.form.dirty),i(),f(e.form.dirty?1:2)}}function rt(o,t){o&1&&m(0," Add category ")}function nt(o,t){o&1&&m(0," Enter a name ")}function at(o,t){if(o&1){let e=x();a(0,"lg-button",6),C("click",function(){v(e);let p=s();return h(p.addCategory())}),g(1,rt,1,0)(2,nt,1,0),d()}if(o&2){let e=s();r("disabled",!e.form.dirty),i(),f(e.form.dirty?1:2)}}var _=class o{constructor(t,e){this._categoryRepository=t;this._notificationsService=e}form=new V({name:new k("",T.required)});category=l(void 0);uuid=S("");uuidEffect=R(()=>{if(!this.uuid()){this.category.set(E.empty());return}this._categoryRepository.getOne(this.uuid()).then(t=>{this.reset(t)})});reset(t){this.form.reset(Q(t)),this.category.set(t),this.form.markAsPristine()}ngOnInit(){this.form.valueChanges.subscribe(t=>{this.category()?.update(U(t))})}addCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.addOne(this.category()).then(()=>{this.form.reset({name:""}),this._notificationsService.success("Category added"),this.form.markAsPristine()})}editCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.updateOne(this.uuid(),this.category()).then(()=>{this._notificationsService.success("Category edited"),this.form.markAsPristine()})}onEnter(){this.uuid()?this.editCategory():this.addCategory()}static \u0275fac=function(e){return new(e||o)(c(P),c(W))};static \u0275cmp=u({type:o,selectors:[["lg-add-category-form"]],inputs:{uuid:[1,"uuid"]},features:[N([{provide:F,useClass:F}])],decls:7,vars:5,consts:[[3,"formGroup"],[3,"bottom","mobileMode"],["label","Name","lgExpand",""],["formControlName","name",3,"onEnter","placeholder"],["lgNoWrap",""],[3,"disabled"],[3,"click","disabled"]],template:function(e,n){e&1&&(a(0,"form",0)(1,"lg-gap-row",1)(2,"lg-control",2)(3,"lg-input",3),C("onEnter",function(){return n.onEnter()}),d()(),a(4,"div",4),g(5,it,3,2,"lg-button",5)(6,at,3,2,"lg-button",5),d()()()),e&2&&(r("formGroup",n.form),i(),r("bottom",!0)("mobileMode",!0),i(2),r("placeholder","Your category name"),i(2),f(n.uuid()?5:6))},dependencies:[j,O,I,D,G,M,K,L,H,y,J,X],encapsulation:2})};var Z=class o{constructor(t){this._aRoute=t}uuid=l("");ngOnInit(){this._aRoute.params.subscribe(t=>{this.uuid.set(t.uuid)})}static \u0275fac=function(e){return new(e||o)(c(w))};static \u0275cmp=u({type:o,selectors:[["lg-add-category"]],decls:7,vars:3,consts:[[3,"center"],[3,"uuid"]],template:function(e,n){e&1&&(a(0,"lg-fade-in")(1,"lg-container")(2,"lg-gap-row",0)(3,"lg-title"),m(4),d()(),a(5,"lg-card"),b(6,"lg-add-category-form",1),d()()()),e&2&&(i(2),r("center",!0),i(2),A("",n.uuid()?"Edit":"Add"," product category"),i(2),r("uuid",n.uuid()))},dependencies:[q,B,Y,_,y,z],encapsulation:2})};export{Z as AddCategoryComponent};
