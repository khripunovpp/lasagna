import{a as X}from"./chunk-EO5SYJ34.js";import"./chunk-CR46UX4Z.js";import{b as W}from"./chunk-22YBPVIV.js";import{a as Q,c as K}from"./chunk-2AURZCPC.js";import{a as H}from"./chunk-SCFN6F3R.js";import"./chunk-3QIAGCJF.js";import{a as U}from"./chunk-UZ4ZOUQK.js";import{a as q}from"./chunk-F6M2S2BE.js";import"./chunk-H46Y7ZP7.js";import{a as j}from"./chunk-GMS3E2FY.js";import{a as J,g as $,k as G,s as O}from"./chunk-TP72K2HT.js";import{a as f}from"./chunk-C3YIVVSQ.js";import{a as z,b as u,c as v}from"./chunk-UYEJDPNH.js";import{a as V}from"./chunk-LVIA722N.js";import{a as F}from"./chunk-2ZEJWSE3.js";import"./chunk-SNDQO5FA.js";import{s as N,t as P}from"./chunk-B3CZXN5N.js";import"./chunk-IZT3LVRQ.js";import{Ab as o,Bb as a,Cb as x,Gb as B,Jb as p,Kb as m,Ta as n,Wb as r,Ya as M,Yb as d,_ as h,bb as g,fa as L,ga as y,hc as T,ic as R,ob as i,qc as A,rb as k,ub as w,vb as b,yb as D,zb as E,zc as I}from"./chunk-PNZYYIKS.js";import"./chunk-DELOOZDJ.js";import{f as _}from"./chunk-2WH2EVR6.js";var te=(l,t)=>t.code;function ne(l,t){if(l&1){let e=B();o(0,"lg-gap-row",2)(1,"lg-checkbox",3),p("change",function(){let c=L(e).$implicit,C=m();return y(C.changeLang(c.code))}),r(2),a()()}if(l&2){let e=t.$implicit,s=t.$index,c=m();i("center",!0)("mobileMode",!0)("size","small"),n(),i("markOnHover",!0)("radio",!0)("name","lang")("value",e.code)("ngModel",c.selectedLangModel()[s])("size","small")("noMark",!0),n(),d(" ",e.name," ")}}var S=class l{constructor(t){this._localisationService=t;this.selectedLang=this._localisationService.lang,this.selectedLangModel.update(e=>this._localisationService.languages.map(s=>this.selectedLang()===s)),console.log({selectedLang:this.selectedLang(),selectedLangModel:this.selectedLangModel(),languages:this._localisationService.languages})}langsMap={en:"English",pt:"Portugu\xEAs",ru:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"};selectedLang;selectedLangModel=I([]);languages=A(()=>this._localisationService.languages.map(t=>({code:t,name:this.langsMap[t]||t})));changeLang(t){this._localisationService.changeLang(t)}static \u0275fac=function(e){return new(e||l)(M(X))};static \u0275cmp=g({type:l,selectors:[["lg-language-settings"]],inputs:{selectedLangModel:[1,"selectedLangModel"]},outputs:{selectedLangModel:"selectedLangModelChange"},decls:6,vars:2,consts:[[1,"language-settings"],[3,"size"],[3,"center","mobileMode","size"],[3,"change","markOnHover","radio","name","value","ngModel","size","noMark"]],template:function(e,s){e&1&&(o(0,"section",0)(1,"lg-card")(2,"lg-gap-column",1)(3,"lg-gap-column",1),D(4,ne,3,11,"lg-gap-row",2,te),a()()()()),e&2&&(n(2),i("size","medium"),n(),i("size","small"),n(),E(s.languages()))},dependencies:[u,v,f,H,O,$,G],encapsulation:2})};function ie(l,t){if(l&1&&(r(0),T(1,"timeAgo")),l&2){let e=m();d(" Last backup: ",R(1,1,e.transferDataService.currenBackupDate)," ")}}var Y=class l{constructor(){}downloadBackupParam=W("download_backup");transferDataService=h(K);notificationsService=h(q);ngAfterViewInit(){this.downloadBackupParam()&&this.onBackup()}onBackup(){return _(this,null,function*(){let t=this.notificationsService.loading("Creating backup");try{yield this.transferDataService.exportAll("json"),this.notificationsService.success("Backup created successfully"),localStorage.setItem("lastBackupDate",Date.now().toString())}catch(e){this.notificationsService.showJsonErrors([JSON.stringify(e)],"Backup failed"),console.error(e)}finally{t.close()}})}onRestore(t){return _(this,null,function*(){let e=this.notificationsService.loading("Restoring backup");try{yield this.transferDataService.restoreAllData(t),this.notificationsService.success("Restore completed successfully")}catch(s){this.notificationsService.showJsonErrors([JSON.stringify(s)],"Restore failed"),console.error(s)}finally{e.close()}})}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=g({type:l,selectors:[["lg-settings"]],decls:32,vars:16,consts:[[3,"level"],[3,"mobileMode","top"],["lgExpand","","routerLink","/settings/categories/products","routerLinkActive","active"],[3,"center"],["lgExpand","","routerLink","/settings/categories/recipes","routerLinkActive","active"],[3,"mobileMode","center"],[3,"click"],[3,"filesSelected","accept"],[2,"--card-bg","#e78888"],[3,"position"],[1,"text-center","text-inverse"]],template:function(e,s){e&1&&(o(0,"lg-fade-in")(1,"lg-container")(2,"lg-title"),r(3,"Settings"),a(),o(4,"lg-title",0),r(5,"Categories"),a(),o(6,"lg-gap-row",1)(7,"a",2)(8,"lg-card",3),r(9," Products categories "),a()(),o(10,"a",4)(11,"lg-card",3),r(12," Recipes categories "),a()()(),o(13,"lg-title",0),r(14,"Language"),a(),x(15,"lg-language-settings"),o(16,"lg-title",0),r(17,"Backup"),a(),o(18,"lg-gap-column")(19,"lg-gap-row",5)(20,"lg-button",6),p("click",function(){return s.onBackup()}),r(21," Make backup "),a(),w(22,ie,2,3),a(),o(23,"lg-upload",7),p("filesSelected",function(C){return s.onRestore(C)}),o(24,"lg-card",8)(25,"lg-gap-column",9)(26,"span",10),r(27," Be aware! "),x(28,"br"),r(29," This will override all your data! "),a(),o(30,"lg-button"),r(31," Restore backup "),a()()()()()()()),e&2&&(n(4),i("level",3),n(2),i("mobileMode",!0)("top",!0),n(2),i("center",!0),n(3),i("center",!0),n(2),i("level",3),n(3),i("level",3),n(3),i("mobileMode",!0)("center",!0),n(),k("success"),n(2),b(s.transferDataService.currenBackupDate?22:-1),n(),i("accept",".json"),n(2),i("position","center"),n(5),k("danger"))},dependencies:[u,z,v,F,N,P,f,V,U,J,j,Q,S],encapsulation:2})};export{Y as SettingsComponent};
