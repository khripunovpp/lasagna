"use strict";(self.webpackChunklasagna=self.webpackChunklasagna||[]).push([[628],{628:(Y,g,r)=>{r.r(g),r.d(g,{AddProductComponent:()=>$});var t=r(1007),C=r(5642),v=r(553),P=r(1086),s=r(9417),_=r(3333),b=r(7504),y=r(7782),p=r(1119),c=r(416),k=r(8456),m=r(8536),R=r(9895);const j=["*",[["content"]]],A=["*","content"];function x(e,d){1&e&&(t.j41(0,"div",3),t.SdG(1,1),t.k0s())}let F=(()=>{class e{constructor(){}displayed=(0,t.vPA)(!1);onClick(o){o.target instanceof HTMLElement&&(o.target.closest(".tooltip")||this.displayed.set(!1))}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=t.VBU({type:e,selectors:[["lg-tooltip"]],hostBindings:function(i,n){1&i&&t.bIt("click",function(a){return n.onClick(a)},!1,t.EBC)},ngContentSelectors:A,decls:5,vars:1,consts:[[1,"tooltip"],[1,"tooltip__anchor"],[3,"click"],[1,"tooltip__content"]],template:function(i,n){1&i&&(t.NAR(j),t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.bIt("click",function(){return n.displayed.set(!n.displayed())}),t.SdG(3),t.k0s(),t.DNE(4,x,2,0,"div",3),t.k0s()()),2&i&&(t.R7$(4),t.vxM(n.displayed()?4:-1))},styles:[".tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip__anchor[_ngcontent-%COMP%]{position:relative}.tooltip__content[_ngcontent-%COMP%]{position:absolute;bottom:50%;right:calc(100% + 16px);transform:translateY(50%);background-color:#fff;border-radius:16px;padding:16px;box-shadow:0 4px 8px #0000001a;z-index:100}"]})}return e})();var T=r(8710);function G(e,d){if(1&e){const o=t.RV6();t.j41(0,"div",3)(1,"lg-eggs-widget",4),t.bIt("changed",function(n){t.eBV(o);const l=t.XpG();return t.Njj(l.onEggsChanged(n))}),t.k0s()()}}let I=(()=>{class e{constructor(){}eggsChanged=(0,t.CGW)();selectedWidget=(0,t.vPA)(null);onWidgetSelect(o){this.selectedWidget.set(o)}onEggsChanged(o){this.eggsChanged.emit(o)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=t.VBU({type:e,selectors:[["lg-amount-widgets"]],outputs:{eggsChanged:"eggsChanged"},decls:5,vars:3,consts:[[1,"amount-widgets"],[1,"amount-widgets__buttons"],[1,"amount-widgets__button",3,"click"],[1,"amount-widgets__wrapper"],[3,"changed"]],template:function(i,n){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"button",2),t.bIt("click",function(){return n.onWidgetSelect("eggs")}),t.EFF(3,"Eggs "),t.k0s()(),t.DNE(4,G,2,0,"div",3),t.k0s()),2&i&&(t.AVh("selected",null!=n.selectedWidget()),t.R7$(4),t.vxM("eggs"===n.selectedWidget()?4:-1))},dependencies:[T.e],styles:[".amount-widgets[_ngcontent-%COMP%]{display:flex;gap:16px;flex-direction:column}.amount-widgets__input[_ngcontent-%COMP%]{flex:1}.amount-widgets__buttons[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap;padding:16px;background-color:#fafafa;border-radius:12px;margin:-16px}.amount-widgets.selected[_ngcontent-%COMP%]   .amount-widgets__buttons[_ngcontent-%COMP%]{margin-bottom:0}.amount-widgets__button[_ngcontent-%COMP%]{display:flex;padding:8px 16px;border-radius:16px;background-color:#e5de38;appearance:none;border:none;font-family:inherit;font-size:inherit}"]})}return e})();var M=r(7480),f=r(7512),w=r(5130),E=r(9170),N=r(7201),h=r(1636);function B(e,d){if(1&e){const o=t.RV6();t.j41(0,"lg-button",17),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.editProduct(n.value))}),t.EFF(1," Edit Product "),t.k0s()}}function V(e,d){if(1&e){const o=t.RV6();t.j41(0,"lg-button",17),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.addProduct(n.value))}),t.EFF(1," Add Product "),t.k0s()}}let W=(()=>{class e{_productsRepository;_selectResourcesService;_router;constructor(o,i,n){this._productsRepository=o,this._selectResourcesService=i,this._router=n}form=new s.gE({name:new s.MJ("",s.k0.required),amount:new s.MJ(null,s.k0.required),price:new s.MJ(null,s.k0.required),unit:new s.MJ("gram"),source:new s.MJ(""),category_id:new s.MJ(null,s.k0.required)});buttons=[{label:"Grams",value:"gram",style:"secondary",onClick:()=>{console.log("Grams")}},{label:"Portions",value:"portion",style:"secondary",onClick:()=>{console.log("Portion")}},{label:"Pieces",value:"piece",style:"secondary",onClick:()=>{console.log("Piece")}}];uuid=(0,t.hFB)("");uuidEffect=(0,t.QZP)(()=>{this.uuid()&&this._productsRepository.getOne(this.uuid()).then(o=>{this.form.reset(o)})});get value(){return this.form.value}eggsChanged(o){this.form.patchValue({amount:o})}ngOnInit(){this.form.valueChanges.subscribe(o=>{console.log(o)})}addProduct(o){this._productsRepository.addProduct((0,m.rh)(o)).then(()=>{this._router.navigate(["/products"])})}editProduct(o){this._productsRepository.editProduct(this.uuid(),(0,m.rh)(o)).then(()=>{this._router.navigate(["/products"])})}ngAfterViewInit(){this._selectResourcesService.load().then(o=>{})}static \u0275fac=function(i){return new(i||e)(t.rXU(N.d),t.rXU(c.n),t.rXU(h.Ix))};static \u0275cmp=t.VBU({type:e,selectors:[["lg-add-product-form"]],inputs:{uuid:[1,"uuid"]},features:[t.Jv_([{provide:c.n,useClass:c.n}])],decls:22,vars:9,consts:[["priceInput",""],[3,"formGroup"],["label","Name"],["formControlName","name",3,"placeholder"],["label","Amount"],["formControlName","amount","lsParseMath","",3,"onInputChange","placeholder"],["ngProjectAs","after",5,["after"]],["ngProjectAs","content",5,["content"]],[3,"eggsChanged"],[3,"bottom"],["label","Price","lgExpand",""],["formControlName","price","lsParseMath","",3,"placeholder"],["formControlName","unit",3,"items"],["label","Source"],["formControlName","source",3,"placeholder"],["label","Category"],["formControlName","category_id",3,"resource"],[3,"click"]],template:function(i,n){if(1&i){const l=t.RV6();t.j41(0,"form",1)(1,"lg-gap-column")(2,"lg-control",2),t.nrm(3,"lg-input",3),t.k0s(),t.j41(4,"lg-control",4)(5,"lg-number-input",5),t.bIt("onInputChange",function(){t.eBV(l);const u=t.sdS(14);return t.Njj(u.focus())}),t.j41(6,"div",6)(7,"lg-tooltip"),t.EFF(8," Widgets "),t.j41(9,"div",7)(10,"lg-amount-widgets",8),t.bIt("eggsChanged",function(u){return t.eBV(l),t.Njj(n.eggsChanged(u))}),t.k0s()()()()()(),t.j41(11,"lg-gap-row",9)(12,"lg-control",10),t.nrm(13,"lg-number-input",11,0),t.k0s(),t.nrm(15,"lg-buttons-group",12),t.k0s(),t.j41(16,"lg-control",13),t.nrm(17,"lg-input",14),t.k0s(),t.j41(18,"lg-control",15),t.nrm(19,"lg-multiselect",16),t.k0s(),t.DNE(20,B,2,0,"lg-button")(21,V,2,0,"lg-button"),t.k0s()()}2&i&&(t.Y8G("formGroup",n.form),t.R7$(3),t.Y8G("placeholder","Your product name"),t.R7$(2),t.Y8G("placeholder","In grams"),t.R7$(6),t.Y8G("bottom",!0),t.R7$(2),t.Y8G("placeholder","For the entire product in your currency"),t.R7$(2),t.Y8G("items",n.buttons),t.R7$(2),t.Y8G("placeholder","Where do you buy it?"),t.R7$(2),t.Y8G("resource","categories"),t.R7$(),t.vxM(n.uuid()?20:21))},dependencies:[s.X1,s.qT,s.BC,s.cb,s.j4,s.JD,_.S,b.X,y.K,p.Q,k.$,R.N,F,I,M.t,f.I,w.i,E.A],styles:["lg-eggs-widget{min-width:300px}\n"],encapsulation:2})}return e})(),$=(()=>{class e{_aRoute;constructor(o){this._aRoute=o}uuid=(0,t.vPA)("");ngOnInit(){this._aRoute.params.subscribe(o=>{this.uuid.set(o.uuid)})}static \u0275fac=function(i){return new(i||e)(t.rXU(h.nX))};static \u0275cmp=t.VBU({type:e,selectors:[["app-add-recipe"]],decls:8,vars:8,consts:[[3,"center"],[3,"flat","link","size"],[3,"uuid"]],template:function(i,n){1&i&&(t.j41(0,"lg-container")(1,"lg-gap-row",0)(2,"lg-title"),t.EFF(3),t.k0s(),t.j41(4,"lg-button",1),t.EFF(5," Back to list "),t.k0s()(),t.j41(6,"lg-card"),t.nrm(7,"lg-add-product-form",2),t.k0s()()),2&i&&(t.R7$(),t.Y8G("center",!0),t.R7$(2),t.SpI("",n.uuid()?"Edit":"Add"," Product"),t.R7$(),t.Aen("warning"),t.Y8G("flat",!0)("link","/products")("size","small"),t.R7$(3),t.Y8G("uuid",n.uuid()))},dependencies:[C.H,v.i,P.W,W,p.Q,f.I],encapsulation:2})}return e})()}}]);