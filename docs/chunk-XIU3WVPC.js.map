{
  "version": 3,
  "sources": ["src/app/shared/helpers/error.helper.ts", "src/app/shared/helpers/product.helpers.ts", "src/app/shared/helpers/recipe.helpers.ts", "src/app/shared/helpers/grouping.helper.ts", "src/app/shared/helpers/number.helper.ts"],
  "sourcesContent": ["import {HttpErrorResponse} from '@angular/common/http';\nimport {ZodError, ZodIssue} from \"zod\";\n\nexport const errorHandler = (error: unknown): string => {\n  // стандартная JS ошибка\n  if (error instanceof Error) {\n    return error.message;\n  }\n\n  // HTTP ошибка Angular\n  if (error instanceof HttpErrorResponse) {\n    const err = error.error;\n    if (err?.error?.details?.errors && Array.isArray(err.error.details.errors)) {\n      return err.error.details.errors\n        .map((e: any) => {\n          const path = e.path?.join('.') || 'unknown';\n          const message = e.message || 'Unknown validation error';\n          const value = e.value !== undefined ? ` (value: ${e.value})` : '';\n          return `${path}: ${message}${value}`;\n        })\n        .join('; ');\n    }\n    return err?.error?.message || error.message;\n  }\n\n  // если строка\n  if (typeof error === 'string') {\n    return error;\n  }\n\n  // если объект\n  if (typeof error === 'object' && error !== null) {\n    if ('error' in error && 'details' in (error as any).error) {\n      const details = (error as any).error.details;\n      if (details.errors && Array.isArray(details.errors)) {\n        return details.errors\n          .map((e: any) => {\n            const path = e.path?.join('.') || 'unknown';\n            const message = e.message || 'Unknown validation error';\n            const value = e.value !== undefined ? ` (value: ${e.value})` : '';\n            return `${path}: ${message}${value}`;\n          })\n          .join('; ');\n      }\n      return (error as any).error.message || JSON.stringify(error);\n    }\n    return JSON.stringify(error);\n  }\n\n  return 'Unknown error';\n};\n\nexport const parseZodError = (error?: ZodError): string => {\n  if (!error) {\n    return 'Unknown validation error';\n  }\n  return error.errors.map((issue: ZodIssue) => {\n    const path = issue.path.length > 0 ? issue.path.join(\" → \") : \"root\";\n    return `${path}: ${issue.message}`;\n  }).join('\\n');\n}\n\nexport const errorIs404 = (error: unknown): boolean => {\n  if (error instanceof HttpErrorResponse) {\n    return error.status === 404;\n  }\n  return false;\n}\n", "import {Product} from '../../features/products/service/Product';\nimport {CategoryProduct} from '../../features/settings/service/models/CategoryProduct';\nimport {CategoryProductDTO} from '../service/db/shemes/CategoryProduct.scheme';\n\nexport const productToFormValue = (product?: Product) => {\n  return {\n    name: product?.name || null,\n    amount: product?.amount || null,\n    unit: product?.unit || 'gram',\n    price: product?.price || null,\n    source: product?.source || null,\n    brand: product?.brand || null,\n    notes: product?.notes || null,\n    category_id: product?.category_id?.toUUID() || null,\n  }\n}\n\nexport const categoryProductToFormValue = (category: CategoryProduct) => {\n  return {\n    name: category.name || null,\n  }\n};\n\nexport const categoryProductDTOFromFormValue = (categoryFormValue: any): CategoryProductDTO => {\n  return {\n    name: categoryFormValue.name || '',\n  }\n}\n\nexport const hasMicroPrice = (price: number) => {\n  if (!price) return false;\n  return price < 0.01;\n}\n", "import {Recipe} from '../../features/recipes/service/models/Recipe';\nimport {CategoryRecipe} from '../../features/settings/service/models/CategoryRecipe';\nimport {CategoryRecipeDTO} from '../service/db/shemes/CategoryRecipe.scheme';\n\nexport const recipeToFormValue = (recipe: Recipe) => {\n  return {\n    name: recipe.name,\n    description: recipe.description,\n    ingredients: recipe.ingredients.map((ingredient) => {\n      return {\n        name: ingredient.name,\n        amount: ingredient.amount,\n        unit: ingredient.unit,\n      };\n    }),\n    portions: recipe.portions,\n    uuid: recipe.uuid,\n    category_id: recipe.category_id?.uuid ? {\n      uuid: recipe.category_id?.uuid,\n    } : null,\n    tags: recipe.tags?.map((tag) => tag.toString()) || [],\n    master: recipe.master || false,\n  }\n}\n\nexport const categoryRecipeToFormValue = (category: CategoryRecipe) => {\n  return {\n    name: category.name,\n  }\n};\n\nexport const categoryRecipeDTOFromFormValue = (categoryFormValue: any): CategoryRecipeDTO => {\n  return {\n    name: categoryFormValue.name,\n  }\n}\n", "export const groupBy = (array: any[], key: string) => {\n  return array.reduce((result: any, currentItem: any) => {\n    const groupKey = currentItem[key] || 'unknown';\n    if (!result[groupKey]) {\n      result[groupKey] = [];\n    }\n    result[groupKey].push(currentItem);\n    return result;\n  }, {});\n}\n", "export const parseFloatingNumber = (value :any) => {\n  if (typeof value === 'number') {\n    return value;\n  }\n  if (typeof value === 'string') {\n    // Заменяем запятую на точку\n    const normalized = value.replace(',', '.');\n    const parsed = parseFloat(normalized);\n    return isNaN(parsed) ? 0 : parsed;\n  }\n  return 0;\n}\n"],
  "mappings": "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",
  "names": []
}
