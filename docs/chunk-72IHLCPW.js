import{a as Pr,c as io,e as oo,w as ao,x as gn}from"./chunk-XGF5EUNH.js";import{$ as Er,$b as Or,Ab as Wi,Ac as eo,Bb as $i,Bc as fe,Cc as to,D as ji,Gb as xr,Hb as Mr,Hc as no,Ja as ot,Lb as Ir,Mb as zi,Mc as ro,Pb as st,Qb as yn,Rb as qi,Sb as Yi,Z as fn,Za as Vr,Zb as Qi,_ as Pe,_b as Xi,a as ee,aa as dn,b as ie,bb as Sr,ca as ze,cb as W,d as Ts,e as ks,f as te,hb as Li,hc as Re,ib as mn,ic as Zi,jb as oe,la as Gi,lb as ce,m as Bi,ma as Ui,mb as vn,ob as Hi,qc as Ji,r as Ni,sa as Vt,ub as St,vc as Fe,wa as hn,wb as at,wc as xt,x as Ki,xa as pn,za as Ar}from"./chunk-AOSYXQIS.js";var Yo=Ts((Ur,Lr)=>{"use strict";(function(u,a){typeof Ur=="object"&&typeof Lr<"u"?Lr.exports=a():typeof define=="function"&&define.amd?define(a):(u=typeof globalThis<"u"?globalThis:u||self,u.Dexie=a())})(Ur,function(){"use strict";var u=function(e,t){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},u(e,t)};function a(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");u(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},i.apply(this,arguments)};function d(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var y=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,P=Object.keys,N=Array.isArray;typeof Promise<"u"&&!y.Promise&&(y.Promise=Promise);function L(e,t){return typeof t!="object"||P(t).forEach(function(n){e[n]=t[n]}),e}var ne=Object.getPrototypeOf,Y={}.hasOwnProperty;function Q(e,t){return Y.call(e,t)}function we(e,t){typeof t=="function"&&(t=t(ne(e))),(typeof Reflect>"u"?P:Reflect.ownKeys)(t).forEach(function(n){Ce(e,n,t[n])})}var Hr=Object.defineProperty;function Ce(e,t,n,r){Hr(e,t,L(n&&Q(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ye(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Ce(e.prototype,"constructor",e),{extend:we.bind(null,e.prototype)}}}}var ea=Object.getOwnPropertyDescriptor;function Wr(e,t){var n=ea(e,t),r;return n||(r=ne(e))&&Wr(r,t)}var ta=[].slice;function kt(e,t,n){return ta.call(e,t,n)}function $r(e,t){return t(e)}function ct(e){if(!e)throw new Error("Assertion Failed")}function zr(e){y.setImmediate?setImmediate(e):setTimeout(e,0)}function na(e,t){return e.reduce(function(n,r,o){var s=t(r,o);return s&&(n[s[0]]=s[1]),n},{})}function ye(e,t){if(typeof t=="string"&&Q(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,o=t.length;r<o;++r){var s=ye(e,t[r]);n.push(s)}return n}var l=t.indexOf(".");if(l!==-1){var c=e[t.substr(0,l)];return c==null?void 0:ye(c,t.substr(l+1))}}function ae(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ct(typeof n!="string"&&"length"in n);for(var r=0,o=t.length;r<o;++r)ae(e,t[r],n[r])}else{var s=t.indexOf(".");if(s!==-1){var l=t.substr(0,s),c=t.substr(s+1);if(c==="")n===void 0?N(e)&&!isNaN(parseInt(l))?e.splice(l,1):delete e[l]:e[l]=n;else{var f=e[l];(!f||!Q(e,l))&&(f=e[l]={}),ae(f,c,n)}}else n===void 0?N(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ra(e,t){typeof t=="string"?ae(e,t,void 0):"length"in t&&[].map.call(t,function(n){ae(e,n,void 0)})}function qr(e){var t={};for(var n in e)Q(e,n)&&(t[n]=e[n]);return t}var ia=[].concat;function Yr(e){return ia.apply([],e)}var oa="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Yr([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return y[e]}),Qr=new Set(oa.map(function(e){return y[e]}));function Xr(e){var t={};for(var n in e)if(Q(e,n)){var r=e[n];t[n]=!r||typeof r!="object"||Qr.has(r.constructor)?r:Xr(r)}return t}function aa(e){for(var t in e)if(Q(e,t))return!1;return!0}var ft=null;function ke(e){ft=new WeakMap;var t=Rn(e);return ft=null,t}function Rn(e){if(!e||typeof e!="object")return e;var t=ft.get(e);if(t)return t;if(N(e)){t=[],ft.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Rn(e[n]))}else if(Qr.has(e.constructor))t=e;else{var o=ne(e);t=o===Object.prototype?{}:Object.create(o),ft.set(e,t);for(var s in e)Q(e,s)&&(t[s]=Rn(e[s]))}return t}var sa={}.toString;function Fn(e){return sa.call(e).slice(8,-1)}var Tn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ua=typeof Tn=="symbol"?function(e){var t;return e!=null&&(t=e[Tn])&&t.apply(e)}:function(){return null};function Be(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n>=0}var Qe={};function ge(e){var t,n,r,o;if(arguments.length===1){if(N(e))return e.slice();if(this===Qe&&typeof e=="string")return[e];if(o=ua(e)){for(n=[];r=o.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var kn=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},la=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Zr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Bn=la.concat(Zr),ca={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Xe(e,t){this.name=e,this.message=t}Ye(Xe).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Jr(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,o){return o.indexOf(n)===r}).join(`
`)}function Bt(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Jr(e,t)}Ye(Bt).from(Xe);function Ze(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Jr(e,this.failures)}Ye(Ze).from(Xe);var Nn=Bn.reduce(function(e,t){return e[t]=t+"Error",e},{}),fa=Xe,T=Bn.reduce(function(e,t){var n=t+"Error";function r(o,s){this.name=n,o?typeof o=="string"?(this.message="".concat(o).concat(s?`
 `+s:""),this.inner=s||null):typeof o=="object"&&(this.message="".concat(o.name," ").concat(o.message),this.inner=o):(this.message=ca[t]||n,this.inner=null)}return Ye(r).from(fa),e[t]=r,e},{});T.Syntax=SyntaxError,T.Type=TypeError,T.Range=RangeError;var ei=Zr.reduce(function(e,t){return e[t+"Error"]=T[t],e},{});function da(e,t){if(!e||e instanceof Xe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ei[e.name])return e;var n=new ei[e.name](t||e.message,e);return"stack"in e&&Ce(n,"stack",{get:function(){return this.inner.stack}}),n}var Nt=Bn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=T[t]),e},{});Nt.ModifyError=Bt,Nt.DexieError=Xe,Nt.BulkError=Ze;function H(){}function dt(e){return e}function ha(e,t){return e==null||e===dt?t:function(n){return t(e(n))}}function Ne(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function pa(e,t){return e===H?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ne(r,this.onsuccess):r),o&&(this.onerror=this.onerror?Ne(o,this.onerror):o),s!==void 0?s:n}}function ma(e,t){return e===H?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ne(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ne(r,this.onerror):r)}}function va(e,t){return e===H?t:function(n){var r=e.apply(this,arguments);L(n,r);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var l=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Ne(o,this.onsuccess):o),s&&(this.onerror=this.onerror?Ne(s,this.onerror):s),r===void 0?l===void 0?void 0:l:L(r,l)}}function ya(e,t){return e===H?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Kn(e,t){return e===H?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,o=arguments.length,s=new Array(o);o--;)s[o]=arguments[o];return n.then(function(){return t.apply(r,s)})}return t.apply(this,arguments)}}var he=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ti(e,t){he=e}var ht={},ni=100,jn=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,ne(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,ne(t),e]}(),ri=jn[0],ii=jn[1],ga=jn[2],_a=ii&&ii.then,Ke=ri&&ri.constructor,Gn=!!ga;function ba(){queueMicrotask(Ca)}var pt=function(e,t){mt.push([e,t]),Kt&&(ba(),Kt=!1)},Un=!0,Kt=!0,je=[],jt=[],Ln=dt,De={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:H,pgp:!1,env:{},finalize:H},R=De,mt=[],Ge=0,Gt=[];function M(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=R;if(typeof e!="function"){if(e!==ht)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Wn(this,this._value);return}this._state=null,this._value=null,++t.ref,ai(this,e)}var Hn={get:function(){var e=R,t=Wt;function n(r,o){var s=this,l=!e.global&&(e!==R||t!==Wt),c=l&&!Ae(),f=new M(function(h,v){$n(s,new oi(li(r,e,l,c),li(o,e,l,c),h,v,e))});return this._consoleTask&&(f._consoleTask=this._consoleTask),f}return n.prototype=ht,n},set:function(e){Ce(this,"then",e&&e.prototype===ht?Hn:{get:function(){return e},set:Hn.set})}};we(M.prototype,{then:Hn,_then:function(e,t){$n(this,new oi(null,null,e,t,R))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Ut(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Ut(r)})},finally:function(e){return this.then(function(t){return M.resolve(e()).then(function(){return t})},function(t){return M.resolve(e()).then(function(){return Ut(t)})})},timeout:function(e,t){var n=this;return e<1/0?new M(function(r,o){var s=setTimeout(function(){return o(new T.Timeout(t))},e);n.then(r,o).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Ce(M.prototype,Symbol.toStringTag,"Dexie.Promise"),De.env=ui();function oi(e,t,n,r,o){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=o}we(M,{all:function(){var e=ge.apply(null,arguments).map($t);return new M(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(o,s){return M.resolve(o).then(function(l){e[s]=l,--r||t(e)},n)})})},resolve:function(e){if(e instanceof M)return e;if(e&&typeof e.then=="function")return new M(function(n,r){e.then(n,r)});var t=new M(ht,!0,e);return t},reject:Ut,race:function(){var e=ge.apply(null,arguments).map($t);return new M(function(t,n){e.map(function(r){return M.resolve(r).then(t,n)})})},PSD:{get:function(){return R},set:function(e){return R=e}},totalEchoes:{get:function(){return Wt}},newPSD:Ee,usePSD:Ue,scheduler:{get:function(){return pt},set:function(e){pt=e}},rejectionMapper:{get:function(){return Ln},set:function(e){Ln=e}},follow:function(e,t){return new M(function(n,r){return Ee(function(o,s){var l=R;l.unhandleds=[],l.onunhandled=s,l.finalize=Ne(function(){var c=this;Da(function(){c.unhandleds.length===0?o():s(c.unhandleds[0])})},l.finalize),e()},t,n,r)})}}),Ke&&(Ke.allSettled&&Ce(M,"allSettled",function(){var e=ge.apply(null,arguments).map($t);return new M(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(o,s){return M.resolve(o).then(function(l){return r[s]={status:"fulfilled",value:l}},function(l){return r[s]={status:"rejected",reason:l}}).then(function(){return--n||t(r)})})})}),Ke.any&&typeof AggregateError<"u"&&Ce(M,"any",function(){var e=ge.apply(null,arguments).map($t);return new M(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach(function(s,l){return M.resolve(s).then(function(c){return t(c)},function(c){o[l]=c,--r||n(new AggregateError(o))})})})}),Ke.withResolvers&&(M.withResolvers=Ke.withResolvers));function ai(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Je();n&&typeof n.then=="function"?ai(e,function(o,s){n instanceof M?n._then(o,s):n.then(o,s)}):(e._state=!0,e._value=n,si(e)),r&&et()}},Wn.bind(null,e))}catch(n){Wn(e,n)}}function Wn(e,t){if(jt.push(t),e._state===null){var n=e._lib&&Je();t=Ln(t),e._state=!1,e._value=t,Ea(e),si(e),n&&et()}}function si(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)$n(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),Ge===0&&(++Ge,pt(function(){--Ge===0&&zn()},[]))}function $n(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ge,pt(wa,[n,e,t])}function wa(e,t,n){try{var r,o=t._value;!t._state&&jt.length&&(jt=[]),r=he&&t._consoleTask?t._consoleTask.run(function(){return e(o)}):e(o),!t._state&&jt.indexOf(o)===-1&&Aa(t),n.resolve(r)}catch(s){n.reject(s)}finally{--Ge===0&&zn(),--n.psd.ref||n.psd.finalize()}}function Ca(){Ue(De,function(){Je()&&et()})}function Je(){var e=Un;return Un=!1,Kt=!1,e}function et(){var e,t,n;do for(;mt.length>0;)for(e=mt,mt=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(mt.length>0);Un=!0,Kt=!0}function zn(){var e=je;je=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Gt.slice(0),n=t.length;n;)t[--n]()}function Da(e){function t(){e(),Gt.splice(Gt.indexOf(t),1)}Gt.push(t),++Ge,pt(function(){--Ge===0&&zn()},[])}function Ea(e){je.some(function(t){return t._value===e._value})||je.push(e)}function Aa(e){for(var t=je.length;t;)if(je[--t]._value===e._value){je.splice(t,1);return}}function Ut(e){return new M(ht,!1,e)}function $(e,t){var n=R;return function(){var r=Je(),o=R;try{return Ve(n,!0),e.apply(this,arguments)}catch(s){t&&t(s)}finally{Ve(o,!1),r&&et()}}}var X={awaits:0,echoes:0,id:0},Va=0,Lt=[],Ht=0,Wt=0,Sa=0;function Ee(e,t,n,r){var o=R,s=Object.create(o);s.parent=o,s.ref=0,s.global=!1,s.id=++Sa,De.env,s.env=Gn?{Promise:M,PromiseProp:{value:M,configurable:!0,writable:!0},all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject}:{},t&&L(s,t),++o.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=Ue(s,e,n,r);return s.ref===0&&s.finalize(),l}function tt(){return X.id||(X.id=++Va),++X.awaits,X.echoes+=ni,X.id}function Ae(){return X.awaits?(--X.awaits===0&&(X.id=0),X.echoes=X.awaits*ni,!0):!1}(""+_a).indexOf("[native code]")===-1&&(tt=Ae=H);function $t(e){return X.echoes&&e&&e.constructor===Ke?(tt(),e.then(function(t){return Ae(),t},function(t){return Ae(),q(t)})):e}function xa(e){++Wt,(!X.echoes||--X.echoes===0)&&(X.echoes=X.awaits=X.id=0),Lt.push(R),Ve(e,!0)}function Ma(){var e=Lt[Lt.length-1];Lt.pop(),Ve(e,!1)}function Ve(e,t){var n=R;if((t?X.echoes&&(!Ht++||e!==R):Ht&&(!--Ht||e!==R))&&queueMicrotask(t?xa.bind(null,e):Ma),e!==R&&(R=e,n===De&&(De.env=ui()),Gn)){var r=De.env.Promise,o=e.env;(n.global||e.global)&&(Object.defineProperty(y,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function ui(){var e=y.Promise;return Gn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(y,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ue(e,t,n,r,o){var s=R;try{return Ve(e,!0),t(n,r,o)}finally{Ve(s,!1)}}function li(e,t,n,r){return typeof e!="function"?e:function(){var o=R;n&&tt(),Ve(t,!0);try{return e.apply(this,arguments)}finally{Ve(o,!1),r&&queueMicrotask(Ae)}}}function qn(e){Promise===Ke&&X.echoes===0?Ht===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var q=M.reject;function Yn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!R.letThrough&&!e._vip){if(e._state.openComplete)return q(new T.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return q(new T.DatabaseClosed);e.open().catch(H)}return e._state.dbReadyPromise.then(function(){return Yn(e,t,n,r)})}else{var o=e._createTransaction(t,n,e._dbSchema);try{o.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===Nn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return Yn(e,t,n,r)})):q(s)}return o._promise(t,function(s,l){return Ee(function(){return R.trans=o,r(s,l,o)})}).then(function(s){if(t==="readwrite")try{o.idbtrans.commit()}catch{}return t==="readonly"?s:o._completion.then(function(){return s})})}}var ci="4.0.11",Le="\uFFFF",Qn=-1/0,_e="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",fi="String expected.",nt=[],zt="__dbnames",Xn="readonly",Zn="readwrite";function He(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var di={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function qt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=ke(t),delete t[e]),t}:function(t){return t}}function hi(){throw T.Type()}function G(e,t){try{var n=pi(e),r=pi(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Oa(mi(e),mi(t));case"Array":return Ia(e,t)}}catch{}return NaN}function Ia(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,s=0;s<o;++s){var l=G(e[s],t[s]);if(l!==0)return l}return n===r?0:n<r?-1:1}function Oa(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,s=0;s<o;++s)if(e[s]!==t[s])return e[s]<t[s]?-1:1;return n===r?0:n<r?-1:1}function pi(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Fn(e);return n==="ArrayBuffer"?"binary":n}function mi(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var vi=function(){function e(){}return e.prototype._trans=function(t,n,r){var o=this._tx||R.trans,s=this.name,l=he&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function c(v,p,b){if(!b.schema[s])throw new T.NotFound("Table "+s+" not part of transaction");return n(b.idbtrans,b)}var f=Je();try{var h=o&&o.db._novip===this.db._novip?o===R.trans?o._promise(t,c,r):Ee(function(){return o._promise(t,c,r)},{trans:o,transless:R.transless||R}):Yn(this.db,t,[this.name],c);return l&&(h._consoleTask=l,h=h.catch(function(v){return console.trace(v),q(v)})),h}finally{f&&et()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):t==null?q(new T.Type("Invalid argument to Table.get()")):this._trans("readonly",function(o){return r.core.get({trans:o,key:t}).then(function(s){return r.hook.reading.fire(s)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(N(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var n=P(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(v){if(v.compound&&n.every(function(b){return v.keyPath.indexOf(b)>=0})){for(var p=0;p<n.length;++p)if(n.indexOf(v.keyPath[p])===-1)return!1;return!0}return!1}).sort(function(v,p){return v.keyPath.length-p.keyPath.length})[0];if(r&&this.db._maxKey!==Le){var o=r.keyPath.slice(0,n.length);return this.where(o).equals(o.map(function(v){return t[v]}))}!r&&he&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var s=this.schema.idxByName;function l(v,p){return G(v,p)===0}var c=n.reduce(function(v,p){var b=v[0],V=v[1],m=s[p],g=t[p];return[b||m,b||!m?He(V,m&&m.multi?function(_){var E=ye(_,p);return N(E)&&E.some(function(C){return l(g,C)})}:function(_){return l(g,ye(_,p))}):V]},[null,null]),f=c[0],h=c[1];return f?this.where(f.name).equals(t[f.keyPath]).filter(h):r?this.filter(h):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,N(t)?"[".concat(t.join("+"),"]"):t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){var n=this,r=n.db,o=n.name;this.schema.mappedClass=t,t.prototype instanceof hi&&(t=function(f){a(h,f);function h(){return f!==null&&f.apply(this,arguments)||this}return Object.defineProperty(h.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),h.prototype.table=function(){return o},h}(t));for(var s=new Set,l=t.prototype;l;l=ne(l))Object.getOwnPropertyNames(l).forEach(function(f){return s.add(f)});var c=function(f){if(!f)return f;var h=Object.create(t.prototype);for(var v in f)if(!s.has(v))try{h[v]=f[v]}catch{}return h};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=c,this.hook("reading",c),t},e.prototype.defineClass=function(){function t(n){L(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,o=this.schema.primKey,s=o.auto,l=o.keyPath,c=t;return l&&s&&(c=qt(l)(t)),this._trans("readwrite",function(f){return r.core.mutate({trans:f,type:"add",keys:n!=null?[n]:null,values:[c]})}).then(function(f){return f.numFailures?M.reject(f.failures[0]):f.lastResult}).then(function(f){if(l)try{ae(t,l,f)}catch{}return f})},e.prototype.update=function(t,n){if(typeof t=="object"&&!N(t)){var r=ye(t,this.schema.primKey.keyPath);return r===void 0?q(new T.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,o=this.schema.primKey,s=o.auto,l=o.keyPath,c=t;return l&&s&&(c=qt(l)(t)),this._trans("readwrite",function(f){return r.core.mutate({trans:f,type:"put",values:[c],keys:n!=null?[n]:null})}).then(function(f){return f.numFailures?M.reject(f.failures[0]):f.lastResult}).then(function(f){if(l)try{ae(t,l,f)}catch{}return f})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?M.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:di})}).then(function(n){return n.numFailures?M.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(o){return o.map(function(s){return n.hook.reading.fire(s)})})})},e.prototype.bulkAdd=function(t,n,r){var o=this,s=Array.isArray(n)?n:void 0;r=r||(s?void 0:n);var l=r?r.allKeys:void 0;return this._trans("readwrite",function(c){var f=o.schema.primKey,h=f.auto,v=f.keyPath;if(v&&s)throw new T.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var p=t.length,b=v&&h?t.map(qt(v)):t;return o.core.mutate({trans:c,type:"add",keys:s,values:b,wantResults:l}).then(function(V){var m=V.numFailures,g=V.results,_=V.lastResult,E=V.failures,C=l?g:_;if(m===0)return C;throw new Ze("".concat(o.name,".bulkAdd(): ").concat(m," of ").concat(p," operations failed"),E)})})},e.prototype.bulkPut=function(t,n,r){var o=this,s=Array.isArray(n)?n:void 0;r=r||(s?void 0:n);var l=r?r.allKeys:void 0;return this._trans("readwrite",function(c){var f=o.schema.primKey,h=f.auto,v=f.keyPath;if(v&&s)throw new T.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var p=t.length,b=v&&h?t.map(qt(v)):t;return o.core.mutate({trans:c,type:"put",keys:s,values:b,wantResults:l}).then(function(V){var m=V.numFailures,g=V.results,_=V.lastResult,E=V.failures,C=l?g:_;if(m===0)return C;throw new Ze("".concat(o.name,".bulkPut(): ").concat(m," of ").concat(p," operations failed"),E)})})},e.prototype.bulkUpdate=function(t){var n=this,r=this.core,o=t.map(function(c){return c.key}),s=t.map(function(c){return c.changes}),l=[];return this._trans("readwrite",function(c){return r.getMany({trans:c,keys:o,cache:"clone"}).then(function(f){var h=[],v=[];t.forEach(function(b,V){var m=b.key,g=b.changes,_=f[V];if(_){for(var E=0,C=Object.keys(g);E<C.length;E++){var D=C[E],A=g[D];if(D===n.schema.primKey.keyPath){if(G(A,m)!==0)throw new T.Constraint("Cannot update primary key in bulkUpdate()")}else ae(_,D,A)}l.push(V),h.push(m),v.push(_)}});var p=h.length;return r.mutate({trans:c,type:"put",keys:h,values:v,updates:{keys:o,changeSpecs:s}}).then(function(b){var V=b.numFailures,m=b.failures;if(V===0)return p;for(var g=0,_=Object.keys(m);g<_.length;g++){var E=_[g],C=l[Number(E)];if(C!=null){var D=m[E];delete m[E],m[C]=D}}throw new Ze("".concat(n.name,".bulkUpdate(): ").concat(V," of ").concat(p," operations failed"),m)})})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(o){return n.core.mutate({trans:o,type:"delete",keys:t})}).then(function(o){var s=o.numFailures,l=o.lastResult,c=o.failures;if(s===0)return l;throw new Ze("".concat(n.name,".bulkDelete(): ").concat(s," of ").concat(r," operations failed"),c)})},e}();function vt(e){var t={},n=function(c,f){if(f){for(var h=arguments.length,v=new Array(h-1);--h;)v[h-1]=arguments[h];return t[c].subscribe.apply(null,v),e}else if(typeof c=="string")return t[c]};n.addEventType=s;for(var r=1,o=arguments.length;r<o;++r)s(arguments[r]);return n;function s(c,f,h){if(typeof c=="object")return l(c);f||(f=ya),h||(h=H);var v={subscribers:[],fire:h,subscribe:function(p){v.subscribers.indexOf(p)===-1&&(v.subscribers.push(p),v.fire=f(v.fire,p))},unsubscribe:function(p){v.subscribers=v.subscribers.filter(function(b){return b!==p}),v.fire=v.subscribers.reduce(f,h)}};return t[c]=n[c]=v,v}function l(c){P(c).forEach(function(f){var h=c[f];if(N(h))s(f,c[f][0],c[f][1]);else if(h==="asap")var v=s(f,dt,function(){for(var b=arguments.length,V=new Array(b);b--;)V[b]=arguments[b];v.subscribers.forEach(function(m){zr(function(){m.apply(null,V)})})});else throw new T.InvalidArgument("Invalid event config")})}}function yt(e,t){return Ye(t).from({prototype:e}),t}function Pa(e){return yt(vi.prototype,function(n,r,o){this.db=e,this._tx=o,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:vt(null,{creating:[pa,H],reading:[ha,dt],updating:[va,H],deleting:[ma,H]})})}function rt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Jn(e,t){e.filter=He(e.filter,t)}function er(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return He(r(),t())}:t,e.justLimit=n&&!r}function Ra(e,t){e.isMatch=He(e.isMatch,t)}function Yt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new T.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function yi(e,t,n){var r=Yt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Qt(e,t,n,r){var o=e.replayFilter?He(e.filter,e.replayFilter()):e.filter;if(e.or){var s={},l=function(c,f,h){if(!o||o(f,h,function(b){return f.stop(b)},function(b){return f.fail(b)})){var v=f.primaryKey,p=""+v;p==="[object ArrayBuffer]"&&(p=""+new Uint8Array(v)),Q(s,p)||(s[p]=!0,t(c,f,h))}};return Promise.all([e.or._iterate(l,n),gi(yi(e,r,n),e.algorithm,l,!e.keysOnly&&e.valueMapper)])}else return gi(yi(e,r,n),He(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function gi(e,t,n,r){var o=r?function(l,c,f){return n(r(l),c,f)}:n,s=$(o);return e.then(function(l){if(l)return l.start(function(){var c=function(){return l.continue()};(!t||t(l,function(f){return c=f},function(f){l.stop(f),c=H},function(f){l.fail(f),c=H}))&&s(l.value,l,function(f){return c=f}),c()})})}var gt=function(){function e(t){this["@@propmod"]=t}return e.prototype.execute=function(t){var n,r=this["@@propmod"];if(r.add!==void 0){var o=r.add;if(N(o))return d(d([],N(t)?t:[],!0),o,!0).sort();if(typeof o=="number")return(Number(t)||0)+o;if(typeof o=="bigint")try{return BigInt(t)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(r.remove!==void 0){var s=r.remove;if(N(s))return N(t)?t.filter(function(c){return!s.includes(c)}).sort():[];if(typeof s=="number")return Number(t)-s;if(typeof s=="bigint")try{return BigInt(t)-s}catch{return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}var l=(n=r.replacePrefix)===null||n===void 0?void 0:n[0];return l&&typeof t=="string"&&t.startsWith(l)?r.replacePrefix[1]+t.substring(l.length):t},e}(),Fa=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,q.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,q.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=He(n.algorithm,t)},e.prototype._iterate=function(t,n){return Qt(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&L(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return Qt(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var o=n._ctx,s=o.table.core;if(rt(o,!0))return s.count({trans:r,query:{index:Yt(o,s.schema),range:o.range}}).then(function(c){return Math.min(c,o.limit)});var l=0;return Qt(o,function(){return++l,!1},r,s).then(function(){return l})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),o=r[0],s=r.length-1;function l(h,v){return v?l(h[r[v]],v-1):h[o]}var c=this._ctx.dir==="next"?1:-1;function f(h,v){var p=l(h,s),b=l(v,s);return G(p,b)*c}return this.toArray(function(h){return h.sort(f)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var o=n._ctx;if(o.dir==="next"&&rt(o,!0)&&o.limit>0){var s=o.valueMapper,l=Yt(o,o.table.core.schema);return o.table.core.query({trans:r,limit:o.limit,values:!0,query:{index:l,range:o.range}}).then(function(f){var h=f.result;return s?h.map(s):h})}else{var c=[];return Qt(o,function(f){return c.push(f)},r,o.table.core).then(function(){return c})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,rt(n)?er(n,function(){var r=t;return function(o,s){return r===0?!0:r===1?(--r,!1):(s(function(){o.advance(r),r=0}),!1)}}):er(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),er(this._ctx,function(){var n=t;return function(r,o,s){return--n<=0&&o(s),n>=0}},!0),this},e.prototype.until=function(t,n){return Jn(this._ctx,function(r,o,s){return t(r.value)?(o(s),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return Jn(this._ctx,function(n){return t(n.value)}),Ra(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){t(o.key,o)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){t(o.primaryKey,o)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,s){r.push(s.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&rt(n,!0)&&n.limit>0)return this._read(function(o){var s=Yt(n,n.table.core.schema);return n.table.core.query({trans:o,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(function(o){var s=o.result;return s}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,s){r.push(s.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return Jn(this._ctx,function(o){var s=o.primaryKey.toString(),l=Q(r,s);return r[s]=!0,!l}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(o){var s;if(typeof t=="function")s=t;else{var l=P(t),c=l.length;s=function(C){for(var D=!1,A=0;A<c;++A){var w=l[A],S=t[w],I=ye(C,w);S instanceof gt?(ae(C,w,S.execute(I)),D=!0):I!==S&&(ae(C,w,S),D=!0)}return D}}var f=r.table.core,h=f.schema.primaryKey,v=h.outbound,p=h.extractKey,b=200,V=n.db._options.modifyChunkSize;V&&(typeof V=="object"?b=V[f.name]||V["*"]||200:b=V);var m=[],g=0,_=[],E=function(C,D){var A=D.failures,w=D.numFailures;g+=C-w;for(var S=0,I=P(A);S<I.length;S++){var x=I[S];m.push(A[x])}};return n.clone().primaryKeys().then(function(C){var D=rt(r)&&r.limit===1/0&&(typeof t!="function"||t===tr)&&{index:r.index,range:r.range},A=function(w){var S=Math.min(b,C.length-w);return f.getMany({trans:o,keys:C.slice(w,w+S),cache:"immutable"}).then(function(I){for(var x=[],k=[],j=v?[]:null,O=[],K=0;K<S;++K){var B=I[K],U={value:ke(B),primKey:C[w+K]};s.call(U,U.value,U)!==!1&&(U.value==null?O.push(C[w+K]):!v&&G(p(B),p(U.value))!==0?(O.push(C[w+K]),x.push(U.value)):(k.push(U.value),v&&j.push(C[w+K])))}return Promise.resolve(x.length>0&&f.mutate({trans:o,type:"add",values:x}).then(function(F){for(var z in F.failures)O.splice(parseInt(z),1);E(x.length,F)})).then(function(){return(k.length>0||D&&typeof t=="object")&&f.mutate({trans:o,type:"put",keys:j,values:k,criteria:D,changeSpec:typeof t!="function"&&t,isAdditionalChunk:w>0}).then(function(F){return E(k.length,F)})}).then(function(){return(O.length>0||D&&t===tr)&&f.mutate({trans:o,type:"delete",keys:O,criteria:D,isAdditionalChunk:w>0}).then(function(F){return E(O.length,F)})}).then(function(){return C.length>w+S&&A(w+b)})})};return A(0).then(function(){if(m.length>0)throw new Bt("Error modifying one or more objects",m,g,_);return C.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return rt(t)&&(t.isPrimKey||n.type===3)?this._write(function(r){var o=t.table.core.schema.primaryKey,s=n;return t.table.core.count({trans:r,query:{index:o,range:s}}).then(function(l){return t.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(function(c){var f=c.failures;c.lastResult,c.results;var h=c.numFailures;if(h)throw new Bt("Could not delete some values",Object.keys(f).map(function(v){return f[v]}),l-h);return l-h})})}):this.modify(tr)},e}(),tr=function(e,t){return t.value=null};function Ta(e){return yt(Fa.prototype,function(n,r){this.db=e;var o=di,s=null;if(r)try{o=r()}catch(h){s=h}var l=n._ctx,c=l.table,f=c.hook.reading.fire;this._ctx={table:c,index:l.index,isPrimKey:!l.index||c.schema.primKey.keyPath&&l.index===c.schema.primKey.name,range:o,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:s,or:l.or,valueMapper:f!==dt?f:null}})}function ka(e,t){return e<t?-1:e===t?0:1}function Ba(e,t){return e>t?-1:e===t?0:1}function se(e,t,n){var r=e instanceof bi?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function it(e){return new e.Collection(e,function(){return _i("")}).limit(0)}function Na(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Ka(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function ja(e,t,n,r,o,s){for(var l=Math.min(e.length,r.length),c=-1,f=0;f<l;++f){var h=t[f];if(h!==r[f])return o(e[f],n[f])<0?e.substr(0,f)+n[f]+n.substr(f+1):o(e[f],r[f])<0?e.substr(0,f)+r[f]+n.substr(f+1):c>=0?e.substr(0,c)+t[c]+n.substr(c+1):null;o(e[f],h)<0&&(c=f)}return l<r.length&&s==="next"?e+n.substr(e.length):l<e.length&&s==="prev"?e.substr(0,n.length):c<0?null:e.substr(0,c)+r[c]+n.substr(c+1)}function Xt(e,t,n,r){var o,s,l,c,f,h,v,p=n.length;if(!n.every(function(g){return typeof g=="string"}))return se(e,fi);function b(g){o=Na(g),s=Ka(g),l=g==="next"?ka:Ba;var _=n.map(function(E){return{lower:s(E),upper:o(E)}}).sort(function(E,C){return l(E.lower,C.lower)});c=_.map(function(E){return E.upper}),f=_.map(function(E){return E.lower}),h=g,v=g==="next"?"":r}b("next");var V=new e.Collection(e,function(){return Se(c[0],f[p-1]+r)});V._ondirectionchange=function(g){b(g)};var m=0;return V._addAlgorithm(function(g,_,E){var C=g.key;if(typeof C!="string")return!1;var D=s(C);if(t(D,f,m))return!0;for(var A=null,w=m;w<p;++w){var S=ja(C,D,c[w],f[w],l,h);S===null&&A===null?m=w+1:(A===null||l(A,S)>0)&&(A=S)}return _(A!==null?function(){g.continue(A+v)}:E),!1}),V}function Se(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function _i(e){return{type:1,lower:e,upper:e}}var bi=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,o){r=r!==!1,o=o===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||o)&&!(r&&o)?it(this):new this.Collection(this,function(){return Se(t,n,!r,!o)})}catch{return se(this,_e)}},e.prototype.equals=function(t){return t==null?se(this,_e):new this.Collection(this,function(){return _i(t)})},e.prototype.above=function(t){return t==null?se(this,_e):new this.Collection(this,function(){return Se(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?se(this,_e):new this.Collection(this,function(){return Se(t,void 0,!1)})},e.prototype.below=function(t){return t==null?se(this,_e):new this.Collection(this,function(){return Se(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?se(this,_e):new this.Collection(this,function(){return Se(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?se(this,fi):this.between(t,t+Le,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Xt(this,function(n,r){return n.indexOf(r[0])===0},[t],Le)},e.prototype.equalsIgnoreCase=function(t){return Xt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=ge.apply(Qe,arguments);return t.length===0?it(this):Xt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=ge.apply(Qe,arguments);return t.length===0?it(this):Xt(this,function(n,r){return r.some(function(o){return n.indexOf(o)===0})},t,Le)},e.prototype.anyOf=function(){var t=this,n=ge.apply(Qe,arguments),r=this._cmp;try{n.sort(r)}catch{return se(this,_e)}if(n.length===0)return it(this);var o=new this.Collection(this,function(){return Se(n[0],n[n.length-1])});o._ondirectionchange=function(l){r=l==="next"?t._ascending:t._descending,n.sort(r)};var s=0;return o._addAlgorithm(function(l,c,f){for(var h=l.key;r(h,n[s])>0;)if(++s,s===n.length)return c(f),!1;return r(h,n[s])===0?!0:(c(function(){l.continue(n[s])}),!1)}),o},e.prototype.notEqual=function(t){return this.inAnyRange([[Qn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=ge.apply(Qe,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return se(this,_e)}var n=t.reduce(function(r,o){return r?r.concat([[r[r.length-1][1],o]]):[[Qn,o]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,o=this._cmp,s=this._ascending,l=this._descending,c=this._min,f=this._max;if(t.length===0)return it(this);if(!t.every(function(w){return w[0]!==void 0&&w[1]!==void 0&&s(w[0],w[1])<=0}))return se(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",T.InvalidArgument);var h=!n||n.includeLowers!==!1,v=n&&n.includeUppers===!0;function p(w,S){for(var I=0,x=w.length;I<x;++I){var k=w[I];if(o(S[0],k[1])<0&&o(S[1],k[0])>0){k[0]=c(k[0],S[0]),k[1]=f(k[1],S[1]);break}}return I===x&&w.push(S),w}var b=s;function V(w,S){return b(w[0],S[0])}var m;try{m=t.reduce(p,[]),m.sort(V)}catch{return se(this,_e)}var g=0,_=v?function(w){return s(w,m[g][1])>0}:function(w){return s(w,m[g][1])>=0},E=h?function(w){return l(w,m[g][0])>0}:function(w){return l(w,m[g][0])>=0};function C(w){return!_(w)&&!E(w)}var D=_,A=new this.Collection(this,function(){return Se(m[0][0],m[m.length-1][1],!h,!v)});return A._ondirectionchange=function(w){w==="next"?(D=_,b=s):(D=E,b=l),m.sort(V)},A._addAlgorithm(function(w,S,I){for(var x=w.key;D(x);)if(++g,g===m.length)return S(I),!1;return C(x)?!0:(r._cmp(x,m[g][1])===0||r._cmp(x,m[g][0])===0||S(function(){b===s?w.continue(m[g][0]):w.continue(m[g][1])}),!1)}),A},e.prototype.startsWithAnyOf=function(){var t=ge.apply(Qe,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?it(this):this.inAnyRange(t.map(function(n){return[n,n+Le]})):se(this,"startsWithAnyOf() only works with strings")},e}();function Ga(e){return yt(bi.prototype,function(n,r,o){if(this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:o},this._cmp=this._ascending=G,this._descending=function(s,l){return G(l,s)},this._max=function(s,l){return G(s,l)>0?s:l},this._min=function(s,l){return G(s,l)<0?s:l},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new T.MissingAPI})}function pe(e){return $(function(t){return _t(t),e(t.target.error),!1})}function _t(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var bt="storagemutated",nr="x-storagemutated-1",xe=vt(null,bt),Ua=function(){function e(){}return e.prototype._lock=function(){return ct(!R.global),++this._reculock,this._reculock===1&&!R.global&&(R.lockOwnerFor=this),this},e.prototype._unlock=function(){if(ct(!R.global),--this._reculock===0)for(R.global||(R.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Ue(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&R.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,o=this.db._state.dbOpenError;if(ct(!this.idbtrans),!t&&!r)switch(o&&o.name){case"DatabaseClosedError":throw new T.DatabaseClosed(o);case"MissingAPIError":throw new T.MissingAPI(o.message,o);default:throw new T.OpenFailed(o)}if(!this.active)throw new T.TransactionInactive;return ct(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=$(function(s){_t(s),n._reject(t.error)}),t.onabort=$(function(s){_t(s),n.active&&n._reject(new T.Abort(t.error)),n.active=!1,n.on("abort").fire(s)}),t.oncomplete=$(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&xe.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var o=this;if(t==="readwrite"&&this.mode!=="readwrite")return q(new T.ReadOnly("Transaction is readonly"));if(!this.active)return q(new T.TransactionInactive);if(this._locked())return new M(function(l,c){o._blockedFuncs.push([function(){o._promise(t,n,r).then(l,c)},R])});if(r)return Ee(function(){var l=new M(function(c,f){o._lock();var h=n(c,f,o);h&&h.then&&h.then(c,f)});return l.finally(function(){return o._unlock()}),l._lib=!0,l});var s=new M(function(l,c){var f=n(l,c,o);f&&f.then&&f.then(l,c)});return s._lib=!0,s},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=M.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var o=n.idbtrans.objectStore(n.storeNames[0]);(function l(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(o.get(-1/0).onsuccess=l)})()}var s=n._waitingFor;return new M(function(l,c){r.then(function(f){return n._waitingQueue.push($(l.bind(null,f)))},function(f){return n._waitingQueue.push($(c.bind(null,f)))}).finally(function(){n._waitingFor===s&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new T.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(Q(n,t))return n[t];var r=this.schema[t];if(!r)throw new T.NotFound("Table "+t+" not part of transaction");var o=new this.db.Table(t,r,this);return o.core=this.db.core.table(t),n[t]=o,o},e}();function La(e){return yt(Ua.prototype,function(n,r,o,s,l){var c=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=o,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=vt(this,"complete","error","abort"),this.parent=l||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new M(function(f,h){c._resolve=f,c._reject=h}),this._completion.then(function(){c.active=!1,c.on.complete.fire()},function(f){var h=c.active;return c.active=!1,c.on.error.fire(f),c.parent?c.parent._reject(f):h&&c.idbtrans&&c.idbtrans.abort(),q(f)})})}function rr(e,t,n,r,o,s,l){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:s,src:(n&&!l?"&":"")+(r?"*":"")+(o?"++":"")+wi(t)}}function wi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function ir(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:na(n,function(r){return[r.name,r]})}}function Ha(e){return e.length===1?e[0]:e}var wt=function(e){try{return e.only([[]]),wt=function(){return[[]]},[[]]}catch{return wt=function(){return Le},Le}};function or(e){return e==null?function(){}:typeof e=="string"?Wa(e):function(t){return ye(t,e)}}function Wa(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return ye(n,e)}}function Ci(e){return[].slice.call(e)}var $a=0;function Ct(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function za(e,t,n){function r(p,b){var V=Ci(p.objectStoreNames);return{schema:{name:p.name,tables:V.map(function(m){return b.objectStore(m)}).map(function(m){var g=m.keyPath,_=m.autoIncrement,E=N(g),C=g==null,D={},A={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:C,compound:E,keyPath:g,autoIncrement:_,unique:!0,extractKey:or(g)},indexes:Ci(m.indexNames).map(function(w){return m.index(w)}).map(function(w){var S=w.name,I=w.unique,x=w.multiEntry,k=w.keyPath,j=N(k),O={name:S,compound:j,keyPath:k,unique:I,multiEntry:x,extractKey:or(k)};return D[Ct(k)]=O,O}),getIndexByKeyPath:function(w){return D[Ct(w)]}};return D[":id"]=A.primaryKey,g!=null&&(D[Ct(g)]=A.primaryKey),A})},hasGetAll:V.length>0&&"getAll"in b.objectStore(V[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function o(p){if(p.type===3)return null;if(p.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var b=p.lower,V=p.upper,m=p.lowerOpen,g=p.upperOpen,_=b===void 0?V===void 0?null:t.upperBound(V,!!g):V===void 0?t.lowerBound(b,!!m):t.bound(b,V,!!m,!!g);return _}function s(p){var b=p.name;function V(_){var E=_.trans,C=_.type,D=_.keys,A=_.values,w=_.range;return new Promise(function(S,I){S=$(S);var x=E.objectStore(b),k=x.keyPath==null,j=C==="put"||C==="add";if(!j&&C!=="delete"&&C!=="deleteRange")throw new Error("Invalid operation type: "+C);var O=(D||A||{length:1}).length;if(D&&A&&D.length!==A.length)throw new Error("Given keys array must have same length as given values array.");if(O===0)return S({numFailures:0,failures:{},results:[],lastResult:void 0});var K,B=[],U=[],F=0,z=function(ve){++F,_t(ve)};if(C==="deleteRange"){if(w.type===4)return S({numFailures:F,failures:U,results:[],lastResult:void 0});w.type===3?B.push(K=x.clear()):B.push(K=x.delete(o(w)))}else{var J=j?k?[A,D]:[A,null]:[D,null],me=J[0],re=J[1];if(j)for(var le=0;le<O;++le)B.push(K=re&&re[le]!==void 0?x[C](me[le],re[le]):x[C](me[le])),K.onerror=z;else for(var le=0;le<O;++le)B.push(K=x[C](me[le])),K.onerror=z}var Oe=function(ve){var At=ve.target.result;B.forEach(function(de,cn){return de.error!=null&&(U[cn]=de.error)}),S({numFailures:F,failures:U,results:C==="delete"?D:B.map(function(de){return de.result}),lastResult:At})};K.onerror=function(ve){z(ve),Oe(ve)},K.onsuccess=Oe})}function m(_){var E=_.trans,C=_.values,D=_.query,A=_.reverse,w=_.unique;return new Promise(function(S,I){S=$(S);var x=D.index,k=D.range,j=E.objectStore(b),O=x.isPrimaryKey?j:j.index(x.name),K=A?w?"prevunique":"prev":w?"nextunique":"next",B=C||!("openKeyCursor"in O)?O.openCursor(o(k),K):O.openKeyCursor(o(k),K);B.onerror=pe(I),B.onsuccess=$(function(U){var F=B.result;if(!F){S(null);return}F.___id=++$a,F.done=!1;var z=F.continue.bind(F),J=F.continuePrimaryKey;J&&(J=J.bind(F));var me=F.advance.bind(F),re=function(){throw new Error("Cursor not started")},le=function(){throw new Error("Cursor not stopped")};F.trans=E,F.stop=F.continue=F.continuePrimaryKey=F.advance=re,F.fail=$(I),F.next=function(){var Oe=this,ve=1;return this.start(function(){return ve--?Oe.continue():Oe.stop()}).then(function(){return Oe})},F.start=function(Oe){var ve=new Promise(function(de,cn){de=$(de),B.onerror=pe(cn),F.fail=cn,F.stop=function(Fs){F.stop=F.continue=F.continuePrimaryKey=F.advance=le,de(Fs)}}),At=function(){if(B.result)try{Oe()}catch(de){F.fail(de)}else F.done=!0,F.start=function(){throw new Error("Cursor behind last entry")},F.stop()};return B.onsuccess=$(function(de){B.onsuccess=At,At()}),F.continue=z,F.continuePrimaryKey=J,F.advance=me,At(),ve},S(F)},I)})}function g(_){return function(E){return new Promise(function(C,D){C=$(C);var A=E.trans,w=E.values,S=E.limit,I=E.query,x=S===1/0?void 0:S,k=I.index,j=I.range,O=A.objectStore(b),K=k.isPrimaryKey?O:O.index(k.name),B=o(j);if(S===0)return C({result:[]});if(_){var U=w?K.getAll(B,x):K.getAllKeys(B,x);U.onsuccess=function(me){return C({result:me.target.result})},U.onerror=pe(D)}else{var F=0,z=w||!("openKeyCursor"in K)?K.openCursor(B):K.openKeyCursor(B),J=[];z.onsuccess=function(me){var re=z.result;if(!re)return C({result:J});if(J.push(w?re.value:re.primaryKey),++F===S)return C({result:J});re.continue()},z.onerror=pe(D)}})}}return{name:b,schema:p,mutate:V,getMany:function(_){var E=_.trans,C=_.keys;return new Promise(function(D,A){D=$(D);for(var w=E.objectStore(b),S=C.length,I=new Array(S),x=0,k=0,j,O=function(F){var z=F.target;(I[z._pos]=z.result)!=null,++k===x&&D(I)},K=pe(A),B=0;B<S;++B){var U=C[B];U!=null&&(j=w.get(C[B]),j._pos=B,j.onsuccess=O,j.onerror=K,++x)}x===0&&D(I)})},get:function(_){var E=_.trans,C=_.key;return new Promise(function(D,A){D=$(D);var w=E.objectStore(b),S=w.get(C);S.onsuccess=function(I){return D(I.target.result)},S.onerror=pe(A)})},query:g(f),openCursor:m,count:function(_){var E=_.query,C=_.trans,D=E.index,A=E.range;return new Promise(function(w,S){var I=C.objectStore(b),x=D.isPrimaryKey?I:I.index(D.name),k=o(A),j=k?x.count(k):x.count();j.onsuccess=$(function(O){return w(O.target.result)}),j.onerror=pe(S)})}}}var l=r(e,n),c=l.schema,f=l.hasGetAll,h=c.tables.map(function(p){return s(p)}),v={};return h.forEach(function(p){return v[p.name]=p}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(p){var b=v[p];if(!b)throw new Error("Table '".concat(p,"' not found"));return v[p]},MIN_KEY:-1/0,MAX_KEY:wt(t),schema:c}}function qa(e,t){return t.reduce(function(n,r){var o=r.create;return i(i({},n),o(n))},e)}function Ya(e,t,n,r){var o=n.IDBKeyRange;n.indexedDB;var s=qa(za(t,o,r),e.dbcore);return{dbcore:s}}function Zt(e,t){var n=t.db,r=Ya(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(function(o){var s=o.name;e.core.schema.tables.some(function(l){return l.name===s})&&(o.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=o.core))})}function Jt(e,t,n,r){n.forEach(function(o){var s=r[o];t.forEach(function(l){var c=Wr(l,o);(!c||"value"in c&&c.value===void 0)&&(l===e.Transaction.prototype||l instanceof e.Transaction?Ce(l,o,{get:function(){return this.table(o)},set:function(f){Hr(this,o,{value:f,writable:!0,configurable:!0,enumerable:!0})}}):l[o]=new e.Table(o,s))})})}function ar(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function Qa(e,t){return e._cfg.version-t._cfg.version}function Xa(e,t,n,r){var o=e._dbSchema;n.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=ir("$meta",Ei("")[0],[]),e._storeNames.push("$meta"));var s=e._createTransaction("readwrite",e._storeNames,o);s.create(n),s._completion.catch(r);var l=s._reject.bind(s),c=R.transless||R;Ee(function(){if(R.trans=s,R.transless=c,t===0)P(o).forEach(function(f){ur(n,f,o[f].primKey,o[f].indexes)}),Zt(e,n),M.follow(function(){return e.on.populate.fire(s)}).catch(l);else return Zt(e,n),Ja(e,s,t).then(function(f){return es(e,f,s,n)}).catch(l)})}function Za(e,t){Di(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=tn(e,e.idbdb,t);nn(e,e._dbSchema,t);for(var r=sr(n,e._dbSchema),o=function(h){if(h.change.length||h.recreate)return console.warn("Unable to patch indexes of table ".concat(h.name," because it has changes on the type of index or primary key.")),{value:void 0};var v=t.objectStore(h.name);h.add.forEach(function(p){he&&console.debug("Dexie upgrade patch: Creating missing index ".concat(h.name,".").concat(p.src)),en(v,p)})},s=0,l=r.change;s<l.length;s++){var c=l[s],f=o(c);if(typeof f=="object")return f.value}}function Ja(e,t,n){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(r){return r??n}):M.resolve(n)}function es(e,t,n,r){var o=[],s=e._versions,l=e._dbSchema=tn(e,e.idbdb,r),c=s.filter(function(h){return h._cfg.version>=t});if(c.length===0)return M.resolve();c.forEach(function(h){o.push(function(){var v=l,p=h._cfg.dbschema;nn(e,v,r),nn(e,p,r),l=e._dbSchema=p;var b=sr(v,p);b.add.forEach(function(C){ur(r,C[0],C[1].primKey,C[1].indexes)}),b.change.forEach(function(C){if(C.recreate)throw new T.Upgrade("Not yet support for changing primary key");var D=r.objectStore(C.name);C.add.forEach(function(A){return en(D,A)}),C.change.forEach(function(A){D.deleteIndex(A.name),en(D,A)}),C.del.forEach(function(A){return D.deleteIndex(A)})});var V=h._cfg.contentUpgrade;if(V&&h._cfg.version>t){Zt(e,r),n._memoizedTables={};var m=qr(p);b.del.forEach(function(C){m[C]=v[C]}),ar(e,[e.Transaction.prototype]),Jt(e,[e.Transaction.prototype],P(m),m),n.schema=m;var g=kn(V);g&&tt();var _,E=M.follow(function(){if(_=V(n),_&&g){var C=Ae.bind(null,null);_.then(C,C)}});return _&&typeof _.then=="function"?M.resolve(_):E.then(function(){return _})}}),o.push(function(v){var p=h._cfg.dbschema;ts(p,v),ar(e,[e.Transaction.prototype]),Jt(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}),o.push(function(v){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===h._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(p){return p!=="$meta"})):v.objectStore("$meta").put(h._cfg.version,"version"))})});function f(){return o.length?M.resolve(o.shift()(n.idbtrans)).then(f):M.resolve()}return f().then(function(){Di(l,r)})}function sr(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var o=e[r],s=t[r];if(!o)n.add.push([r,s]);else{var l={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||o.primKey.auto!==s.primKey.auto)l.recreate=!0,n.change.push(l);else{var c=o.idxByName,f=s.idxByName,h=void 0;for(h in c)f[h]||l.del.push(h);for(h in f){var v=c[h],p=f[h];v?v.src!==p.src&&l.change.push(p):l.add.push(p)}(l.del.length>0||l.add.length>0||l.change.length>0)&&n.change.push(l)}}}return n}function ur(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(s){return en(o,s)}),o}function Di(e,t){P(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(he&&console.debug("Dexie: Creating missing table",n),ur(t,n,e[n].primKey,e[n].indexes))})}function ts(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function en(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function tn(e,t,n){var r={},o=kt(t.objectStoreNames,0);return o.forEach(function(s){for(var l=n.objectStore(s),c=l.keyPath,f=rr(wi(c),c||"",!0,!1,!!l.autoIncrement,c&&typeof c!="string",!0),h=[],v=0;v<l.indexNames.length;++v){var p=l.index(l.indexNames[v]);c=p.keyPath;var b=rr(p.name,c,!!p.unique,!!p.multiEntry,!1,c&&typeof c!="string",!1);h.push(b)}r[s]=ir(s,f,h)}),r}function ns(e,t,n){e.verno=t.version/10;var r=e._dbSchema=tn(e,t,n);e._storeNames=kt(t.objectStoreNames,0),Jt(e,[e._allTables],P(r),r)}function rs(e,t){var n=tn(e,e.idbdb,t),r=sr(n,e._dbSchema);return!(r.add.length||r.change.some(function(o){return o.add.length||o.change.length}))}function nn(e,t,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var s=r[o],l=n.objectStore(s);e._hasGetAll="getAll"in l;for(var c=0;c<l.indexNames.length;++c){var f=l.indexNames[c],h=l.index(f).keyPath,v=typeof h=="string"?h:"["+kt(h).join("+")+"]";if(t[s]){var p=t[s].idxByName[v];p&&(p.name=f,delete t[s].idxByName[v],t[s].idxByName[f]=p)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&y.WorkerGlobalScope&&y instanceof y.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Ei(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),o=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return rr(r,o||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),N(o),n===0)})}var is=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){P(t).forEach(function(r){if(t[r]!==null){var o=Ei(t[r]),s=o.shift();if(s.unique=!0,s.multi)throw new T.Schema("Primary key cannot be multi-valued");o.forEach(function(l){if(l.auto)throw new T.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new T.Schema("Index must have a name and cannot be an empty string")}),n[r]=ir(r,s,o)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?L(this._cfg.storesSource,t):t;var r=n._versions,o={},s={};return r.forEach(function(l){L(o,l._cfg.storesSource),s=l._cfg.dbschema={},l._parseStoresSpec(o,s)}),n._dbSchema=s,ar(n,[n._allTables,n,n.Transaction.prototype]),Jt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],P(s),s),n._storeNames=P(s),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Kn(this._cfg.contentUpgrade||H,t),this},e}();function os(e){return yt(is.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function lr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new be(zt,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function cr(e){return e&&typeof e.databases=="function"}function as(e){var t=e.indexedDB,n=e.IDBKeyRange;return cr(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(o){return o.name}).filter(function(o){return o!==zt})}):lr(t,n).toCollection().primaryKeys()}function ss(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!cr(n)&&t!==zt&&lr(n,r).put({name:t}).catch(H)}function us(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!cr(n)&&t!==zt&&lr(n,r).delete(t).catch(H)}function fr(e){return Ee(function(){return R.letThrough=!0,e()})}function ls(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}var dr;function hr(e){return!("from"in e)}var Z=function(e,t){if(this)L(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new Z;return e&&"d"in e&&L(n,e),n}};we(Z.prototype,(dr={add:function(e){return Et(this,e),this},addKey:function(e){return Dt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Dt(t,n,n)}),this},hasKey:function(e){var t=rn(this).next(e).value;return t&&G(t.from,e)<=0&&G(t.to,e)>=0}},dr[Tn]=function(){return rn(this)},dr));function Dt(e,t,n){var r=G(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(hr(e))return L(e,{from:t,to:n,d:1});var o=e.l,s=e.r;if(G(n,e.from)<0)return o?Dt(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Vi(e);if(G(t,e.to)>0)return s?Dt(s,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Vi(e);G(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),G(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var l=!e.r;o&&!e.l&&Et(e,o),s&&l&&Et(e,s)}}function Et(e,t){function n(r,o){var s=o.from,l=o.to,c=o.l,f=o.r;Dt(r,s,l),c&&n(r,c),f&&n(r,f)}hr(t)||n(e,t)}function Ai(e,t){var n=rn(t),r=n.next();if(r.done)return!1;for(var o=r.value,s=rn(e),l=s.next(o.from),c=l.value;!r.done&&!l.done;){if(G(c.from,o.to)<=0&&G(c.to,o.from)>=0)return!0;G(o.from,c.from)<0?o=(r=n.next(c.from)).value:c=(l=s.next(o.from)).value}return!1}function rn(e){var t=hr(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&G(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||G(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Vi(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),o=r>1?"r":r<-1?"l":"";if(o){var s=o==="r"?"l":"r",l=i({},e),c=e[o];e.from=c.from,e.to=c.to,e[o]=c[o],l[o]=c[s],e[s]=l,l.d=Si(l)}e.d=Si(e)}function Si(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function on(e,t){return P(t).forEach(function(n){e[n]?Et(e[n],t[n]):e[n]=Xr(t[n])}),e}function pr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Ai(t[n],e[n])})}var We={},mr={},vr=!1;function an(e,t){on(mr,e),vr||(vr=!0,setTimeout(function(){vr=!1;var n=mr;mr={},yr(n,!1)},0))}function yr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,o=Object.values(We);r<o.length;r++){var s=o[r];xi(s,e,n,t)}else for(var l in e){var c=/^idb\:\/\/(.*)\/(.*)\//.exec(l);if(c){var f=c[1],h=c[2],s=We["idb://".concat(f,"/").concat(h)];s&&xi(s,e,n,t)}}n.forEach(function(v){return v()})}function xi(e,t,n,r){for(var o=[],s=0,l=Object.entries(e.queries.query);s<l.length;s++){for(var c=l[s],f=c[0],h=c[1],v=[],p=0,b=h;p<b.length;p++){var V=b[p];pr(t,V.obsSet)?V.subscribers.forEach(function(E){return n.add(E)}):r&&v.push(V)}r&&o.push([f,v])}if(r)for(var m=0,g=o;m<g.length;m++){var _=g[m],f=_[0],v=_[1];e.queries.query[f]=v}}function cs(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?q(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,o=Math.round(e.verno*10),s=!1;function l(){if(t.openCanceller!==r)throw new T.DatabaseClosed("db.open() was cancelled")}var c=t.dbReadyResolve,f=null,h=!1,v=function(){return new M(function(p,b){if(l(),!n)throw new T.MissingAPI;var V=e.name,m=t.autoSchema||!o?n.open(V):n.open(V,o);if(!m)throw new T.MissingAPI;m.onerror=pe(b),m.onblocked=$(e._fireOnBlocked),m.onupgradeneeded=$(function(g){if(f=m.transaction,t.autoSchema&&!e._options.allowEmptyDB){m.onerror=_t,f.abort(),m.result.close();var _=n.deleteDatabase(V);_.onsuccess=_.onerror=$(function(){b(new T.NoSuchDatabase("Database ".concat(V," doesnt exist")))})}else{f.onerror=pe(b);var E=g.oldVersion>Math.pow(2,62)?0:g.oldVersion;h=E<1,e.idbdb=m.result,s&&Za(e,f),Xa(e,E/10,f,b)}},b),m.onsuccess=$(function(){f=null;var g=e.idbdb=m.result,_=kt(g.objectStoreNames);if(_.length>0)try{var E=g.transaction(Ha(_),"readonly");if(t.autoSchema)ns(e,g,E);else if(nn(e,e._dbSchema,E),!rs(e,E)&&!s)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),g.close(),o=g.version+1,s=!0,p(v());Zt(e,E)}catch{}nt.push(e),g.onversionchange=$(function(C){t.vcFired=!0,e.on("versionchange").fire(C)}),g.onclose=$(function(C){e.on("close").fire(C)}),h&&ss(e._deps,V),p()},b)}).catch(function(p){switch(p?.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),v();break;case"VersionError":if(o>0)return o=0,v();break}return M.reject(p)})};return M.race([r,(typeof navigator>"u"?M.resolve():ls()).then(v)]).then(function(){return l(),t.onReadyBeingFired=[],M.resolve(fr(function(){return e.on.ready.fire(e.vip)})).then(function p(){if(t.onReadyBeingFired.length>0){var b=t.onReadyBeingFired.reduce(Kn,H);return t.onReadyBeingFired=[],M.resolve(fr(function(){return b(e.vip)})).then(p)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(p){t.dbOpenError=p;try{f&&f.abort()}catch{}return r===t.openCanceller&&e._close(),q(p)}).finally(function(){t.openComplete=!0,c()}).then(function(){if(h){var p={};e.tables.forEach(function(b){b.schema.indexes.forEach(function(V){V.name&&(p["idb://".concat(e.name,"/").concat(b.name,"/").concat(V.name)]=new Z(-1/0,[[[]]]))}),p["idb://".concat(e.name,"/").concat(b.name,"/")]=p["idb://".concat(e.name,"/").concat(b.name,"/:dels")]=new Z(-1/0,[[[]]])}),xe(bt).fire(p),yr(p,!0)}return e})}function gr(e){var t=function(l){return e.next(l)},n=function(l){return e.throw(l)},r=s(t),o=s(n);function s(l){return function(c){var f=l(c),h=f.value;return f.done?h:!h||typeof h.then!="function"?N(h)?Promise.all(h).then(r,o):r(h):h.then(r,o)}}return s(t)()}function fs(e,t,n){var r=arguments.length;if(r<2)throw new T.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];n=o.pop();var s=Yr(o);return[e,s,n]}function Mi(e,t,n,r,o){return M.resolve().then(function(){var s=R.transless||R,l=e._createTransaction(t,n,e._dbSchema,r);l.explicit=!0;var c={trans:l,transless:s};if(r)l.idbtrans=r.idbtrans;else try{l.create(),l.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(p){return p.name===Nn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return Mi(e,t,n,null,o)})):q(p)}var f=kn(o);f&&tt();var h,v=M.follow(function(){if(h=o.call(l,l),h)if(f){var p=Ae.bind(null,null);h.then(p,p)}else typeof h.next=="function"&&typeof h.throw=="function"&&(h=gr(h))},c);return(h&&typeof h.then=="function"?M.resolve(h).then(function(p){return l.active?p:q(new T.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):v.then(function(){return h})).then(function(p){return r&&l._resolve(),l._completion.then(function(){return p})}).catch(function(p){return l._reject(p),q(p)})})}function sn(e,t,n){for(var r=N(e)?e.slice():[e],o=0;o<n;++o)r.push(t);return r}function ds(e){return i(i({},e),{table:function(t){var n=e.table(t),r=n.schema,o={},s=[];function l(g,_,E){var C=Ct(g),D=o[C]=o[C]||[],A=g==null?0:typeof g=="string"?1:g.length,w=_>0,S=i(i({},E),{name:w?"".concat(C,"(virtual-from:").concat(E.name,")"):E.name,lowLevelIndex:E,isVirtual:w,keyTail:_,keyLength:A,extractKey:or(g),unique:!w&&E.unique});if(D.push(S),S.isPrimaryKey||s.push(S),A>1){var I=A===2?g[0]:g.slice(0,A-1);l(I,_+1,E)}return D.sort(function(x,k){return x.keyTail-k.keyTail}),S}var c=l(r.primaryKey.keyPath,0,r.primaryKey);o[":id"]=[c];for(var f=0,h=r.indexes;f<h.length;f++){var v=h[f];l(v.keyPath,0,v)}function p(g){var _=o[Ct(g)];return _&&_[0]}function b(g,_){return{type:g.type===1?2:g.type,lower:sn(g.lower,g.lowerOpen?e.MAX_KEY:e.MIN_KEY,_),lowerOpen:!0,upper:sn(g.upper,g.upperOpen?e.MIN_KEY:e.MAX_KEY,_),upperOpen:!0}}function V(g){var _=g.query.index;return _.isVirtual?i(i({},g),{query:{index:_.lowLevelIndex,range:b(g.query.range,_.keyTail)}}):g}var m=i(i({},n),{schema:i(i({},r),{primaryKey:c,indexes:s,getIndexByKeyPath:p}),count:function(g){return n.count(V(g))},query:function(g){return n.query(V(g))},openCursor:function(g){var _=g.query.index,E=_.keyTail,C=_.isVirtual,D=_.keyLength;if(!C)return n.openCursor(g);function A(w){function S(x){x!=null?w.continue(sn(x,g.reverse?e.MAX_KEY:e.MIN_KEY,E)):g.unique?w.continue(w.key.slice(0,D).concat(g.reverse?e.MIN_KEY:e.MAX_KEY,E)):w.continue()}var I=Object.create(w,{continue:{value:S},continuePrimaryKey:{value:function(x,k){w.continuePrimaryKey(sn(x,e.MAX_KEY,E),k)}},primaryKey:{get:function(){return w.primaryKey}},key:{get:function(){var x=w.key;return D===1?x[0]:x.slice(0,D)}},value:{get:function(){return w.value}}});return I}return n.openCursor(V(g)).then(function(w){return w&&A(w)})}});return m}})}var hs={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:ds};function _r(e,t,n,r){return n=n||{},r=r||"",P(e).forEach(function(o){if(!Q(t,o))n[r+o]=void 0;else{var s=e[o],l=t[o];if(typeof s=="object"&&typeof l=="object"&&s&&l){var c=Fn(s),f=Fn(l);c!==f?n[r+o]=t[o]:c==="Object"?_r(s,l,n,r+o+"."):s!==l&&(n[r+o]=t[o])}else s!==l&&(n[r+o]=t[o])}}),P(t).forEach(function(o){Q(e,o)||(n[r+o]=t[o])}),n}function br(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ps={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return i(i({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,o=i(i({},n),{mutate:function(s){var l=R.trans,c=l.table(t).hook,f=c.deleting,h=c.creating,v=c.updating;switch(s.type){case"add":if(h.fire===H)break;return l._promise("readwrite",function(){return p(s)},!0);case"put":if(h.fire===H&&v.fire===H)break;return l._promise("readwrite",function(){return p(s)},!0);case"delete":if(f.fire===H)break;return l._promise("readwrite",function(){return p(s)},!0);case"deleteRange":if(f.fire===H)break;return l._promise("readwrite",function(){return b(s)},!0)}return n.mutate(s);function p(m){var g=R.trans,_=m.keys||br(r,m);if(!_)throw new Error("Keys missing");return m=m.type==="add"||m.type==="put"?i(i({},m),{keys:_}):i({},m),m.type!=="delete"&&(m.values=d([],m.values,!0)),m.keys&&(m.keys=d([],m.keys,!0)),ms(n,m,_).then(function(E){var C=_.map(function(D,A){var w=E[A],S={onerror:null,onsuccess:null};if(m.type==="delete")f.fire.call(S,D,w,g);else if(m.type==="add"||w===void 0){var I=h.fire.call(S,D,m.values[A],g);D==null&&I!=null&&(D=I,m.keys[A]=D,r.outbound||ae(m.values[A],r.keyPath,D))}else{var x=_r(w,m.values[A]),k=v.fire.call(S,x,D,w,g);if(k){var j=m.values[A];Object.keys(k).forEach(function(O){Q(j,O)?j[O]=k[O]:ae(j,O,k[O])})}}return S});return n.mutate(m).then(function(D){for(var A=D.failures,w=D.results,S=D.numFailures,I=D.lastResult,x=0;x<_.length;++x){var k=w?w[x]:_[x],j=C[x];k==null?j.onerror&&j.onerror(A[x]):j.onsuccess&&j.onsuccess(m.type==="put"&&E[x]?m.values[x]:k)}return{failures:A,results:w,numFailures:S,lastResult:I}}).catch(function(D){return C.forEach(function(A){return A.onerror&&A.onerror(D)}),Promise.reject(D)})})}function b(m){return V(m.trans,m.range,1e4)}function V(m,g,_){return n.query({trans:m,values:!1,query:{index:r,range:g},limit:_}).then(function(E){var C=E.result;return p({type:"delete",keys:C,trans:m}).then(function(D){return D.numFailures>0?Promise.reject(D.failures[0]):C.length<_?{failures:[],numFailures:0,lastResult:void 0}:V(m,i(i({},g),{lower:C[C.length-1],lowerOpen:!0}),_)})})}}});return o}})}};function ms(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Ii(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],o=0,s=0;o<t.keys.length&&s<e.length;++o)G(t.keys[o],e[s])===0&&(r.push(n?ke(t.values[o]):t.values[o]),++s);return r.length===e.length?r:null}catch{return null}}var vs={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return i(i({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var o=Ii(r.keys,r.trans._cache,r.cache==="clone");return o?M.resolve(o):n.getMany(r).then(function(s){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?ke(s):s},s})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function Oi(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Pi(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var ys={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new Z(e.MIN_KEY,e.MAX_KEY);return i(i({},e),{transaction:function(r,o,s){if(R.subscr&&o!=="readonly")throw new T.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(R.querier));return e.transaction(r,o,s)},table:function(r){var o=e.table(r),s=o.schema,l=s.primaryKey,c=s.indexes,f=l.extractKey,h=l.outbound,v=l.autoIncrement&&c.filter(function(m){return m.compound&&m.keyPath.includes(l.keyPath)}),p=i(i({},o),{mutate:function(m){var g,_,E=m.trans,C=m.mutatedParts||(m.mutatedParts={}),D=function(B){var U="idb://".concat(t,"/").concat(r,"/").concat(B);return C[U]||(C[U]=new Z)},A=D(""),w=D(":dels"),S=m.type,I=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[br(l,m).filter(function(B){return B}),m.values]:[],x=I[0],k=I[1],j=m.trans._cache;if(N(x)){A.addKeys(x);var O=S==="delete"||x.length===k.length?Ii(x,j):null;O||w.addKeys(x),(O||k)&&gs(D,s,O,k)}else if(x){var K={from:(g=x.lower)!==null&&g!==void 0?g:e.MIN_KEY,to:(_=x.upper)!==null&&_!==void 0?_:e.MAX_KEY};w.add(K),A.add(K)}else A.add(n),w.add(n),s.indexes.forEach(function(B){return D(B.name).add(n)});return o.mutate(m).then(function(B){return x&&(m.type==="add"||m.type==="put")&&(A.addKeys(B.results),v&&v.forEach(function(U){for(var F=m.values.map(function(re){return U.extractKey(re)}),z=U.keyPath.findIndex(function(re){return re===l.keyPath}),J=0,me=B.results.length;J<me;++J)F[J][z]=B.results[J];D(U.name).addKeys(F)})),E.mutatedParts=on(E.mutatedParts||{},C),B})}}),b=function(m){var g,_,E=m.query,C=E.index,D=E.range;return[C,new Z((g=D.lower)!==null&&g!==void 0?g:e.MIN_KEY,(_=D.upper)!==null&&_!==void 0?_:e.MAX_KEY)]},V={get:function(m){return[l,new Z(m.key)]},getMany:function(m){return[l,new Z().addKeys(m.keys)]},count:b,query:b,openCursor:b};return P(V).forEach(function(m){p[m]=function(g){var _=R.subscr,E=!!_,C=Oi(R,o)&&Pi(m,g),D=C?g.obsSet={}:_;if(E){var A=function(O){var K="idb://".concat(t,"/").concat(r,"/").concat(O);return D[K]||(D[K]=new Z)},w=A(""),S=A(":dels"),I=V[m](g),x=I[0],k=I[1];if(m==="query"&&x.isPrimaryKey&&!g.values?S.add(k):A(x.name||"").add(k),!x.isPrimaryKey)if(m==="count")S.add(n);else{var j=m==="query"&&h&&g.values&&o.query(i(i({},g),{values:!1}));return o[m].apply(this,arguments).then(function(O){if(m==="query"){if(h&&g.values)return j.then(function(F){var z=F.result;return w.addKeys(z),O});var K=g.values?O.result.map(f):O.result;g.values?w.addKeys(K):S.addKeys(K)}else if(m==="openCursor"){var B=O,U=g.values;return B&&Object.create(B,{key:{get:function(){return S.addKey(B.primaryKey),B.key}},primaryKey:{get:function(){var F=B.primaryKey;return S.addKey(F),F}},value:{get:function(){return U&&w.addKey(B.primaryKey),B.value}}})}return O})}}return o[m].apply(this,arguments)}}),p}})}};function gs(e,t,n,r){function o(s){var l=e(s.name||"");function c(h){return h!=null?s.extractKey(h):null}var f=function(h){return s.multiEntry&&N(h)?h.forEach(function(v){return l.addKey(v)}):l.addKey(h)};(n||r).forEach(function(h,v){var p=n&&c(n[v]),b=r&&c(r[v]);G(p,b)!==0&&(p!=null&&f(p),b!=null&&f(b))})}t.indexes.forEach(o)}function Ri(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(n.numFailures===r)return null;var o=i({},t);return N(o.keys)&&(o.keys=o.keys.filter(function(s,l){return!(l in n.failures)})),"values"in o&&N(o.values)&&(o.values=o.values.filter(function(s,l){return!(l in n.failures)})),o}function _s(e,t){return t.lower===void 0?!0:t.lowerOpen?G(e,t.lower)>0:G(e,t.lower)>=0}function bs(e,t){return t.upper===void 0?!0:t.upperOpen?G(e,t.upper)<0:G(e,t.upper)<=0}function wr(e,t){return _s(e,t)&&bs(e,t)}function Fi(e,t,n,r,o,s){if(!n||n.length===0)return e;var l=t.query.index,c=l.multiEntry,f=t.query.range,h=r.schema.primaryKey,v=h.extractKey,p=l.extractKey,b=(l.lowLevelIndex||l).extractKey,V=n.reduce(function(m,g){var _=m,E=[];if(g.type==="add"||g.type==="put")for(var C=new Z,D=g.values.length-1;D>=0;--D){var A=g.values[D],w=v(A);if(!C.hasKey(w)){var S=p(A);(c&&N(S)?S.some(function(O){return wr(O,f)}):wr(S,f))&&(C.addKey(w),E.push(A))}}switch(g.type){case"add":{var I=new Z().addKeys(t.values?m.map(function(O){return v(O)}):m);_=m.concat(t.values?E.filter(function(O){var K=v(O);return I.hasKey(K)?!1:(I.addKey(K),!0)}):E.map(function(O){return v(O)}).filter(function(O){return I.hasKey(O)?!1:(I.addKey(O),!0)}));break}case"put":{var x=new Z().addKeys(g.values.map(function(O){return v(O)}));_=m.filter(function(O){return!x.hasKey(t.values?v(O):O)}).concat(t.values?E:E.map(function(O){return v(O)}));break}case"delete":var k=new Z().addKeys(g.keys);_=m.filter(function(O){return!k.hasKey(t.values?v(O):O)});break;case"deleteRange":var j=g.range;_=m.filter(function(O){return!wr(v(O),j)});break}return _},e);return V===e?e:(V.sort(function(m,g){return G(b(m),b(g))||G(v(m),v(g))}),t.limit&&t.limit<1/0&&(V.length>t.limit?V.length=t.limit:e.length===t.limit&&V.length<t.limit&&(o.dirty=!0)),s?Object.freeze(V):V)}function Ti(e,t){return G(e.lower,t.lower)===0&&G(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function ws(e,t,n,r){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var o=G(e,t);if(o===0){if(n&&r)return 0;if(n)return 1;if(r)return-1}return o}function Cs(e,t,n,r){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var o=G(e,t);if(o===0){if(n&&r)return 0;if(n)return-1;if(r)return 1}return o}function Ds(e,t){return ws(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&Cs(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function Es(e,t,n,r){var o=We["idb://".concat(e,"/").concat(t)];if(!o)return[];var s=o.queries[n];if(!s)return[null,!1,o,null];var l=r.query?r.query.index.name:null,c=s[l||""];if(!c)return[null,!1,o,null];switch(n){case"query":var f=c.find(function(p){return p.req.limit===r.limit&&p.req.values===r.values&&Ti(p.req.query.range,r.query.range)});if(f)return[f,!0,o,c];var h=c.find(function(p){var b="limit"in p.req?p.req.limit:1/0;return b>=r.limit&&(r.values?p.req.values:!0)&&Ds(p.req.query.range,r.query.range)});return[h,!1,o,c];case"count":var v=c.find(function(p){return Ti(p.req.query.range,r.query.range)});return[v,!!v,o,c]}}function As(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){e.subscribers.delete(n),e.subscribers.size===0&&Vs(e,t)})}function Vs(e,t){setTimeout(function(){e.subscribers.size===0&&Be(t,e)},3e3)}var Ss={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,n=i(i({},e),{transaction:function(r,o,s){var l=e.transaction(r,o,s);if(o==="readwrite"){var c=new AbortController,f=c.signal,h=function(v){return function(){if(c.abort(),o==="readwrite"){for(var p=new Set,b=0,V=r;b<V.length;b++){var m=V[b],g=We["idb://".concat(t,"/").concat(m)];if(g){var _=e.table(m),E=g.optimisticOps.filter(function(U){return U.trans===l});if(l._explicit&&v&&l.mutatedParts)for(var C=0,D=Object.values(g.queries.query);C<D.length;C++)for(var A=D[C],w=0,S=A.slice();w<S.length;w++){var I=S[w];pr(I.obsSet,l.mutatedParts)&&(Be(A,I),I.subscribers.forEach(function(U){return p.add(U)}))}else if(E.length>0){g.optimisticOps=g.optimisticOps.filter(function(U){return U.trans!==l});for(var x=0,k=Object.values(g.queries.query);x<k.length;x++)for(var A=k[x],j=0,O=A.slice();j<O.length;j++){var I=O[j];if(I.res!=null&&l.mutatedParts)if(v&&!I.dirty){var K=Object.isFrozen(I.res),B=Fi(I.res,I.req,E,_,I,K);I.dirty?(Be(A,I),I.subscribers.forEach(function(z){return p.add(z)})):B!==I.res&&(I.res=B,I.promise=M.resolve({result:B}))}else I.dirty&&Be(A,I),I.subscribers.forEach(function(z){return p.add(z)})}}}}p.forEach(function(U){return U()})}}};l.addEventListener("abort",h(!1),{signal:f}),l.addEventListener("error",h(!1),{signal:f}),l.addEventListener("complete",h(!0),{signal:f})}return l},table:function(r){var o=e.table(r),s=o.schema.primaryKey,l=i(i({},o),{mutate:function(c){var f=R.trans;if(s.outbound||f.db._options.cache==="disabled"||f.explicit||f.idbtrans.mode!=="readwrite")return o.mutate(c);var h=We["idb://".concat(t,"/").concat(r)];if(!h)return o.mutate(c);var v=o.mutate(c);return(c.type==="add"||c.type==="put")&&(c.values.length>=50||br(s,c).some(function(p){return p==null}))?v.then(function(p){var b=i(i({},c),{values:c.values.map(function(m,g){var _;if(p.failures[g])return m;var E=!((_=s.keyPath)===null||_===void 0)&&_.includes(".")?ke(m):i({},m);return ae(E,s.keyPath,p.results[g]),E})}),V=Ri(h,b,p);h.optimisticOps.push(V),queueMicrotask(function(){return c.mutatedParts&&an(c.mutatedParts)})}):(h.optimisticOps.push(c),c.mutatedParts&&an(c.mutatedParts),v.then(function(p){if(p.numFailures>0){Be(h.optimisticOps,c);var b=Ri(h,c,p);b&&h.optimisticOps.push(b),c.mutatedParts&&an(c.mutatedParts)}}),v.catch(function(){Be(h.optimisticOps,c),c.mutatedParts&&an(c.mutatedParts)})),v},query:function(c){var f;if(!Oi(R,o)||!Pi("query",c))return o.query(c);var h=((f=R.trans)===null||f===void 0?void 0:f.db._options.cache)==="immutable",v=R,p=v.requery,b=v.signal,V=Es(t,r,"query",c),m=V[0],g=V[1],_=V[2],E=V[3];if(m&&g)m.obsSet=c.obsSet;else{var C=o.query(c).then(function(D){var A=D.result;if(m&&(m.res=A),h){for(var w=0,S=A.length;w<S;++w)Object.freeze(A[w]);Object.freeze(A)}else D.result=ke(A);return D}).catch(function(D){return E&&m&&Be(E,m),Promise.reject(D)});m={obsSet:c.obsSet,promise:C,subscribers:new Set,type:"query",req:c,dirty:!1},E?E.push(m):(E=[m],_||(_=We["idb://".concat(t,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),_.queries.query[c.query.index.name||""]=E)}return As(m,E,p,b),m.promise.then(function(D){return{result:Fi(D.result,c,_?.optimisticOps,o,m,h)}})}});return l}});return n}};function un(e,t){return new Proxy(e,{get:function(n,r,o){return r==="db"?t:Reflect.get(n,r,o)}})}var be=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var o=e.dependencies;this._options=n=i({addons:e.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var s=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:H,dbReadyPromise:null,cancelOpen:H,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};l.dbReadyPromise=new M(function(f){l.dbReadyResolve=f}),l.openCanceller=new M(function(f,h){l.cancelOpen=h}),this._state=l,this.name=t,this.on=vt(this,"populate","blocked","versionchange","close",{ready:[Kn,H]}),this.on.ready.subscribe=$r(this.on.ready.subscribe,function(f){return function(h,v){e.vip(function(){var p=r._state;if(p.openComplete)p.dbOpenError||M.resolve().then(h),v&&f(h);else if(p.onReadyBeingFired)p.onReadyBeingFired.push(h),v&&f(h);else{f(h);var b=r;v||f(function V(){b.on.ready.unsubscribe(h),b.on.ready.unsubscribe(V)})}})}}),this.Collection=Ta(this),this.Table=Pa(this),this.Transaction=La(this),this.Version=os(this),this.WhereClause=Ga(this),this.on("versionchange",function(f){f.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(f){!f.newVersion||f.newVersion<f.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(f.oldVersion/10))}),this._maxKey=wt(n.IDBKeyRange),this._createTransaction=function(f,h,v,p){return new r.Transaction(f,h,v,r._options.chromeTransactionDurability,p)},this._fireOnBlocked=function(f){r.on("blocked").fire(f),nt.filter(function(h){return h.name===r.name&&h!==r&&!h._state.vcFired}).map(function(h){return h.on("versionchange").fire(f)})},this.use(vs),this.use(Ss),this.use(ys),this.use(hs),this.use(ps);var c=new Proxy(this,{get:function(f,h,v){if(h==="_vip")return!0;if(h==="table")return function(b){return un(r.table(b),c)};var p=Reflect.get(f,h,v);return p instanceof vi?un(p,c):h==="tables"?p.map(function(b){return un(b,c)}):h==="_createTransaction"?function(){var b=p.apply(this,arguments);return un(b,c)}:p}});this.vip=c,s.forEach(function(f){return f(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new T.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new T.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(o){return o._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(Qa),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||R.letThrough||this._vip)?t():new M(function(r,o){if(n._state.openComplete)return o(new T.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen){o(new T.DatabaseClosed);return}n.open().catch(H)}n._state.dbReadyPromise.then(r,o)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,o=t.level,s=t.name;s&&this.unuse({stack:n,name:s});var l=this._middlewares[n]||(this._middlewares[n]=[]);return l.push({stack:n,create:r,level:o??10,name:s}),l.sort(function(c,f){return c.level-f.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,o=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(s){return o?s.create!==o:r?s.name!==r:!1})),this},e.prototype.open=function(){var t=this;return Ue(De,function(){return cs(t)})},e.prototype._close=function(){var t=this._state,n=nt.indexOf(this);if(n>=0&&nt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new M(function(r){t.dbReadyResolve=r}),t.openCanceller=new M(function(r,o){t.cancelOpen=o}))},e.prototype.close=function(t){var n=t===void 0?{disableAutoOpen:!0}:t,r=n.disableAutoOpen,o=this._state;r?(o.isBeingOpened&&o.cancelOpen(new T.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new T.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},e.prototype.delete=function(t){var n=this;t===void 0&&(t={disableAutoOpen:!0});var r=arguments.length>0&&typeof arguments[0]!="object",o=this._state;return new M(function(s,l){var c=function(){n.close(t);var f=n._deps.indexedDB.deleteDatabase(n.name);f.onsuccess=$(function(){us(n._deps,n.name),s()}),f.onerror=pe(l),f.onblocked=n._fireOnBlocked};if(r)throw new T.InvalidArgument("Invalid closeOptions argument to db.delete()");o.isBeingOpened?o.dbReadyPromise.then(c):c()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return P(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=fs.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var o=this,s=R.trans;(!s||s.db!==this||t.indexOf("!")!==-1)&&(s=null);var l=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var c,f;try{if(f=n.map(function(v){var p=v instanceof o.Table?v.name:v;if(typeof p!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return p}),t=="r"||t===Xn)c=Xn;else if(t=="rw"||t==Zn)c=Zn;else throw new T.InvalidArgument("Invalid transaction mode: "+t);if(s){if(s.mode===Xn&&c===Zn)if(l)s=null;else throw new T.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s&&f.forEach(function(v){if(s&&s.storeNames.indexOf(v)===-1)if(l)s=null;else throw new T.SubTransaction("Table "+v+" not included in parent transaction.")}),l&&s&&!s.active&&(s=null)}}catch(v){return s?s._promise(null,function(p,b){b(v)}):q(v)}var h=Mi.bind(null,this,c,f,s,r);return s?s._promise(c,h,"lock"):R.trans?Ue(R.transless,function(){return o._whenReady(h)}):this._whenReady(h)},e.prototype.table=function(t){if(!Q(this._allTables,t))throw new T.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},e}(),xs=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ms=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[xs]=function(){return this},e}(),ln;try{ln={indexedDB:y.indexedDB||y.mozIndexedDB||y.webkitIndexedDB||y.msIndexedDB,IDBKeyRange:y.IDBKeyRange||y.webkitIDBKeyRange}}catch{ln={indexedDB:null,IDBKeyRange:null}}function ki(e){var t=!1,n,r=new Ms(function(o){var s=kn(e);function l(E){var C=Je();try{s&&tt();var D=Ee(e,E);return s&&(D=D.finally(Ae)),D}finally{C&&et()}}var c=!1,f,h={},v={},p={get closed(){return c},unsubscribe:function(){c||(c=!0,f&&f.abort(),b&&xe.storagemutated.unsubscribe(g))}};o.start&&o.start(p);var b=!1,V=function(){return qn(_)};function m(){return pr(v,h)}var g=function(E){on(h,E),m()&&V()},_=function(){if(!(c||!ln.indexedDB)){h={};var E={};f&&f.abort(),f=new AbortController;var C={subscr:E,signal:f.signal,requery:V,querier:e,trans:null},D=l(C);Promise.resolve(D).then(function(A){t=!0,n=A,!(c||C.signal.aborted)&&(h={},v=E,!aa(v)&&!b&&(xe(bt,g),b=!0),qn(function(){return!c&&o.next&&o.next(A)}))},function(A){t=!1,["DatabaseClosedError","AbortError"].includes(A?.name)||c||qn(function(){c||o.error&&o.error(A)})})}};return setTimeout(V,0),p});return r.hasValue=function(){return t},r.getValue=function(){return n},r}var $e=be;we($e,i(i({},Nt),{delete:function(e){var t=new $e(e,{addons:[]});return t.delete()},exists:function(e){return new $e(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return as($e.dependencies).then(e)}catch{return q(new T.MissingAPI)}},defineClass:function(){function e(t){L(this,t)}return e},ignoreTransaction:function(e){return R.trans?Ue(R.transless,e):e()},vip:fr,async:function(e){return function(){try{var t=gr(e.apply(this,arguments));return!t||typeof t.then!="function"?M.resolve(t):t}catch(n){return q(n)}}},spawn:function(e,t,n){try{var r=gr(e.apply(n,t||[]));return!r||typeof r.then!="function"?M.resolve(r):r}catch(o){return q(o)}},currentTransaction:{get:function(){return R.trans||null}},waitFor:function(e,t){var n=M.resolve(typeof e=="function"?$e.ignoreTransaction(e):e).timeout(t||6e4);return R.trans?R.trans.waitFor(n):n},Promise:M,debug:{get:function(){return he},set:function(e){ti(e)}},derive:Ye,extend:L,props:we,override:$r,Events:vt,on:xe,liveQuery:ki,extendObservabilitySet:on,getByKeyPath:ye,setByKeyPath:ae,delByKeyPath:ra,shallowClone:qr,deepClone:ke,getObjectDiff:_r,cmp:G,asap:zr,minKey:Qn,addons:[],connections:nt,errnames:Nn,dependencies:ln,cache:We,semVer:ci,version:ci.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})})),$e.maxKey=wt($e.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(xe(bt,function(e){if(!Me){var t;t=new CustomEvent(nr,{detail:e}),Me=!0,dispatchEvent(t),Me=!1}}),addEventListener(nr,function(e){var t=e.detail;Me||Cr(t)}));function Cr(e){var t=Me;try{Me=!0,xe.storagemutated.fire(e),yr(e,!0)}finally{Me=t}}var Me=!1,Ie,Dr=function(){};typeof BroadcastChannel<"u"&&(Dr=function(){Ie=new BroadcastChannel(nr),Ie.onmessage=function(e){return e.data&&Cr(e.data)}},Dr(),typeof Ie.unref=="function"&&Ie.unref(),xe(bt,function(e){Me||Ie.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!be.disableBfCache&&e.persisted){he&&console.debug("Dexie: handling persisted pagehide"),Ie?.close();for(var t=0,n=nt;t<n.length;t++){var r=n[t];r.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!be.disableBfCache&&e.persisted&&(he&&console.debug("Dexie: handling persisted pageshow"),Dr(),Cr({all:new Z(-1/0,[[]])}))}));function Is(e){return new gt({add:e})}function Os(e){return new gt({remove:e})}function Ps(e,t){return new gt({replacePrefix:[e,t]})}M.rejectionMapper=da,ti(he);var Rs=Object.freeze({__proto__:null,Dexie:be,liveQuery:ki,Entity:hi,cmp:G,PropModification:gt,replacePrefix:Ps,add:Is,remove:Os,default:be,RangeSet:Z,mergeRanges:Et,rangesOverlap:Ai});return i(be,Rs,{default:be}),be})});var so=(P=>(P.PRODUCTS="productsStore",P.RECIPES="recipesStore",P.CATEGORIES="categoryStore",P.PRODUCTS_CATEGORIES="categoryProductsStore",P.RECIPES_CATEGORIES="categoryRecipesStore",P))(so||{});var Bs=u=>{let a={};for(let i in u)Array.isArray(u[i])?a[i]=u[i].reduce((d,y)=>(d.push(Bs(y)),d),[]):u[i]?.uuid!=null?a[i]=u[i].uuid:a[i]=u[i];return a},Ns=u=>{let a={};for(let i in u)Array.isArray(u[i])?a[i]=u[i].filter(d=>d!=null).map(Ns):u[i]!=null&&(a[i]=u[i]);return a},uo=()=>Math.random().toString(36).substring(2)+Date.now().toString(36);var Ks=["*"],js=()=>["route-active"];function Gs(u,a){u&1&&Ir(0)}function Us(u,a){if(u&1&&(xr(0,"a",3),vn(1,Gs,1,0,"ng-container",4),Mr()),u&2){let i=yn(),d=Or(3);at("active",i.active())("flat",i.flat())("icon",i.icon())("no-bottom-radius",i.noBottomRadius())("no-left-radius",i.noLeftRadius())("no-radius",i.noRadius())("no-right-radius",i.noRightRadius())("no-top-radius",i.noTopRadius()),St("ngClass",i.style()+" "+i.size())("routerLink",i.link()?i.link():null)("routerLinkActive",Zi(20,js)),Vr(),St("ngTemplateOutlet",d)}}function Ls(u,a){u&1&&Ir(0)}function Hs(u,a){if(u&1){let i=zi();xr(0,"button",5),st("click",function(y){Gi(i);let P=yn();return Ui(P.onClick.emit(y))}),vn(1,Ls,1,0,"ng-container",4),Mr()}if(u&2){let i=yn(),d=Or(3);at("active",i.active())("flat",i.flat())("icon",i.icon())("no-bottom-radius",i.noBottomRadius())("no-left-radius",i.noLeftRadius())("no-radius",i.noRadius())("no-right-radius",i.noRightRadius())("no-top-radius",i.noTopRadius()),St("ngClass",i.style()+" "+i.size()),Vr(),St("ngTemplateOutlet",d)}}function Ws(u,a){u&1&&Yi(0)}var lo=class u{constructor(){}onClick=eo();style=fe("default");size=fe("default");icon=fe(!1);flat=fe(!1);link=fe("");noRightRadius=fe(!1);noLeftRadius=fe(!1);noRadius=fe(!1);noTopRadius=fe(!1);noBottomRadius=fe(!1);active=fe(!1);routerLinkActive=to(gn);static \u0275fac=function(i){return new(i||u)};static \u0275cmp=Li({type:u,selectors:[["lg-button"]],viewQuery:function(i,d){i&1&&Qi(d.routerLinkActive,gn,5),i&2&&Xi()},inputs:{style:[1,"style"],size:[1,"size"],icon:[1,"icon"],flat:[1,"flat"],link:[1,"link"],noRightRadius:[1,"noRightRadius"],noLeftRadius:[1,"noLeftRadius"],noRadius:[1,"noRadius"],noTopRadius:[1,"noTopRadius"],noBottomRadius:[1,"noBottomRadius"],active:[1,"active"]},outputs:{onClick:"onClick"},ngContentSelectors:Ks,decls:4,vars:1,consts:[["content",""],[1,"button",3,"active","flat","icon","no-bottom-radius","no-left-radius","no-radius","no-right-radius","no-top-radius","ngClass","routerLink","routerLinkActive"],["type","button",1,"button",3,"active","flat","icon","no-bottom-radius","no-left-radius","no-radius","no-right-radius","no-top-radius","ngClass"],[1,"button",3,"ngClass","routerLink","routerLinkActive"],[4,"ngTemplateOutlet"],["type","button",1,"button",3,"click","ngClass"]],template:function(i,d){i&1&&(qi(),Wi(0,Us,2,21,"a",1)(1,Hs,2,18,"button",2),vn(2,Ws,1,0,"ng-template",null,0,Ji)),i&2&&$i(d.link()?0:1)},dependencies:[io,ao,oo,gn],styles:[`.button{background-color:#fff;color:var(--text-color);padding:16px 24px;font-size:1rem;font-family:inherit;border:none;border-radius:16px;cursor:pointer;appearance:none;display:flex;align-items:center;text-decoration:none;justify-content:center}.button:focus{outline-color:var(--active-color)}.button.no-radius{border-radius:0}.button.no-top-radius{border-top-left-radius:0;border-top-right-radius:0}.button.no-bottom-radius{border-bottom-left-radius:0;border-bottom-right-radius:0}.button.no-right-radius{border-top-right-radius:0;border-bottom-right-radius:0}.button.no-left-radius{border-top-left-radius:0;border-bottom-left-radius:0}.button.active{filter:brightness(.95)}.button.active.flat{color:var(--active-color)}.button.default{background-color:#fab6b6}.button.primary{background-color:#28a63c}.button.primary.flat{color:#28a63c}.button.secondary{background-color:#fafafa}.button.secondary.flat{color:#fafafa}.button.success{background-color:#1a8c50;color:#fff8fa}.button.success.flat{color:#1a8c50}.button.danger{background-color:#e33;color:#fff8fa}.button.danger.flat{color:#e33}.button.warning{background-color:#ec7b1c}.button.warning.flat{color:#ec7b1c}.button.info{background-color:#2531c2}.button.info.flat{color:#2531c2}.button.small{padding:8px 16px;font-size:.9rem;border-radius:12px}.button.transcluent{-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);background-color:#ffffff80}.button.icon{border-radius:50%;padding:16px}.button.icon.medium{padding:10px}.button.icon.medium .mat-icon{font-size:16px}.button.icon.small{padding:6px}.button.icon.small .mat-icon{font-size:16px}.button.icon.tiny{padding:2px}.button.icon.tiny .mat-icon{font-size:10px;width:16px;height:16px}.button.icon .mat-icon{font-size:24px;width:24px;height:24px;display:flex;align-items:center;justify-content:center}.button.flat{padding:0;background-color:transparent}
`],encapsulation:2})};var Co=(()=>{class u{_renderer;_elementRef;onChange=i=>{};onTouched=()=>{};constructor(i,d){this._renderer=i,this._elementRef=d}setProperty(i,d){this._renderer.setProperty(this._elementRef.nativeElement,i,d)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}static \u0275fac=function(d){return new(d||u)(W(Sr),W(Ar))};static \u0275dir=oe({type:u})}return u})(),Do=(()=>{class u extends Co{static \u0275fac=(()=>{let i;return function(y){return(i||(i=pn(u)))(y||u)}})();static \u0275dir=oe({type:u,features:[ce]})}return u})(),Vn=new ze(""),$s={provide:Vn,useExisting:Pe(()=>zs),multi:!0},zs=(()=>{class u extends Do{writeValue(i){this.setProperty("checked",i)}static \u0275fac=(()=>{let i;return function(y){return(i||(i=pn(u)))(y||u)}})();static \u0275dir=oe({type:u,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(d,y){d&1&&st("change",function(N){return y.onChange(N.target.checked)})("blur",function(){return y.onTouched()})},standalone:!1,features:[Re([$s]),ce]})}return u})(),qs={provide:Vn,useExisting:Pe(()=>Eo),multi:!0};function Ys(){let u=Pr()?Pr().getUserAgent():"";return/android (\d+)/.test(u.toLowerCase())}var Qs=new ze(""),Eo=(()=>{class u extends Co{_compositionMode;_composing=!1;constructor(i,d,y){super(i,d),this._compositionMode=y,this._compositionMode==null&&(this._compositionMode=!Ys())}writeValue(i){let d=i??"";this.setProperty("value",d)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}static \u0275fac=function(d){return new(d||u)(W(Sr),W(Ar),W(Qs,8))};static \u0275dir=oe({type:u,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(d,y){d&1&&st("input",function(N){return y._handleInput(N.target.value)})("blur",function(){return y.onTouched()})("compositionstart",function(){return y._compositionStart()})("compositionend",function(N){return y._compositionEnd(N.target.value)})},standalone:!1,features:[Re([qs]),ce]})}return u})();function Br(u){return u==null||Nr(u)===0}function Nr(u){return u==null?null:Array.isArray(u)||typeof u=="string"?u.length:u instanceof Set?u.size:null}var Ft=new ze(""),Tt=new ze(""),Xs=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,fo=class{static min(a){return Zs(a)}static max(a){return Js(a)}static required(a){return eu(a)}static requiredTrue(a){return tu(a)}static email(a){return nu(a)}static minLength(a){return ru(a)}static maxLength(a){return iu(a)}static pattern(a){return ou(a)}static nullValidator(a){return Ao()}static compose(a){return Oo(a)}static composeAsync(a){return Ro(a)}};function Zs(u){return a=>{if(a.value==null||u==null)return null;let i=parseFloat(a.value);return!isNaN(i)&&i<u?{min:{min:u,actual:a.value}}:null}}function Js(u){return a=>{if(a.value==null||u==null)return null;let i=parseFloat(a.value);return!isNaN(i)&&i>u?{max:{max:u,actual:a.value}}:null}}function eu(u){return Br(u.value)?{required:!0}:null}function tu(u){return u.value===!0?null:{required:!0}}function nu(u){return Br(u.value)||Xs.test(u.value)?null:{email:!0}}function ru(u){return a=>{let i=a.value?.length??Nr(a.value);return i===null||i===0?null:i<u?{minlength:{requiredLength:u,actualLength:i}}:null}}function iu(u){return a=>{let i=a.value?.length??Nr(a.value);return i!==null&&i>u?{maxlength:{requiredLength:u,actualLength:i}}:null}}function ou(u){if(!u)return Ao;let a,i;return typeof u=="string"?(i="",u.charAt(0)!=="^"&&(i+="^"),i+=u,u.charAt(u.length-1)!=="$"&&(i+="$"),a=new RegExp(i)):(i=u.toString(),a=u),d=>{if(Br(d.value))return null;let y=d.value;return a.test(y)?null:{pattern:{requiredPattern:i,actualValue:y}}}}function Ao(u){return null}function Vo(u){return u!=null}function So(u){return Hi(u)?Ni(u):u}function xo(u){let a={};return u.forEach(i=>{a=i!=null?ee(ee({},a),i):a}),Object.keys(a).length===0?null:a}function Mo(u,a){return a.map(i=>i(u))}function au(u){return!u.validate}function Io(u){return u.map(a=>au(a)?a:i=>a.validate(i))}function Oo(u){if(!u)return null;let a=u.filter(Vo);return a.length==0?null:function(i){return xo(Mo(i,a))}}function Po(u){return u!=null?Oo(Io(u)):null}function Ro(u){if(!u)return null;let a=u.filter(Vo);return a.length==0?null:function(i){let d=Mo(i,a).map(So);return ji(d).pipe(Ki(xo))}}function Fo(u){return u!=null?Ro(Io(u)):null}function ho(u,a){return u===null?[a]:Array.isArray(u)?[...u,a]:[u,a]}function To(u){return u._rawValidators}function ko(u){return u._rawAsyncValidators}function Rr(u){return u?Array.isArray(u)?u:[u]:[]}function bn(u,a){return Array.isArray(u)?u.includes(a):u===a}function po(u,a){let i=Rr(a);return Rr(u).forEach(y=>{bn(i,y)||i.push(y)}),i}function mo(u,a){return Rr(a).filter(i=>!bn(u,i))}var wn=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(a){this._rawValidators=a||[],this._composedValidatorFn=Po(this._rawValidators)}_setAsyncValidators(a){this._rawAsyncValidators=a||[],this._composedAsyncValidatorFn=Fo(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(a){this._onDestroyCallbacks.push(a)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(a=>a()),this._onDestroyCallbacks=[]}reset(a=void 0){this.control&&this.control.reset(a)}hasError(a,i){return this.control?this.control.hasError(a,i):!1}getError(a,i){return this.control?this.control.getError(a,i):null}},ue=class extends wn{name;get formDirective(){return null}get path(){return null}},qe=class extends wn{_parent=null;name=null;valueAccessor=null},Cn=class{_cd;constructor(a){this._cd=a}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},su={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},il=ie(ee({},su),{"[class.ng-submitted]":"isSubmitted"}),ol=(()=>{class u extends Cn{constructor(i){super(i)}static \u0275fac=function(d){return new(d||u)(W(qe,2))};static \u0275dir=oe({type:u,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(d,y){d&2&&at("ng-untouched",y.isUntouched)("ng-touched",y.isTouched)("ng-pristine",y.isPristine)("ng-dirty",y.isDirty)("ng-valid",y.isValid)("ng-invalid",y.isInvalid)("ng-pending",y.isPending)},standalone:!1,features:[ce]})}return u})(),al=(()=>{class u extends Cn{constructor(i){super(i)}static \u0275fac=function(d){return new(d||u)(W(ue,10))};static \u0275dir=oe({type:u,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(d,y){d&2&&at("ng-untouched",y.isUntouched)("ng-touched",y.isTouched)("ng-pristine",y.isPristine)("ng-dirty",y.isDirty)("ng-valid",y.isValid)("ng-invalid",y.isInvalid)("ng-pending",y.isPending)("ng-submitted",y.isSubmitted)},standalone:!1,features:[ce]})}return u})();var Mt="VALID",_n="INVALID",ut="PENDING",It="DISABLED",Te=class{},Dn=class extends Te{value;source;constructor(a,i){super(),this.value=a,this.source=i}},Ot=class extends Te{pristine;source;constructor(a,i){super(),this.pristine=a,this.source=i}},Pt=class extends Te{touched;source;constructor(a,i){super(),this.touched=a,this.source=i}},lt=class extends Te{status;source;constructor(a,i){super(),this.status=a,this.source=i}},Fr=class extends Te{source;constructor(a){super(),this.source=a}},Tr=class extends Te{source;constructor(a){super(),this.source=a}};function Kr(u){return(Sn(u)?u.validators:u)||null}function uu(u){return Array.isArray(u)?Po(u):u||null}function jr(u,a){return(Sn(a)?a.asyncValidators:u)||null}function lu(u){return Array.isArray(u)?Fo(u):u||null}function Sn(u){return u!=null&&!Array.isArray(u)&&typeof u=="object"}function Bo(u,a,i){let d=u.controls;if(!(a?Object.keys(d):d).length)throw new fn(1e3,"");if(!d[i])throw new fn(1001,"")}function No(u,a,i){u._forEachChild((d,y)=>{if(i[y]===void 0)throw new fn(1002,"")})}var Rt=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(a,i){this._assignValidators(a),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(a){this._rawValidators=this._composedValidatorFn=a}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(a){this._rawAsyncValidators=this._composedAsyncValidatorFn=a}get parent(){return this._parent}get status(){return Fe(this.statusReactive)}set status(a){Fe(()=>this.statusReactive.set(a))}_status=xt(()=>this.statusReactive());statusReactive=Vt(void 0);get valid(){return this.status===Mt}get invalid(){return this.status===_n}get pending(){return this.status==ut}get disabled(){return this.status===It}get enabled(){return this.status!==It}errors;get pristine(){return Fe(this.pristineReactive)}set pristine(a){Fe(()=>this.pristineReactive.set(a))}_pristine=xt(()=>this.pristineReactive());pristineReactive=Vt(!0);get dirty(){return!this.pristine}get touched(){return Fe(this.touchedReactive)}set touched(a){Fe(()=>this.touchedReactive.set(a))}_touched=xt(()=>this.touchedReactive());touchedReactive=Vt(!1);get untouched(){return!this.touched}_events=new Bi;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(a){this._assignValidators(a)}setAsyncValidators(a){this._assignAsyncValidators(a)}addValidators(a){this.setValidators(po(a,this._rawValidators))}addAsyncValidators(a){this.setAsyncValidators(po(a,this._rawAsyncValidators))}removeValidators(a){this.setValidators(mo(a,this._rawValidators))}removeAsyncValidators(a){this.setAsyncValidators(mo(a,this._rawAsyncValidators))}hasValidator(a){return bn(this._rawValidators,a)}hasAsyncValidator(a){return bn(this._rawAsyncValidators,a)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(a={}){let i=this.touched===!1;this.touched=!0;let d=a.sourceControl??this;this._parent&&!a.onlySelf&&this._parent.markAsTouched(ie(ee({},a),{sourceControl:d})),i&&a.emitEvent!==!1&&this._events.next(new Pt(!0,d))}markAllAsDirty(a={}){this.markAsDirty({onlySelf:!0,emitEvent:a.emitEvent,sourceControl:this}),this._forEachChild(i=>i.markAllAsDirty(a))}markAllAsTouched(a={}){this.markAsTouched({onlySelf:!0,emitEvent:a.emitEvent,sourceControl:this}),this._forEachChild(i=>i.markAllAsTouched(a))}markAsUntouched(a={}){let i=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let d=a.sourceControl??this;this._forEachChild(y=>{y.markAsUntouched({onlySelf:!0,emitEvent:a.emitEvent,sourceControl:d})}),this._parent&&!a.onlySelf&&this._parent._updateTouched(a,d),i&&a.emitEvent!==!1&&this._events.next(new Pt(!1,d))}markAsDirty(a={}){let i=this.pristine===!0;this.pristine=!1;let d=a.sourceControl??this;this._parent&&!a.onlySelf&&this._parent.markAsDirty(ie(ee({},a),{sourceControl:d})),i&&a.emitEvent!==!1&&this._events.next(new Ot(!1,d))}markAsPristine(a={}){let i=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let d=a.sourceControl??this;this._forEachChild(y=>{y.markAsPristine({onlySelf:!0,emitEvent:a.emitEvent})}),this._parent&&!a.onlySelf&&this._parent._updatePristine(a,d),i&&a.emitEvent!==!1&&this._events.next(new Ot(!0,d))}markAsPending(a={}){this.status=ut;let i=a.sourceControl??this;a.emitEvent!==!1&&(this._events.next(new lt(this.status,i)),this.statusChanges.emit(this.status)),this._parent&&!a.onlySelf&&this._parent.markAsPending(ie(ee({},a),{sourceControl:i}))}disable(a={}){let i=this._parentMarkedDirty(a.onlySelf);this.status=It,this.errors=null,this._forEachChild(y=>{y.disable(ie(ee({},a),{onlySelf:!0}))}),this._updateValue();let d=a.sourceControl??this;a.emitEvent!==!1&&(this._events.next(new Dn(this.value,d)),this._events.next(new lt(this.status,d)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ie(ee({},a),{skipPristineCheck:i}),this),this._onDisabledChange.forEach(y=>y(!0))}enable(a={}){let i=this._parentMarkedDirty(a.onlySelf);this.status=Mt,this._forEachChild(d=>{d.enable(ie(ee({},a),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:a.emitEvent}),this._updateAncestors(ie(ee({},a),{skipPristineCheck:i}),this),this._onDisabledChange.forEach(d=>d(!1))}_updateAncestors(a,i){this._parent&&!a.onlySelf&&(this._parent.updateValueAndValidity(a),a.skipPristineCheck||this._parent._updatePristine({},i),this._parent._updateTouched({},i))}setParent(a){this._parent=a}getRawValue(){return this.value}updateValueAndValidity(a={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let d=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mt||this.status===ut)&&this._runAsyncValidator(d,a.emitEvent)}let i=a.sourceControl??this;a.emitEvent!==!1&&(this._events.next(new Dn(this.value,i)),this._events.next(new lt(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!a.onlySelf&&this._parent.updateValueAndValidity(ie(ee({},a),{sourceControl:i}))}_updateTreeValidity(a={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(a)),this.updateValueAndValidity({onlySelf:!0,emitEvent:a.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?It:Mt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(a,i){if(this.asyncValidator){this.status=ut,this._hasOwnPendingAsyncValidator={emitEvent:i!==!1,shouldHaveEmitted:a!==!1};let d=So(this.asyncValidator(this));this._asyncValidationSubscription=d.subscribe(y=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(y,{emitEvent:i,shouldHaveEmitted:a})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let a=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,a}return!1}setErrors(a,i={}){this.errors=a,this._updateControlsErrors(i.emitEvent!==!1,this,i.shouldHaveEmitted)}get(a){let i=a;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((d,y)=>d&&d._find(y),this)}getError(a,i){let d=i?this.get(i):this;return d&&d.errors?d.errors[a]:null}hasError(a,i){return!!this.getError(a,i)}get root(){let a=this;for(;a._parent;)a=a._parent;return a}_updateControlsErrors(a,i,d){this.status=this._calculateStatus(),a&&this.statusChanges.emit(this.status),(a||d)&&this._events.next(new lt(this.status,i)),this._parent&&this._parent._updateControlsErrors(a,i,d)}_initObservables(){this.valueChanges=new ot,this.statusChanges=new ot}_calculateStatus(){return this._allControlsDisabled()?It:this.errors?_n:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ut)?ut:this._anyControlsHaveStatus(_n)?_n:Mt}_anyControlsHaveStatus(a){return this._anyControls(i=>i.status===a)}_anyControlsDirty(){return this._anyControls(a=>a.dirty)}_anyControlsTouched(){return this._anyControls(a=>a.touched)}_updatePristine(a,i){let d=!this._anyControlsDirty(),y=this.pristine!==d;this.pristine=d,this._parent&&!a.onlySelf&&this._parent._updatePristine(a,i),y&&this._events.next(new Ot(this.pristine,i))}_updateTouched(a={},i){this.touched=this._anyControlsTouched(),this._events.next(new Pt(this.touched,i)),this._parent&&!a.onlySelf&&this._parent._updateTouched(a,i)}_onDisabledChange=[];_registerOnCollectionChange(a){this._onCollectionChange=a}_setUpdateStrategy(a){Sn(a)&&a.updateOn!=null&&(this._updateOn=a.updateOn)}_parentMarkedDirty(a){let i=this._parent&&this._parent.dirty;return!a&&!!i&&!this._parent._anyControlsDirty()}_find(a){return null}_assignValidators(a){this._rawValidators=Array.isArray(a)?a.slice():a,this._composedValidatorFn=uu(this._rawValidators)}_assignAsyncValidators(a){this._rawAsyncValidators=Array.isArray(a)?a.slice():a,this._composedAsyncValidatorFn=lu(this._rawAsyncValidators)}},vo=class extends Rt{constructor(a,i,d){super(Kr(i),jr(d,i)),this.controls=a,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(a,i){return this.controls[a]?this.controls[a]:(this.controls[a]=i,i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange),i)}addControl(a,i,d={}){this.registerControl(a,i),this.updateValueAndValidity({emitEvent:d.emitEvent}),this._onCollectionChange()}removeControl(a,i={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),delete this.controls[a],this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}setControl(a,i,d={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),delete this.controls[a],i&&this.registerControl(a,i),this.updateValueAndValidity({emitEvent:d.emitEvent}),this._onCollectionChange()}contains(a){return this.controls.hasOwnProperty(a)&&this.controls[a].enabled}setValue(a,i={}){No(this,!0,a),Object.keys(a).forEach(d=>{Bo(this,!0,d),this.controls[d].setValue(a[d],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(a,i={}){a!=null&&(Object.keys(a).forEach(d=>{let y=this.controls[d];y&&y.patchValue(a[d],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(a={},i={}){this._forEachChild((d,y)=>{d.reset(a?a[y]:null,{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i,this),this._updateTouched(i,this),this.updateValueAndValidity(i)}getRawValue(){return this._reduceChildren({},(a,i,d)=>(a[d]=i.getRawValue(),a))}_syncPendingControls(){let a=this._reduceChildren(!1,(i,d)=>d._syncPendingControls()?!0:i);return a&&this.updateValueAndValidity({onlySelf:!0}),a}_forEachChild(a){Object.keys(this.controls).forEach(i=>{let d=this.controls[i];d&&a(d,i)})}_setUpControls(){this._forEachChild(a=>{a.setParent(this),a._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(a){for(let[i,d]of Object.entries(this.controls))if(this.contains(i)&&a(d))return!0;return!1}_reduceValue(){let a={};return this._reduceChildren(a,(i,d,y)=>((d.enabled||this.disabled)&&(i[y]=d.value),i))}_reduceChildren(a,i){let d=a;return this._forEachChild((y,P)=>{d=i(d,y,P)}),d}_allControlsDisabled(){for(let a of Object.keys(this.controls))if(this.controls[a].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(a){return this.controls.hasOwnProperty(a)?this.controls[a]:null}};var xn=new ze("",{providedIn:"root",factory:()=>Mn}),Mn="always";function In(u,a){return[...a.path,u]}function kr(u,a,i=Mn){Gr(u,a),a.valueAccessor.writeValue(u.value),(u.disabled||i==="always")&&a.valueAccessor.setDisabledState?.(u.disabled),fu(u,a),hu(u,a),du(u,a),cu(u,a)}function yo(u,a,i=!0){let d=()=>{};a.valueAccessor&&(a.valueAccessor.registerOnChange(d),a.valueAccessor.registerOnTouched(d)),An(u,a),u&&(a._invokeOnDestroyCallbacks(),u._registerOnCollectionChange(()=>{}))}function En(u,a){u.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(a)})}function cu(u,a){if(a.valueAccessor.setDisabledState){let i=d=>{a.valueAccessor.setDisabledState(d)};u.registerOnDisabledChange(i),a._registerOnDestroy(()=>{u._unregisterOnDisabledChange(i)})}}function Gr(u,a){let i=To(u);a.validator!==null?u.setValidators(ho(i,a.validator)):typeof i=="function"&&u.setValidators([i]);let d=ko(u);a.asyncValidator!==null?u.setAsyncValidators(ho(d,a.asyncValidator)):typeof d=="function"&&u.setAsyncValidators([d]);let y=()=>u.updateValueAndValidity();En(a._rawValidators,y),En(a._rawAsyncValidators,y)}function An(u,a){let i=!1;if(u!==null){if(a.validator!==null){let y=To(u);if(Array.isArray(y)&&y.length>0){let P=y.filter(N=>N!==a.validator);P.length!==y.length&&(i=!0,u.setValidators(P))}}if(a.asyncValidator!==null){let y=ko(u);if(Array.isArray(y)&&y.length>0){let P=y.filter(N=>N!==a.asyncValidator);P.length!==y.length&&(i=!0,u.setAsyncValidators(P))}}}let d=()=>{};return En(a._rawValidators,d),En(a._rawAsyncValidators,d),i}function fu(u,a){a.valueAccessor.registerOnChange(i=>{u._pendingValue=i,u._pendingChange=!0,u._pendingDirty=!0,u.updateOn==="change"&&Ko(u,a)})}function du(u,a){a.valueAccessor.registerOnTouched(()=>{u._pendingTouched=!0,u.updateOn==="blur"&&u._pendingChange&&Ko(u,a),u.updateOn!=="submit"&&u.markAsTouched()})}function Ko(u,a){u._pendingDirty&&u.markAsDirty(),u.setValue(u._pendingValue,{emitModelToViewChange:!1}),a.viewToModelUpdate(u._pendingValue),u._pendingChange=!1}function hu(u,a){let i=(d,y)=>{a.valueAccessor.writeValue(d),y&&a.viewToModelUpdate(d)};u.registerOnChange(i),a._registerOnDestroy(()=>{u._unregisterOnChange(i)})}function pu(u,a){u==null,Gr(u,a)}function mu(u,a){return An(u,a)}function jo(u,a){if(!u.hasOwnProperty("model"))return!1;let i=u.model;return i.isFirstChange()?!0:!Object.is(a,i.currentValue)}function vu(u){return Object.getPrototypeOf(u.constructor)===Do}function yu(u,a){u._syncPendingControls(),a.forEach(i=>{let d=i.control;d.updateOn==="submit"&&d._pendingChange&&(i.viewToModelUpdate(d._pendingValue),d._pendingChange=!1)})}function Go(u,a){if(!a)return null;Array.isArray(a);let i,d,y;return a.forEach(P=>{P.constructor===Eo?i=P:vu(P)?d=P:y=P}),y||d||i||null}function gu(u,a){let i=u.indexOf(a);i>-1&&u.splice(i,1)}function go(u,a){let i=u.indexOf(a);i>-1&&u.splice(i,1)}function _o(u){return typeof u=="object"&&u!==null&&Object.keys(u).length===2&&"value"in u&&"disabled"in u}var Uo=class extends Rt{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(a=null,i,d){super(Kr(i),jr(d,i)),this._applyFormState(a),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sn(i)&&(i.nonNullable||i.initialValueIsDefault)&&(_o(a)?this.defaultValue=a.value:this.defaultValue=a)}setValue(a,i={}){this.value=this._pendingValue=a,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(d=>d(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(a,i={}){this.setValue(a,i)}reset(a=this.defaultValue,i={}){this._applyFormState(a),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(a){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(a){this._onChange.push(a)}_unregisterOnChange(a){go(this._onChange,a)}registerOnDisabledChange(a){this._onDisabledChange.push(a)}_unregisterOnDisabledChange(a){go(this._onDisabledChange,a)}_forEachChild(a){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(a){_o(a)?(this.value=this._pendingValue=a.value,a.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=a}};var _u=u=>u instanceof Uo,bu=(()=>{class u extends ue{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return In(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let i;return function(y){return(i||(i=pn(u)))(y||u)}})();static \u0275dir=oe({type:u,standalone:!1,features:[ce]})}return u})();var wu={provide:qe,useExisting:Pe(()=>Cu)},bo=Promise.resolve(),Cu=(()=>{class u extends qe{_changeDetectorRef;callSetDisabledState;control=new Uo;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ot;constructor(i,d,y,P,N,L){super(),this._changeDetectorRef=N,this.callSetDisabledState=L,this._parent=i,this._setValidators(d),this._setAsyncValidators(y),this.valueAccessor=Go(this,P)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let d=i.name.previousValue;this.formDirective.removeControl({name:d,path:this._getPath(d)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),jo(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){kr(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){bo.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let d=i.isDisabled.currentValue,y=d!==0&&ro(d);bo.then(()=>{y&&!this.control.disabled?this.control.disable():!y&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?In(i,this._parent):[i]}static \u0275fac=function(d){return new(d||u)(W(ue,9),W(Ft,10),W(Tt,10),W(Vn,10),W(no,8),W(xn,8))};static \u0275dir=oe({type:u,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Re([wu]),ce,hn]})}return u})();var ul=(()=>{class u{static \u0275fac=function(d){return new(d||u)};static \u0275dir=oe({type:u,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return u})();var Lo=new ze("");var Du={provide:ue,useExisting:Pe(()=>Ho)},Ho=(()=>{class u extends ue{callSetDisabledState;get submitted(){return Fe(this._submittedReactive)}set submitted(i){this._submittedReactive.set(i)}_submitted=xt(()=>this._submittedReactive());_submittedReactive=Vt(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new ot;constructor(i,d,y){super(),this.callSetDisabledState=y,this._setValidators(i),this._setAsyncValidators(d)}ngOnChanges(i){i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(An(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let d=this.form.get(i.path);return kr(d,i,this.callSetDisabledState),d.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),d}getControl(i){return this.form.get(i.path)}removeControl(i){yo(i.control||null,i,!1),gu(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,d){this.form.get(i.path).setValue(d)}onSubmit(i){return this._submittedReactive.set(!0),yu(this.form,this.directives),this.ngSubmit.emit(i),this.form._events.next(new Fr(this.control)),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0,d={}){this.form.reset(i,d),this._submittedReactive.set(!1),d?.emitEvent!==!1&&this.form._events.next(new Tr(this.form))}_updateDomValue(){this.directives.forEach(i=>{let d=i.control,y=this.form.get(i.path);d!==y&&(yo(d||null,i),_u(y)&&(kr(y,i,this.callSetDisabledState),i.control=y))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let d=this.form.get(i.path);pu(d,i),d.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let d=this.form.get(i.path);d&&mu(d,i)&&d.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Gr(this.form,this),this._oldForm&&An(this._oldForm,this)}static \u0275fac=function(d){return new(d||u)(W(Ft,10),W(Tt,10),W(xn,8))};static \u0275dir=oe({type:u,selectors:[["","formGroup",""]],hostBindings:function(d,y){d&1&&st("submit",function(N){return y.onSubmit(N)})("reset",function(){return y.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Re([Du]),ce,hn]})}return u})(),Eu={provide:ue,useExisting:Pe(()=>Wo)},Wo=(()=>{class u extends bu{name=null;constructor(i,d,y){super(),this._parent=i,this._setValidators(d),this._setAsyncValidators(y)}_checkParentType(){zo(this._parent)}static \u0275fac=function(d){return new(d||u)(W(ue,13),W(Ft,10),W(Tt,10))};static \u0275dir=oe({type:u,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[Re([Eu]),ce]})}return u})(),Au={provide:ue,useExisting:Pe(()=>$o)},$o=(()=>{class u extends ue{_parent;name=null;constructor(i,d,y){super(),this._parent=i,this._setValidators(d),this._setAsyncValidators(y)}ngOnInit(){zo(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return In(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(d){return new(d||u)(W(ue,13),W(Ft,10),W(Tt,10))};static \u0275dir=oe({type:u,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[Re([Au]),ce]})}return u})();function zo(u){return!(u instanceof Wo)&&!(u instanceof Ho)&&!(u instanceof $o)}var Vu={provide:qe,useExisting:Pe(()=>Su)},Su=(()=>{class u extends qe{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(i){}model;update=new ot;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(i,d,y,P,N){super(),this._ngModelWarningConfig=N,this._parent=i,this._setValidators(d),this._setAsyncValidators(y),this.valueAccessor=Go(this,P)}ngOnChanges(i){this._added||this._setUpControl(),jo(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return In(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(d){return new(d||u)(W(ue,13),W(Ft,10),W(Tt,10),W(Vn,10),W(Lo,8))};static \u0275dir=oe({type:u,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Re([Vu]),ce,hn]})}return u})();var qo=(()=>{class u{static \u0275fac=function(d){return new(d||u)};static \u0275mod=mn({type:u});static \u0275inj=dn({})}return u})(),wo=class extends Rt{constructor(a,i,d){super(Kr(i),jr(d,i)),this.controls=a,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(a){return this.controls[this._adjustIndex(a)]}push(a,i={}){this.controls.push(a),this._registerControl(a),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}insert(a,i,d={}){this.controls.splice(a,0,i),this._registerControl(i),this.updateValueAndValidity({emitEvent:d.emitEvent})}removeAt(a,i={}){let d=this._adjustIndex(a);d<0&&(d=0),this.controls[d]&&this.controls[d]._registerOnCollectionChange(()=>{}),this.controls.splice(d,1),this.updateValueAndValidity({emitEvent:i.emitEvent})}setControl(a,i,d={}){let y=this._adjustIndex(a);y<0&&(y=0),this.controls[y]&&this.controls[y]._registerOnCollectionChange(()=>{}),this.controls.splice(y,1),i&&(this.controls.splice(y,0,i),this._registerControl(i)),this.updateValueAndValidity({emitEvent:d.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(a,i={}){No(this,!1,a),a.forEach((d,y)=>{Bo(this,!1,y),this.at(y).setValue(d,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(a,i={}){a!=null&&(a.forEach((d,y)=>{this.at(y)&&this.at(y).patchValue(d,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(a=[],i={}){this._forEachChild((d,y)=>{d.reset(a[y],{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i,this),this._updateTouched(i,this),this.updateValueAndValidity(i)}getRawValue(){return this.controls.map(a=>a.getRawValue())}clear(a={}){this.controls.length<1||(this._forEachChild(i=>i._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:a.emitEvent}))}_adjustIndex(a){return a<0?a+this.length:a}_syncPendingControls(){let a=this.controls.reduce((i,d)=>d._syncPendingControls()?!0:i,!1);return a&&this.updateValueAndValidity({onlySelf:!0}),a}_forEachChild(a){this.controls.forEach((i,d)=>{a(i,d)})}_updateValue(){this.value=this.controls.filter(a=>a.enabled||this.disabled).map(a=>a.value)}_anyControls(a){return this.controls.some(i=>i.enabled&&a(i))}_setUpControls(){this._forEachChild(a=>this._registerControl(a))}_allControlsDisabled(){for(let a of this.controls)if(a.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(a){a.setParent(this),a._registerOnCollectionChange(this._onCollectionChange)}_find(a){return this.at(a)??null}};var ll=(()=>{class u{static withConfig(i){return{ngModule:u,providers:[{provide:xn,useValue:i.callSetDisabledState??Mn}]}}static \u0275fac=function(d){return new(d||u)};static \u0275mod=mn({type:u});static \u0275inj=dn({imports:[qo]})}return u})(),cl=(()=>{class u{static withConfig(i){return{ngModule:u,providers:[{provide:Lo,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:xn,useValue:i.callSetDisabledState??Mn}]}}static \u0275fac=function(d){return new(d||u)};static \u0275mod=mn({type:u});static \u0275inj=dn({imports:[qo]})}return u})();var On=ks(Yo(),1),Qo=Symbol.for("Dexie"),Pn=globalThis[Qo]||(globalThis[Qo]=On.default);if(On.default.semVer!==Pn.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${On.default.semVer} and ${Pn.semVer}`);var{liveQuery:hl,mergeRanges:pl,rangesOverlap:ml,RangeSet:vl,cmp:yl,Entity:gl,PropModification:_l,replacePrefix:bl,add:wl,remove:Cl}=Pn;var Xo=Pn;var Zo=[{version:1,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryStore:"++uuid,name"}},{version:2,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryStore:"++uuid,name",categoryProductsStore:"++uuid,name"},update:u=>new Promise(a=>te(void 0,null,function*(){let i=yield u.table("categoryStore").toArray(),d=u.table("categoryProductsStore");yield Promise.all(i.map(y=>d.add(y))),yield u.table("categoryStore").clear()}))},{version:3,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:4,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:5,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"},update:u=>new Promise(a=>te(void 0,null,function*(){let i=[{uuid:"\u0423\u043A\u0441\u0443\u0441\u044B",name:"\u0423\u043A\u0441\u0443\u0441\u044B"}],d=["\u0421\u0438\u0440\u043E\u043F\u044B \u0438 \u043F\u0440\u043E\u043F\u0438\u0442\u043A\u0438"],y=[{old:"\u0420\u0430\u0437\u0440\u044B\u0445\u043B\u0438\u0442\u0435\u043B\u0438 \u0438 \u0441\u0442\u0430\u0431\u0438\u043B\u0438\u0437\u0430\u0442\u043E\u0440\u044B",new:"\u0420\u0430\u0437\u0440\u044B\u0445\u043B\u0438\u0442\u0435\u043B\u0438 \u0438 \u0441\u043E\u0434\u044B"}],P=u.table("categoryProductsStore"),N=yield P.toArray(),L=N.filter(Y=>d.includes(Y.name)).map(Y=>Y.uuid),ne=N.filter(Y=>y.map(Q=>Q.old).includes(Y.name));yield Promise.all(ne.map(Y=>{let Q=y.find(we=>we.old===Y.name)?.new;return P.update(Y.uuid,{name:Q})})),yield Promise.all(L.map(Y=>P.delete(Y))),yield Promise.all(i.map(Y=>P.add(Y)))}))},{version:6,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name,source",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:7,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:8,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"},update:u=>{let a=["productsStore","recipesStore","categoryProductsStore","categoryRecipesStore"];return Promise.all([new Promise(i=>te(void 0,null,function*(){let d=u.table("categoryProductsStore"),y=yield d.toArray(),P=u.table("productsStore"),N=yield P.toArray();yield Promise.all(N.map(L=>{let ne=y.find(Y=>Y.uuid===L.category_id);return ne?P.update(L.uuid,{category_id:ne.name}):Promise.resolve()})),yield Promise.all(y.map(L=>d.update(L.uuid,{uuid:L.name}))),i()})),new Promise(i=>te(void 0,null,function*(){let d=u.table("categoryRecipesStore"),y=yield d.toArray(),P=u.table("recipesStore"),N=yield P.toArray();yield Promise.all(N.map(L=>{let ne=y.find(Y=>Y.uuid===L.category_id);return ne?P.update(L.uuid,{category_id:ne.name}):Promise.resolve()})),yield Promise.all(y.map(L=>d.update(L.uuid,{uuid:L.name}))),i()}))]).then(()=>{})}}];var Jo=class u extends Xo{constructor(){super("lasagna-db");let a=new Set;for(let i of Zo){if(a.has(i.version))throw new Error(`Duplicate migration version: ${i.version}`);a.add(i.version);let d=this.version(i.version).stores(i.schema);i.update&&d.upgrade(i.update),console.log(`Migration ${i.version} applied`)}}productsStore;recipesStore;categoryStore;addData(a,i,d){return te(this,null,function*(){let y=d||this.generateUuid();return yield this[a].put(ie(ee({},i),{uuid:y})),y})}replaceData(a,i,d){return te(this,null,function*(){yield this[a].put(ie(ee({},d),{uuid:i}))})}search(a,i,d){return te(this,null,function*(){return this[a].where(i).equals(d).toArray()})}filter(a,i,d){return te(this,null,function*(){return this[a].filter(y=>y[i]?.toLowerCase().includes(d.toLowerCase())).toArray()})}getOne(a,i){return te(this,null,function*(){return this[a].get(i)})}getAll(a){return te(this,null,function*(){return this[a].toArray()})}getMany(a,i){return te(this,null,function*(){return this[a].where("uuid").anyOf(i).toArray()})}remove(a,i){return te(this,null,function*(){yield this[a].delete(i)})}generateUuid(){return uo()}balkAdd(a,i,d=!0){return te(this,null,function*(){yield this[a].bulkPut(i.map(y=>ie(ee({},y),{uuid:d?this.generateUuid():y.uuid})))})}uniqueKeys(a,i){return te(this,null,function*(){return this[a].orderBy(i).uniqueKeys()})}static \u0275fac=function(i){return new(i||u)};static \u0275prov=Er({token:u,factory:u.\u0275fac,providedIn:"root"})};export{so as a,hl as b,Bs as c,Ns as d,uo as e,Jo as f,lo as g,Vn as h,zs as i,fo as j,qe as k,ol as l,al as m,vo as n,Uo as o,Cu as p,ul as q,Ho as r,Wo as s,$o as t,Su as u,wo as v,ll as w,cl as x};
