import{a as mr,b as fc,c as dc,d as No,e as vr,m as Oi,n as pc,o as jo,p as Di,q as gc}from"./chunk-L2PT433O.js";import{$ as Tn,$a as Zu,A as nt,Aa as Fu,Ba as Bu,Ca as zu,Cb as rc,Cc as Ai,D as qt,Da as Yt,E as It,Ea as pt,Ec as cc,Fa as hr,Fc as lc,G as So,Ga as Cn,Gc as hc,H as En,Ha as _n,Hc as xi,I as Sn,Ia as $u,J as At,Ja as Ku,Jb as ic,K as To,Ka as Vu,Kc as xe,L as xu,La as Gu,M as Ou,Ma as Hu,Na as Wu,Oa as qu,Ob as sc,P as Du,Pa as Qt,Q as Ke,Qb as oc,R as Co,Ra as Xu,Rb as ac,S as Ce,T as he,Ua as fr,V as ue,W as cr,Wa as Ju,X as Pu,Xa as Do,Y as ge,Ya as We,Z as oe,Za as Yu,_ as G,_a as Qu,a as Tu,ab as Po,b as Cu,ba as Mu,bb as ec,c as Si,ca as xt,cb as dr,d as wo,da as He,db as pr,e as bo,f as ft,g as $e,hb as Mo,ia as Xt,ib as tc,j as dt,ja as _o,k as Me,ka as Ci,l as ee,la as ku,lb as Ii,m as ur,mb as gr,mc as ko,n as _u,nb as nc,o as Iu,oa as _i,pa as Nu,q as de,qa as lr,r as Ro,ra as Io,s as Le,sa as ju,t as Eo,ta as Ao,u as Au,ua as Uu,v as Ti,va as xo,vc as uc,wa as Lu,xa as Jt,za as Oo}from"./chunk-PNZYYIKS.js";import{a as Vf}from"./chunk-DELOOZDJ.js";import{a as V,b as Ae,c as Su,d as $f,e as Kf,f as te}from"./chunk-2WH2EVR6.js";var Dl=$f((Ra,Ea)=>{"use strict";(function(t,n){typeof Ra=="object"&&typeof Ea<"u"?Ea.exports=n():typeof define=="function"&&define.amd?define(n):(t=typeof globalThis<"u"?globalThis:t||self,t.Dexie=n())})(Ra,function(){"use strict";var t=function(s,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(u[h]=l[h])},t(s,o)};function n(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");t(s,o);function u(){this.constructor=s}s.prototype=o===null?Object.create(o):(u.prototype=o.prototype,new u)}var e=function(){return e=Object.assign||function(o){for(var u,l=1,h=arguments.length;l<h;l++){u=arguments[l];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(o[p]=u[p])}return o},e.apply(this,arguments)};function r(s,o,u){if(u||arguments.length===2)for(var l=0,h=o.length,p;l<h;l++)(p||!(l in o))&&(p||(p=Array.prototype.slice.call(o,0,l)),p[l]=o[l]);return s.concat(p||Array.prototype.slice.call(o))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,a=Object.keys,c=Array.isArray;typeof Promise<"u"&&!i.Promise&&(i.Promise=Promise);function f(s,o){return typeof o!="object"||a(o).forEach(function(u){s[u]=o[u]}),s}var d=Object.getPrototypeOf,m={}.hasOwnProperty;function w(s,o){return m.call(s,o)}function C(s,o){typeof o=="function"&&(o=o(d(s))),(typeof Reflect>"u"?a:Reflect.ownKeys)(o).forEach(function(u){M(s,u,o[u])})}var _=Object.defineProperty;function M(s,o,u,l){_(s,o,f(u&&w(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},l))}function k(s){return{from:function(o){return s.prototype=Object.create(o.prototype),M(s.prototype,"constructor",s),{extend:C.bind(null,s.prototype)}}}}var j=Object.getOwnPropertyDescriptor;function L(s,o){var u=j(s,o),l;return u||(l=d(s))&&L(l,o)}var q=[].slice;function Q(s,o,u){return q.call(s,o,u)}function ie(s,o){return o(s)}function fe(s){if(!s)throw new Error("Assertion Failed")}function ne(s){i.setImmediate?setImmediate(s):setTimeout(s,0)}function ye(s,o){return s.reduce(function(u,l,h){var p=o(l,h);return p&&(u[p[0]]=p[1]),u},{})}function Te(s,o){if(typeof o=="string"&&w(s,o))return s[o];if(!o)return s;if(typeof o!="string"){for(var u=[],l=0,h=o.length;l<h;++l){var p=Te(s,o[l]);u.push(p)}return u}var g=o.indexOf(".");if(g!==-1){var v=s[o.substr(0,g)];return v==null?void 0:Te(v,o.substr(g+1))}}function me(s,o,u){if(!(!s||o===void 0)&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof o!="string"&&"length"in o){fe(typeof u!="string"&&"length"in u);for(var l=0,h=o.length;l<h;++l)me(s,o[l],u[l])}else{var p=o.indexOf(".");if(p!==-1){var g=o.substr(0,p),v=o.substr(p+1);if(v==="")u===void 0?c(s)&&!isNaN(parseInt(g))?s.splice(g,1):delete s[g]:s[g]=u;else{var y=s[g];(!y||!w(s,g))&&(y=s[g]={}),me(y,v,u)}}else u===void 0?c(s)&&!isNaN(parseInt(o))?s.splice(o,1):delete s[o]:s[o]=u}}function Ye(s,o){typeof o=="string"?me(s,o,void 0):"length"in o&&[].map.call(o,function(u){me(s,u,void 0)})}function Ne(s){var o={};for(var u in s)w(s,u)&&(o[u]=s[u]);return o}var _s=[].concat;function Na(s){return _s.apply([],s)}var hh="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Na([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(o){return o+s+"Array"})}))).filter(function(s){return i[s]}),ja=new Set(hh.map(function(s){return i[s]}));function Ua(s){var o={};for(var u in s)if(w(s,u)){var l=s[u];o[u]=!l||typeof l!="object"||ja.has(l.constructor)?l:Ua(l)}return o}function fh(s){for(var o in s)if(w(s,o))return!1;return!0}var Wn=null;function Ut(s){Wn=new WeakMap;var o=Is(s);return Wn=null,o}function Is(s){if(!s||typeof s!="object")return s;var o=Wn.get(s);if(o)return o;if(c(s)){o=[],Wn.set(s,o);for(var u=0,l=s.length;u<l;++u)o.push(Is(s[u]))}else if(ja.has(s.constructor))o=s;else{var h=d(s);o=h===Object.prototype?{}:Object.create(h),Wn.set(s,o);for(var p in s)w(s,p)&&(o[p]=Is(s[p]))}return o}var dh={}.toString;function As(s){return dh.call(s).slice(8,-1)}var xs=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ph=typeof xs=="symbol"?function(s){var o;return s!=null&&(o=s[xs])&&o.apply(s)}:function(){return null};function Lt(s,o){var u=s.indexOf(o);return u>=0&&s.splice(u,1),u>=0}var dn={};function ct(s){var o,u,l,h;if(arguments.length===1){if(c(s))return s.slice();if(this===dn&&typeof s=="string")return[s];if(h=ph(s)){for(u=[];l=h.next(),!l.done;)u.push(l.value);return u}if(s==null)return[s];if(o=s.length,typeof o=="number"){for(u=new Array(o);o--;)u[o]=s[o];return u}return[s]}for(o=arguments.length,u=new Array(o);o--;)u[o]=arguments[o];return u}var Os=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},gh=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],La=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ds=gh.concat(La),mh={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function pn(s,o){this.name=s,this.message=o}k(pn).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Fa(s,o){return s+". Errors: "+Object.keys(o).map(function(u){return o[u].toString()}).filter(function(u,l,h){return h.indexOf(u)===l}).join(`
`)}function Jr(s,o,u,l){this.failures=o,this.failedKeys=l,this.successCount=u,this.message=Fa(s,o)}k(Jr).from(pn);function gn(s,o){this.name="BulkError",this.failures=Object.keys(o).map(function(u){return o[u]}),this.failuresByPos=o,this.message=Fa(s,this.failures)}k(gn).from(pn);var Ps=Ds.reduce(function(s,o){return s[o]=o+"Error",s},{}),vh=pn,J=Ds.reduce(function(s,o){var u=o+"Error";function l(h,p){this.name=u,h?typeof h=="string"?(this.message="".concat(h).concat(p?`
 `+p:""),this.inner=p||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=mh[o]||u,this.inner=null)}return k(l).from(vh),s[o]=l,s},{});J.Syntax=SyntaxError,J.Type=TypeError,J.Range=RangeError;var Ba=La.reduce(function(s,o){return s[o+"Error"]=J[o],s},{});function yh(s,o){if(!s||s instanceof pn||s instanceof TypeError||s instanceof SyntaxError||!s.name||!Ba[s.name])return s;var u=new Ba[s.name](o||s.message,s);return"stack"in s&&M(u,"stack",{get:function(){return this.inner.stack}}),u}var Yr=Ds.reduce(function(s,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(s[o+"Error"]=J[o]),s},{});Yr.ModifyError=Jr,Yr.DexieError=pn,Yr.BulkError=gn;function ve(){}function qn(s){return s}function wh(s,o){return s==null||s===qn?o:function(u){return o(s(u))}}function Ft(s,o){return function(){s.apply(this,arguments),o.apply(this,arguments)}}function bh(s,o){return s===ve?o:function(){var u=s.apply(this,arguments);u!==void 0&&(arguments[0]=u);var l=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var p=o.apply(this,arguments);return l&&(this.onsuccess=this.onsuccess?Ft(l,this.onsuccess):l),h&&(this.onerror=this.onerror?Ft(h,this.onerror):h),p!==void 0?p:u}}function Rh(s,o){return s===ve?o:function(){s.apply(this,arguments);var u=this.onsuccess,l=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?Ft(u,this.onsuccess):u),l&&(this.onerror=this.onerror?Ft(l,this.onerror):l)}}function Eh(s,o){return s===ve?o:function(u){var l=s.apply(this,arguments);f(u,l);var h=this.onsuccess,p=this.onerror;this.onsuccess=null,this.onerror=null;var g=o.apply(this,arguments);return h&&(this.onsuccess=this.onsuccess?Ft(h,this.onsuccess):h),p&&(this.onerror=this.onerror?Ft(p,this.onerror):p),l===void 0?g===void 0?void 0:g:f(l,g)}}function Sh(s,o){return s===ve?o:function(){return o.apply(this,arguments)===!1?!1:s.apply(this,arguments)}}function Ms(s,o){return s===ve?o:function(){var u=s.apply(this,arguments);if(u&&typeof u.then=="function"){for(var l=this,h=arguments.length,p=new Array(h);h--;)p[h]=arguments[h];return u.then(function(){return o.apply(l,p)})}return o.apply(this,arguments)}}var Qe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function za(s,o){Qe=s}var Xn={},$a=100,ks=typeof Promise>"u"?[]:function(){var s=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[s,d(s),s];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,d(o),s]}(),Ka=ks[0],Va=ks[1],Th=ks[2],Ch=Va&&Va.then,Bt=Ka&&Ka.constructor,Ns=!!Th;function _h(){queueMicrotask(Ah)}var Jn=function(s,o){Yn.push([s,o]),Qr&&(_h(),Qr=!1)},js=!0,Qr=!0,zt=[],Zr=[],Us=qn,yt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ve,pgp:!1,env:{},finalize:ve},H=yt,Yn=[],$t=0,ei=[];function z(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=H;if(typeof s!="function"){if(s!==Xn)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Fs(this,this._value);return}this._state=null,this._value=null,++o.ref,Ha(this,s)}var Ls={get:function(){var s=H,o=ii;function u(l,h){var p=this,g=!s.global&&(s!==H||o!==ii),v=g&&!bt(),y=new z(function(b,S){Bs(p,new Ga(Xa(l,s,g,v),Xa(h,s,g,v),b,S,s))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return u.prototype=Xn,u},set:function(s){M(this,"then",s&&s.prototype===Xn?Ls:{get:function(){return s},set:Ls.set})}};C(z.prototype,{then:Ls,_then:function(s,o){Bs(this,new Ga(null,null,s,o,H))},catch:function(s){if(arguments.length===1)return this.then(null,s);var o=arguments[0],u=arguments[1];return typeof o=="function"?this.then(null,function(l){return l instanceof o?u(l):ti(l)}):this.then(null,function(l){return l&&l.name===o?u(l):ti(l)})},finally:function(s){return this.then(function(o){return z.resolve(s()).then(function(){return o})},function(o){return z.resolve(s()).then(function(){return ti(o)})})},timeout:function(s,o){var u=this;return s<1/0?new z(function(l,h){var p=setTimeout(function(){return h(new J.Timeout(o))},s);u.then(l,h).finally(clearTimeout.bind(null,p))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&M(z.prototype,Symbol.toStringTag,"Dexie.Promise"),yt.env=qa();function Ga(s,o,u,l,h){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof o=="function"?o:null,this.resolve=u,this.reject=l,this.psd=h}C(z,{all:function(){var s=ct.apply(null,arguments).map(si);return new z(function(o,u){s.length===0&&o([]);var l=s.length;s.forEach(function(h,p){return z.resolve(h).then(function(g){s[p]=g,--l||o(s)},u)})})},resolve:function(s){if(s instanceof z)return s;if(s&&typeof s.then=="function")return new z(function(u,l){s.then(u,l)});var o=new z(Xn,!0,s);return o},reject:ti,race:function(){var s=ct.apply(null,arguments).map(si);return new z(function(o,u){s.map(function(l){return z.resolve(l).then(o,u)})})},PSD:{get:function(){return H},set:function(s){return H=s}},totalEchoes:{get:function(){return ii}},newPSD:wt,usePSD:Kt,scheduler:{get:function(){return Jn},set:function(s){Jn=s}},rejectionMapper:{get:function(){return Us},set:function(s){Us=s}},follow:function(s,o){return new z(function(u,l){return wt(function(h,p){var g=H;g.unhandleds=[],g.onunhandled=p,g.finalize=Ft(function(){var v=this;xh(function(){v.unhandleds.length===0?h():p(v.unhandleds[0])})},g.finalize),s()},o,u,l)})}}),Bt&&(Bt.allSettled&&M(z,"allSettled",function(){var s=ct.apply(null,arguments).map(si);return new z(function(o){s.length===0&&o([]);var u=s.length,l=new Array(u);s.forEach(function(h,p){return z.resolve(h).then(function(g){return l[p]={status:"fulfilled",value:g}},function(g){return l[p]={status:"rejected",reason:g}}).then(function(){return--u||o(l)})})})}),Bt.any&&typeof AggregateError<"u"&&M(z,"any",function(){var s=ct.apply(null,arguments).map(si);return new z(function(o,u){s.length===0&&u(new AggregateError([]));var l=s.length,h=new Array(l);s.forEach(function(p,g){return z.resolve(p).then(function(v){return o(v)},function(v){h[g]=v,--l||u(new AggregateError(h))})})})}),Bt.withResolvers&&(z.withResolvers=Bt.withResolvers));function Ha(s,o){try{o(function(u){if(s._state===null){if(u===s)throw new TypeError("A promise cannot be resolved with itself.");var l=s._lib&&mn();u&&typeof u.then=="function"?Ha(s,function(h,p){u instanceof z?u._then(h,p):u.then(h,p)}):(s._state=!0,s._value=u,Wa(s)),l&&vn()}},Fs.bind(null,s))}catch(u){Fs(s,u)}}function Fs(s,o){if(Zr.push(o),s._state===null){var u=s._lib&&mn();o=Us(o),s._state=!1,s._value=o,Oh(s),Wa(s),u&&vn()}}function Wa(s){var o=s._listeners;s._listeners=[];for(var u=0,l=o.length;u<l;++u)Bs(s,o[u]);var h=s._PSD;--h.ref||h.finalize(),$t===0&&(++$t,Jn(function(){--$t===0&&zs()},[]))}function Bs(s,o){if(s._state===null){s._listeners.push(o);return}var u=s._state?o.onFulfilled:o.onRejected;if(u===null)return(s._state?o.resolve:o.reject)(s._value);++o.psd.ref,++$t,Jn(Ih,[u,s,o])}function Ih(s,o,u){try{var l,h=o._value;!o._state&&Zr.length&&(Zr=[]),l=Qe&&o._consoleTask?o._consoleTask.run(function(){return s(h)}):s(h),!o._state&&Zr.indexOf(h)===-1&&Dh(o),u.resolve(l)}catch(p){u.reject(p)}finally{--$t===0&&zs(),--u.psd.ref||u.psd.finalize()}}function Ah(){Kt(yt,function(){mn()&&vn()})}function mn(){var s=js;return js=!1,Qr=!1,s}function vn(){var s,o,u;do for(;Yn.length>0;)for(s=Yn,Yn=[],u=s.length,o=0;o<u;++o){var l=s[o];l[0].apply(null,l[1])}while(Yn.length>0);js=!0,Qr=!0}function zs(){var s=zt;zt=[],s.forEach(function(l){l._PSD.onunhandled.call(null,l._value,l)});for(var o=ei.slice(0),u=o.length;u;)o[--u]()}function xh(s){function o(){s(),ei.splice(ei.indexOf(o),1)}ei.push(o),++$t,Jn(function(){--$t===0&&zs()},[])}function Oh(s){zt.some(function(o){return o._value===s._value})||zt.push(s)}function Dh(s){for(var o=zt.length;o;)if(zt[--o]._value===s._value){zt.splice(o,1);return}}function ti(s){return new z(Xn,!1,s)}function we(s,o){var u=H;return function(){var l=mn(),h=H;try{return Rt(u,!0),s.apply(this,arguments)}catch(p){o&&o(p)}finally{Rt(h,!1),l&&vn()}}}var Ie={awaits:0,echoes:0,id:0},Ph=0,ni=[],ri=0,ii=0,Mh=0;function wt(s,o,u,l){var h=H,p=Object.create(h);p.parent=h,p.ref=0,p.global=!1,p.id=++Mh,yt.env,p.env=Ns?{Promise:z,PromiseProp:{value:z,configurable:!0,writable:!0},all:z.all,race:z.race,allSettled:z.allSettled,any:z.any,resolve:z.resolve,reject:z.reject}:{},o&&f(p,o),++h.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()};var g=Kt(p,s,u,l);return p.ref===0&&p.finalize(),g}function yn(){return Ie.id||(Ie.id=++Ph),++Ie.awaits,Ie.echoes+=$a,Ie.id}function bt(){return Ie.awaits?(--Ie.awaits===0&&(Ie.id=0),Ie.echoes=Ie.awaits*$a,!0):!1}(""+Ch).indexOf("[native code]")===-1&&(yn=bt=ve);function si(s){return Ie.echoes&&s&&s.constructor===Bt?(yn(),s.then(function(o){return bt(),o},function(o){return bt(),Se(o)})):s}function kh(s){++ii,(!Ie.echoes||--Ie.echoes===0)&&(Ie.echoes=Ie.awaits=Ie.id=0),ni.push(H),Rt(s,!0)}function Nh(){var s=ni[ni.length-1];ni.pop(),Rt(s,!1)}function Rt(s,o){var u=H;if((o?Ie.echoes&&(!ri++||s!==H):ri&&(!--ri||s!==H))&&queueMicrotask(o?kh.bind(null,s):Nh),s!==H&&(H=s,u===yt&&(yt.env=qa()),Ns)){var l=yt.env.Promise,h=s.env;(u.global||s.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),l.all=h.all,l.race=h.race,l.resolve=h.resolve,l.reject=h.reject,h.allSettled&&(l.allSettled=h.allSettled),h.any&&(l.any=h.any))}}function qa(){var s=i.Promise;return Ns?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function Kt(s,o,u,l,h){var p=H;try{return Rt(s,!0),o(u,l,h)}finally{Rt(p,!1)}}function Xa(s,o,u,l){return typeof s!="function"?s:function(){var h=H;u&&yn(),Rt(o,!0);try{return s.apply(this,arguments)}finally{Rt(h,!1),l&&queueMicrotask(bt)}}}function $s(s){Promise===Bt&&Ie.echoes===0?ri===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}var Se=z.reject;function Ks(s,o,u,l){if(!s.idbdb||!s._state.openComplete&&!H.letThrough&&!s._vip){if(s._state.openComplete)return Se(new J.DatabaseClosed(s._state.dbOpenError));if(!s._state.isBeingOpened){if(!s._state.autoOpen)return Se(new J.DatabaseClosed);s.open().catch(ve)}return s._state.dbReadyPromise.then(function(){return Ks(s,o,u,l)})}else{var h=s._createTransaction(o,u,s._dbSchema);try{h.create(),s._state.PR1398_maxLoop=3}catch(p){return p.name===Ps.InvalidState&&s.isOpen()&&--s._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),s.close({disableAutoOpen:!1}),s.open().then(function(){return Ks(s,o,u,l)})):Se(p)}return h._promise(o,function(p,g){return wt(function(){return H.trans=h,l(p,g,h)})}).then(function(p){if(o==="readwrite")try{h.idbtrans.commit()}catch{}return o==="readonly"?p:h._completion.then(function(){return p})})}}var Ja="4.0.11",Vt="\uFFFF",Vs=-1/0,lt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ya="String expected.",wn=[],oi="__dbnames",Gs="readonly",Hs="readwrite";function Gt(s,o){return s?o?function(){return s.apply(this,arguments)&&o.apply(this,arguments)}:s:o}var Qa={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ai(s){return typeof s=="string"&&!/\./.test(s)?function(o){return o[s]===void 0&&s in o&&(o=Ut(o),delete o[s]),o}:function(o){return o}}function Za(){throw J.Type()}function ce(s,o){try{var u=eu(s),l=eu(o);if(u!==l)return u==="Array"?1:l==="Array"?-1:u==="binary"?1:l==="binary"?-1:u==="string"?1:l==="string"?-1:u==="Date"?1:l!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return s>o?1:s<o?-1:0;case"binary":return Uh(tu(s),tu(o));case"Array":return jh(s,o)}}catch{}return NaN}function jh(s,o){for(var u=s.length,l=o.length,h=u<l?u:l,p=0;p<h;++p){var g=ce(s[p],o[p]);if(g!==0)return g}return u===l?0:u<l?-1:1}function Uh(s,o){for(var u=s.length,l=o.length,h=u<l?u:l,p=0;p<h;++p)if(s[p]!==o[p])return s[p]<o[p]?-1:1;return u===l?0:u<l?-1:1}function eu(s){var o=typeof s;if(o!=="object")return o;if(ArrayBuffer.isView(s))return"binary";var u=As(s);return u==="ArrayBuffer"?"binary":u}function tu(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}var nu=function(){function s(){}return s.prototype._trans=function(o,u,l){var h=this._tx||H.trans,p=this.name,g=Qe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(o==="readonly"?"read":"write"," ").concat(this.name));function v(S,R,A){if(!A.schema[p])throw new J.NotFound("Table "+p+" not part of transaction");return u(A.idbtrans,A)}var y=mn();try{var b=h&&h.db._novip===this.db._novip?h===H.trans?h._promise(o,v,l):wt(function(){return h._promise(o,v,l)},{trans:h,transless:H.transless||H}):Ks(this.db,o,[this.name],v);return g&&(b._consoleTask=g,b=b.catch(function(S){return console.trace(S),Se(S)})),b}finally{y&&vn()}},s.prototype.get=function(o,u){var l=this;return o&&o.constructor===Object?this.where(o).first(u):o==null?Se(new J.Type("Invalid argument to Table.get()")):this._trans("readonly",function(h){return l.core.get({trans:h,key:o}).then(function(p){return l.hook.reading.fire(p)})}).then(u)},s.prototype.where=function(o){if(typeof o=="string")return new this.db.WhereClause(this,o);if(c(o))return new this.db.WhereClause(this,"[".concat(o.join("+"),"]"));var u=a(o);if(u.length===1)return this.where(u[0]).equals(o[u[0]]);var l=this.schema.indexes.concat(this.schema.primKey).filter(function(S){if(S.compound&&u.every(function(A){return S.keyPath.indexOf(A)>=0})){for(var R=0;R<u.length;++R)if(u.indexOf(S.keyPath[R])===-1)return!1;return!0}return!1}).sort(function(S,R){return S.keyPath.length-R.keyPath.length})[0];if(l&&this.db._maxKey!==Vt){var h=l.keyPath.slice(0,u.length);return this.where(h).equals(h.map(function(S){return o[S]}))}!l&&Qe&&console.warn("The query ".concat(JSON.stringify(o)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(u.join("+"),"]"));var p=this.schema.idxByName;function g(S,R){return ce(S,R)===0}var v=u.reduce(function(S,R){var A=S[0],U=S[1],E=p[R],T=o[R];return[A||E,A||!E?Gt(U,E&&E.multi?function(I){var P=Te(I,R);return c(P)&&P.some(function(O){return g(T,O)})}:function(I){return g(T,Te(I,R))}):U]},[null,null]),y=v[0],b=v[1];return y?this.where(y.name).equals(o[y.keyPath]).filter(b):l?this.filter(b):this.where(u).equals("")},s.prototype.filter=function(o){return this.toCollection().and(o)},s.prototype.count=function(o){return this.toCollection().count(o)},s.prototype.offset=function(o){return this.toCollection().offset(o)},s.prototype.limit=function(o){return this.toCollection().limit(o)},s.prototype.each=function(o){return this.toCollection().each(o)},s.prototype.toArray=function(o){return this.toCollection().toArray(o)},s.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},s.prototype.orderBy=function(o){return new this.db.Collection(new this.db.WhereClause(this,c(o)?"[".concat(o.join("+"),"]"):o))},s.prototype.reverse=function(){return this.toCollection().reverse()},s.prototype.mapToClass=function(o){var u=this,l=u.db,h=u.name;this.schema.mappedClass=o,o.prototype instanceof Za&&(o=function(y){n(b,y);function b(){return y!==null&&y.apply(this,arguments)||this}return Object.defineProperty(b.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),b.prototype.table=function(){return h},b}(o));for(var p=new Set,g=o.prototype;g;g=d(g))Object.getOwnPropertyNames(g).forEach(function(y){return p.add(y)});var v=function(y){if(!y)return y;var b=Object.create(o.prototype);for(var S in y)if(!p.has(S))try{b[S]=y[S]}catch{}return b};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),o},s.prototype.defineClass=function(){function o(u){f(this,u)}return this.mapToClass(o)},s.prototype.add=function(o,u){var l=this,h=this.schema.primKey,p=h.auto,g=h.keyPath,v=o;return g&&p&&(v=ai(g)(o)),this._trans("readwrite",function(y){return l.core.mutate({trans:y,type:"add",keys:u!=null?[u]:null,values:[v]})}).then(function(y){return y.numFailures?z.reject(y.failures[0]):y.lastResult}).then(function(y){if(g)try{me(o,g,y)}catch{}return y})},s.prototype.update=function(o,u){if(typeof o=="object"&&!c(o)){var l=Te(o,this.schema.primKey.keyPath);return l===void 0?Se(new J.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(l).modify(u)}else return this.where(":id").equals(o).modify(u)},s.prototype.put=function(o,u){var l=this,h=this.schema.primKey,p=h.auto,g=h.keyPath,v=o;return g&&p&&(v=ai(g)(o)),this._trans("readwrite",function(y){return l.core.mutate({trans:y,type:"put",values:[v],keys:u!=null?[u]:null})}).then(function(y){return y.numFailures?z.reject(y.failures[0]):y.lastResult}).then(function(y){if(g)try{me(o,g,y)}catch{}return y})},s.prototype.delete=function(o){var u=this;return this._trans("readwrite",function(l){return u.core.mutate({trans:l,type:"delete",keys:[o]})}).then(function(l){return l.numFailures?z.reject(l.failures[0]):void 0})},s.prototype.clear=function(){var o=this;return this._trans("readwrite",function(u){return o.core.mutate({trans:u,type:"deleteRange",range:Qa})}).then(function(u){return u.numFailures?z.reject(u.failures[0]):void 0})},s.prototype.bulkGet=function(o){var u=this;return this._trans("readonly",function(l){return u.core.getMany({keys:o,trans:l}).then(function(h){return h.map(function(p){return u.hook.reading.fire(p)})})})},s.prototype.bulkAdd=function(o,u,l){var h=this,p=Array.isArray(u)?u:void 0;l=l||(p?void 0:u);var g=l?l.allKeys:void 0;return this._trans("readwrite",function(v){var y=h.schema.primKey,b=y.auto,S=y.keyPath;if(S&&p)throw new J.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(p&&p.length!==o.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var R=o.length,A=S&&b?o.map(ai(S)):o;return h.core.mutate({trans:v,type:"add",keys:p,values:A,wantResults:g}).then(function(U){var E=U.numFailures,T=U.results,I=U.lastResult,P=U.failures,O=g?T:I;if(E===0)return O;throw new gn("".concat(h.name,".bulkAdd(): ").concat(E," of ").concat(R," operations failed"),P)})})},s.prototype.bulkPut=function(o,u,l){var h=this,p=Array.isArray(u)?u:void 0;l=l||(p?void 0:u);var g=l?l.allKeys:void 0;return this._trans("readwrite",function(v){var y=h.schema.primKey,b=y.auto,S=y.keyPath;if(S&&p)throw new J.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(p&&p.length!==o.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var R=o.length,A=S&&b?o.map(ai(S)):o;return h.core.mutate({trans:v,type:"put",keys:p,values:A,wantResults:g}).then(function(U){var E=U.numFailures,T=U.results,I=U.lastResult,P=U.failures,O=g?T:I;if(E===0)return O;throw new gn("".concat(h.name,".bulkPut(): ").concat(E," of ").concat(R," operations failed"),P)})})},s.prototype.bulkUpdate=function(o){var u=this,l=this.core,h=o.map(function(v){return v.key}),p=o.map(function(v){return v.changes}),g=[];return this._trans("readwrite",function(v){return l.getMany({trans:v,keys:h,cache:"clone"}).then(function(y){var b=[],S=[];o.forEach(function(A,U){var E=A.key,T=A.changes,I=y[U];if(I){for(var P=0,O=Object.keys(T);P<O.length;P++){var D=O[P],N=T[D];if(D===u.schema.primKey.keyPath){if(ce(N,E)!==0)throw new J.Constraint("Cannot update primary key in bulkUpdate()")}else me(I,D,N)}g.push(U),b.push(E),S.push(I)}});var R=b.length;return l.mutate({trans:v,type:"put",keys:b,values:S,updates:{keys:h,changeSpecs:p}}).then(function(A){var U=A.numFailures,E=A.failures;if(U===0)return R;for(var T=0,I=Object.keys(E);T<I.length;T++){var P=I[T],O=g[Number(P)];if(O!=null){var D=E[P];delete E[P],E[O]=D}}throw new gn("".concat(u.name,".bulkUpdate(): ").concat(U," of ").concat(R," operations failed"),E)})})})},s.prototype.bulkDelete=function(o){var u=this,l=o.length;return this._trans("readwrite",function(h){return u.core.mutate({trans:h,type:"delete",keys:o})}).then(function(h){var p=h.numFailures,g=h.lastResult,v=h.failures;if(p===0)return g;throw new gn("".concat(u.name,".bulkDelete(): ").concat(p," of ").concat(l," operations failed"),v)})},s}();function Qn(s){var o={},u=function(v,y){if(y){for(var b=arguments.length,S=new Array(b-1);--b;)S[b-1]=arguments[b];return o[v].subscribe.apply(null,S),s}else if(typeof v=="string")return o[v]};u.addEventType=p;for(var l=1,h=arguments.length;l<h;++l)p(arguments[l]);return u;function p(v,y,b){if(typeof v=="object")return g(v);y||(y=Sh),b||(b=ve);var S={subscribers:[],fire:b,subscribe:function(R){S.subscribers.indexOf(R)===-1&&(S.subscribers.push(R),S.fire=y(S.fire,R))},unsubscribe:function(R){S.subscribers=S.subscribers.filter(function(A){return A!==R}),S.fire=S.subscribers.reduce(y,b)}};return o[v]=u[v]=S,S}function g(v){a(v).forEach(function(y){var b=v[y];if(c(b))p(y,v[y][0],v[y][1]);else if(b==="asap")var S=p(y,qn,function(){for(var A=arguments.length,U=new Array(A);A--;)U[A]=arguments[A];S.subscribers.forEach(function(E){ne(function(){E.apply(null,U)})})});else throw new J.InvalidArgument("Invalid event config")})}}function Zn(s,o){return k(o).from({prototype:s}),o}function Lh(s){return Zn(nu.prototype,function(u,l,h){this.db=s,this._tx=h,this.name=u,this.schema=l,this.hook=s._allTables[u]?s._allTables[u].hook:Qn(null,{creating:[bh,ve],reading:[wh,qn],updating:[Eh,ve],deleting:[Rh,ve]})})}function bn(s,o){return!(s.filter||s.algorithm||s.or)&&(o?s.justLimit:!s.replayFilter)}function Ws(s,o){s.filter=Gt(s.filter,o)}function qs(s,o,u){var l=s.replayFilter;s.replayFilter=l?function(){return Gt(l(),o())}:o,s.justLimit=u&&!l}function Fh(s,o){s.isMatch=Gt(s.isMatch,o)}function ui(s,o){if(s.isPrimKey)return o.primaryKey;var u=o.getIndexByKeyPath(s.index);if(!u)throw new J.Schema("KeyPath "+s.index+" on object store "+o.name+" is not indexed");return u}function ru(s,o,u){var l=ui(s,o.schema);return o.openCursor({trans:u,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:l,range:s.range}})}function ci(s,o,u,l){var h=s.replayFilter?Gt(s.filter,s.replayFilter()):s.filter;if(s.or){var p={},g=function(v,y,b){if(!h||h(y,b,function(A){return y.stop(A)},function(A){return y.fail(A)})){var S=y.primaryKey,R=""+S;R==="[object ArrayBuffer]"&&(R=""+new Uint8Array(S)),w(p,R)||(p[R]=!0,o(v,y,b))}};return Promise.all([s.or._iterate(g,u),iu(ru(s,l,u),s.algorithm,g,!s.keysOnly&&s.valueMapper)])}else return iu(ru(s,l,u),Gt(s.algorithm,h),o,!s.keysOnly&&s.valueMapper)}function iu(s,o,u,l){var h=l?function(g,v,y){return u(l(g),v,y)}:u,p=we(h);return s.then(function(g){if(g)return g.start(function(){var v=function(){return g.continue()};(!o||o(g,function(y){return v=y},function(y){g.stop(y),v=ve},function(y){g.fail(y),v=ve}))&&p(g.value,g,function(y){return v=y}),v()})})}var er=function(){function s(o){this["@@propmod"]=o}return s.prototype.execute=function(o){var u,l=this["@@propmod"];if(l.add!==void 0){var h=l.add;if(c(h))return r(r([],c(o)?o:[],!0),h,!0).sort();if(typeof h=="number")return(Number(o)||0)+h;if(typeof h=="bigint")try{return BigInt(o)+h}catch{return BigInt(0)+h}throw new TypeError("Invalid term ".concat(h))}if(l.remove!==void 0){var p=l.remove;if(c(p))return c(o)?o.filter(function(v){return!p.includes(v)}).sort():[];if(typeof p=="number")return Number(o)-p;if(typeof p=="bigint")try{return BigInt(o)-p}catch{return BigInt(0)-p}throw new TypeError("Invalid subtrahend ".concat(p))}var g=(u=l.replacePrefix)===null||u===void 0?void 0:u[0];return g&&typeof o=="string"&&o.startsWith(g)?l.replacePrefix[1]+o.substring(g.length):o},s}(),Bh=function(){function s(){}return s.prototype._read=function(o,u){var l=this._ctx;return l.error?l.table._trans(null,Se.bind(null,l.error)):l.table._trans("readonly",o).then(u)},s.prototype._write=function(o){var u=this._ctx;return u.error?u.table._trans(null,Se.bind(null,u.error)):u.table._trans("readwrite",o,"locked")},s.prototype._addAlgorithm=function(o){var u=this._ctx;u.algorithm=Gt(u.algorithm,o)},s.prototype._iterate=function(o,u){return ci(this._ctx,o,u,this._ctx.table.core)},s.prototype.clone=function(o){var u=Object.create(this.constructor.prototype),l=Object.create(this._ctx);return o&&f(l,o),u._ctx=l,u},s.prototype.raw=function(){return this._ctx.valueMapper=null,this},s.prototype.each=function(o){var u=this._ctx;return this._read(function(l){return ci(u,o,l,u.table.core)})},s.prototype.count=function(o){var u=this;return this._read(function(l){var h=u._ctx,p=h.table.core;if(bn(h,!0))return p.count({trans:l,query:{index:ui(h,p.schema),range:h.range}}).then(function(v){return Math.min(v,h.limit)});var g=0;return ci(h,function(){return++g,!1},l,p).then(function(){return g})}).then(o)},s.prototype.sortBy=function(o,u){var l=o.split(".").reverse(),h=l[0],p=l.length-1;function g(b,S){return S?g(b[l[S]],S-1):b[h]}var v=this._ctx.dir==="next"?1:-1;function y(b,S){var R=g(b,p),A=g(S,p);return ce(R,A)*v}return this.toArray(function(b){return b.sort(y)}).then(u)},s.prototype.toArray=function(o){var u=this;return this._read(function(l){var h=u._ctx;if(h.dir==="next"&&bn(h,!0)&&h.limit>0){var p=h.valueMapper,g=ui(h,h.table.core.schema);return h.table.core.query({trans:l,limit:h.limit,values:!0,query:{index:g,range:h.range}}).then(function(y){var b=y.result;return p?b.map(p):b})}else{var v=[];return ci(h,function(y){return v.push(y)},l,h.table.core).then(function(){return v})}},o)},s.prototype.offset=function(o){var u=this._ctx;return o<=0?this:(u.offset+=o,bn(u)?qs(u,function(){var l=o;return function(h,p){return l===0?!0:l===1?(--l,!1):(p(function(){h.advance(l),l=0}),!1)}}):qs(u,function(){var l=o;return function(){return--l<0}}),this)},s.prototype.limit=function(o){return this._ctx.limit=Math.min(this._ctx.limit,o),qs(this._ctx,function(){var u=o;return function(l,h,p){return--u<=0&&h(p),u>=0}},!0),this},s.prototype.until=function(o,u){return Ws(this._ctx,function(l,h,p){return o(l.value)?(h(p),u):!0}),this},s.prototype.first=function(o){return this.limit(1).toArray(function(u){return u[0]}).then(o)},s.prototype.last=function(o){return this.reverse().first(o)},s.prototype.filter=function(o){return Ws(this._ctx,function(u){return o(u.value)}),Fh(this._ctx,o),this},s.prototype.and=function(o){return this.filter(o)},s.prototype.or=function(o){return new this.db.WhereClause(this._ctx.table,o,this)},s.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},s.prototype.desc=function(){return this.reverse()},s.prototype.eachKey=function(o){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(l,h){o(h.key,h)})},s.prototype.eachUniqueKey=function(o){return this._ctx.unique="unique",this.eachKey(o)},s.prototype.eachPrimaryKey=function(o){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(l,h){o(h.primaryKey,h)})},s.prototype.keys=function(o){var u=this._ctx;u.keysOnly=!u.isMatch;var l=[];return this.each(function(h,p){l.push(p.key)}).then(function(){return l}).then(o)},s.prototype.primaryKeys=function(o){var u=this._ctx;if(u.dir==="next"&&bn(u,!0)&&u.limit>0)return this._read(function(h){var p=ui(u,u.table.core.schema);return u.table.core.query({trans:h,values:!1,limit:u.limit,query:{index:p,range:u.range}})}).then(function(h){var p=h.result;return p}).then(o);u.keysOnly=!u.isMatch;var l=[];return this.each(function(h,p){l.push(p.primaryKey)}).then(function(){return l}).then(o)},s.prototype.uniqueKeys=function(o){return this._ctx.unique="unique",this.keys(o)},s.prototype.firstKey=function(o){return this.limit(1).keys(function(u){return u[0]}).then(o)},s.prototype.lastKey=function(o){return this.reverse().firstKey(o)},s.prototype.distinct=function(){var o=this._ctx,u=o.index&&o.table.schema.idxByName[o.index];if(!u||!u.multi)return this;var l={};return Ws(this._ctx,function(h){var p=h.primaryKey.toString(),g=w(l,p);return l[p]=!0,!g}),this},s.prototype.modify=function(o){var u=this,l=this._ctx;return this._write(function(h){var p;if(typeof o=="function")p=o;else{var g=a(o),v=g.length;p=function(O){for(var D=!1,N=0;N<v;++N){var x=g[N],F=o[x],$=Te(O,x);F instanceof er?(me(O,x,F.execute($)),D=!0):$!==F&&(me(O,x,F),D=!0)}return D}}var y=l.table.core,b=y.schema.primaryKey,S=b.outbound,R=b.extractKey,A=200,U=u.db._options.modifyChunkSize;U&&(typeof U=="object"?A=U[y.name]||U["*"]||200:A=U);var E=[],T=0,I=[],P=function(O,D){var N=D.failures,x=D.numFailures;T+=O-x;for(var F=0,$=a(N);F<$.length;F++){var B=$[F];E.push(N[B])}};return u.clone().primaryKeys().then(function(O){var D=bn(l)&&l.limit===1/0&&(typeof o!="function"||o===Xs)&&{index:l.index,range:l.range},N=function(x){var F=Math.min(A,O.length-x);return y.getMany({trans:h,keys:O.slice(x,x+F),cache:"immutable"}).then(function($){for(var B=[],Y=[],ae=S?[]:null,K=[],se=0;se<F;++se){var Z=$[se],le={value:Ut(Z),primKey:O[x+se]};p.call(le,le.value,le)!==!1&&(le.value==null?K.push(O[x+se]):!S&&ce(R(Z),R(le.value))!==0?(K.push(O[x+se]),B.push(le.value)):(Y.push(le.value),S&&ae.push(O[x+se])))}return Promise.resolve(B.length>0&&y.mutate({trans:h,type:"add",values:B}).then(function(X){for(var Re in X.failures)K.splice(parseInt(Re),1);P(B.length,X)})).then(function(){return(Y.length>0||D&&typeof o=="object")&&y.mutate({trans:h,type:"put",keys:ae,values:Y,criteria:D,changeSpec:typeof o!="function"&&o,isAdditionalChunk:x>0}).then(function(X){return P(Y.length,X)})}).then(function(){return(K.length>0||D&&o===Xs)&&y.mutate({trans:h,type:"delete",keys:K,criteria:D,isAdditionalChunk:x>0}).then(function(X){return P(K.length,X)})}).then(function(){return O.length>x+F&&N(x+A)})})};return N(0).then(function(){if(E.length>0)throw new Jr("Error modifying one or more objects",E,T,I);return O.length})})})},s.prototype.delete=function(){var o=this._ctx,u=o.range;return bn(o)&&(o.isPrimKey||u.type===3)?this._write(function(l){var h=o.table.core.schema.primaryKey,p=u;return o.table.core.count({trans:l,query:{index:h,range:p}}).then(function(g){return o.table.core.mutate({trans:l,type:"deleteRange",range:p}).then(function(v){var y=v.failures;v.lastResult,v.results;var b=v.numFailures;if(b)throw new Jr("Could not delete some values",Object.keys(y).map(function(S){return y[S]}),g-b);return g-b})})}):this.modify(Xs)},s}(),Xs=function(s,o){return o.value=null};function zh(s){return Zn(Bh.prototype,function(u,l){this.db=s;var h=Qa,p=null;if(l)try{h=l()}catch(b){p=b}var g=u._ctx,v=g.table,y=v.hook.reading.fire;this._ctx={table:v,index:g.index,isPrimKey:!g.index||v.schema.primKey.keyPath&&g.index===v.schema.primKey.name,range:h,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:p,or:g.or,valueMapper:y!==qn?y:null}})}function $h(s,o){return s<o?-1:s===o?0:1}function Kh(s,o){return s>o?-1:s===o?0:1}function Ue(s,o,u){var l=s instanceof ou?new s.Collection(s):s;return l._ctx.error=u?new u(o):new TypeError(o),l}function Rn(s){return new s.Collection(s,function(){return su("")}).limit(0)}function Vh(s){return s==="next"?function(o){return o.toUpperCase()}:function(o){return o.toLowerCase()}}function Gh(s){return s==="next"?function(o){return o.toLowerCase()}:function(o){return o.toUpperCase()}}function Hh(s,o,u,l,h,p){for(var g=Math.min(s.length,l.length),v=-1,y=0;y<g;++y){var b=o[y];if(b!==l[y])return h(s[y],u[y])<0?s.substr(0,y)+u[y]+u.substr(y+1):h(s[y],l[y])<0?s.substr(0,y)+l[y]+u.substr(y+1):v>=0?s.substr(0,v)+o[v]+u.substr(v+1):null;h(s[y],b)<0&&(v=y)}return g<l.length&&p==="next"?s+u.substr(s.length):g<s.length&&p==="prev"?s.substr(0,u.length):v<0?null:s.substr(0,v)+l[v]+u.substr(v+1)}function li(s,o,u,l){var h,p,g,v,y,b,S,R=u.length;if(!u.every(function(T){return typeof T=="string"}))return Ue(s,Ya);function A(T){h=Vh(T),p=Gh(T),g=T==="next"?$h:Kh;var I=u.map(function(P){return{lower:p(P),upper:h(P)}}).sort(function(P,O){return g(P.lower,O.lower)});v=I.map(function(P){return P.upper}),y=I.map(function(P){return P.lower}),b=T,S=T==="next"?"":l}A("next");var U=new s.Collection(s,function(){return Et(v[0],y[R-1]+l)});U._ondirectionchange=function(T){A(T)};var E=0;return U._addAlgorithm(function(T,I,P){var O=T.key;if(typeof O!="string")return!1;var D=p(O);if(o(D,y,E))return!0;for(var N=null,x=E;x<R;++x){var F=Hh(O,D,v[x],y[x],g,b);F===null&&N===null?E=x+1:(N===null||g(N,F)>0)&&(N=F)}return I(N!==null?function(){T.continue(N+S)}:P),!1}),U}function Et(s,o,u,l){return{type:2,lower:s,upper:o,lowerOpen:u,upperOpen:l}}function su(s){return{type:1,lower:s,upper:s}}var ou=function(){function s(){}return Object.defineProperty(s.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),s.prototype.between=function(o,u,l,h){l=l!==!1,h=h===!0;try{return this._cmp(o,u)>0||this._cmp(o,u)===0&&(l||h)&&!(l&&h)?Rn(this):new this.Collection(this,function(){return Et(o,u,!l,!h)})}catch{return Ue(this,lt)}},s.prototype.equals=function(o){return o==null?Ue(this,lt):new this.Collection(this,function(){return su(o)})},s.prototype.above=function(o){return o==null?Ue(this,lt):new this.Collection(this,function(){return Et(o,void 0,!0)})},s.prototype.aboveOrEqual=function(o){return o==null?Ue(this,lt):new this.Collection(this,function(){return Et(o,void 0,!1)})},s.prototype.below=function(o){return o==null?Ue(this,lt):new this.Collection(this,function(){return Et(void 0,o,!1,!0)})},s.prototype.belowOrEqual=function(o){return o==null?Ue(this,lt):new this.Collection(this,function(){return Et(void 0,o)})},s.prototype.startsWith=function(o){return typeof o!="string"?Ue(this,Ya):this.between(o,o+Vt,!0,!0)},s.prototype.startsWithIgnoreCase=function(o){return o===""?this.startsWith(o):li(this,function(u,l){return u.indexOf(l[0])===0},[o],Vt)},s.prototype.equalsIgnoreCase=function(o){return li(this,function(u,l){return u===l[0]},[o],"")},s.prototype.anyOfIgnoreCase=function(){var o=ct.apply(dn,arguments);return o.length===0?Rn(this):li(this,function(u,l){return l.indexOf(u)!==-1},o,"")},s.prototype.startsWithAnyOfIgnoreCase=function(){var o=ct.apply(dn,arguments);return o.length===0?Rn(this):li(this,function(u,l){return l.some(function(h){return u.indexOf(h)===0})},o,Vt)},s.prototype.anyOf=function(){var o=this,u=ct.apply(dn,arguments),l=this._cmp;try{u.sort(l)}catch{return Ue(this,lt)}if(u.length===0)return Rn(this);var h=new this.Collection(this,function(){return Et(u[0],u[u.length-1])});h._ondirectionchange=function(g){l=g==="next"?o._ascending:o._descending,u.sort(l)};var p=0;return h._addAlgorithm(function(g,v,y){for(var b=g.key;l(b,u[p])>0;)if(++p,p===u.length)return v(y),!1;return l(b,u[p])===0?!0:(v(function(){g.continue(u[p])}),!1)}),h},s.prototype.notEqual=function(o){return this.inAnyRange([[Vs,o],[o,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},s.prototype.noneOf=function(){var o=ct.apply(dn,arguments);if(o.length===0)return new this.Collection(this);try{o.sort(this._ascending)}catch{return Ue(this,lt)}var u=o.reduce(function(l,h){return l?l.concat([[l[l.length-1][1],h]]):[[Vs,h]]},null);return u.push([o[o.length-1],this.db._maxKey]),this.inAnyRange(u,{includeLowers:!1,includeUppers:!1})},s.prototype.inAnyRange=function(o,u){var l=this,h=this._cmp,p=this._ascending,g=this._descending,v=this._min,y=this._max;if(o.length===0)return Rn(this);if(!o.every(function(x){return x[0]!==void 0&&x[1]!==void 0&&p(x[0],x[1])<=0}))return Ue(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",J.InvalidArgument);var b=!u||u.includeLowers!==!1,S=u&&u.includeUppers===!0;function R(x,F){for(var $=0,B=x.length;$<B;++$){var Y=x[$];if(h(F[0],Y[1])<0&&h(F[1],Y[0])>0){Y[0]=v(Y[0],F[0]),Y[1]=y(Y[1],F[1]);break}}return $===B&&x.push(F),x}var A=p;function U(x,F){return A(x[0],F[0])}var E;try{E=o.reduce(R,[]),E.sort(U)}catch{return Ue(this,lt)}var T=0,I=S?function(x){return p(x,E[T][1])>0}:function(x){return p(x,E[T][1])>=0},P=b?function(x){return g(x,E[T][0])>0}:function(x){return g(x,E[T][0])>=0};function O(x){return!I(x)&&!P(x)}var D=I,N=new this.Collection(this,function(){return Et(E[0][0],E[E.length-1][1],!b,!S)});return N._ondirectionchange=function(x){x==="next"?(D=I,A=p):(D=P,A=g),E.sort(U)},N._addAlgorithm(function(x,F,$){for(var B=x.key;D(B);)if(++T,T===E.length)return F($),!1;return O(B)?!0:(l._cmp(B,E[T][1])===0||l._cmp(B,E[T][0])===0||F(function(){A===p?x.continue(E[T][0]):x.continue(E[T][1])}),!1)}),N},s.prototype.startsWithAnyOf=function(){var o=ct.apply(dn,arguments);return o.every(function(u){return typeof u=="string"})?o.length===0?Rn(this):this.inAnyRange(o.map(function(u){return[u,u+Vt]})):Ue(this,"startsWithAnyOf() only works with strings")},s}();function Wh(s){return Zn(ou.prototype,function(u,l,h){if(this.db=s,this._ctx={table:u,index:l===":id"?null:l,or:h},this._cmp=this._ascending=ce,this._descending=function(p,g){return ce(g,p)},this._max=function(p,g){return ce(p,g)>0?p:g},this._min=function(p,g){return ce(p,g)<0?p:g},this._IDBKeyRange=s._deps.IDBKeyRange,!this._IDBKeyRange)throw new J.MissingAPI})}function Ze(s){return we(function(o){return tr(o),s(o.target.error),!1})}function tr(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var nr="storagemutated",Js="x-storagemutated-1",St=Qn(null,nr),qh=function(){function s(){}return s.prototype._lock=function(){return fe(!H.global),++this._reculock,this._reculock===1&&!H.global&&(H.lockOwnerFor=this),this},s.prototype._unlock=function(){if(fe(!H.global),--this._reculock===0)for(H.global||(H.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var o=this._blockedFuncs.shift();try{Kt(o[1],o[0])}catch{}}return this},s.prototype._locked=function(){return this._reculock&&H.lockOwnerFor!==this},s.prototype.create=function(o){var u=this;if(!this.mode)return this;var l=this.db.idbdb,h=this.db._state.dbOpenError;if(fe(!this.idbtrans),!o&&!l)switch(h&&h.name){case"DatabaseClosedError":throw new J.DatabaseClosed(h);case"MissingAPIError":throw new J.MissingAPI(h.message,h);default:throw new J.OpenFailed(h)}if(!this.active)throw new J.TransactionInactive;return fe(this._completion._state===null),o=this.idbtrans=o||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):l.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),o.onerror=we(function(p){tr(p),u._reject(o.error)}),o.onabort=we(function(p){tr(p),u.active&&u._reject(new J.Abort(o.error)),u.active=!1,u.on("abort").fire(p)}),o.oncomplete=we(function(){u.active=!1,u._resolve(),"mutatedParts"in o&&St.storagemutated.fire(o.mutatedParts)}),this},s.prototype._promise=function(o,u,l){var h=this;if(o==="readwrite"&&this.mode!=="readwrite")return Se(new J.ReadOnly("Transaction is readonly"));if(!this.active)return Se(new J.TransactionInactive);if(this._locked())return new z(function(g,v){h._blockedFuncs.push([function(){h._promise(o,u,l).then(g,v)},H])});if(l)return wt(function(){var g=new z(function(v,y){h._lock();var b=u(v,y,h);b&&b.then&&b.then(v,y)});return g.finally(function(){return h._unlock()}),g._lib=!0,g});var p=new z(function(g,v){var y=u(g,v,h);y&&y.then&&y.then(g,v)});return p._lib=!0,p},s.prototype._root=function(){return this.parent?this.parent._root():this},s.prototype.waitFor=function(o){var u=this._root(),l=z.resolve(o);if(u._waitingFor)u._waitingFor=u._waitingFor.then(function(){return l});else{u._waitingFor=l,u._waitingQueue=[];var h=u.idbtrans.objectStore(u.storeNames[0]);(function g(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(h.get(-1/0).onsuccess=g)})()}var p=u._waitingFor;return new z(function(g,v){l.then(function(y){return u._waitingQueue.push(we(g.bind(null,y)))},function(y){return u._waitingQueue.push(we(v.bind(null,y)))}).finally(function(){u._waitingFor===p&&(u._waitingFor=null)})})},s.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new J.Abort))},s.prototype.table=function(o){var u=this._memoizedTables||(this._memoizedTables={});if(w(u,o))return u[o];var l=this.schema[o];if(!l)throw new J.NotFound("Table "+o+" not part of transaction");var h=new this.db.Table(o,l,this);return h.core=this.db.core.table(o),u[o]=h,h},s}();function Xh(s){return Zn(qh.prototype,function(u,l,h,p,g){var v=this;this.db=s,this.mode=u,this.storeNames=l,this.schema=h,this.chromeTransactionDurability=p,this.idbtrans=null,this.on=Qn(this,"complete","error","abort"),this.parent=g||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new z(function(y,b){v._resolve=y,v._reject=b}),this._completion.then(function(){v.active=!1,v.on.complete.fire()},function(y){var b=v.active;return v.active=!1,v.on.error.fire(y),v.parent?v.parent._reject(y):b&&v.idbtrans&&v.idbtrans.abort(),Se(y)})})}function Ys(s,o,u,l,h,p,g){return{name:s,keyPath:o,unique:u,multi:l,auto:h,compound:p,src:(u&&!g?"&":"")+(l?"*":"")+(h?"++":"")+au(o)}}function au(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function Qs(s,o,u){return{name:s,primKey:o,indexes:u,mappedClass:null,idxByName:ye(u,function(l){return[l.name,l]})}}function Jh(s){return s.length===1?s[0]:s}var rr=function(s){try{return s.only([[]]),rr=function(){return[[]]},[[]]}catch{return rr=function(){return Vt},Vt}};function Zs(s){return s==null?function(){}:typeof s=="string"?Yh(s):function(o){return Te(o,s)}}function Yh(s){var o=s.split(".");return o.length===1?function(u){return u[s]}:function(u){return Te(u,s)}}function uu(s){return[].slice.call(s)}var Qh=0;function ir(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function Zh(s,o,u){function l(R,A){var U=uu(R.objectStoreNames);return{schema:{name:R.name,tables:U.map(function(E){return A.objectStore(E)}).map(function(E){var T=E.keyPath,I=E.autoIncrement,P=c(T),O=T==null,D={},N={name:E.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:O,compound:P,keyPath:T,autoIncrement:I,unique:!0,extractKey:Zs(T)},indexes:uu(E.indexNames).map(function(x){return E.index(x)}).map(function(x){var F=x.name,$=x.unique,B=x.multiEntry,Y=x.keyPath,ae=c(Y),K={name:F,compound:ae,keyPath:Y,unique:$,multiEntry:B,extractKey:Zs(Y)};return D[ir(Y)]=K,K}),getIndexByKeyPath:function(x){return D[ir(x)]}};return D[":id"]=N.primaryKey,T!=null&&(D[ir(T)]=N.primaryKey),N})},hasGetAll:U.length>0&&"getAll"in A.objectStore(U[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function h(R){if(R.type===3)return null;if(R.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var A=R.lower,U=R.upper,E=R.lowerOpen,T=R.upperOpen,I=A===void 0?U===void 0?null:o.upperBound(U,!!T):U===void 0?o.lowerBound(A,!!E):o.bound(A,U,!!E,!!T);return I}function p(R){var A=R.name;function U(I){var P=I.trans,O=I.type,D=I.keys,N=I.values,x=I.range;return new Promise(function(F,$){F=we(F);var B=P.objectStore(A),Y=B.keyPath==null,ae=O==="put"||O==="add";if(!ae&&O!=="delete"&&O!=="deleteRange")throw new Error("Invalid operation type: "+O);var K=(D||N||{length:1}).length;if(D&&N&&D.length!==N.length)throw new Error("Given keys array must have same length as given values array.");if(K===0)return F({numFailures:0,failures:{},results:[],lastResult:void 0});var se,Z=[],le=[],X=0,Re=function(tt){++X,tr(tt)};if(O==="deleteRange"){if(x.type===4)return F({numFailures:X,failures:le,results:[],lastResult:void 0});x.type===3?Z.push(se=B.clear()):Z.push(se=B.delete(h(x)))}else{var Pe=ae?Y?[N,D]:[N,null]:[D,null],et=Pe[0],je=Pe[1];if(ae)for(var ze=0;ze<K;++ze)Z.push(se=je&&je[ze]!==void 0?B[O](et[ze],je[ze]):B[O](et[ze])),se.onerror=Re;else for(var ze=0;ze<K;++ze)Z.push(se=B[O](et[ze])),se.onerror=Re}var _t=function(tt){var ar=tt.target.result;Z.forEach(function(Ge,Ei){return Ge.error!=null&&(le[Ei]=Ge.error)}),F({numFailures:X,failures:le,results:O==="delete"?D:Z.map(function(Ge){return Ge.result}),lastResult:ar})};se.onerror=function(tt){Re(tt),_t(tt)},se.onsuccess=_t})}function E(I){var P=I.trans,O=I.values,D=I.query,N=I.reverse,x=I.unique;return new Promise(function(F,$){F=we(F);var B=D.index,Y=D.range,ae=P.objectStore(A),K=B.isPrimaryKey?ae:ae.index(B.name),se=N?x?"prevunique":"prev":x?"nextunique":"next",Z=O||!("openKeyCursor"in K)?K.openCursor(h(Y),se):K.openKeyCursor(h(Y),se);Z.onerror=Ze($),Z.onsuccess=we(function(le){var X=Z.result;if(!X){F(null);return}X.___id=++Qh,X.done=!1;var Re=X.continue.bind(X),Pe=X.continuePrimaryKey;Pe&&(Pe=Pe.bind(X));var et=X.advance.bind(X),je=function(){throw new Error("Cursor not started")},ze=function(){throw new Error("Cursor not stopped")};X.trans=P,X.stop=X.continue=X.continuePrimaryKey=X.advance=je,X.fail=we($),X.next=function(){var _t=this,tt=1;return this.start(function(){return tt--?_t.continue():_t.stop()}).then(function(){return _t})},X.start=function(_t){var tt=new Promise(function(Ge,Ei){Ge=we(Ge),Z.onerror=Ze(Ei),X.fail=Ei,X.stop=function(zf){X.stop=X.continue=X.continuePrimaryKey=X.advance=ze,Ge(zf)}}),ar=function(){if(Z.result)try{_t()}catch(Ge){X.fail(Ge)}else X.done=!0,X.start=function(){throw new Error("Cursor behind last entry")},X.stop()};return Z.onsuccess=we(function(Ge){Z.onsuccess=ar,ar()}),X.continue=Re,X.continuePrimaryKey=Pe,X.advance=et,ar(),tt},F(X)},$)})}function T(I){return function(P){return new Promise(function(O,D){O=we(O);var N=P.trans,x=P.values,F=P.limit,$=P.query,B=F===1/0?void 0:F,Y=$.index,ae=$.range,K=N.objectStore(A),se=Y.isPrimaryKey?K:K.index(Y.name),Z=h(ae);if(F===0)return O({result:[]});if(I){var le=x?se.getAll(Z,B):se.getAllKeys(Z,B);le.onsuccess=function(et){return O({result:et.target.result})},le.onerror=Ze(D)}else{var X=0,Re=x||!("openKeyCursor"in se)?se.openCursor(Z):se.openKeyCursor(Z),Pe=[];Re.onsuccess=function(et){var je=Re.result;if(!je)return O({result:Pe});if(Pe.push(x?je.value:je.primaryKey),++X===F)return O({result:Pe});je.continue()},Re.onerror=Ze(D)}})}}return{name:A,schema:R,mutate:U,getMany:function(I){var P=I.trans,O=I.keys;return new Promise(function(D,N){D=we(D);for(var x=P.objectStore(A),F=O.length,$=new Array(F),B=0,Y=0,ae,K=function(X){var Re=X.target;($[Re._pos]=Re.result)!=null,++Y===B&&D($)},se=Ze(N),Z=0;Z<F;++Z){var le=O[Z];le!=null&&(ae=x.get(O[Z]),ae._pos=Z,ae.onsuccess=K,ae.onerror=se,++B)}B===0&&D($)})},get:function(I){var P=I.trans,O=I.key;return new Promise(function(D,N){D=we(D);var x=P.objectStore(A),F=x.get(O);F.onsuccess=function($){return D($.target.result)},F.onerror=Ze(N)})},query:T(y),openCursor:E,count:function(I){var P=I.query,O=I.trans,D=P.index,N=P.range;return new Promise(function(x,F){var $=O.objectStore(A),B=D.isPrimaryKey?$:$.index(D.name),Y=h(N),ae=Y?B.count(Y):B.count();ae.onsuccess=we(function(K){return x(K.target.result)}),ae.onerror=Ze(F)})}}}var g=l(s,u),v=g.schema,y=g.hasGetAll,b=v.tables.map(function(R){return p(R)}),S={};return b.forEach(function(R){return S[R.name]=R}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(R){var A=S[R];if(!A)throw new Error("Table '".concat(R,"' not found"));return S[R]},MIN_KEY:-1/0,MAX_KEY:rr(o),schema:v}}function ef(s,o){return o.reduce(function(u,l){var h=l.create;return e(e({},u),h(u))},s)}function tf(s,o,u,l){var h=u.IDBKeyRange;u.indexedDB;var p=ef(Zh(o,h,l),s.dbcore);return{dbcore:p}}function hi(s,o){var u=o.db,l=tf(s._middlewares,u,s._deps,o);s.core=l.dbcore,s.tables.forEach(function(h){var p=h.name;s.core.schema.tables.some(function(g){return g.name===p})&&(h.core=s.core.table(p),s[p]instanceof s.Table&&(s[p].core=h.core))})}function fi(s,o,u,l){u.forEach(function(h){var p=l[h];o.forEach(function(g){var v=L(g,h);(!v||"value"in v&&v.value===void 0)&&(g===s.Transaction.prototype||g instanceof s.Transaction?M(g,h,{get:function(){return this.table(h)},set:function(y){_(this,h,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):g[h]=new s.Table(h,p))})})}function eo(s,o){o.forEach(function(u){for(var l in u)u[l]instanceof s.Table&&delete u[l]})}function nf(s,o){return s._cfg.version-o._cfg.version}function rf(s,o,u,l){var h=s._dbSchema;u.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=Qs("$meta",lu("")[0],[]),s._storeNames.push("$meta"));var p=s._createTransaction("readwrite",s._storeNames,h);p.create(u),p._completion.catch(l);var g=p._reject.bind(p),v=H.transless||H;wt(function(){if(H.trans=p,H.transless=v,o===0)a(h).forEach(function(y){no(u,y,h[y].primKey,h[y].indexes)}),hi(s,u),z.follow(function(){return s.on.populate.fire(p)}).catch(g);else return hi(s,u),of(s,p,o).then(function(y){return af(s,y,p,u)}).catch(g)})}function sf(s,o){cu(s._dbSchema,o),o.db.version%10===0&&!o.objectStoreNames.contains("$meta")&&o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var u=pi(s,s.idbdb,o);gi(s,s._dbSchema,o);for(var l=to(u,s._dbSchema),h=function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var S=o.objectStore(b.name);b.add.forEach(function(R){Qe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(R.src)),di(S,R)})},p=0,g=l.change;p<g.length;p++){var v=g[p],y=h(v);if(typeof y=="object")return y.value}}function of(s,o,u){return o.storeNames.includes("$meta")?o.table("$meta").get("version").then(function(l){return l??u}):z.resolve(u)}function af(s,o,u,l){var h=[],p=s._versions,g=s._dbSchema=pi(s,s.idbdb,l),v=p.filter(function(b){return b._cfg.version>=o});if(v.length===0)return z.resolve();v.forEach(function(b){h.push(function(){var S=g,R=b._cfg.dbschema;gi(s,S,l),gi(s,R,l),g=s._dbSchema=R;var A=to(S,R);A.add.forEach(function(O){no(l,O[0],O[1].primKey,O[1].indexes)}),A.change.forEach(function(O){if(O.recreate)throw new J.Upgrade("Not yet support for changing primary key");var D=l.objectStore(O.name);O.add.forEach(function(N){return di(D,N)}),O.change.forEach(function(N){D.deleteIndex(N.name),di(D,N)}),O.del.forEach(function(N){return D.deleteIndex(N)})});var U=b._cfg.contentUpgrade;if(U&&b._cfg.version>o){hi(s,l),u._memoizedTables={};var E=Ne(R);A.del.forEach(function(O){E[O]=S[O]}),eo(s,[s.Transaction.prototype]),fi(s,[s.Transaction.prototype],a(E),E),u.schema=E;var T=Os(U);T&&yn();var I,P=z.follow(function(){if(I=U(u),I&&T){var O=bt.bind(null,null);I.then(O,O)}});return I&&typeof I.then=="function"?z.resolve(I):P.then(function(){return I})}}),h.push(function(S){var R=b._cfg.dbschema;uf(R,S),eo(s,[s.Transaction.prototype]),fi(s,[s.Transaction.prototype],s._storeNames,s._dbSchema),u.schema=s._dbSchema}),h.push(function(S){s.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(s.idbdb.version/10)===b._cfg.version?(s.idbdb.deleteObjectStore("$meta"),delete s._dbSchema.$meta,s._storeNames=s._storeNames.filter(function(R){return R!=="$meta"})):S.objectStore("$meta").put(b._cfg.version,"version"))})});function y(){return h.length?z.resolve(h.shift()(u.idbtrans)).then(y):z.resolve()}return y().then(function(){cu(g,l)})}function to(s,o){var u={del:[],add:[],change:[]},l;for(l in s)o[l]||u.del.push(l);for(l in o){var h=s[l],p=o[l];if(!h)u.add.push([l,p]);else{var g={name:l,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||h.primKey.auto!==p.primKey.auto)g.recreate=!0,u.change.push(g);else{var v=h.idxByName,y=p.idxByName,b=void 0;for(b in v)y[b]||g.del.push(b);for(b in y){var S=v[b],R=y[b];S?S.src!==R.src&&g.change.push(R):g.add.push(R)}(g.del.length>0||g.add.length>0||g.change.length>0)&&u.change.push(g)}}}return u}function no(s,o,u,l){var h=s.db.createObjectStore(o,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return l.forEach(function(p){return di(h,p)}),h}function cu(s,o){a(s).forEach(function(u){o.db.objectStoreNames.contains(u)||(Qe&&console.debug("Dexie: Creating missing table",u),no(o,u,s[u].primKey,s[u].indexes))})}function uf(s,o){[].slice.call(o.db.objectStoreNames).forEach(function(u){return s[u]==null&&o.db.deleteObjectStore(u)})}function di(s,o){s.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function pi(s,o,u){var l={},h=Q(o.objectStoreNames,0);return h.forEach(function(p){for(var g=u.objectStore(p),v=g.keyPath,y=Ys(au(v),v||"",!0,!1,!!g.autoIncrement,v&&typeof v!="string",!0),b=[],S=0;S<g.indexNames.length;++S){var R=g.index(g.indexNames[S]);v=R.keyPath;var A=Ys(R.name,v,!!R.unique,!!R.multiEntry,!1,v&&typeof v!="string",!1);b.push(A)}l[p]=Qs(p,y,b)}),l}function cf(s,o,u){s.verno=o.version/10;var l=s._dbSchema=pi(s,o,u);s._storeNames=Q(o.objectStoreNames,0),fi(s,[s._allTables],a(l),l)}function lf(s,o){var u=pi(s,s.idbdb,o),l=to(u,s._dbSchema);return!(l.add.length||l.change.some(function(h){return h.add.length||h.change.length}))}function gi(s,o,u){for(var l=u.db.objectStoreNames,h=0;h<l.length;++h){var p=l[h],g=u.objectStore(p);s._hasGetAll="getAll"in g;for(var v=0;v<g.indexNames.length;++v){var y=g.indexNames[v],b=g.index(y).keyPath,S=typeof b=="string"?b:"["+Q(b).join("+")+"]";if(o[p]){var R=o[p].idxByName[S];R&&(R.name=y,delete o[p].idxByName[S],o[p].idxByName[y]=R)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function lu(s){return s.split(",").map(function(o,u){o=o.trim();var l=o.replace(/([&*]|\+\+)/g,""),h=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Ys(l,h||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),c(h),u===0)})}var hf=function(){function s(){}return s.prototype._parseStoresSpec=function(o,u){a(o).forEach(function(l){if(o[l]!==null){var h=lu(o[l]),p=h.shift();if(p.unique=!0,p.multi)throw new J.Schema("Primary key cannot be multi-valued");h.forEach(function(g){if(g.auto)throw new J.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new J.Schema("Index must have a name and cannot be an empty string")}),u[l]=Qs(l,p,h)}})},s.prototype.stores=function(o){var u=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,o):o;var l=u._versions,h={},p={};return l.forEach(function(g){f(h,g._cfg.storesSource),p=g._cfg.dbschema={},g._parseStoresSpec(h,p)}),u._dbSchema=p,eo(u,[u._allTables,u,u.Transaction.prototype]),fi(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],a(p),p),u._storeNames=a(p),this},s.prototype.upgrade=function(o){return this._cfg.contentUpgrade=Ms(this._cfg.contentUpgrade||ve,o),this},s}();function ff(s){return Zn(hf.prototype,function(u){this.db=s,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ro(s,o){var u=s._dbNamesDB;return u||(u=s._dbNamesDB=new ht(oi,{addons:[],indexedDB:s,IDBKeyRange:o}),u.version(1).stores({dbnames:"name"})),u.table("dbnames")}function io(s){return s&&typeof s.databases=="function"}function df(s){var o=s.indexedDB,u=s.IDBKeyRange;return io(o)?Promise.resolve(o.databases()).then(function(l){return l.map(function(h){return h.name}).filter(function(h){return h!==oi})}):ro(o,u).toCollection().primaryKeys()}function pf(s,o){var u=s.indexedDB,l=s.IDBKeyRange;!io(u)&&o!==oi&&ro(u,l).put({name:o}).catch(ve)}function gf(s,o){var u=s.indexedDB,l=s.IDBKeyRange;!io(u)&&o!==oi&&ro(u,l).delete(o).catch(ve)}function so(s){return wt(function(){return H.letThrough=!0,s()})}function mf(){var s=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!s||!indexedDB.databases)return Promise.resolve();var o;return new Promise(function(u){var l=function(){return indexedDB.databases().finally(u)};o=setInterval(l,100),l()}).finally(function(){return clearInterval(o)})}var oo;function ao(s){return!("from"in s)}var De=function(s,o){if(this)f(this,arguments.length?{d:1,from:s,to:arguments.length>1?o:s}:{d:0});else{var u=new De;return s&&"d"in s&&f(u,s),u}};C(De.prototype,(oo={add:function(s){return or(this,s),this},addKey:function(s){return sr(this,s,s),this},addKeys:function(s){var o=this;return s.forEach(function(u){return sr(o,u,u)}),this},hasKey:function(s){var o=mi(this).next(s).value;return o&&ce(o.from,s)<=0&&ce(o.to,s)>=0}},oo[xs]=function(){return mi(this)},oo));function sr(s,o,u){var l=ce(o,u);if(!isNaN(l)){if(l>0)throw RangeError();if(ao(s))return f(s,{from:o,to:u,d:1});var h=s.l,p=s.r;if(ce(u,s.from)<0)return h?sr(h,o,u):s.l={from:o,to:u,d:1,l:null,r:null},fu(s);if(ce(o,s.to)>0)return p?sr(p,o,u):s.r={from:o,to:u,d:1,l:null,r:null},fu(s);ce(o,s.from)<0&&(s.from=o,s.l=null,s.d=p?p.d+1:1),ce(u,s.to)>0&&(s.to=u,s.r=null,s.d=s.l?s.l.d+1:1);var g=!s.r;h&&!s.l&&or(s,h),p&&g&&or(s,p)}}function or(s,o){function u(l,h){var p=h.from,g=h.to,v=h.l,y=h.r;sr(l,p,g),v&&u(l,v),y&&u(l,y)}ao(o)||u(s,o)}function hu(s,o){var u=mi(o),l=u.next();if(l.done)return!1;for(var h=l.value,p=mi(s),g=p.next(h.from),v=g.value;!l.done&&!g.done;){if(ce(v.from,h.to)<=0&&ce(v.to,h.from)>=0)return!0;ce(h.from,v.from)<0?h=(l=u.next(v.from)).value:v=(g=p.next(h.from)).value}return!1}function mi(s){var o=ao(s)?null:{s:0,n:s};return{next:function(u){for(var l=arguments.length>0;o;)switch(o.s){case 0:if(o.s=1,l)for(;o.n.l&&ce(u,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!l||ce(u,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function fu(s){var o,u,l=(((o=s.r)===null||o===void 0?void 0:o.d)||0)-(((u=s.l)===null||u===void 0?void 0:u.d)||0),h=l>1?"r":l<-1?"l":"";if(h){var p=h==="r"?"l":"r",g=e({},s),v=s[h];s.from=v.from,s.to=v.to,s[h]=v[h],g[h]=v[p],s[p]=g,g.d=du(g)}s.d=du(s)}function du(s){var o=s.r,u=s.l;return(o?u?Math.max(o.d,u.d):o.d:u?u.d:0)+1}function vi(s,o){return a(o).forEach(function(u){s[u]?or(s[u],o[u]):s[u]=Ua(o[u])}),s}function uo(s,o){return s.all||o.all||Object.keys(s).some(function(u){return o[u]&&hu(o[u],s[u])})}var Ht={},co={},lo=!1;function yi(s,o){vi(co,s),lo||(lo=!0,setTimeout(function(){lo=!1;var u=co;co={},ho(u,!1)},0))}function ho(s,o){o===void 0&&(o=!1);var u=new Set;if(s.all)for(var l=0,h=Object.values(Ht);l<h.length;l++){var p=h[l];pu(p,s,u,o)}else for(var g in s){var v=/^idb\:\/\/(.*)\/(.*)\//.exec(g);if(v){var y=v[1],b=v[2],p=Ht["idb://".concat(y,"/").concat(b)];p&&pu(p,s,u,o)}}u.forEach(function(S){return S()})}function pu(s,o,u,l){for(var h=[],p=0,g=Object.entries(s.queries.query);p<g.length;p++){for(var v=g[p],y=v[0],b=v[1],S=[],R=0,A=b;R<A.length;R++){var U=A[R];uo(o,U.obsSet)?U.subscribers.forEach(function(P){return u.add(P)}):l&&S.push(U)}l&&h.push([y,S])}if(l)for(var E=0,T=h;E<T.length;E++){var I=T[E],y=I[0],S=I[1];s.queries.query[y]=S}}function vf(s){var o=s._state,u=s._deps.indexedDB;if(o.isBeingOpened||s.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?Se(o.dbOpenError):s});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var l=o.openCanceller,h=Math.round(s.verno*10),p=!1;function g(){if(o.openCanceller!==l)throw new J.DatabaseClosed("db.open() was cancelled")}var v=o.dbReadyResolve,y=null,b=!1,S=function(){return new z(function(R,A){if(g(),!u)throw new J.MissingAPI;var U=s.name,E=o.autoSchema||!h?u.open(U):u.open(U,h);if(!E)throw new J.MissingAPI;E.onerror=Ze(A),E.onblocked=we(s._fireOnBlocked),E.onupgradeneeded=we(function(T){if(y=E.transaction,o.autoSchema&&!s._options.allowEmptyDB){E.onerror=tr,y.abort(),E.result.close();var I=u.deleteDatabase(U);I.onsuccess=I.onerror=we(function(){A(new J.NoSuchDatabase("Database ".concat(U," doesnt exist")))})}else{y.onerror=Ze(A);var P=T.oldVersion>Math.pow(2,62)?0:T.oldVersion;b=P<1,s.idbdb=E.result,p&&sf(s,y),rf(s,P/10,y,A)}},A),E.onsuccess=we(function(){y=null;var T=s.idbdb=E.result,I=Q(T.objectStoreNames);if(I.length>0)try{var P=T.transaction(Jh(I),"readonly");if(o.autoSchema)cf(s,T,P);else if(gi(s,s._dbSchema,P),!lf(s,P)&&!p)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),T.close(),h=T.version+1,p=!0,R(S());hi(s,P)}catch{}wn.push(s),T.onversionchange=we(function(O){o.vcFired=!0,s.on("versionchange").fire(O)}),T.onclose=we(function(O){s.on("close").fire(O)}),b&&pf(s._deps,U),R()},A)}).catch(function(R){switch(R?.name){case"UnknownError":if(o.PR1398_maxLoop>0)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),S();break;case"VersionError":if(h>0)return h=0,S();break}return z.reject(R)})};return z.race([l,(typeof navigator>"u"?z.resolve():mf()).then(S)]).then(function(){return g(),o.onReadyBeingFired=[],z.resolve(so(function(){return s.on.ready.fire(s.vip)})).then(function R(){if(o.onReadyBeingFired.length>0){var A=o.onReadyBeingFired.reduce(Ms,ve);return o.onReadyBeingFired=[],z.resolve(so(function(){return A(s.vip)})).then(R)}})}).finally(function(){o.openCanceller===l&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(R){o.dbOpenError=R;try{y&&y.abort()}catch{}return l===o.openCanceller&&s._close(),Se(R)}).finally(function(){o.openComplete=!0,v()}).then(function(){if(b){var R={};s.tables.forEach(function(A){A.schema.indexes.forEach(function(U){U.name&&(R["idb://".concat(s.name,"/").concat(A.name,"/").concat(U.name)]=new De(-1/0,[[[]]]))}),R["idb://".concat(s.name,"/").concat(A.name,"/")]=R["idb://".concat(s.name,"/").concat(A.name,"/:dels")]=new De(-1/0,[[[]]])}),St(nr).fire(R),ho(R,!0)}return s})}function fo(s){var o=function(g){return s.next(g)},u=function(g){return s.throw(g)},l=p(o),h=p(u);function p(g){return function(v){var y=g(v),b=y.value;return y.done?b:!b||typeof b.then!="function"?c(b)?Promise.all(b).then(l,h):l(b):b.then(l,h)}}return p(o)()}function yf(s,o,u){var l=arguments.length;if(l<2)throw new J.InvalidArgument("Too few arguments");for(var h=new Array(l-1);--l;)h[l-1]=arguments[l];u=h.pop();var p=Na(h);return[s,p,u]}function gu(s,o,u,l,h){return z.resolve().then(function(){var p=H.transless||H,g=s._createTransaction(o,u,s._dbSchema,l);g.explicit=!0;var v={trans:g,transless:p};if(l)g.idbtrans=l.idbtrans;else try{g.create(),g.idbtrans._explicit=!0,s._state.PR1398_maxLoop=3}catch(R){return R.name===Ps.InvalidState&&s.isOpen()&&--s._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),s.close({disableAutoOpen:!1}),s.open().then(function(){return gu(s,o,u,null,h)})):Se(R)}var y=Os(h);y&&yn();var b,S=z.follow(function(){if(b=h.call(g,g),b)if(y){var R=bt.bind(null,null);b.then(R,R)}else typeof b.next=="function"&&typeof b.throw=="function"&&(b=fo(b))},v);return(b&&typeof b.then=="function"?z.resolve(b).then(function(R){return g.active?R:Se(new J.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):S.then(function(){return b})).then(function(R){return l&&g._resolve(),g._completion.then(function(){return R})}).catch(function(R){return g._reject(R),Se(R)})})}function wi(s,o,u){for(var l=c(s)?s.slice():[s],h=0;h<u;++h)l.push(o);return l}function wf(s){return e(e({},s),{table:function(o){var u=s.table(o),l=u.schema,h={},p=[];function g(T,I,P){var O=ir(T),D=h[O]=h[O]||[],N=T==null?0:typeof T=="string"?1:T.length,x=I>0,F=e(e({},P),{name:x?"".concat(O,"(virtual-from:").concat(P.name,")"):P.name,lowLevelIndex:P,isVirtual:x,keyTail:I,keyLength:N,extractKey:Zs(T),unique:!x&&P.unique});if(D.push(F),F.isPrimaryKey||p.push(F),N>1){var $=N===2?T[0]:T.slice(0,N-1);g($,I+1,P)}return D.sort(function(B,Y){return B.keyTail-Y.keyTail}),F}var v=g(l.primaryKey.keyPath,0,l.primaryKey);h[":id"]=[v];for(var y=0,b=l.indexes;y<b.length;y++){var S=b[y];g(S.keyPath,0,S)}function R(T){var I=h[ir(T)];return I&&I[0]}function A(T,I){return{type:T.type===1?2:T.type,lower:wi(T.lower,T.lowerOpen?s.MAX_KEY:s.MIN_KEY,I),lowerOpen:!0,upper:wi(T.upper,T.upperOpen?s.MIN_KEY:s.MAX_KEY,I),upperOpen:!0}}function U(T){var I=T.query.index;return I.isVirtual?e(e({},T),{query:{index:I.lowLevelIndex,range:A(T.query.range,I.keyTail)}}):T}var E=e(e({},u),{schema:e(e({},l),{primaryKey:v,indexes:p,getIndexByKeyPath:R}),count:function(T){return u.count(U(T))},query:function(T){return u.query(U(T))},openCursor:function(T){var I=T.query.index,P=I.keyTail,O=I.isVirtual,D=I.keyLength;if(!O)return u.openCursor(T);function N(x){function F(B){B!=null?x.continue(wi(B,T.reverse?s.MAX_KEY:s.MIN_KEY,P)):T.unique?x.continue(x.key.slice(0,D).concat(T.reverse?s.MIN_KEY:s.MAX_KEY,P)):x.continue()}var $=Object.create(x,{continue:{value:F},continuePrimaryKey:{value:function(B,Y){x.continuePrimaryKey(wi(B,s.MAX_KEY,P),Y)}},primaryKey:{get:function(){return x.primaryKey}},key:{get:function(){var B=x.key;return D===1?B[0]:B.slice(0,D)}},value:{get:function(){return x.value}}});return $}return u.openCursor(U(T)).then(function(x){return x&&N(x)})}});return E}})}var bf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:wf};function po(s,o,u,l){return u=u||{},l=l||"",a(s).forEach(function(h){if(!w(o,h))u[l+h]=void 0;else{var p=s[h],g=o[h];if(typeof p=="object"&&typeof g=="object"&&p&&g){var v=As(p),y=As(g);v!==y?u[l+h]=o[h]:v==="Object"?po(p,g,u,l+h+"."):p!==g&&(u[l+h]=o[h])}else p!==g&&(u[l+h]=o[h])}}),a(o).forEach(function(h){w(s,h)||(u[l+h]=o[h])}),u}function go(s,o){return o.type==="delete"?o.keys:o.keys||o.values.map(s.extractKey)}var Rf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return e(e({},s),{table:function(o){var u=s.table(o),l=u.schema.primaryKey,h=e(e({},u),{mutate:function(p){var g=H.trans,v=g.table(o).hook,y=v.deleting,b=v.creating,S=v.updating;switch(p.type){case"add":if(b.fire===ve)break;return g._promise("readwrite",function(){return R(p)},!0);case"put":if(b.fire===ve&&S.fire===ve)break;return g._promise("readwrite",function(){return R(p)},!0);case"delete":if(y.fire===ve)break;return g._promise("readwrite",function(){return R(p)},!0);case"deleteRange":if(y.fire===ve)break;return g._promise("readwrite",function(){return A(p)},!0)}return u.mutate(p);function R(E){var T=H.trans,I=E.keys||go(l,E);if(!I)throw new Error("Keys missing");return E=E.type==="add"||E.type==="put"?e(e({},E),{keys:I}):e({},E),E.type!=="delete"&&(E.values=r([],E.values,!0)),E.keys&&(E.keys=r([],E.keys,!0)),Ef(u,E,I).then(function(P){var O=I.map(function(D,N){var x=P[N],F={onerror:null,onsuccess:null};if(E.type==="delete")y.fire.call(F,D,x,T);else if(E.type==="add"||x===void 0){var $=b.fire.call(F,D,E.values[N],T);D==null&&$!=null&&(D=$,E.keys[N]=D,l.outbound||me(E.values[N],l.keyPath,D))}else{var B=po(x,E.values[N]),Y=S.fire.call(F,B,D,x,T);if(Y){var ae=E.values[N];Object.keys(Y).forEach(function(K){w(ae,K)?ae[K]=Y[K]:me(ae,K,Y[K])})}}return F});return u.mutate(E).then(function(D){for(var N=D.failures,x=D.results,F=D.numFailures,$=D.lastResult,B=0;B<I.length;++B){var Y=x?x[B]:I[B],ae=O[B];Y==null?ae.onerror&&ae.onerror(N[B]):ae.onsuccess&&ae.onsuccess(E.type==="put"&&P[B]?E.values[B]:Y)}return{failures:N,results:x,numFailures:F,lastResult:$}}).catch(function(D){return O.forEach(function(N){return N.onerror&&N.onerror(D)}),Promise.reject(D)})})}function A(E){return U(E.trans,E.range,1e4)}function U(E,T,I){return u.query({trans:E,values:!1,query:{index:l,range:T},limit:I}).then(function(P){var O=P.result;return R({type:"delete",keys:O,trans:E}).then(function(D){return D.numFailures>0?Promise.reject(D.failures[0]):O.length<I?{failures:[],numFailures:0,lastResult:void 0}:U(E,e(e({},T),{lower:O[O.length-1],lowerOpen:!0}),I)})})}}});return h}})}};function Ef(s,o,u){return o.type==="add"?Promise.resolve([]):s.getMany({trans:o.trans,keys:u,cache:"immutable"})}function mu(s,o,u){try{if(!o||o.keys.length<s.length)return null;for(var l=[],h=0,p=0;h<o.keys.length&&p<s.length;++h)ce(o.keys[h],s[p])===0&&(l.push(u?Ut(o.values[h]):o.values[h]),++p);return l.length===s.length?l:null}catch{return null}}var Sf={stack:"dbcore",level:-1,create:function(s){return{table:function(o){var u=s.table(o);return e(e({},u),{getMany:function(l){if(!l.cache)return u.getMany(l);var h=mu(l.keys,l.trans._cache,l.cache==="clone");return h?z.resolve(h):u.getMany(l).then(function(p){return l.trans._cache={keys:l.keys,values:l.cache==="clone"?Ut(p):p},p})},mutate:function(l){return l.type!=="add"&&(l.trans._cache=null),u.mutate(l)}})}}}};function vu(s,o){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function yu(s,o){switch(s){case"query":return o.values&&!o.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Tf={stack:"dbcore",level:0,name:"Observability",create:function(s){var o=s.schema.name,u=new De(s.MIN_KEY,s.MAX_KEY);return e(e({},s),{transaction:function(l,h,p){if(H.subscr&&h!=="readonly")throw new J.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(H.querier));return s.transaction(l,h,p)},table:function(l){var h=s.table(l),p=h.schema,g=p.primaryKey,v=p.indexes,y=g.extractKey,b=g.outbound,S=g.autoIncrement&&v.filter(function(E){return E.compound&&E.keyPath.includes(g.keyPath)}),R=e(e({},h),{mutate:function(E){var T,I,P=E.trans,O=E.mutatedParts||(E.mutatedParts={}),D=function(Z){var le="idb://".concat(o,"/").concat(l,"/").concat(Z);return O[le]||(O[le]=new De)},N=D(""),x=D(":dels"),F=E.type,$=E.type==="deleteRange"?[E.range]:E.type==="delete"?[E.keys]:E.values.length<50?[go(g,E).filter(function(Z){return Z}),E.values]:[],B=$[0],Y=$[1],ae=E.trans._cache;if(c(B)){N.addKeys(B);var K=F==="delete"||B.length===Y.length?mu(B,ae):null;K||x.addKeys(B),(K||Y)&&Cf(D,p,K,Y)}else if(B){var se={from:(T=B.lower)!==null&&T!==void 0?T:s.MIN_KEY,to:(I=B.upper)!==null&&I!==void 0?I:s.MAX_KEY};x.add(se),N.add(se)}else N.add(u),x.add(u),p.indexes.forEach(function(Z){return D(Z.name).add(u)});return h.mutate(E).then(function(Z){return B&&(E.type==="add"||E.type==="put")&&(N.addKeys(Z.results),S&&S.forEach(function(le){for(var X=E.values.map(function(je){return le.extractKey(je)}),Re=le.keyPath.findIndex(function(je){return je===g.keyPath}),Pe=0,et=Z.results.length;Pe<et;++Pe)X[Pe][Re]=Z.results[Pe];D(le.name).addKeys(X)})),P.mutatedParts=vi(P.mutatedParts||{},O),Z})}}),A=function(E){var T,I,P=E.query,O=P.index,D=P.range;return[O,new De((T=D.lower)!==null&&T!==void 0?T:s.MIN_KEY,(I=D.upper)!==null&&I!==void 0?I:s.MAX_KEY)]},U={get:function(E){return[g,new De(E.key)]},getMany:function(E){return[g,new De().addKeys(E.keys)]},count:A,query:A,openCursor:A};return a(U).forEach(function(E){R[E]=function(T){var I=H.subscr,P=!!I,O=vu(H,h)&&yu(E,T),D=O?T.obsSet={}:I;if(P){var N=function(K){var se="idb://".concat(o,"/").concat(l,"/").concat(K);return D[se]||(D[se]=new De)},x=N(""),F=N(":dels"),$=U[E](T),B=$[0],Y=$[1];if(E==="query"&&B.isPrimaryKey&&!T.values?F.add(Y):N(B.name||"").add(Y),!B.isPrimaryKey)if(E==="count")F.add(u);else{var ae=E==="query"&&b&&T.values&&h.query(e(e({},T),{values:!1}));return h[E].apply(this,arguments).then(function(K){if(E==="query"){if(b&&T.values)return ae.then(function(X){var Re=X.result;return x.addKeys(Re),K});var se=T.values?K.result.map(y):K.result;T.values?x.addKeys(se):F.addKeys(se)}else if(E==="openCursor"){var Z=K,le=T.values;return Z&&Object.create(Z,{key:{get:function(){return F.addKey(Z.primaryKey),Z.key}},primaryKey:{get:function(){var X=Z.primaryKey;return F.addKey(X),X}},value:{get:function(){return le&&x.addKey(Z.primaryKey),Z.value}}})}return K})}}return h[E].apply(this,arguments)}}),R}})}};function Cf(s,o,u,l){function h(p){var g=s(p.name||"");function v(b){return b!=null?p.extractKey(b):null}var y=function(b){return p.multiEntry&&c(b)?b.forEach(function(S){return g.addKey(S)}):g.addKey(b)};(u||l).forEach(function(b,S){var R=u&&v(u[S]),A=l&&v(l[S]);ce(R,A)!==0&&(R!=null&&y(R),A!=null&&y(A))})}o.indexes.forEach(h)}function wu(s,o,u){if(u.numFailures===0)return o;if(o.type==="deleteRange")return null;var l=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;if(u.numFailures===l)return null;var h=e({},o);return c(h.keys)&&(h.keys=h.keys.filter(function(p,g){return!(g in u.failures)})),"values"in h&&c(h.values)&&(h.values=h.values.filter(function(p,g){return!(g in u.failures)})),h}function _f(s,o){return o.lower===void 0?!0:o.lowerOpen?ce(s,o.lower)>0:ce(s,o.lower)>=0}function If(s,o){return o.upper===void 0?!0:o.upperOpen?ce(s,o.upper)<0:ce(s,o.upper)<=0}function mo(s,o){return _f(s,o)&&If(s,o)}function bu(s,o,u,l,h,p){if(!u||u.length===0)return s;var g=o.query.index,v=g.multiEntry,y=o.query.range,b=l.schema.primaryKey,S=b.extractKey,R=g.extractKey,A=(g.lowLevelIndex||g).extractKey,U=u.reduce(function(E,T){var I=E,P=[];if(T.type==="add"||T.type==="put")for(var O=new De,D=T.values.length-1;D>=0;--D){var N=T.values[D],x=S(N);if(!O.hasKey(x)){var F=R(N);(v&&c(F)?F.some(function(K){return mo(K,y)}):mo(F,y))&&(O.addKey(x),P.push(N))}}switch(T.type){case"add":{var $=new De().addKeys(o.values?E.map(function(K){return S(K)}):E);I=E.concat(o.values?P.filter(function(K){var se=S(K);return $.hasKey(se)?!1:($.addKey(se),!0)}):P.map(function(K){return S(K)}).filter(function(K){return $.hasKey(K)?!1:($.addKey(K),!0)}));break}case"put":{var B=new De().addKeys(T.values.map(function(K){return S(K)}));I=E.filter(function(K){return!B.hasKey(o.values?S(K):K)}).concat(o.values?P:P.map(function(K){return S(K)}));break}case"delete":var Y=new De().addKeys(T.keys);I=E.filter(function(K){return!Y.hasKey(o.values?S(K):K)});break;case"deleteRange":var ae=T.range;I=E.filter(function(K){return!mo(S(K),ae)});break}return I},s);return U===s?s:(U.sort(function(E,T){return ce(A(E),A(T))||ce(S(E),S(T))}),o.limit&&o.limit<1/0&&(U.length>o.limit?U.length=o.limit:s.length===o.limit&&U.length<o.limit&&(h.dirty=!0)),p?Object.freeze(U):U)}function Ru(s,o){return ce(s.lower,o.lower)===0&&ce(s.upper,o.upper)===0&&!!s.lowerOpen==!!o.lowerOpen&&!!s.upperOpen==!!o.upperOpen}function Af(s,o,u,l){if(s===void 0)return o!==void 0?-1:0;if(o===void 0)return 1;var h=ce(s,o);if(h===0){if(u&&l)return 0;if(u)return 1;if(l)return-1}return h}function xf(s,o,u,l){if(s===void 0)return o!==void 0?1:0;if(o===void 0)return-1;var h=ce(s,o);if(h===0){if(u&&l)return 0;if(u)return-1;if(l)return 1}return h}function Of(s,o){return Af(s.lower,o.lower,s.lowerOpen,o.lowerOpen)<=0&&xf(s.upper,o.upper,s.upperOpen,o.upperOpen)>=0}function Df(s,o,u,l){var h=Ht["idb://".concat(s,"/").concat(o)];if(!h)return[];var p=h.queries[u];if(!p)return[null,!1,h,null];var g=l.query?l.query.index.name:null,v=p[g||""];if(!v)return[null,!1,h,null];switch(u){case"query":var y=v.find(function(R){return R.req.limit===l.limit&&R.req.values===l.values&&Ru(R.req.query.range,l.query.range)});if(y)return[y,!0,h,v];var b=v.find(function(R){var A="limit"in R.req?R.req.limit:1/0;return A>=l.limit&&(l.values?R.req.values:!0)&&Of(R.req.query.range,l.query.range)});return[b,!1,h,v];case"count":var S=v.find(function(R){return Ru(R.req.query.range,l.query.range)});return[S,!!S,h,v]}}function Pf(s,o,u,l){s.subscribers.add(u),l.addEventListener("abort",function(){s.subscribers.delete(u),s.subscribers.size===0&&Mf(s,o)})}function Mf(s,o){setTimeout(function(){s.subscribers.size===0&&Lt(o,s)},3e3)}var kf={stack:"dbcore",level:0,name:"Cache",create:function(s){var o=s.schema.name,u=e(e({},s),{transaction:function(l,h,p){var g=s.transaction(l,h,p);if(h==="readwrite"){var v=new AbortController,y=v.signal,b=function(S){return function(){if(v.abort(),h==="readwrite"){for(var R=new Set,A=0,U=l;A<U.length;A++){var E=U[A],T=Ht["idb://".concat(o,"/").concat(E)];if(T){var I=s.table(E),P=T.optimisticOps.filter(function(le){return le.trans===g});if(g._explicit&&S&&g.mutatedParts)for(var O=0,D=Object.values(T.queries.query);O<D.length;O++)for(var N=D[O],x=0,F=N.slice();x<F.length;x++){var $=F[x];uo($.obsSet,g.mutatedParts)&&(Lt(N,$),$.subscribers.forEach(function(le){return R.add(le)}))}else if(P.length>0){T.optimisticOps=T.optimisticOps.filter(function(le){return le.trans!==g});for(var B=0,Y=Object.values(T.queries.query);B<Y.length;B++)for(var N=Y[B],ae=0,K=N.slice();ae<K.length;ae++){var $=K[ae];if($.res!=null&&g.mutatedParts)if(S&&!$.dirty){var se=Object.isFrozen($.res),Z=bu($.res,$.req,P,I,$,se);$.dirty?(Lt(N,$),$.subscribers.forEach(function(Re){return R.add(Re)})):Z!==$.res&&($.res=Z,$.promise=z.resolve({result:Z}))}else $.dirty&&Lt(N,$),$.subscribers.forEach(function(Re){return R.add(Re)})}}}}R.forEach(function(le){return le()})}}};g.addEventListener("abort",b(!1),{signal:y}),g.addEventListener("error",b(!1),{signal:y}),g.addEventListener("complete",b(!0),{signal:y})}return g},table:function(l){var h=s.table(l),p=h.schema.primaryKey,g=e(e({},h),{mutate:function(v){var y=H.trans;if(p.outbound||y.db._options.cache==="disabled"||y.explicit||y.idbtrans.mode!=="readwrite")return h.mutate(v);var b=Ht["idb://".concat(o,"/").concat(l)];if(!b)return h.mutate(v);var S=h.mutate(v);return(v.type==="add"||v.type==="put")&&(v.values.length>=50||go(p,v).some(function(R){return R==null}))?S.then(function(R){var A=e(e({},v),{values:v.values.map(function(E,T){var I;if(R.failures[T])return E;var P=!((I=p.keyPath)===null||I===void 0)&&I.includes(".")?Ut(E):e({},E);return me(P,p.keyPath,R.results[T]),P})}),U=wu(b,A,R);b.optimisticOps.push(U),queueMicrotask(function(){return v.mutatedParts&&yi(v.mutatedParts)})}):(b.optimisticOps.push(v),v.mutatedParts&&yi(v.mutatedParts),S.then(function(R){if(R.numFailures>0){Lt(b.optimisticOps,v);var A=wu(b,v,R);A&&b.optimisticOps.push(A),v.mutatedParts&&yi(v.mutatedParts)}}),S.catch(function(){Lt(b.optimisticOps,v),v.mutatedParts&&yi(v.mutatedParts)})),S},query:function(v){var y;if(!vu(H,h)||!yu("query",v))return h.query(v);var b=((y=H.trans)===null||y===void 0?void 0:y.db._options.cache)==="immutable",S=H,R=S.requery,A=S.signal,U=Df(o,l,"query",v),E=U[0],T=U[1],I=U[2],P=U[3];if(E&&T)E.obsSet=v.obsSet;else{var O=h.query(v).then(function(D){var N=D.result;if(E&&(E.res=N),b){for(var x=0,F=N.length;x<F;++x)Object.freeze(N[x]);Object.freeze(N)}else D.result=Ut(N);return D}).catch(function(D){return P&&E&&Lt(P,E),Promise.reject(D)});E={obsSet:v.obsSet,promise:O,subscribers:new Set,type:"query",req:v,dirty:!1},P?P.push(E):(P=[E],I||(I=Ht["idb://".concat(o,"/").concat(l)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),I.queries.query[v.query.index.name||""]=P)}return Pf(E,P,R,A),E.promise.then(function(D){return{result:bu(D.result,v,I?.optimisticOps,h,E,b)}})}});return g}});return u}};function bi(s,o){return new Proxy(s,{get:function(u,l,h){return l==="db"?o:Reflect.get(u,l,h)}})}var ht=function(){function s(o,u){var l=this;this._middlewares={},this.verno=0;var h=s.dependencies;this._options=u=e({addons:s.addons,autoOpen:!0,indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange,cache:"cloned"},u),this._deps={indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange};var p=u.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ve,dbReadyPromise:null,cancelOpen:ve,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:u.autoOpen};g.dbReadyPromise=new z(function(y){g.dbReadyResolve=y}),g.openCanceller=new z(function(y,b){g.cancelOpen=b}),this._state=g,this.name=o,this.on=Qn(this,"populate","blocked","versionchange","close",{ready:[Ms,ve]}),this.on.ready.subscribe=ie(this.on.ready.subscribe,function(y){return function(b,S){s.vip(function(){var R=l._state;if(R.openComplete)R.dbOpenError||z.resolve().then(b),S&&y(b);else if(R.onReadyBeingFired)R.onReadyBeingFired.push(b),S&&y(b);else{y(b);var A=l;S||y(function U(){A.on.ready.unsubscribe(b),A.on.ready.unsubscribe(U)})}})}}),this.Collection=zh(this),this.Table=Lh(this),this.Transaction=Xh(this),this.Version=ff(this),this.WhereClause=Wh(this),this.on("versionchange",function(y){y.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(l.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(l.name,"'. Closing db now to resume the delete request.")),l.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(l.name,"') was blocked")):console.warn("Upgrade '".concat(l.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=rr(u.IDBKeyRange),this._createTransaction=function(y,b,S,R){return new l.Transaction(y,b,S,l._options.chromeTransactionDurability,R)},this._fireOnBlocked=function(y){l.on("blocked").fire(y),wn.filter(function(b){return b.name===l.name&&b!==l&&!b._state.vcFired}).map(function(b){return b.on("versionchange").fire(y)})},this.use(Sf),this.use(kf),this.use(Tf),this.use(bf),this.use(Rf);var v=new Proxy(this,{get:function(y,b,S){if(b==="_vip")return!0;if(b==="table")return function(A){return bi(l.table(A),v)};var R=Reflect.get(y,b,S);return R instanceof nu?bi(R,v):b==="tables"?R.map(function(A){return bi(A,v)}):b==="_createTransaction"?function(){var A=R.apply(this,arguments);return bi(A,v)}:R}});this.vip=v,p.forEach(function(y){return y(l)})}return s.prototype.version=function(o){if(isNaN(o)||o<.1)throw new J.Type("Given version is not a positive number");if(o=Math.round(o*10)/10,this.idbdb||this._state.isBeingOpened)throw new J.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,o);var u=this._versions,l=u.filter(function(h){return h._cfg.version===o})[0];return l||(l=new this.Version(o),u.push(l),u.sort(nf),l.stores({}),this._state.autoSchema=!1,l)},s.prototype._whenReady=function(o){var u=this;return this.idbdb&&(this._state.openComplete||H.letThrough||this._vip)?o():new z(function(l,h){if(u._state.openComplete)return h(new J.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen){h(new J.DatabaseClosed);return}u.open().catch(ve)}u._state.dbReadyPromise.then(l,h)}).then(o)},s.prototype.use=function(o){var u=o.stack,l=o.create,h=o.level,p=o.name;p&&this.unuse({stack:u,name:p});var g=this._middlewares[u]||(this._middlewares[u]=[]);return g.push({stack:u,create:l,level:h??10,name:p}),g.sort(function(v,y){return v.level-y.level}),this},s.prototype.unuse=function(o){var u=o.stack,l=o.name,h=o.create;return u&&this._middlewares[u]&&(this._middlewares[u]=this._middlewares[u].filter(function(p){return h?p.create!==h:l?p.name!==l:!1})),this},s.prototype.open=function(){var o=this;return Kt(yt,function(){return vf(o)})},s.prototype._close=function(){var o=this._state,u=wn.indexOf(this);if(u>=0&&wn.splice(u,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}o.isBeingOpened||(o.dbReadyPromise=new z(function(l){o.dbReadyResolve=l}),o.openCanceller=new z(function(l,h){o.cancelOpen=h}))},s.prototype.close=function(o){var u=o===void 0?{disableAutoOpen:!0}:o,l=u.disableAutoOpen,h=this._state;l?(h.isBeingOpened&&h.cancelOpen(new J.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new J.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},s.prototype.delete=function(o){var u=this;o===void 0&&(o={disableAutoOpen:!0});var l=arguments.length>0&&typeof arguments[0]!="object",h=this._state;return new z(function(p,g){var v=function(){u.close(o);var y=u._deps.indexedDB.deleteDatabase(u.name);y.onsuccess=we(function(){gf(u._deps,u.name),p()}),y.onerror=Ze(g),y.onblocked=u._fireOnBlocked};if(l)throw new J.InvalidArgument("Invalid closeOptions argument to db.delete()");h.isBeingOpened?h.dbReadyPromise.then(v):v()})},s.prototype.backendDB=function(){return this.idbdb},s.prototype.isOpen=function(){return this.idbdb!==null},s.prototype.hasBeenClosed=function(){var o=this._state.dbOpenError;return o&&o.name==="DatabaseClosed"},s.prototype.hasFailed=function(){return this._state.dbOpenError!==null},s.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(s.prototype,"tables",{get:function(){var o=this;return a(this._allTables).map(function(u){return o._allTables[u]})},enumerable:!1,configurable:!0}),s.prototype.transaction=function(){var o=yf.apply(this,arguments);return this._transaction.apply(this,o)},s.prototype._transaction=function(o,u,l){var h=this,p=H.trans;(!p||p.db!==this||o.indexOf("!")!==-1)&&(p=null);var g=o.indexOf("?")!==-1;o=o.replace("!","").replace("?","");var v,y;try{if(y=u.map(function(S){var R=S instanceof h.Table?S.name:S;if(typeof R!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return R}),o=="r"||o===Gs)v=Gs;else if(o=="rw"||o==Hs)v=Hs;else throw new J.InvalidArgument("Invalid transaction mode: "+o);if(p){if(p.mode===Gs&&v===Hs)if(g)p=null;else throw new J.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");p&&y.forEach(function(S){if(p&&p.storeNames.indexOf(S)===-1)if(g)p=null;else throw new J.SubTransaction("Table "+S+" not included in parent transaction.")}),g&&p&&!p.active&&(p=null)}}catch(S){return p?p._promise(null,function(R,A){A(S)}):Se(S)}var b=gu.bind(null,this,v,y,p,l);return p?p._promise(v,b,"lock"):H.trans?Kt(H.transless,function(){return h._whenReady(b)}):this._whenReady(b)},s.prototype.table=function(o){if(!w(this._allTables,o))throw new J.InvalidTable("Table ".concat(o," does not exist"));return this._allTables[o]},s}(),Nf=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",jf=function(){function s(o){this._subscribe=o}return s.prototype.subscribe=function(o,u,l){return this._subscribe(!o||typeof o=="function"?{next:o,error:u,complete:l}:o)},s.prototype[Nf]=function(){return this},s}(),Ri;try{Ri={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Ri={indexedDB:null,IDBKeyRange:null}}function Eu(s){var o=!1,u,l=new jf(function(h){var p=Os(s);function g(P){var O=mn();try{p&&yn();var D=wt(s,P);return p&&(D=D.finally(bt)),D}finally{O&&vn()}}var v=!1,y,b={},S={},R={get closed(){return v},unsubscribe:function(){v||(v=!0,y&&y.abort(),A&&St.storagemutated.unsubscribe(T))}};h.start&&h.start(R);var A=!1,U=function(){return $s(I)};function E(){return uo(S,b)}var T=function(P){vi(b,P),E()&&U()},I=function(){if(!(v||!Ri.indexedDB)){b={};var P={};y&&y.abort(),y=new AbortController;var O={subscr:P,signal:y.signal,requery:U,querier:s,trans:null},D=g(O);Promise.resolve(D).then(function(N){o=!0,u=N,!(v||O.signal.aborted)&&(b={},S=P,!fh(S)&&!A&&(St(nr,T),A=!0),$s(function(){return!v&&h.next&&h.next(N)}))},function(N){o=!1,["DatabaseClosedError","AbortError"].includes(N?.name)||v||$s(function(){v||h.error&&h.error(N)})})}};return setTimeout(U,0),R});return l.hasValue=function(){return o},l.getValue=function(){return u},l}var Wt=ht;C(Wt,e(e({},Yr),{delete:function(s){var o=new Wt(s,{addons:[]});return o.delete()},exists:function(s){return new Wt(s,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return df(Wt.dependencies).then(s)}catch{return Se(new J.MissingAPI)}},defineClass:function(){function s(o){f(this,o)}return s},ignoreTransaction:function(s){return H.trans?Kt(H.transless,s):s()},vip:so,async:function(s){return function(){try{var o=fo(s.apply(this,arguments));return!o||typeof o.then!="function"?z.resolve(o):o}catch(u){return Se(u)}}},spawn:function(s,o,u){try{var l=fo(s.apply(u,o||[]));return!l||typeof l.then!="function"?z.resolve(l):l}catch(h){return Se(h)}},currentTransaction:{get:function(){return H.trans||null}},waitFor:function(s,o){var u=z.resolve(typeof s=="function"?Wt.ignoreTransaction(s):s).timeout(o||6e4);return H.trans?H.trans.waitFor(u):u},Promise:z,debug:{get:function(){return Qe},set:function(s){za(s)}},derive:k,extend:f,props:C,override:ie,Events:Qn,on:St,liveQuery:Eu,extendObservabilitySet:vi,getByKeyPath:Te,setByKeyPath:me,delByKeyPath:Ye,shallowClone:Ne,deepClone:Ut,getObjectDiff:po,cmp:ce,asap:ne,minKey:Vs,addons:[],connections:wn,errnames:Ps,dependencies:Ri,cache:Ht,semVer:Ja,version:Ja.split(".").map(function(s){return parseInt(s)}).reduce(function(s,o,u){return s+o/Math.pow(10,u*2)})})),Wt.maxKey=rr(Wt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(St(nr,function(s){if(!Tt){var o;o=new CustomEvent(Js,{detail:s}),Tt=!0,dispatchEvent(o),Tt=!1}}),addEventListener(Js,function(s){var o=s.detail;Tt||vo(o)}));function vo(s){var o=Tt;try{Tt=!0,St.storagemutated.fire(s),ho(s,!0)}finally{Tt=o}}var Tt=!1,Ct,yo=function(){};typeof BroadcastChannel<"u"&&(yo=function(){Ct=new BroadcastChannel(Js),Ct.onmessage=function(s){return s.data&&vo(s.data)}},yo(),typeof Ct.unref=="function"&&Ct.unref(),St(nr,function(s){Tt||Ct.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!ht.disableBfCache&&s.persisted){Qe&&console.debug("Dexie: handling persisted pagehide"),Ct?.close();for(var o=0,u=wn;o<u.length;o++){var l=u[o];l.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(s){!ht.disableBfCache&&s.persisted&&(Qe&&console.debug("Dexie: handling persisted pageshow"),yo(),vo({all:new De(-1/0,[[]])}))}));function Uf(s){return new er({add:s})}function Lf(s){return new er({remove:s})}function Ff(s,o){return new er({replacePrefix:[s,o]})}z.rejectionMapper=yh,za(Qe);var Bf=Object.freeze({__proto__:null,Dexie:ht,liveQuery:Eu,Entity:Za,cmp:ce,PropModification:er,replacePrefix:Ff,add:Uf,remove:Lf,default:ht,RangeSet:De,mergeRanges:or,rangesOverlap:hu});return e(ht,Bf,{default:ht}),ht})});var In=new ge(""),Bo=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i,a){return this._findPluginFor(r).addEventListener(e,r,i,a)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(a=>a.supports(e)),!r)throw new he(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||t)(oe(In),oe(pt))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})(),Zt=class{_doc;constructor(n){this._doc=n}manager},Pi="ng-app-id";function mc(t){for(let n of t)n.remove()}function vc(t,n){let e=n.createElement("style");return e.textContent=t,e}function Gf(t,n,e,r){let i=t.head?.querySelectorAll(`style[${Pi}="${n}"],link[${Pi}="${n}"]`);if(i)for(let a of i)a.removeAttribute(Pi),a instanceof HTMLLinkElement?r.set(a.href.slice(a.href.lastIndexOf("/")+1),{usage:0,elements:[a]}):a.textContent&&e.set(a.textContent,{usage:0,elements:[a]})}function Lo(t,n){let e=n.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e}var zo=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,i,a={}){this.doc=e,this.appId=r,this.nonce=i,this.isServer=jo(a),Gf(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,vc);r?.forEach(i=>this.addUsage(i,this.external,Lo))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let a=r.get(e);a?a.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(c=>this.addElement(c,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(mc(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])mc(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,vc(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,Lo(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Pi,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||t)(oe(xe),oe(xo),oe(Oo,8),oe(Jt))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})(),Uo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},$o=/%COMP%/g;var wc="%COMP%",Hf=`_nghost-${wc}`,Wf=`_ngcontent-${wc}`,qf=!0,Xf=new ge("",{providedIn:"root",factory:()=>qf});function Jf(t){return Wf.replace($o,t)}function Yf(t){return Hf.replace($o,t)}function bc(t,n){return n.map(e=>e.replace($o,t))}var Ko=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,a,c,f,d,m=null,w=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=f,this.ngZone=d,this.nonce=m,this.tracingService=w,this.platformIsServer=jo(f),this.defaultRenderer=new yr(e,c,d,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===hr.ShadowDom&&(r=Ae(V({},r),{encapsulation:hr.Emulated}));let i=this.getOrCreateRenderer(e,r);return i instanceof Mi?i.applyToHost(e):i instanceof wr&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,a=i.get(r.id);if(!a){let c=this.doc,f=this.ngZone,d=this.eventManager,m=this.sharedStylesHost,w=this.removeStylesOnCompDestroy,C=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case hr.Emulated:a=new Mi(d,m,r,this.appId,w,c,f,C,_);break;case hr.ShadowDom:return new Fo(d,m,e,r,c,f,this.nonce,C,_);default:a=new wr(d,m,r,w,c,f,C,_);break}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||t)(oe(Bo),oe(zo),oe(xo),oe(Xf),oe(xe),oe(Jt),oe(pt),oe(Oo),oe(Bu,8))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})(),yr=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,e,r,i,a){this.eventManager=n,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=a}destroy(){}destroyNode=null;createElement(n,e){return e?this.doc.createElementNS(Uo[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(yc(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(yc(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){e.remove()}selectRootElement(n,e){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new he(-5104,!1);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,i){if(i){e=i+":"+e;let a=Uo[i];a?n.setAttributeNS(a,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){let i=Uo[r];i?n.removeAttributeNS(i,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,i){i&(fr.DashCase|fr.Important)?n.style.setProperty(e,r,i&fr.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&fr.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){n!=null&&(n[e]=r)}setValue(n,e){n.nodeValue=e}listen(n,e,r,i){if(typeof n=="string"&&(n=mr().getGlobalEventTarget(this.doc,n),!n))throw new he(5102,!1);let a=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(a=this.tracingService.wrapEventListener(n,e,a)),this.eventManager.addEventListener(n,e,a,i)}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))===!1&&e.preventDefault()}}};function yc(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Fo=class extends yr{sharedStylesHost;hostEl;shadowRoot;constructor(n,e,r,i,a,c,f,d,m){super(n,a,c,d,m),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let w=i.styles;w=bc(i.id,w);for(let _ of w){let M=document.createElement("style");f&&M.setAttribute("nonce",f),M.textContent=_,this.shadowRoot.appendChild(M)}let C=i.getExternalStyles?.();if(C)for(let _ of C){let M=Lo(_,a);f&&M.setAttribute("nonce",f),this.shadowRoot.appendChild(M)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},wr=class extends yr{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,e,r,i,a,c,f,d,m){super(n,a,c,f,d),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let w=r.styles;this.styles=m?bc(m,w):w,this.styleUrls=r.getExternalStyles?.(m)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Mi=class extends wr{contentAttr;hostAttr;constructor(n,e,r,i,a,c,f,d,m){let w=i+"-"+r.id;super(n,e,r,a,c,f,d,m,w),this.contentAttr=Jf(w),this.hostAttr=Yf(w)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}};var Vo=class extends dc{supportsDOMEvents=!0},ki=class t extends Vo{static makeCurrent(){fc(new t)}onAndCancel(n,e,r,i){return n.addEventListener(e,r,i),()=>{n.removeEventListener(e,r,i)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=Zf();return e==null?null:ed(e)}resetBaseElement(){br=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Oi(document.cookie,n)}},br=null;function Zf(){return br=br||document.querySelector("base"),br?br.getAttribute("href"):null}function ed(t){return new URL(t,document.baseURI).pathname}var td=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})(),Ec=(()=>{class t extends Zt{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,a){return e.addEventListener(r,i,a),()=>this.removeEventListener(e,r,i,a)}removeEventListener(e,r,i,a){return e.removeEventListener(r,i,a)}static \u0275fac=function(r){return new(r||t)(oe(xe))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})(),Rc=["alt","control","meta","shift"],nd={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rd={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Sc=(()=>{class t extends Zt{constructor(e){super(e)}supports(e){return t.parseEventName(e)!=null}addEventListener(e,r,i,a){let c=t.parseEventName(r),f=t.eventCallback(c.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mr().onAndCancel(e,c.domEventName,f,a))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let a=t._normalizeKey(r.pop()),c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),Rc.forEach(m=>{let w=r.indexOf(m);w>-1&&(r.splice(w,1),c+=m+".")}),c+=a,r.length!=0||a.length===0)return null;let d={};return d.domEventName=i,d.fullKey=c,d}static matchEventFullKeyCode(e,r){let i=nd[e.key]||e.key,a="";return r.indexOf("code.")>-1&&(i=e.code,a="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Rc.forEach(c=>{if(c!==i){let f=rd[c];f(e)&&(a+=c+".")}}),a+=i,a===r)}static eventCallback(e,r,i){return a=>{t.matchEventFullKeyCode(a,e)&&i.runGuarded(()=>r(a))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||t)(oe(xe))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})();function id(t,n){return cc(V({rootComponent:t},sd(n)))}function sd(t){return{appProviders:[...ld,...t?.providers??[]],platformProviders:cd}}function od(){ki.makeCurrent()}function ad(){return new _o}function ud(){return Uu(document),document}var cd=[{provide:Jt,useValue:pc},{provide:Lu,useValue:od,multi:!0},{provide:xe,useFactory:ud}];var ld=[{provide:Mu,useValue:"root"},{provide:_o,useFactory:ad},{provide:In,useClass:Ec,multi:!0,deps:[xe]},{provide:In,useClass:Sc,multi:!0,deps:[xe]},Ko,zo,Bo,{provide:Ju,useExisting:Ko},{provide:Di,useClass:td},[]];var xn=class{},Rr=class{},mt=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),a=e.slice(r+1).trim();this.addHeaderEntry(i,a)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new t;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,e);let i=(n.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let a=n.value;if(!a)this.headers.delete(e),this.normalizedNames.delete(e);else{let c=this.headers.get(e);if(!c)return;c=c.filter(f=>a.indexOf(f)===-1),c.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}break}}addHeaderEntry(n,e){let r=n.toLowerCase();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(n,e){let r=(Array.isArray(e)?e:[e]).map(a=>a.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var ji=class{encodeKey(n){return Tc(n)}encodeValue(n){return Tc(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function hd(t,n){let e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let a=i.indexOf("="),[c,f]=a==-1?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,a)),n.decodeValue(i.slice(a+1))],d=e.get(c)||[];d.push(f),e.set(c,d)}),e}var fd=/%(\d[a-f0-9])/gi,dd={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Tc(t){return encodeURIComponent(t).replace(fd,(n,e)=>dd[e]??n)}function Ni(t){return`${t}`}var gt=class t{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new ji,n.fromString){if(n.fromObject)throw new he(2805,!1);this.map=hd(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let r=n.fromObject[e],i=Array.isArray(r)?r.map(Ni):[Ni(r)];this.map.set(e,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(r=>{let i=n[r];Array.isArray(i)?i.forEach(a=>{e.push({param:r,value:a,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new t({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(Ni(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let r=this.map.get(n.param)||[],i=r.indexOf(Ni(n.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var Ui=class{map=new Map;set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function pd(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Cc(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function _c(t){return typeof Blob<"u"&&t instanceof Blob}function Ic(t){return typeof FormData<"u"&&t instanceof FormData}function gd(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Ac="Content-Type",xc="Accept",Oc="X-Request-URL",Dc="text/plain",Pc="application/json",md=`${Pc}, ${Dc}, */*`,An=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(n,e,r,i){this.url=e,this.method=n.toUpperCase();let a;if(pd(this.method)||i?(this.body=r!==void 0?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params),this.transferCache=a.transferCache),this.headers??=new mt,this.context??=new Ui,!this.params)this.params=new gt,this.urlWithParams=e;else{let c=this.params.toString();if(c.length===0)this.urlWithParams=e;else{let f=e.indexOf("?"),d=f===-1?"?":f<e.length-1?"&":"";this.urlWithParams=e+d+c}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Cc(this.body)||_c(this.body)||Ic(this.body)||gd(this.body)?this.body:this.body instanceof gt?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Ic(this.body)?null:_c(this.body)?this.body.type||null:Cc(this.body)?null:typeof this.body=="string"?Dc:this.body instanceof gt?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Pc:null}clone(n={}){let e=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,a=n.transferCache??this.transferCache,c=n.body!==void 0?n.body:this.body,f=n.withCredentials??this.withCredentials,d=n.reportProgress??this.reportProgress,m=n.headers||this.headers,w=n.params||this.params,C=n.context??this.context;return n.setHeaders!==void 0&&(m=Object.keys(n.setHeaders).reduce((_,M)=>_.set(M,n.setHeaders[M]),m)),n.setParams&&(w=Object.keys(n.setParams).reduce((_,M)=>_.set(M,n.setParams[M]),w)),new t(e,r,c,{params:w,headers:m,context:C,reportProgress:d,responseType:i,withCredentials:f,transferCache:a})}},tn=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(tn||{}),On=class{headers;status;statusText;url;ok;type;constructor(n,e=200,r="OK"){this.headers=n.headers||new mt,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},Li=class t extends On{constructor(n={}){super(n)}type=tn.ResponseHeader;clone(n={}){return new t({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},nn=class t extends On{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=tn.Response;clone(n={}){return new t({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Er=class extends On{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},vd=200,yd=204;function Go(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Mc=(()=>{class t{handler;constructor(e){this.handler=e}request(e,r,i={}){let a;if(e instanceof An)a=e;else{let d;i.headers instanceof mt?d=i.headers:d=new mt(i.headers);let m;i.params&&(i.params instanceof gt?m=i.params:m=new gt({fromObject:i.params})),a=new An(e,r,i.body!==void 0?i.body:null,{headers:d,context:i.context,params:m,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let c=ee(a).pipe(It(d=>this.handler.handle(d)));if(e instanceof An||i.observe==="events")return c;let f=c.pipe(nt(d=>d instanceof nn));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe(de(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new he(2806,!1);return d.body}));case"blob":return f.pipe(de(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new he(2807,!1);return d.body}));case"text":return f.pipe(de(d=>{if(d.body!==null&&typeof d.body!="string")throw new he(2808,!1);return d.body}));case"json":default:return f.pipe(de(d=>d.body))}case"response":return f;default:throw new he(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new gt().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,Go(i,r))}post(e,r,i={}){return this.request("POST",e,Go(i,r))}put(e,r,i={}){return this.request("PUT",e,Go(i,r))}static \u0275fac=function(r){return new(r||t)(oe(xn))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})();var wd=new ge("");function bd(t,n){return n(t)}function Rd(t,n,e){return(r,i)=>He(e,()=>n(r,a=>t(a,i)))}var kc=new ge(""),Wo=new ge(""),Nc=new ge("",{providedIn:"root",factory:()=>!0});var Fi=(()=>{class t extends xn{backend;injector;chain=null;pendingTasks=G(_i);contributeToStability=G(Nc);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(kc),...this.injector.get(Wo,[])]));this.chain=r.reduceRight((i,a)=>Rd(i,a,this.injector),bd)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(Sn(()=>this.pendingTasks.remove(r)))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(oe(Rr),oe(xt))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})();var Ed=/^\)\]\}',?\n/,Sd=RegExp(`^${Oc}:`,"m");function Td(t){return"responseURL"in t&&t.responseURL?t.responseURL:Sd.test(t.getAllResponseHeaders())?t.getResponseHeader(Oc):null}var Ho=(()=>{class t{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new he(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Me(r.\u0275loadImpl()):ee(null)).pipe(Ke(()=>new Si(a=>{let c=r.build();if(c.open(e.method,e.urlWithParams),e.withCredentials&&(c.withCredentials=!0),e.headers.forEach((j,L)=>c.setRequestHeader(j,L.join(","))),e.headers.has(xc)||c.setRequestHeader(xc,md),!e.headers.has(Ac)){let j=e.detectContentTypeHeader();j!==null&&c.setRequestHeader(Ac,j)}if(e.responseType){let j=e.responseType.toLowerCase();c.responseType=j!=="json"?j:"text"}let f=e.serializeBody(),d=null,m=()=>{if(d!==null)return d;let j=c.statusText||"OK",L=new mt(c.getAllResponseHeaders()),q=Td(c)||e.url;return d=new Li({headers:L,status:c.status,statusText:j,url:q}),d},w=()=>{let{headers:j,status:L,statusText:q,url:Q}=m(),ie=null;L!==yd&&(ie=typeof c.response>"u"?c.responseText:c.response),L===0&&(L=ie?vd:0);let fe=L>=200&&L<300;if(e.responseType==="json"&&typeof ie=="string"){let ne=ie;ie=ie.replace(Ed,"");try{ie=ie!==""?JSON.parse(ie):null}catch(ye){ie=ne,fe&&(fe=!1,ie={error:ye,text:ie})}}fe?(a.next(new nn({body:ie,headers:j,status:L,statusText:q,url:Q||void 0})),a.complete()):a.error(new Er({error:ie,headers:j,status:L,statusText:q,url:Q||void 0}))},C=j=>{let{url:L}=m(),q=new Er({error:j,status:c.status||0,statusText:c.statusText||"Unknown Error",url:L||void 0});a.error(q)},_=!1,M=j=>{_||(a.next(m()),_=!0);let L={type:tn.DownloadProgress,loaded:j.loaded};j.lengthComputable&&(L.total=j.total),e.responseType==="text"&&c.responseText&&(L.partialText=c.responseText),a.next(L)},k=j=>{let L={type:tn.UploadProgress,loaded:j.loaded};j.lengthComputable&&(L.total=j.total),a.next(L)};return c.addEventListener("load",w),c.addEventListener("error",C),c.addEventListener("timeout",C),c.addEventListener("abort",C),e.reportProgress&&(c.addEventListener("progress",M),f!==null&&c.upload&&c.upload.addEventListener("progress",k)),c.send(f),a.next({type:tn.Sent}),()=>{c.removeEventListener("error",C),c.removeEventListener("abort",C),c.removeEventListener("load",w),c.removeEventListener("timeout",C),e.reportProgress&&(c.removeEventListener("progress",M),f!==null&&c.upload&&c.upload.removeEventListener("progress",k)),c.readyState!==c.DONE&&c.abort()}})))}static \u0275fac=function(r){return new(r||t)(oe(Di))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})(),jc=new ge(""),Cd="XSRF-TOKEN",_d=new ge("",{providedIn:"root",factory:()=>Cd}),Id="X-XSRF-TOKEN",Ad=new ge("",{providedIn:"root",factory:()=>Id}),Sr=class{},xd=(()=>{class t{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Oi(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||t)(oe(xe),oe(Jt),oe(_d))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})();function Od(t,n){let e=t.url.toLowerCase();if(!G(jc)||t.method==="GET"||t.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(t);let r=G(Sr).getToken(),i=G(Ad);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),n(t)}function Dd(...t){let n=[Mc,Ho,Fi,{provide:xn,useExisting:Fi},{provide:Rr,useFactory:()=>G(wd,{optional:!0})??G(Ho)},{provide:kc,useValue:Od,multi:!0},{provide:jc,useValue:!0},{provide:Sr,useClass:xd}];for(let e of t)n.push(...e.\u0275providers);return Tn(n)}var Md=new ge(""),kd="b",Nd="h",jd="s",Ud="st",Ld="u",Fd="rt",qo=new ge(""),Bd=["GET","HEAD"];function zd(t,n){let _=G(qo),{isCacheActive:e}=_,r=Su(_,["isCacheActive"]),{transferCache:i,method:a}=t;if(!e||i===!1||a==="POST"&&!r.includePostRequests&&!i||a!=="POST"&&!Bd.includes(a)||!r.includeRequestsWithAuthHeaders&&$d(t)||r.filter?.(t)===!1)return n(t);let c=G(Fu);if(G(Md,{optional:!0}))throw new he(2803,!1);let d=t.url,m=Kd(t,d),w=c.get(m,null),C=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(C=i.includeHeaders),w){let{[kd]:M,[Fd]:k,[Nd]:j,[jd]:L,[Ud]:q,[Ld]:Q}=w,ie=M;switch(k){case"arraybuffer":ie=new TextEncoder().encode(M).buffer;break;case"blob":ie=new Blob([M]);break}let fe=new mt(j);return ee(new nn({body:ie,headers:fe,status:L,statusText:q,url:Q}))}return n(t).pipe(Ce(M=>{M instanceof nn}))}function $d(t){return t.headers.has("authorization")||t.headers.has("proxy-authorization")}function Uc(t){return[...t.keys()].sort().map(n=>`${n}=${t.getAll(n)}`).join("&")}function Kd(t,n){let{params:e,method:r,responseType:i}=t,a=Uc(e),c=t.serializeBody();c instanceof URLSearchParams?c=Uc(c):typeof c!="string"&&(c="");let f=[r,i,n,c,a].join("|"),d=Vd(f);return d}function Vd(t){let n=0;for(let e of t)n=Math.imul(31,n)+e.charCodeAt(0)<<0;return n+=2147483648,n.toString()}function Lc(t){return[{provide:qo,useFactory:()=>(zu("NgHttpTransferCache"),V({isCacheActive:!0},t))},{provide:Wo,useValue:zd,multi:!0},{provide:Ii,multi:!0,useFactory:()=>{let n=G(gr),e=G(qo);return()=>{n.whenStable().then(()=>{e.isCacheActive=!1})}}}]}var Fc=(()=>{class t{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||t)(oe(xe))};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Hd={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},Xo=new ge(""),Bc=new ge(""),Wd=(()=>{class t{events=[];overrides={};options;buildHammer(e){let r=new Hammer(e,this.options);r.get("pinch").set({enable:!0}),r.get("rotate").set({enable:!0});for(let i in this.overrides)r.get(i).set(this.overrides[i]);return r}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})(),qd=(()=>{class t extends Zt{_config;_injector;loader;_loaderPromise=null;constructor(e,r,i,a){super(e),this._config=r,this._injector=i,this.loader=a}supports(e){return!(!Hd.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader)}addEventListener(e,r,i){let a=this.manager.getZone();if(r=r.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||a.runOutsideAngular(()=>this.loader());let c=!1,f=()=>{c=!0};return a.runOutsideAngular(()=>this._loaderPromise.then(()=>{if(!window.Hammer){f=()=>{};return}c||(f=this.addEventListener(e,r,i))}).catch(()=>{f=()=>{}})),()=>{f()}}return a.runOutsideAngular(()=>{let c=this._config.buildHammer(e),f=function(d){a.runGuarded(function(){i(d)})};return c.on(r,f),()=>{c.off(r,f),typeof c.destroy=="function"&&c.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}static \u0275fac=function(r){return new(r||t)(oe(xe),oe(Xo),oe(Xt),oe(Bc,8))};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})(),Dv=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=dr({type:t});static \u0275inj=cr({providers:[{provide:In,useClass:qd,multi:!0,deps:[xe,Xo,Xt,[new Nu,Bc]]},{provide:Xo,useClass:Wd}]})}return t})(),Xd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ue({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=oe(Jd),i},providedIn:"root"})}return t})(),Jd=(()=>{class t extends Xd{_doc;constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case Qt.NONE:return r;case Qt.HTML:return _n(r,"HTML")?Cn(r):qu(this._doc,String(r)).toString();case Qt.STYLE:return _n(r,"Style")?Cn(r):r;case Qt.SCRIPT:if(_n(r,"Script"))return Cn(r);throw new he(5200,!1);case Qt.URL:return _n(r,"URL")?Cn(r):Wu(String(r));case Qt.RESOURCE_URL:if(_n(r,"ResourceURL"))return Cn(r);throw new he(5201,!1);default:throw new he(5202,!1)}}bypassSecurityTrustHtml(e){return $u(e)}bypassSecurityTrustStyle(e){return Ku(e)}bypassSecurityTrustScript(e){return Vu(e)}bypassSecurityTrustUrl(e){return Gu(e)}bypassSecurityTrustResourceUrl(e){return Hu(e)}static \u0275fac=function(r){return new(r||t)(oe(xe))};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bi=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t[t.I18nSupport=2]="I18nSupport",t[t.EventReplay=3]="EventReplay",t[t.IncrementalHydration=4]="IncrementalHydration",t}(Bi||{});function Yd(t,n=[],e={}){return{\u0275kind:t,\u0275providers:n}}function Pv(){return Yd(Bi.EventReplay,lc())}function Mv(...t){let n=[],e=new Set;for(let{\u0275providers:i,\u0275kind:a}of t)e.add(a),i.length&&n.push(i);let r=e.has(Bi.HttpTransferCacheOptions);return Tn([[],hc(),e.has(Bi.NoHttpTransferCache)||r?[]:Lc({}),n])}var re="primary",jr=Symbol("RouteTitle"),ea=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function on(t){return new ea(t)}function qc(t,n,e){let r=e.path.split("/");if(r.length>t.length||e.pathMatch==="full"&&(n.hasChildren()||r.length<t.length))return null;let i={};for(let a=0;a<r.length;a++){let c=r[a],f=t[a];if(c[0]===":")i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Zd(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!rt(t[e],n[e]))return!1;return!0}function rt(t,n){let e=t?ta(t):void 0,r=n?ta(n):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let a=0;a<e.length;a++)if(i=e[a],!Xc(t[i],n[i]))return!1;return!0}function ta(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Xc(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let e=[...t].sort(),r=[...n].sort();return e.every((i,a)=>r[a]===i)}else return t===n}function Jc(t){return t.length>0?t[t.length-1]:null}function Mt(t){return _u(t)?t:tc(t)?Me(Promise.resolve(t)):ee(t)}var ep={exact:Qc,subset:Zc},Yc={exact:tp,subset:np,ignored:()=>!0};function zc(t,n,e){return ep[e.paths](t.root,n.root,e.matrixParams)&&Yc[e.queryParams](t.queryParams,n.queryParams)&&!(e.fragment==="exact"&&t.fragment!==n.fragment)}function tp(t,n){return rt(t,n)}function Qc(t,n,e){if(!rn(t.segments,n.segments)||!Ki(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!t.children[r]||!Qc(t.children[r],n.children[r],e))return!1;return!0}function np(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>Xc(t[e],n[e]))}function Zc(t,n,e){return el(t,n,n.segments,e)}function el(t,n,e,r){if(t.segments.length>e.length){let i=t.segments.slice(0,e.length);return!(!rn(i,e)||n.hasChildren()||!Ki(i,e,r))}else if(t.segments.length===e.length){if(!rn(t.segments,e)||!Ki(t.segments,e,r))return!1;for(let i in n.children)if(!t.children[i]||!Zc(t.children[i],n.children[i],r))return!1;return!0}else{let i=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!rn(t.segments,i)||!Ki(t.segments,i,r)||!t.children[re]?!1:el(t.children[re],n,a,r)}}function Ki(t,n,e){return n.every((r,i)=>Yc[e](t[i].parameters,r.parameters))}var st=class{root;queryParams;fragment;_queryParamMap;constructor(n=new pe([],{}),e={},r=null){this.root=n,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=on(this.queryParams),this._queryParamMap}toString(){return sp.serialize(this)}},pe=class{segments;children;parent=null;constructor(n,e){this.segments=n,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vi(this)}},Ot=class{path;parameters;_parameterMap;constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=on(this.parameters),this._parameterMap}toString(){return nl(this)}};function rp(t,n){return rn(t,n)&&t.every((e,r)=>rt(e.parameters,n[r].parameters))}function rn(t,n){return t.length!==n.length?!1:t.every((e,r)=>e.path===n[r].path)}function ip(t,n){let e=[];return Object.entries(t.children).forEach(([r,i])=>{r===re&&(e=e.concat(n(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==re&&(e=e.concat(n(i,r)))}),e}var zn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ue({token:t,factory:()=>new an,providedIn:"root"})}return t})(),an=class{parse(n){let e=new ra(n);return new st(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${Tr(n.root,!0)}`,r=up(n.queryParams),i=typeof n.fragment=="string"?`#${op(n.fragment)}`:"";return`${e}${r}${i}`}},sp=new an;function Vi(t){return t.segments.map(n=>nl(n)).join("/")}function Tr(t,n){if(!t.hasChildren())return Vi(t);if(n){let e=t.children[re]?Tr(t.children[re],!1):"",r=[];return Object.entries(t.children).forEach(([i,a])=>{i!==re&&r.push(`${i}:${Tr(a,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=ip(t,(r,i)=>i===re?[Tr(t.children[re],!1)]:[`${i}:${Tr(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[re]!=null?`${Vi(t)}/${e[0]}`:`${Vi(t)}/(${e.join("//")})`}}function tl(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zi(t){return tl(t).replace(/%3B/gi,";")}function op(t){return encodeURI(t)}function na(t){return tl(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gi(t){return decodeURIComponent(t)}function $c(t){return Gi(t.replace(/\+/g,"%20"))}function nl(t){return`${na(t.path)}${ap(t.parameters)}`}function ap(t){return Object.entries(t).map(([n,e])=>`;${na(n)}=${na(e)}`).join("")}function up(t){let n=Object.entries(t).map(([e,r])=>Array.isArray(r)?r.map(i=>`${zi(e)}=${zi(i)}`).join("&"):`${zi(e)}=${zi(r)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var cp=/^[^\/()?;#]+/;function Jo(t){let n=t.match(cp);return n?n[0]:""}var lp=/^[^\/()?;=#]+/;function hp(t){let n=t.match(lp);return n?n[0]:""}var fp=/^[^=?&#]+/;function dp(t){let n=t.match(fp);return n?n[0]:""}var pp=/^[^&#]+/;function gp(t){let n=t.match(pp);return n?n[0]:""}var ra=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(r[re]=new pe(n,e)),r}parseSegment(){let n=Jo(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new he(4009,!1);return this.capture(n),new Ot(Gi(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=hp(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=Jo(this.remaining);i&&(r=i,this.capture(r))}n[Gi(e)]=Gi(r)}parseQueryParam(n){let e=dp(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let c=gp(this.remaining);c&&(r=c,this.capture(r))}let i=$c(e),a=$c(r);if(n.hasOwnProperty(i)){let c=n[i];Array.isArray(c)||(c=[c],n[i]=c),c.push(a)}else n[i]=a}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Jo(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new he(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):n&&(a=re);let c=this.parseChildren();e[a]=Object.keys(c).length===1?c[re]:new pe([],c),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new he(4011,!1)}};function rl(t){return t.segments.length>0?new pe([],{[re]:t}):t}function il(t){let n={};for(let[r,i]of Object.entries(t.children)){let a=il(i);if(r===re&&a.segments.length===0&&a.hasChildren())for(let[c,f]of Object.entries(a.children))n[c]=f;else(a.segments.length>0||a.hasChildren())&&(n[r]=a)}let e=new pe(t.segments,n);return mp(e)}function mp(t){if(t.numberOfChildren===1&&t.children[re]){let n=t.children[re];return new pe(t.segments.concat(n.segments),n.children)}return t}function Dt(t){return t instanceof st}function sl(t,n,e=null,r=null){let i=ol(t);return al(i,n,e,r)}function ol(t){let n;function e(a){let c={};for(let d of a.children){let m=e(d);c[d.outlet]=m}let f=new pe(a.url,c);return a===t&&(n=f),f}let r=e(t.root),i=rl(r);return n??i}function al(t,n,e,r){let i=t;for(;i.parent;)i=i.parent;if(n.length===0)return Yo(i,i,i,e,r);let a=vp(n);if(a.toRoot())return Yo(i,i,new pe([],{}),e,r);let c=yp(a,i,t),f=c.processChildren?_r(c.segmentGroup,c.index,a.commands):cl(c.segmentGroup,c.index,a.commands);return Yo(i,c.segmentGroup,f,e,r)}function Wi(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ar(t){return typeof t=="object"&&t!=null&&t.outlets}function Yo(t,n,e,r,i){let a={};r&&Object.entries(r).forEach(([d,m])=>{a[d]=Array.isArray(m)?m.map(w=>`${w}`):`${m}`});let c;t===n?c=e:c=ul(t,n,e);let f=rl(il(c));return new st(f,a,i)}function ul(t,n,e){let r={};return Object.entries(t.children).forEach(([i,a])=>{a===n?r[i]=e:r[i]=ul(a,n,e)}),new pe(t.segments,r)}var qi=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,e,r){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&Wi(r[0]))throw new he(4003,!1);let i=r.find(Ar);if(i&&i!==Jc(r))throw new he(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function vp(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new qi(!0,0,t);let n=0,e=!1,r=t.reduce((i,a,c)=>{if(typeof a=="object"&&a!=null){if(a.outlets){let f={};return Object.entries(a.outlets).forEach(([d,m])=>{f[d]=typeof m=="string"?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return typeof a!="string"?[...i,a]:c===0?(a.split("/").forEach((f,d)=>{d==0&&f==="."||(d==0&&f===""?e=!0:f===".."?n++:f!=""&&i.push(f))}),i):[...i,a]},[]);return new qi(e,n,r)}var Mn=class{segmentGroup;processChildren;index;constructor(n,e,r){this.segmentGroup=n,this.processChildren=e,this.index=r}};function yp(t,n,e){if(t.isAbsolute)return new Mn(n,!0,0);if(!e)return new Mn(n,!1,NaN);if(e.parent===null)return new Mn(e,!0,0);let r=Wi(t.commands[0])?0:1,i=e.segments.length-1+r;return wp(e,i,t.numberOfDoubleDots)}function wp(t,n,e){let r=t,i=n,a=e;for(;a>i;){if(a-=i,r=r.parent,!r)throw new he(4005,!1);i=r.segments.length}return new Mn(r,!1,i-a)}function bp(t){return Ar(t[0])?t[0].outlets:{[re]:t}}function cl(t,n,e){if(t??=new pe([],{}),t.segments.length===0&&t.hasChildren())return _r(t,n,e);let r=Rp(t,n,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let a=new pe(t.segments.slice(0,r.pathIndex),{});return a.children[re]=new pe(t.segments.slice(r.pathIndex),t.children),_r(a,0,i)}else return r.match&&i.length===0?new pe(t.segments,{}):r.match&&!t.hasChildren()?ia(t,n,e):r.match?_r(t,0,i):ia(t,n,e)}function _r(t,n,e){if(e.length===0)return new pe(t.segments,{});{let r=bp(e),i={};if(Object.keys(r).some(a=>a!==re)&&t.children[re]&&t.numberOfChildren===1&&t.children[re].segments.length===0){let a=_r(t.children[re],n,e);return new pe(t.segments,a.children)}return Object.entries(r).forEach(([a,c])=>{typeof c=="string"&&(c=[c]),c!==null&&(i[a]=cl(t.children[a],n,c))}),Object.entries(t.children).forEach(([a,c])=>{r[a]===void 0&&(i[a]=c)}),new pe(t.segments,i)}}function Rp(t,n,e){let r=0,i=n,a={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=e.length)return a;let c=t.segments[i],f=e[r];if(Ar(f))break;let d=`${f}`,m=r<e.length-1?e[r+1]:null;if(i>0&&d===void 0)break;if(d&&m&&typeof m=="object"&&m.outlets===void 0){if(!Vc(d,m,c))return a;r+=2}else{if(!Vc(d,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ia(t,n,e){let r=t.segments.slice(0,n),i=0;for(;i<e.length;){let a=e[i];if(Ar(a)){let d=Ep(a.outlets);return new pe(r,d)}if(i===0&&Wi(e[0])){let d=t.segments[n];r.push(new Ot(d.path,Kc(e[0]))),i++;continue}let c=Ar(a)?a.outlets[re]:`${a}`,f=i<e.length-1?e[i+1]:null;c&&f&&Wi(f)?(r.push(new Ot(c,Kc(f))),i+=2):(r.push(new Ot(c,{})),i++)}return new pe(r,{})}function Ep(t){let n={};return Object.entries(t).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[e]=ia(new pe([],{}),0,r))}),n}function Kc(t){let n={};return Object.entries(t).forEach(([e,r])=>n[e]=`${r}`),n}function Vc(t,n,e){return t==e.path&&rt(n,e.parameters)}var Hi="imperative",_e=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(_e||{}),Be=class{id;url;constructor(n,e){this.id=n,this.url=e}},Pt=class extends Be{type=_e.NavigationStart;navigationTrigger;restoredState;constructor(n,e,r="imperative",i=null){super(n,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ve=class extends Be{urlAfterRedirects;type=_e.NavigationEnd;constructor(n,e,r){super(n,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ke=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(ke||{}),Nn=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Nn||{}),it=class extends Be{reason;code;type=_e.NavigationCancel;constructor(n,e,r,i){super(n,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ot=class extends Be{reason;code;type=_e.NavigationSkipped;constructor(n,e,r,i){super(n,e),this.reason=r,this.code=i}},jn=class extends Be{error;target;type=_e.NavigationError;constructor(n,e,r,i){super(n,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xr=class extends Be{urlAfterRedirects;state;type=_e.RoutesRecognized;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xi=class extends Be{urlAfterRedirects;state;type=_e.GuardsCheckStart;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ji=class extends Be{urlAfterRedirects;state;shouldActivate;type=_e.GuardsCheckEnd;constructor(n,e,r,i,a){super(n,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Yi=class extends Be{urlAfterRedirects;state;type=_e.ResolveStart;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qi=class extends Be{urlAfterRedirects;state;type=_e.ResolveEnd;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zi=class{route;type=_e.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},es=class{route;type=_e.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ts=class{snapshot;type=_e.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ns=class{snapshot;type=_e.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rs=class{snapshot;type=_e.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},is=class{snapshot;type=_e.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Un=class{routerEvent;position;anchor;type=_e.Scroll;constructor(n,e,r){this.routerEvent=n,this.position=e,this.anchor=r}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},Or=class{},Ln=class{url;navigationBehaviorOptions;constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function Sp(t,n){return t.providers&&!t._injector&&(t._injector=Po(t.providers,n,`Route: ${t.path}`)),t._injector??n}function qe(t){return t.outlet||re}function Tp(t,n){let e=t.filter(r=>qe(r)===n);return e.push(...t.filter(r=>qe(r)!==n)),e}function Ur(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var ss=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ur(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new $n(this.rootInjector)}},$n=(()=>{class t{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new ss(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||t)(oe(xt))};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),os=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=sa(n,this._root);return e?e.children.map(r=>r.value):[]}firstChild(n){let e=sa(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=oa(n,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return oa(n,this._root).map(e=>e.value)}};function sa(t,n){if(t===n.value)return n;for(let e of n.children){let r=sa(t,e);if(r)return r}return null}function oa(t,n){if(t===n.value)return[n];for(let e of n.children){let r=oa(t,e);if(r.length)return r.unshift(n),r}return[]}var Fe=class{value;children;constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function Pn(t){let n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}var Dr=class extends os{snapshot;constructor(n,e){super(n),this.snapshot=e,pa(this,n)}toString(){return this.snapshot.toString()}};function ll(t){let n=Cp(t),e=new $e([new Ot("",{})]),r=new $e({}),i=new $e({}),a=new $e({}),c=new $e(""),f=new vt(e,r,a,c,i,re,t,n.root);return f.snapshot=n.root,new Dr(new Fe(f,[]),n)}function Cp(t){let n={},e={},r={},i="",a=new sn([],n,r,i,e,re,t,null,{});return new Pr("",new Fe(a,[]))}var vt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,e,r,i,a,c,f,d){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=c,this.component=f,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(de(m=>m[jr]))??ee(void 0),this.url=n,this.params=e,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(de(n=>on(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(de(n=>on(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function as(t,n,e="emptyOnly"){let r,{routeConfig:i}=t;return n!==null&&(e==="always"||i?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:V(V({},n.params),t.params),data:V(V({},n.data),t.data),resolve:V(V(V(V({},t.data),n.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&fl(i)&&(r.resolve[jr]=i.title),r}var sn=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[jr]}constructor(n,e,r,i,a,c,f,d,m){this.url=n,this.params=e,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.routeConfig=d,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=on(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=on(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},Pr=class extends os{url;constructor(n,e){super(e),this.url=n,pa(this,e)}toString(){return hl(this._root)}};function pa(t,n){n.value._routerState=t,n.children.forEach(e=>pa(t,e))}function hl(t){let n=t.children.length>0?` { ${t.children.map(hl).join(", ")} } `:"";return`${t.value}${n}`}function Qo(t){if(t.snapshot){let n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,rt(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),rt(n.params,e.params)||t.paramsSubject.next(e.params),Zd(n.url,e.url)||t.urlSubject.next(e.url),rt(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function aa(t,n){let e=rt(t.params,n.params)&&rp(t.url,n.url),r=!t.parent!=!n.parent;return e&&!r&&(!t.parent||aa(t.parent,n.parent))}function fl(t){return typeof t.title=="string"||t.title===null}var dl=new ge(""),ga=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new Yt;deactivateEvents=new Yt;attachEvents=new Yt;detachEvents=new Yt;routerOutletData=uc(void 0);parentContexts=G($n);location=G(Qu);changeDetector=G(Ai);inputBinder=G(hs,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new he(4013,!1);this._activatedRoute=e;let i=this.location,c=e.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,d=new ua(e,f,i.injector,this.routerOutletData);this.activated=i.createComponent(c,{index:i.length,injector:d,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=pr({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[lr]})}return t})(),ua=class{route;childContexts;parent;outletData;constructor(n,e,r,i){this.route=n,this.childContexts=e,this.parent=r,this.outletData=i}get(n,e){return n===vt?this.route:n===$n?this.childContexts:n===dl?this.outletData:this.parent.get(n,e)}},hs=new ge("");function _p(t,n,e){let r=Mr(t,n._root,e?e._root:void 0);return new Dr(r,n)}function Mr(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=n.value;let i=Ip(t,n,e);return new Fe(r,i)}else{if(t.shouldAttach(n.value)){let a=t.retrieve(n.value);if(a!==null){let c=a.route;return c.value._futureSnapshot=n.value,c.children=n.children.map(f=>Mr(t,f)),c}}let r=Ap(n.value),i=n.children.map(a=>Mr(t,a));return new Fe(r,i)}}function Ip(t,n,e){return n.children.map(r=>{for(let i of e.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Mr(t,r,i);return Mr(t,r)})}function Ap(t){return new vt(new $e(t.url),new $e(t.params),new $e(t.queryParams),new $e(t.fragment),new $e(t.data),t.outlet,t.component,t)}var Fn=class{redirectTo;navigationBehaviorOptions;constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},pl="ngNavigationCancelingError";function us(t,n){let{redirectTo:e,navigationBehaviorOptions:r}=Dt(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=gl(!1,ke.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function gl(t,n){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[pl]=!0,e.cancellationCode=n,e}function xp(t){return ml(t)&&Dt(t.url)}function ml(t){return!!t&&t[pl]}var Op=(t,n,e,r)=>de(i=>(new ca(n,i.targetRouterState,i.currentRouterState,e,r).activate(t),i)),ca=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,e,r,i,a){this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(n){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,n),Qo(this.futureState.root),this.activateChildRoutes(e,r,n)}deactivateChildRoutes(n,e,r){let i=Pn(e);n.children.forEach(a=>{let c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(n,e,r){let i=n.value,a=e?e.value:null;if(i===a)if(i.component){let c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(n,e,c.children)}else this.deactivateChildRoutes(n,e,r);else a&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let r=e.getContext(n.value.outlet),i=r&&n.value.component?r.children:e,a=Pn(n);for(let c of Object.values(a))this.deactivateRouteAndItsChildren(c,i);if(r&&r.outlet){let c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:c,route:n,contexts:f})}}deactivateRouteAndOutlet(n,e){let r=e.getContext(n.value.outlet),i=r&&n.value.component?r.children:e,a=Pn(n);for(let c of Object.values(a))this.deactivateRouteAndItsChildren(c,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,e,r){let i=Pn(e);n.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new is(a.value.snapshot))}),n.children.length&&this.forwardEvent(new ns(n.value.snapshot))}activateRoutes(n,e,r){let i=n.value,a=e?e.value:null;if(Qo(i),i===a)if(i.component){let c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,e,c.children)}else this.activateChildRoutes(n,e,r);else if(i.component){let c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),Qo(f.route.value),this.activateChildRoutes(n,null,c.children)}else c.attachRef=null,c.route=i,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(n,null,c.children)}else this.activateChildRoutes(n,null,r)}},cs=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},kn=class{component;route;constructor(n,e){this.component=n,this.route=e}};function Dp(t,n,e){let r=t._root,i=n?n._root:null;return Cr(r,i,e,[r.value])}function Pp(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function Kn(t,n){let e=Symbol(),r=n.get(t,e);return r===e?typeof t=="function"&&!Pu(t)?t:n.get(t):r}function Cr(t,n,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let a=Pn(n);return t.children.forEach(c=>{Mp(c,a[c.value.outlet],e,r.concat([c.value]),i),delete a[c.value.outlet]}),Object.entries(a).forEach(([c,f])=>Ir(f,e.getContext(c),i)),i}function Mp(t,n,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let a=t.value,c=n?n.value:null,f=e?e.getContext(t.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){let d=kp(c,a,a.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new cs(r)):(a.data=c.data,a._resolvedData=c._resolvedData),a.component?Cr(t,n,f?f.children:null,r,i):Cr(t,n,e,r,i),d&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new kn(f.outlet.component,c))}else c&&Ir(n,f,i),i.canActivateChecks.push(new cs(r)),a.component?Cr(t,null,f?f.children:null,r,i):Cr(t,null,e,r,i);return i}function kp(t,n,e){if(typeof e=="function")return e(t,n);switch(e){case"pathParamsChange":return!rn(t.url,n.url);case"pathParamsOrQueryParamsChange":return!rn(t.url,n.url)||!rt(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!aa(t,n)||!rt(t.queryParams,n.queryParams);case"paramsChange":default:return!aa(t,n)}}function Ir(t,n,e){let r=Pn(t),i=t.value;Object.entries(r).forEach(([a,c])=>{i.component?n?Ir(c,n.children.getContext(a),e):Ir(c,null,e):Ir(c,n,e)}),i.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new kn(n.outlet.component,i)):e.canDeactivateChecks.push(new kn(null,i)):e.canDeactivateChecks.push(new kn(null,i))}function Lr(t){return typeof t=="function"}function Np(t){return typeof t=="boolean"}function jp(t){return t&&Lr(t.canLoad)}function Up(t){return t&&Lr(t.canActivate)}function Lp(t){return t&&Lr(t.canActivateChild)}function Fp(t){return t&&Lr(t.canDeactivate)}function Bp(t){return t&&Lr(t.canMatch)}function vl(t){return t instanceof Iu||t?.name==="EmptyError"}var $i=Symbol("INITIAL_VALUE");function Bn(){return Ke(t=>Ro(t.map(n=>n.pipe(En(1),Du($i)))).pipe(de(n=>{for(let e of n)if(e!==!0){if(e===$i)return $i;if(e===!1||zp(e))return e}return!0}),nt(n=>n!==$i),En(1)))}function zp(t){return Dt(t)||t instanceof Fn}function $p(t,n){return Le(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=e;return c.length===0&&a.length===0?ee(Ae(V({},e),{guardsResult:!0})):Kp(c,r,i,t).pipe(Le(f=>f&&Np(f)?Vp(r,a,t,n):ee(f)),de(f=>Ae(V({},e),{guardsResult:f})))})}function Kp(t,n,e,r){return Me(t).pipe(Le(i=>Xp(i.component,i.route,e,n,r)),At(i=>i!==!0,!0))}function Vp(t,n,e,r){return Me(n).pipe(It(i=>Au(Hp(i.route.parent,r),Gp(i.route,r),qp(t,i.path,e),Wp(t,i.route,e))),At(i=>i!==!0,!0))}function Gp(t,n){return t!==null&&n&&n(new rs(t)),ee(!0)}function Hp(t,n){return t!==null&&n&&n(new ts(t)),ee(!0)}function Wp(t,n,e){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(a=>Ti(()=>{let c=Ur(n)??e,f=Kn(a,c),d=Up(f)?f.canActivate(n,t):He(c,()=>f(n,t));return Mt(d).pipe(At())}));return ee(i).pipe(Bn())}function qp(t,n,e){let r=n[n.length-1],a=n.slice(0,n.length-1).reverse().map(c=>Pp(c)).filter(c=>c!==null).map(c=>Ti(()=>{let f=c.guards.map(d=>{let m=Ur(c.node)??e,w=Kn(d,m),C=Lp(w)?w.canActivateChild(r,t):He(m,()=>w(r,t));return Mt(C).pipe(At())});return ee(f).pipe(Bn())}));return ee(a).pipe(Bn())}function Xp(t,n,e,r,i){let a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!a||a.length===0)return ee(!0);let c=a.map(f=>{let d=Ur(n)??i,m=Kn(f,d),w=Fp(m)?m.canDeactivate(t,n,e,r):He(d,()=>m(t,n,e,r));return Mt(w).pipe(At())});return ee(c).pipe(Bn())}function Jp(t,n,e,r){let i=n.canLoad;if(i===void 0||i.length===0)return ee(!0);let a=i.map(c=>{let f=Kn(c,t),d=jp(f)?f.canLoad(n,e):He(t,()=>f(n,e));return Mt(d)});return ee(a).pipe(Bn(),yl(r))}function yl(t){return Cu(Ce(n=>{if(typeof n!="boolean")throw us(t,n)}),de(n=>n===!0))}function Yp(t,n,e,r){let i=n.canMatch;if(!i||i.length===0)return ee(!0);let a=i.map(c=>{let f=Kn(c,t),d=Bp(f)?f.canMatch(n,e):He(t,()=>f(n,e));return Mt(d)});return ee(a).pipe(Bn(),yl(r))}var kr=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},Nr=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function Dn(t){return ur(new kr(t))}function Qp(t){return ur(new he(4e3,!1))}function Zp(t){return ur(gl(!1,ke.GuardRejected))}var la=class{urlSerializer;urlTree;constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[re])return Qp(`${n.redirectTo}`);i=i.children[re]}}applyRedirectCommands(n,e,r,i,a){if(typeof e!="string"){let f=e,{queryParams:d,fragment:m,routeConfig:w,url:C,outlet:_,params:M,data:k,title:j}=i,L=He(a,()=>f({params:M,data:k,queryParams:d,fragment:m,routeConfig:w,url:C,outlet:_,title:j}));if(L instanceof st)throw new Nr(L);e=L}let c=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,r);if(e[0]==="/")throw new Nr(c);return c}applyRedirectCreateUrlTree(n,e,r,i){let a=this.createSegmentGroup(n,e.root,r,i);return new st(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let r={};return Object.entries(n).forEach(([i,a])=>{if(typeof a=="string"&&a[0]===":"){let f=a.substring(1);r[i]=e[f]}else r[i]=a}),r}createSegmentGroup(n,e,r,i){let a=this.createSegments(n,e.segments,r,i),c={};return Object.entries(e.children).forEach(([f,d])=>{c[f]=this.createSegmentGroup(n,d,r,i)}),new pe(a,c)}createSegments(n,e,r,i){return e.map(a=>a.path[0]===":"?this.findPosParam(n,a,i):this.findOrReturn(a,r))}findPosParam(n,e,r){let i=r[e.path.substring(1)];if(!i)throw new he(4001,!1);return i}findOrReturn(n,e){let r=0;for(let i of e){if(i.path===n.path)return e.splice(r),i;r++}return n}},ha={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function eg(t,n,e,r,i){let a=wl(t,n,e);return a.matched?(r=Sp(n,r),Yp(r,n,e,i).pipe(de(c=>c===!0?a:V({},ha)))):ee(a)}function wl(t,n,e){if(n.path==="**")return tg(e);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||e.length>0)?V({},ha):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(n.matcher||qc)(e,t,n);if(!i)return V({},ha);let a={};Object.entries(i.posParams??{}).forEach(([f,d])=>{a[f]=d.path});let c=i.consumed.length>0?V(V({},a),i.consumed[i.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function tg(t){return{matched:!0,parameters:t.length>0?Jc(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Gc(t,n,e,r){return e.length>0&&ig(t,e,r)?{segmentGroup:new pe(n,rg(r,new pe(e,t.children))),slicedSegments:[]}:e.length===0&&sg(t,e,r)?{segmentGroup:new pe(t.segments,ng(t,e,r,t.children)),slicedSegments:e}:{segmentGroup:new pe(t.segments,t.children),slicedSegments:e}}function ng(t,n,e,r){let i={};for(let a of e)if(fs(t,n,a)&&!r[qe(a)]){let c=new pe([],{});i[qe(a)]=c}return V(V({},r),i)}function rg(t,n){let e={};e[re]=n;for(let r of t)if(r.path===""&&qe(r)!==re){let i=new pe([],{});e[qe(r)]=i}return e}function ig(t,n,e){return e.some(r=>fs(t,n,r)&&qe(r)!==re)}function sg(t,n,e){return e.some(r=>fs(t,n,r))}function fs(t,n,e){return(t.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function og(t,n,e){return n.length===0&&!t.children[e]}var fa=class{};function ag(t,n,e,r,i,a,c="emptyOnly"){return new da(t,n,e,r,i,c,a).recognize()}var ug=31,da=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,e,r,i,a,c,f){this.injector=n,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=c,this.urlSerializer=f,this.applyRedirects=new la(this.urlSerializer,this.urlTree)}noMatchError(n){return new he(4002,`'${n.segmentGroup}'`)}recognize(){let n=Gc(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(de(({children:e,rootSnapshot:r})=>{let i=new Fe(r,e),a=new Pr("",i),c=sl(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(c),{state:a,tree:c}}))}match(n){let e=new sn([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,re,e).pipe(de(r=>({children:r,rootSnapshot:e})),qt(r=>{if(r instanceof Nr)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof kr?this.noMatchError(r):r}))}processSegmentGroup(n,e,r,i,a){return r.segments.length===0&&r.hasChildren()?this.processChildren(n,e,r,a):this.processSegment(n,e,r,r.segments,i,!0,a).pipe(de(c=>c instanceof Fe?[c]:[]))}processChildren(n,e,r,i){let a=[];for(let c of Object.keys(r.children))c==="primary"?a.unshift(c):a.push(c);return Me(a).pipe(It(c=>{let f=r.children[c],d=Tp(e,c);return this.processSegmentGroup(n,d,f,c,i)}),Ou((c,f)=>(c.push(...f),c)),So(null),xu(),Le(c=>{if(c===null)return Dn(r);let f=bl(c);return cg(f),ee(f)}))}processSegment(n,e,r,i,a,c,f){return Me(e).pipe(It(d=>this.processSegmentAgainstRoute(d._injector??n,e,d,r,i,a,c,f).pipe(qt(m=>{if(m instanceof kr)return ee(null);throw m}))),At(d=>!!d),qt(d=>{if(vl(d))return og(r,i,a)?ee(new fa):Dn(r);throw d}))}processSegmentAgainstRoute(n,e,r,i,a,c,f,d){return qe(r)!==c&&(c===re||!fs(i,a,r))?Dn(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(n,i,r,a,c,d):this.allowRedirects&&f?this.expandSegmentAgainstRouteUsingRedirect(n,i,e,r,a,c,d):Dn(i)}expandSegmentAgainstRouteUsingRedirect(n,e,r,i,a,c,f){let{matched:d,parameters:m,consumedSegments:w,positionalParamSegments:C,remainingSegments:_}=wl(e,i,a);if(!d)return Dn(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ug&&(this.allowRedirects=!1));let M=new sn(a,m,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Hc(i),qe(i),i.component??i._loadedComponent??null,i,Wc(i)),k=as(M,f,this.paramsInheritanceStrategy);M.params=Object.freeze(k.params),M.data=Object.freeze(k.data);let j=this.applyRedirects.applyRedirectCommands(w,i.redirectTo,C,M,n);return this.applyRedirects.lineralizeSegments(i,j).pipe(Le(L=>this.processSegment(n,r,e,L.concat(_),c,!1,f)))}matchSegmentAgainstRoute(n,e,r,i,a,c){let f=eg(e,r,i,n,this.urlSerializer);return r.path==="**"&&(e.children={}),f.pipe(Ke(d=>d.matched?(n=r._injector??n,this.getChildConfig(n,r,i).pipe(Ke(({routes:m})=>{let w=r._loadedInjector??n,{parameters:C,consumedSegments:_,remainingSegments:M}=d,k=new sn(_,C,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Hc(r),qe(r),r.component??r._loadedComponent??null,r,Wc(r)),j=as(k,c,this.paramsInheritanceStrategy);k.params=Object.freeze(j.params),k.data=Object.freeze(j.data);let{segmentGroup:L,slicedSegments:q}=Gc(e,_,M,m);if(q.length===0&&L.hasChildren())return this.processChildren(w,m,L,k).pipe(de(ie=>new Fe(k,ie)));if(m.length===0&&q.length===0)return ee(new Fe(k,[]));let Q=qe(r)===a;return this.processSegment(w,m,L,q,Q?re:a,!0,k).pipe(de(ie=>new Fe(k,ie instanceof Fe?[ie]:[])))}))):Dn(e)))}getChildConfig(n,e,r){return e.children?ee({routes:e.children,injector:n}):e.loadChildren?e._loadedRoutes!==void 0?ee({routes:e._loadedRoutes,injector:e._loadedInjector}):Jp(n,e,r,this.urlSerializer).pipe(Le(i=>i?this.configLoader.loadChildren(n,e).pipe(Ce(a=>{e._loadedRoutes=a.routes,e._loadedInjector=a.injector})):Zp(e))):ee({routes:[],injector:n})}};function cg(t){t.sort((n,e)=>n.value.outlet===re?-1:e.value.outlet===re?1:n.value.outlet.localeCompare(e.value.outlet))}function lg(t){let n=t.value.routeConfig;return n&&n.path===""}function bl(t){let n=[],e=new Set;for(let r of t){if(!lg(r)){n.push(r);continue}let i=n.find(a=>r.value.routeConfig===a.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):n.push(r)}for(let r of e){let i=bl(r.children);n.push(new Fe(r.value,i))}return n.filter(r=>!e.has(r))}function Hc(t){return t.data||{}}function Wc(t){return t.resolve||{}}function hg(t,n,e,r,i,a){return Le(c=>ag(t,n,e,r,c.extractedUrl,i,a).pipe(de(({state:f,tree:d})=>Ae(V({},c),{targetSnapshot:f,urlAfterRedirects:d}))))}function fg(t,n){return Le(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return ee(e);let a=new Set(i.map(d=>d.route)),c=new Set;for(let d of a)if(!c.has(d))for(let m of Rl(d))c.add(m);let f=0;return Me(c).pipe(It(d=>a.has(d)?dg(d,r,t,n):(d.data=as(d,d.parent,t).resolve,ee(void 0))),Ce(()=>f++),To(1),Le(d=>f===c.size?ee(e):dt))})}function Rl(t){let n=t.children.map(e=>Rl(e)).flat();return[t,...n]}function dg(t,n,e,r){let i=t.routeConfig,a=t._resolve;return i?.title!==void 0&&!fl(i)&&(a[jr]=i.title),Ti(()=>(t.data=as(t,t.parent,e).resolve,pg(a,t,n,r).pipe(de(c=>(t._resolvedData=c,t.data=V(V({},t.data),c),null)))))}function pg(t,n,e,r){let i=ta(t);if(i.length===0)return ee({});let a={};return Me(i).pipe(Le(c=>gg(t[c],n,e,r).pipe(At(),Ce(f=>{if(f instanceof Fn)throw us(new an,f);a[c]=f}))),To(1),de(()=>a),qt(c=>vl(c)?dt:ur(c)))}function gg(t,n,e,r){let i=Ur(n)??r,a=Kn(t,i),c=a.resolve?a.resolve(n,e):He(i,()=>a(n,e));return Mt(c)}function Zo(t){return Ke(n=>{let e=t(n);return e?Me(e).pipe(de(()=>n)):ee(n)})}var ma=(()=>{class t{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===re);return r}getResolvedTitleForRoute(e){return e.data[jr]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ue({token:t,factory:()=>G(El),providedIn:"root"})}return t})(),El=(()=>{class t extends ma{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(oe(Fc))};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Fr=new ge("",{providedIn:"root",factory:()=>({})}),va=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ec({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&rc(0,"router-outlet")},dependencies:[ga],encapsulation:2})}return t})();function ya(t){let n=t.children&&t.children.map(ya),e=n?Ae(V({},t),{children:n}):V({},t);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==re&&(e.component=va),e}var Br=new ge(""),Sl=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=G(ko);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ee(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=Mt(e.loadComponent()).pipe(de(Cl),Ce(a=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=a}),Sn(()=>{this.componentLoaders.delete(e)})),i=new bo(r,()=>new ft).pipe(wo());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let a=Tl(r,this.compiler,e,this.onLoadEndListener).pipe(Sn(()=>{this.childrenLoaders.delete(r)})),c=new bo(a,()=>new ft).pipe(wo());return this.childrenLoaders.set(r,c),c}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Tl(t,n,e,r){return Mt(t.loadChildren()).pipe(de(Cl),Le(i=>i instanceof Zu||Array.isArray(i)?ee(i):Me(n.compileModuleAsync(i))),de(i=>{r&&r(t);let a,c,f=!1;return Array.isArray(i)?(c=i,f=!0):(a=i.create(e).injector,c=a.get(Br,[],{optional:!0,self:!0}).flat()),{routes:c.map(ya),injector:a}}))}function mg(t){return t&&typeof t=="object"&&"default"in t}function Cl(t){return mg(t)?t.default:t}var ds=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ue({token:t,factory:()=>G(vg),providedIn:"root"})}return t})(),vg=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_l=new ge("");var Il=new ge(""),wa=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ft;transitionAbortWithErrorSubject=new ft;configLoader=G(Sl);environmentInjector=G(xt);destroyRef=G(ku);urlSerializer=G(zn);rootContexts=G($n);location=G(vr);inputBindingEnabled=G(hs,{optional:!0})!==null;titleStrategy=G(ma);options=G(Fr,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=G(ds);createViewTransition=G(_l,{optional:!0});navigationErrorHandler=G(Il,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ee(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new Zi(i)),r=i=>this.events.next(new es(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(Ae(V({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(e){return this.transitions=new $e(null),this.transitions.pipe(nt(r=>r!==null),Ke(r=>{let i=!1;return ee(r).pipe(Ke(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ke.SupersededByNewNavigation),dt;this.currentTransition=r,this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Ae(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>a.abortController.abort()};let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=a.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&f!=="reload"){let d="";return this.events.next(new ot(a.id,this.urlSerializer.serialize(a.rawUrl),d,Nn.IgnoredSameUrlNavigation)),a.resolve(!1),dt}if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return ee(a).pipe(Ke(d=>(this.events.next(new Pt(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?dt:Promise.resolve(d))),hg(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Ce(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=Ae(V({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let m=new xr(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(m)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:d,extractedUrl:m,source:w,restoredState:C,extras:_}=a,M=new Pt(d,this.urlSerializer.serialize(m),w,C);this.events.next(M);let k=ll(this.rootComponentType).snapshot;return this.currentTransition=r=Ae(V({},a),{targetSnapshot:k,urlAfterRedirects:m,extras:Ae(V({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ee(r)}else{let d="";return this.events.next(new ot(a.id,this.urlSerializer.serialize(a.extractedUrl),d,Nn.IgnoredByUrlHandlingStrategy)),a.resolve(!1),dt}}),Ce(a=>{let c=new Xi(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),de(a=>(this.currentTransition=r=Ae(V({},a),{guards:Dp(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r)),$p(this.environmentInjector,a=>this.events.next(a)),Ce(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw us(this.urlSerializer,a.guardsResult);let c=new Ji(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),nt(a=>a.guardsResult?!0:(this.cancelNavigationTransition(a,"",ke.GuardRejected),!1)),Zo(a=>{if(a.guards.canActivateChecks.length!==0)return ee(a).pipe(Ce(c=>{let f=new Yi(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),Ke(c=>{let f=!1;return ee(c).pipe(fg(this.paramsInheritanceStrategy,this.environmentInjector),Ce({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(c,"",ke.NoDataFromResolver)}}))}),Ce(c=>{let f=new Qi(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}))}),Zo(a=>{let c=f=>{let d=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(f.routeConfig).pipe(Ce(m=>{f.component=m}),de(()=>{})));for(let m of f.children)d.push(...c(m));return d};return Ro(c(a.targetSnapshot.root)).pipe(So(null),En(1))}),Zo(()=>this.afterPreactivation()),Ke(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,f=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return f?Me(f).pipe(de(()=>r)):ee(r)}),de(a=>{let c=_p(e.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=r=Ae(V({},a),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,r}),Ce(()=>{this.events.next(new Or)}),Op(this.rootContexts,e.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),En(1),Co(new Si(a=>{let c=r.abortController.signal,f=()=>a.next();return c.addEventListener("abort",f),()=>c.removeEventListener("abort",f)}).pipe(nt(()=>!i&&!r.targetRouterState),Ce(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",ke.Aborted)}))),Ce({next:a=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ve(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),Co(this.transitionAbortWithErrorSubject.pipe(Ce(a=>{throw a}))),Sn(()=>{i||this.cancelNavigationTransition(r,"",ke.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),qt(a=>{if(this.destroyed)return r.resolve(!1),dt;if(i=!0,ml(a))this.events.next(new it(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),xp(a)?this.events.next(new Ln(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new jn(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let f=He(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(f instanceof Fn){let{message:d,cancellationCode:m}=us(this.urlSerializer,f);this.events.next(new it(r.id,this.urlSerializer.serialize(r.extractedUrl),d,m)),this.events.next(new Ln(f.redirectTo,f.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(f){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(f)}}return dt}))}))}cancelNavigationTransition(e,r,i){let a=new it(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(a),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yg(t){return t!==Hi}var Al=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ue({token:t,factory:()=>G(wg),providedIn:"root"})}return t})(),ls=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},wg=(()=>{class t extends ls{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Io(t)))(i||t)}})();static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xl=(()=>{class t{urlSerializer=G(zn);options=G(Fr,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=G(vr);urlHandlingStrategy=G(ds);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new st;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:i}){let a=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,c=i??a;return c instanceof st?this.urlSerializer.serialize(c):c}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:i}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=e):this.rawUrlTree=i}routerState=ll(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ue({token:t,factory:()=>G(bg),providedIn:"root"})}return t})(),bg=(()=>{class t extends xl{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof Pt?this.updateStateMemento():e instanceof ot?this.commitTransition(r):e instanceof xr?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof Or?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof it&&e.code!==ke.SupersededByNewNavigation&&e.code!==ke.Redirect?this.restoreHistory(r):e instanceof jn?this.restoreHistory(r,!0):e instanceof Ve&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:i}){let{replaceUrl:a,state:c}=r;if(this.location.isCurrentPathEqualTo(e)||a){let f=this.browserPageId,d=V(V({},c),this.generateNgRouterState(i,f));this.location.replaceState(e,"",d)}else{let f=V(V({},c),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",f)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,a=this.currentPageId-i;a!==0?this.location.historyGo(a):this.getCurrentUrlTree()===e.finalUrl&&a===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Io(t)))(i||t)}})();static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ba(t,n){t.events.pipe(nt(e=>e instanceof Ve||e instanceof it||e instanceof jn||e instanceof ot),de(e=>e instanceof Ve||e instanceof ot?0:(e instanceof it?e.code===ke.Redirect||e.code===ke.SupersededByNewNavigation:!1)?2:1),nt(e=>e!==2),En(1)).subscribe(()=>{n()})}var Rg={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Eg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Vn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=G(Mo);stateManager=G(xl);options=G(Fr,{optional:!0})||{};pendingTasks=G(_i);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=G(wa);urlSerializer=G(zn);location=G(vr);urlHandlingStrategy=G(ds);injector=G(xt);_events=new ft;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=G(Al);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=G(Br,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!G(hs,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Tu;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(i!==null&&a!==null){if(this.stateManager.handleRouterEvent(r,a),r instanceof it&&r.code!==ke.Redirect&&r.code!==ke.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ve)this.navigated=!0;else if(r instanceof Ln){let c=r.navigationBehaviorOptions,f=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),d=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||yg(i.source)},c);this.scheduleNavigation(f,Hi,null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Tg(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Hi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,i)=>{this.navigateToSyncWithBrowser(e,i,r)})}navigateToSyncWithBrowser(e,r,i){let a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){let d=V({},i);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(a.state=d)}let f=this.parseUrl(e);this.scheduleNavigation(f,r,c,a).catch(d=>{this.injector.get(Ci)(d)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(ya),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:d}=r,m=d?this.currentUrlTree.fragment:c,w=null;switch(f??this.options.defaultQueryParamsHandling){case"merge":w=V(V({},this.currentUrlTree.queryParams),a);break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=a||null}w!==null&&(w=this.removeEmptyProps(w));let C;try{let _=i?i.snapshot:this.routerState.snapshot.root;C=ol(_)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),C=this.currentUrlTree.root}return al(C,e,w,m??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=Dt(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,Hi,null,r)}navigate(e,r={skipLocationChange:!1}){return Sg(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=V({},Rg):r===!1?i=V({},Eg):i=r,Dt(e))return zc(this.currentUrlTree,e,i);let a=this.parseUrl(e);return zc(this.currentUrlTree,a,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,a])=>(a!=null&&(r[i]=a),r),{})}scheduleNavigation(e,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let f,d,m;c?(f=c.resolve,d=c.reject,m=c.promise):m=new Promise((C,_)=>{f=C,d=_});let w=this.pendingTasks.add();return ba(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(w))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:a,resolve:f,reject:d,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(C=>Promise.reject(C))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Sg(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new he(4008,!1)}function Tg(t){return!(t instanceof Or)&&!(t instanceof Ln)}var ps=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ft;applicationErrorHandler=G(Ci);constructor(e,r,i,a,c,f){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.locationStrategy=f;let d=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area"||!!(typeof customElements=="object"&&customElements.get(d)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.subscription=e.events.subscribe(m=>{m instanceof Ve&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Dt(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,a,c){let f=this.urlTree;if(f===null||this.isAnchorElement&&(e!==0||r||i||a||c||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(f,d)?.catch(m=>{this.applicationErrorHandler(m)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let r=this.href===null?null:Xu(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(e,r){let i=this.renderer,a=this.el.nativeElement;r!==null?i.setAttribute(a,e,r):i.removeAttribute(a,e)}get urlTree(){return this.routerLinkInput===null?null:Dt(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(We(Vn),We(vt),ju("tabindex"),We(Do),We(Ao),We(No))};static \u0275dir=pr({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ic("click",function(c){return i.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),r&2&&nc("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",xi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",xi],replaceUrl:[2,"replaceUrl","replaceUrl",xi],routerLink:"routerLink"},features:[lr]})}return t})(),Cg=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Yt;constructor(e,r,i,a,c){this.router=e,this.element=r,this.renderer=i,this.cdr=a,this.link=c,this.routerEventsSubscription=e.events.subscribe(f=>{f instanceof Ve&&this.update()})}ngAfterContentInit(){ee(this.links.changes,ee(null)).pipe(Eo()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Me(e).pipe(Eo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){let r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let r=_g(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let a=i.urlTree;return a?e.isActive(a,r):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(r){return new(r||t)(We(Vn),We(Ao),We(Do),We(Ai),We(ps,8))};static \u0275dir=pr({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,a){if(r&1&&sc(a,ps,5),r&2){let c;oc(c=ac())&&(i.links=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[lr]})}return t})();function _g(t){return!!t.paths}var Ol=new ge(""),Ig=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,r,i,a,c={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,c.scrollPositionRestoration||="disabled",c.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Pt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ve?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof ot&&e.code===Nn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Un&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>te(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Un(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Yu()};static \u0275prov=ue({token:t,factory:t.\u0275fac})}return t})();function Ag(t,...n){return Tn([{provide:Br,multi:!0,useValue:t},[],{provide:vt,useFactory:xg,deps:[Vn]},{provide:Ii,multi:!0,useFactory:Pg},n.map(e=>e.\u0275providers)])}function xg(t){return t.routerState.root}function Og(t,n){return{\u0275kind:t,\u0275providers:n}}function Dg(t={}){return Og(4,[{provide:Ol,useFactory:()=>{let e=G(gc),r=G(pt),i=G(wa),a=G(zn);return new Ig(a,i,e,r,t)}}])}function Pg(){let t=G(Xt);return n=>{let e=t.get(gr);if(n!==e.components[0])return;let r=t.get(Vn),i=t.get(Mg);t.get(kg)===1&&r.initialNavigation(),t.get(Ng,null,{optional:!0})?.setUpPreloading(),t.get(Ol,null,{optional:!0})?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Mg=new ge("",{factory:()=>new ft}),kg=new ge("",{providedIn:"root",factory:()=>1});var Ng=new ge("");var zr=(m=>(m.PRODUCTS="productsStore",m.RECIPES="recipesStore",m.CATEGORIES="categoryStore",m.PRODUCTS_CATEGORIES="categoryProductsStore",m.RECIPES_CATEGORIES="categoryRecipesStore",m.INDICES="indicesStore",m.DOCUMENTATION="documentation",m.TAGS="tags",m.TAXES="taxes",m))(zr||{});var gs=Kf(Dl(),1),Pl=Symbol.for("Dexie"),ms=globalThis[Pl]||(globalThis[Pl]=gs.default);if(gs.default.semVer!==ms.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${gs.default.semVer} and ${ms.semVer}`);var{liveQuery:Vy,mergeRanges:Gy,rangesOverlap:Hy,RangeSet:Wy,cmp:qy,Entity:Xy,PropModification:Jy,replacePrefix:Yy,add:Qy,remove:Zy}=ms;var Ml=ms;var kl=[{version:1,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryStore:"++uuid,name"}},{version:2,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryStore:"++uuid,name",categoryProductsStore:"++uuid,name"},update:t=>new Promise(n=>te(void 0,null,function*(){let e=yield t.table("categoryStore").toArray(),r=t.table("categoryProductsStore");yield Promise.all(e.map(i=>r.add(i))),yield t.table("categoryStore").clear()}))},{version:3,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:4,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:5,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"},update:t=>new Promise(n=>te(void 0,null,function*(){let e=[{uuid:"\u0423\u043A\u0441\u0443\u0441\u044B",name:"\u0423\u043A\u0441\u0443\u0441\u044B"}],r=["\u0421\u0438\u0440\u043E\u043F\u044B \u0438 \u043F\u0440\u043E\u043F\u0438\u0442\u043A\u0438"],i=[{old:"\u0420\u0430\u0437\u0440\u044B\u0445\u043B\u0438\u0442\u0435\u043B\u0438 \u0438 \u0441\u0442\u0430\u0431\u0438\u043B\u0438\u0437\u0430\u0442\u043E\u0440\u044B",new:"\u0420\u0430\u0437\u0440\u044B\u0445\u043B\u0438\u0442\u0435\u043B\u0438 \u0438 \u0441\u043E\u0434\u044B"}],a=t.table("categoryProductsStore"),c=yield a.toArray(),f=c.filter(m=>r.includes(m.name)).map(m=>m.uuid),d=c.filter(m=>i.map(w=>w.old).includes(m.name));yield Promise.all(d.map(m=>{let w=i.find(C=>C.old===m.name)?.new;return a.update(m.uuid,{name:w})})),yield Promise.all(f.map(m=>a.delete(m))),yield Promise.all(e.map(m=>a.add(m)))}))},{version:6,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name,source",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:7,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:8,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"},update:t=>{let n=["productsStore","recipesStore","categoryProductsStore","categoryRecipesStore"];return Promise.all([new Promise(e=>te(void 0,null,function*(){let r=t.table("categoryProductsStore"),i=yield r.toArray(),a=t.table("productsStore"),c=yield a.toArray();yield Promise.all(c.map(f=>{let d=i.find(m=>m.uuid===f.category_id);return d?a.update(f.uuid,{category_id:d.name}):Promise.resolve()})),yield Promise.all(i.map(f=>r.update(f.uuid,{uuid:f.name}))),e()})),new Promise(e=>te(void 0,null,function*(){let r=t.table("categoryRecipesStore"),i=yield r.toArray(),a=t.table("recipesStore"),c=yield a.toArray();yield Promise.all(c.map(f=>{let d=i.find(m=>m.uuid===f.category_id);return d?a.update(f.uuid,{category_id:d.name}):Promise.resolve()})),yield Promise.all(i.map(f=>r.update(f.uuid,{uuid:f.name}))),e()}))]).then(()=>{})}},{version:9,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid"}},{version:10,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key"}},{version:11,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name"}},{version:12,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name",taxes:"++uuid"}}];var Nl=()=>Math.random().toString(36).substring(2)+Date.now().toString(36);var vs={product_id:"productsStore.uuid",recipe_id:"recipesStore.uuid",tags:"tags.uuid"};var W;function Oe(t,n,e){let r=typeof e,i=typeof t;if(r!=="undefined"){if(i!=="undefined"){if(e){if(i==="function"&&r===i)return function(f){return t(e(f))};if(n=t.constructor,n===e.constructor){if(n===Array)return e.concat(t);if(n===Map){var a=new Map(e);for(var c of t)a.set(c[0],c[1]);return a}if(n===Set){c=new Set(e);for(a of t.values())c.add(a);return c}}}return t}return e}return i==="undefined"?n:t}function Ee(){return Object.create(null)}function Xe(t){return typeof t=="string"}function Gr(t){return typeof t=="object"}function jg(t){let n=[];for(let e of t.keys())n.push(e);return n}function Hr(t,n){if(Xe(n))t=t[n];else for(let e=0;t&&e<n.length;e++)t=t[n[e]];return t}function Ug(t){let n=0;for(let e=0,r;e<t.length;e++)(r=t[e])&&n<r.length&&(n=r.length);return n}var Lg=/[^\p{L}\p{N}]+/u,Fg=/(\d{3})/g,Bg=/(\D)(\d{3})/g,zg=/(\d{3})(\D)/g,jl=/[\u0300-\u036f]/g;function Wr(t={}){if(!this||this.constructor!==Wr)return new Wr(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}W=Wr.prototype;W.assign=function(t){this.normalize=Oe(t.normalize,!0,this.normalize);let n=t.include,e=n||t.exclude||t.split,r;if(e||e===""){if(typeof e=="object"&&e.constructor!==RegExp){let i="";r=!n,n||(i+="\\p{Z}"),e.letter&&(i+="\\p{L}"),e.number&&(i+="\\p{N}",r=!!n),e.symbol&&(i+="\\p{S}"),e.punctuation&&(i+="\\p{P}"),e.control&&(i+="\\p{C}"),(e=e.char)&&(i+=typeof e=="object"?e.join(""):e);try{this.split=new RegExp("["+(n?"^":"")+i+"]+","u")}catch{this.split=/\s+/}}else this.split=e,r=e===!1||2>"a1a".split(e).length;this.numeric=Oe(t.numeric,r)}else{try{this.split=Oe(this.split,Lg)}catch{this.split=/\s+/}this.numeric=Oe(t.numeric,Oe(this.numeric,!0))}if(this.prepare=Oe(t.prepare,null,this.prepare),this.finalize=Oe(t.finalize,null,this.finalize),e=t.filter,this.filter=typeof e=="function"?e:Oe(e&&new Set(e),null,this.filter),this.dedupe=Oe(t.dedupe,!0,this.dedupe),this.matcher=Oe((e=t.matcher)&&new Map(e),null,this.matcher),this.mapper=Oe((e=t.mapper)&&new Map(e),null,this.mapper),this.stemmer=Oe((e=t.stemmer)&&new Map(e),null,this.stemmer),this.replacer=Oe(t.replacer,null,this.replacer),this.minlength=Oe(t.minlength,1,this.minlength),this.maxlength=Oe(t.maxlength,1024,this.maxlength),this.rtl=Oe(t.rtl,!1,this.rtl),(this.cache=e=Oe(t.cache,!0,this.cache))&&(this.H=null,this.S=typeof e=="number"?e:2e5,this.B=new Map,this.G=new Map,this.L=this.K=128),this.h="",this.M=null,this.A="",this.N=null,this.matcher)for(let i of this.matcher.keys())this.h+=(this.h?"|":"")+i;if(this.stemmer)for(let i of this.stemmer.keys())this.A+=(this.A?"|":"")+i;return this};W.addStemmer=function(t,n){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,n),this.A+=(this.A?"|":"")+t,this.N=null,this.cache&&cn(this),this};W.addFilter=function(t){return typeof t=="function"?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&cn(this),this};W.addMapper=function(t,n){return typeof t=="object"?this.addReplacer(t,n):1<t.length?this.addMatcher(t,n):(this.mapper||(this.mapper=new Map),this.mapper.set(t,n),this.cache&&cn(this),this)};W.addMatcher=function(t,n){return typeof t=="object"?this.addReplacer(t,n):2>t.length&&(this.dedupe||this.mapper)?this.addMapper(t,n):(this.matcher||(this.matcher=new Map),this.matcher.set(t,n),this.h+=(this.h?"|":"")+t,this.M=null,this.cache&&cn(this),this)};W.addReplacer=function(t,n){return typeof t=="string"?this.addMatcher(t,n):(this.replacer||(this.replacer=[]),this.replacer.push(t,n),this.cache&&cn(this),this)};W.encode=function(t,n){if(this.cache&&t.length<=this.K)if(this.H){if(this.B.has(t))return this.B.get(t)}else this.H=setTimeout(cn,50,this);this.normalize&&(typeof this.normalize=="function"?t=this.normalize(t):t=jl?t.normalize("NFKD").replace(jl,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&3<t.length&&(t=t.replace(Bg,"$1 $2").replace(zg,"$1 $2").replace(Fg,"$1 "));let e=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer),r=[],i=Ee(),a,c,f=this.split||this.split===""?t.split(this.split):[t];for(let m=0,w,C;m<f.length;m++)if((w=C=f[m])&&!(w.length<this.minlength||w.length>this.maxlength)){if(n){if(i[w])continue;i[w]=1}else{if(a===w)continue;a=w}if(e)r.push(w);else if(!this.filter||(typeof this.filter=="function"?this.filter(w):!this.filter.has(w))){if(this.cache&&w.length<=this.L)if(this.H){var d=this.G.get(w);if(d||d===""){d&&r.push(d);continue}}else this.H=setTimeout(cn,50,this);if(this.stemmer){this.N||(this.N=new RegExp("(?!^)("+this.A+")$"));let _;for(;_!==w&&2<w.length;)_=w,w=w.replace(this.N,M=>this.stemmer.get(M))}if(w&&(this.mapper||this.dedupe&&1<w.length)){d="";for(let _=0,M="",k,j;_<w.length;_++)k=w.charAt(_),k===M&&this.dedupe||((j=this.mapper&&this.mapper.get(k))||j===""?j===M&&this.dedupe||!(M=j)||(d+=j):d+=M=k);w=d}if(this.matcher&&1<w.length&&(this.M||(this.M=new RegExp("("+this.h+")","g")),w=w.replace(this.M,_=>this.matcher.get(_))),w&&this.replacer)for(d=0;w&&d<this.replacer.length;d+=2)w=w.replace(this.replacer[d],this.replacer[d+1]);if(this.cache&&C.length<=this.L&&(this.G.set(C,w),this.G.size>this.S&&(this.G.clear(),this.L=this.L/1.1|0)),w){if(w!==C)if(n){if(i[w])continue;i[w]=1}else{if(c===w)continue;c=w}r.push(w)}}}return this.finalize&&(r=this.finalize(r)||r),this.cache&&t.length<=this.K&&(this.B.set(t,r),this.B.size>this.S&&(this.B.clear(),this.K=this.K/1.1|0)),r};function cn(t){t.H=null,t.B.clear(),t.G.clear()}var Gn,$r;function $g(t){return te(this,null,function*(){t=t.data;var n=t.task;let e=t.id,r=t.args;switch(n){case"init":$r=t.options||{},(n=t.factory)?(Function("return "+n)()(self),Gn=new self.FlexSearch.Index($r),delete self.FlexSearch):Gn=new ut($r),postMessage({id:e});break;default:let i;n==="export"&&(r[1]?(r[0]=$r.export,r[2]=0,r[3]=1):r=null),n==="import"?r[0]&&(t=yield $r.import.call(Gn,r[0]),Gn.import(r[0],t)):(i=r&&Gn[n].apply(Gn,r))&&i.then&&(i=yield i),postMessage(n==="search"?{id:e,msg:i}:{id:e})}})}function Da(t){Kr.call(t,"add"),Kr.call(t,"append"),Kr.call(t,"search"),Kr.call(t,"update"),Kr.call(t,"remove")}var _a,Ul,bs;function Kg(){_a=bs=0}function Kr(t){this[t+"Async"]=function(){let n=arguments;var e=n[n.length-1];let r;if(typeof e=="function"&&(r=e,delete n[n.length-1]),_a?bs||(bs=Date.now()-Ul>=this.priority*this.priority*3):(_a=setTimeout(Kg,0),Ul=Date.now()),bs){let a=this;return new Promise(c=>{setTimeout(function(){c(a[t+"Async"].apply(a,n))},0)})}let i=this[t].apply(this,n);return e=i.then?i:new Promise(a=>a(i)),r&&e.then(r),e}}var Hn=0;function qr(t={}){function n(c){function f(d){d=d.data||d;let m=d.id,w=m&&i.h[m];w&&(w(d.msg),delete i.h[m])}if(this.worker=c,this.h=Ee(),this.worker)return r?this.worker.on("message",f):this.worker.onmessage=f,t.config?new Promise(function(d){i.h[++Hn]=function(){d(i),1e9<Hn&&(Hn=0)},i.worker.postMessage({id:Hn,task:"init",factory:e,options:t})}):(this.worker.postMessage({task:"init",factory:e,options:t}),this.priority=t.priority||4,this)}if(!this||this.constructor!==qr)return new qr(t);let e=typeof self<"u"?self._factory:typeof window<"u"?window._factory:null;e&&(e=e.toString());let r=typeof window>"u",i=this,a=Vg(e,r,t.worker);return a.then?a.then(function(c){return n.call(i,c)}):n.call(this,a)}Nt("add");Nt("append");Nt("search");Nt("update");Nt("remove");Nt("clear");Nt("export");Nt("import");Da(qr.prototype);function Nt(t){qr.prototype[t]=function(){let n=this,e=[].slice.call(arguments);var r=e[e.length-1];let i;return typeof r=="function"&&(i=r,e.pop()),r=new Promise(function(a){t==="export"&&typeof e[0]=="function"&&(e[0]=null),n.h[++Hn]=a,n.worker.postMessage({task:t,id:Hn,args:e})}),i?(r.then(i),this):r}}function Vg(t,n,e){return n?typeof module<"u"?new(Vf()).Worker(__dirname+"/worker/node.js"):import("./chunk-55JXXOPV.js").then(function(r){return new r.Worker(import.meta.dirname+"/node/node.mjs")}):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+$g.toString()],{type:"text/javascript"}))):new window.Worker(typeof e=="string"?e:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js"),{type:"module"})}function Pa(t,n=0){let e=[],r=[];n&&(n=25e4/n*5e3|0);for(let i of t.entries())r.push(i),r.length===n&&(e.push(r),r=[]);return r.length&&e.push(r),e}function Ma(t,n){n||(n=new Map);for(let e=0,r;e<t.length;e++)r=t[e],n.set(r[0],r[1]);return n}function ql(t,n=0){let e=[],r=[];n&&(n=25e4/n*1e3|0);for(let i of t.entries())r.push([i[0],Pa(i[1])[0]]),r.length===n&&(e.push(r),r=[]);return r.length&&e.push(r),e}function Xl(t,n){n||(n=new Map);for(let e=0,r,i;e<t.length;e++)r=t[e],i=n.get(r[0]),n.set(r[0],Ma(r[1],i));return n}function Jl(t){let n=[],e=[];for(let r of t.keys())e.push(r),e.length===25e4&&(n.push(e),e=[]);return e.length&&n.push(e),n}function Yl(t,n){n||(n=new Set);for(let e=0;e<t.length;e++)n.add(t[e]);return n}function Rs(t,n,e,r,i,a,c=0){let f=r&&r.constructor===Array;var d=f?r.shift():r;if(!d)return this.export(t,n,i,a+1);if((d=t((n?n+".":"")+(c+1)+"."+e,JSON.stringify(d)))&&d.then){let m=this;return d.then(function(){return Rs.call(m,t,n,e,f?r:null,i,a,c+1)})}return Rs.call(this,t,n,e,f?r:null,i,a,c+1)}function Ll(t,n){let e="";for(let r of t.entries()){t=r[0];let i=r[1],a="";for(let c=0,f;c<i.length;c++){f=i[c]||[""];let d="";for(let m=0;m<f.length;m++)d+=(d?",":"")+(n==="string"?'"'+f[m]+'"':f[m]);d="["+d+"]",a+=(a?",":"")+d}a='["'+t+'",['+a+"]]",e+=(e?",":"")+a}return e}function Fl(t,n,e,r){let i=[];for(let a=0,c;a<t.index.length;a++)if(c=t.index[a],n>=c.length)n-=c.length;else{n=c[r?"splice":"slice"](n,e);let f=n.length;if(f&&(i=i.length?i.concat(n):n,e-=f,r&&(t.length-=f),!e))break;n=0}return i}function ln(t){if(!this||this.constructor!==ln)return new ln(t);this.index=t?[t]:[],this.length=t?t.length:0;let n=this;return new Proxy([],{get(e,r){if(r==="length")return n.length;if(r==="push")return function(i){n.index[n.index.length-1].push(i),n.length++};if(r==="pop")return function(){if(n.length)return n.length--,n.index[n.index.length-1].pop()};if(r==="indexOf")return function(i){let a=0;for(let c=0,f,d;c<n.index.length;c++){if(f=n.index[c],d=f.indexOf(i),0<=d)return a+d;a+=f.length}return-1};if(r==="includes")return function(i){for(let a=0;a<n.index.length;a++)if(n.index[a].includes(i))return!0;return!1};if(r==="slice")return function(i,a){return Fl(n,i||0,a||n.length,!1)};if(r==="splice")return function(i,a){return Fl(n,i||0,a||n.length,!0)};if(r==="constructor")return Array;if(typeof r!="symbol")return(e=n.index[r/2**31|0])&&e[r]},set(e,r,i){return e=r/2**31|0,(n.index[e]||(n.index[e]=[]))[r]=i,n.length++,!0}})}ln.prototype.clear=function(){this.index.length=0};ln.prototype.destroy=function(){this.proxy=this.index=null};ln.prototype.push=function(){};function at(t=8){if(!this||this.constructor!==at)return new at(t);this.index=Ee(),this.h=[],this.size=0,32<t?(this.B=Zl,this.A=BigInt(t)):(this.B=Ql,this.A=t)}at.prototype.get=function(t){let n=this.index[this.B(t)];return n&&n.get(t)};at.prototype.set=function(t,n){var e=this.B(t);let r=this.index[e];r?(e=r.size,r.set(t,n),(e-=r.size)&&this.size++):(this.index[e]=r=new Map([[t,n]]),this.h.push(r),this.size++)};function Je(t=8){if(!this||this.constructor!==Je)return new Je(t);this.index=Ee(),this.h=[],this.size=0,32<t?(this.B=Zl,this.A=BigInt(t)):(this.B=Ql,this.A=t)}Je.prototype.add=function(t){var n=this.B(t);let e=this.index[n];e?(n=e.size,e.add(t),(n-=e.size)&&this.size++):(this.index[n]=e=new Set([t]),this.h.push(e),this.size++)};W=at.prototype;W.has=Je.prototype.has=function(t){let n=this.index[this.B(t)];return n&&n.has(t)};W.delete=Je.prototype.delete=function(t){let n=this.index[this.B(t)];n&&n.delete(t)&&this.size--};W.clear=Je.prototype.clear=function(){this.index=Ee(),this.h=[],this.size=0};W.values=Je.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let n of this.h[t].values())yield n};W.keys=Je.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let n of this.h[t].keys())yield n};W.entries=Je.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let n of this.h[t].entries())yield n};function Ql(t){let n=2**this.A-1;if(typeof t=="number")return t&n;let e=0,r=this.A+1;for(let i=0;i<t.length;i++)e=(e*r^t.charCodeAt(i))&n;return this.A===32?e+2**31:e}function Zl(t){let n=BigInt(2)**this.A-BigInt(1);var e=typeof t;if(e==="bigint")return t&n;if(e==="number")return BigInt(t)&n;e=BigInt(0);let r=this.A+BigInt(1);for(let i=0;i<t.length;i++)e=(e*r^BigInt(t.charCodeAt(i)))&n;return e}hn.prototype.add=function(t,n,e){if(Gr(t)&&(n=t,t=Hr(n,this.key)),n&&(t||t===0)){if(!e&&this.reg.has(t))return this.update(t,n);for(let f=0,d;f<this.field.length;f++){d=this.F[f];var r=this.index.get(this.field[f]);if(typeof d=="function"){var i=d(n);i&&r.add(t,i,!1,!0)}else i=d.I,(!i||i(n))&&(d.constructor===String?d=[""+d]:Xe(d)&&(d=[d]),Aa(n,d,this.J,0,r,t,d[0],e))}if(this.tag)for(r=0;r<this.D.length;r++){var a=this.D[r];i=this.tag.get(this.R[r]);let f=Ee();if(typeof a=="function"){if(a=a(n),!a)continue}else{var c=a.I;if(c&&!c(n))continue;a.constructor===String&&(a=""+a),a=Hr(n,a)}if(i&&a){Xe(a)&&(a=[a]);for(let d=0,m,w;d<a.length;d++)if(m=a[d],!f[m]&&(f[m]=1,(c=i.get(m))?w=c:i.set(m,w=[]),!e||!w.includes(t))){if(w.length===2**31-1){if(c=new ln(w),this.fastupdate)for(let C of this.reg.values())C.includes(w)&&(C[C.indexOf(w)]=c);i.set(m,w=c)}w.push(t),this.fastupdate&&((c=this.reg.get(t))?c.push(w):this.reg.set(t,[w]))}}}if(this.store&&(!e||!this.store.has(t))){let f;if(this.C){f=Ee();for(let d=0,m;d<this.C.length;d++){if(m=this.C[d],(e=m.I)&&!e(n))continue;let w;if(typeof m=="function"){if(w=m(n),!w)continue;m=[m.V]}else if(Xe(m)||m.constructor===String){f[m]=n[m];continue}Ia(n,f,m,0,m[0],w)}}this.store.set(t,f||n)}this.worker&&(this.fastupdate||this.reg.add(t))}return this};function Ia(t,n,e,r,i,a){if(t=t[i],r===e.length-1)n[i]=a||t;else if(t)if(t.constructor===Array)for(n=n[i]=Array(t.length),i=0;i<t.length;i++)Ia(t,n,e,r,i);else n=n[i]||(n[i]=Ee()),i=e[++r],Ia(t,n,e,r,i)}function Aa(t,n,e,r,i,a,c,f){if(t=t[c])if(r===n.length-1){if(t.constructor===Array){if(e[r]){for(n=0;n<t.length;n++)i.add(a,t[n],!0,!0);return}t=t.join(" ")}i.add(a,t,f,!0)}else if(t.constructor===Array)for(c=0;c<t.length;c++)Aa(t,n,e,r,i,a,c,f);else c=n[++r],Aa(t,n,e,r,i,a,c,f);else i.db&&i.remove(a)}function eh(t,n,e,r,i,a,c){let f=t.length,d=[],m,w;m=Ee();for(let C=0,_,M,k,j;C<n;C++)for(let L=0;L<f;L++)if(k=t[L],C<k.length&&(_=k[C]))for(let q=0;q<_.length;q++){if(M=_[q],(w=m[M])?m[M]++:(w=0,m[M]=1),j=d[w]||(d[w]=[]),!c){let Q=C+(L||!i?0:a||0);j=j[Q]||(j[Q]=[])}if(j.push(M),c&&e&&w===f-1&&j.length-r===e)return r?j.slice(r):j}if(t=d.length)if(i)d=1<d.length?th(d,e,r,c,a):(d=d[0]).length>e||r?d.slice(r,e+r):d;else{if(t<f)return[];if(d=d[t-1],e||r)if(c)(d.length>e||r)&&(d=d.slice(r,e+r));else{i=[];for(let C=0,_;C<d.length;C++)if(_=d[C],_.length>r)r-=_.length;else if((_.length>e||r)&&(_=_.slice(r,e+r),e-=_.length,r&&(r-=_.length)),i.push(_),!e)break;d=1<i.length?[].concat.apply([],i):i[0]}}return d}function th(t,n,e,r,i){let a=[],c=Ee(),f;var d=t.length;let m;if(r){for(i=d-1;0<=i;i--)if(m=(r=t[i])&&r.length){for(d=0;d<m;d++)if(f=r[d],!c[f]){if(c[f]=1,e)e--;else if(a.push(f),a.length===n)return a}}}else for(let w=d-1,C,_=0;0<=w;w--){C=t[w];for(let M=0;M<C.length;M++)if(m=(r=C[M])&&r.length){for(let k=0;k<m;k++)if(f=r[k],!c[f])if(c[f]=1,e)e--;else{let j=(M+(w<d-1&&i||0))/(w+1)|0;if((a[j]||(a[j]=[])).push(f),++_===n)return a}}}return a}function Gg(t,n,e){let r=Ee(),i=[];for(let a=0,c;a<n.length;a++){c=n[a];for(let f=0;f<c.length;f++)r[c[f]]=1}if(e)for(let a=0,c;a<t.length;a++)c=t[a],r[c]&&(i.push(c),r[c]=0);else for(let a=0,c,f;a<t.result.length;a++)for(c=t.result[a],n=0;n<c.length;n++)f=c[n],r[f]&&((i[a]||(i[a]=[])).push(f),r[f]=0);return i}function ka(t,n,e,r){if(!t.length)return t;if(t.length===1)return t=t[0],t=e||t.length>n?n?t.slice(e,e+n):t.slice(e):t,r?kt.call(this,t):t;let i=[];for(let a=0,c,f;a<t.length;a++)if((c=t[a])&&(f=c.length)){if(e){if(e>=f){e-=f;continue}e<f&&(c=n?c.slice(e,e+n):c.slice(e),f=c.length,e=0)}if(f>n&&(c=c.slice(0,n),f=n),!i.length&&f>=n)return r?kt.call(this,c):c;if(i.push(c),n-=f,!n)break}return i=1<i.length?[].concat.apply([],i):i[0],r?kt.call(this,i):i}function Ts(t,n,e){var r=e[0];if(r.then)return Promise.all(e).then(function(w){return t[n].apply(t,w)});if(r[0]&&r[0].index)return t[n].apply(t,r);r=[];let i=[],a=0,c=0,f,d,m;for(let w=0,C;w<e.length;w++)if(C=e[w]){let _;if(C.constructor===be)_=C.result;else if(C.constructor===Array)_=C;else if(a=C.limit||0,c=C.offset||0,m=C.suggest,d=C.resolve,f=C.enrich&&d,C.index)C.resolve=!1,_=C.index.search(C).result,C.resolve=d;else if(C.and)_=t.and(C.and);else if(C.or)_=t.or(C.or);else if(C.xor)_=t.xor(C.xor);else if(C.not)_=t.not(C.not);else continue;if(_.then)i.push(_);else if(_.length)r[w]=_;else if(!m&&(n==="and"||n==="xor")){r=[];break}}return{O:r,P:i,limit:a,offset:c,enrich:f,resolve:d,suggest:m}}be.prototype.or=function(){let{O:t,P:n,limit:e,offset:r,enrich:i,resolve:a}=Ts(this,"or",arguments);return nh.call(this,t,n,e,r,i,a)};function nh(t,n,e,r,i,a){if(n.length){let c=this;return Promise.all(n).then(function(f){t=[];for(let d=0,m;d<f.length;d++)(m=f[d]).length&&(t[d]=m);return nh.call(c,t,[],e,r,i,a)})}return t.length&&(this.result.length&&t.push(this.result),2>t.length?this.result=t[0]:(this.result=th(t,e,r,!1,this.h),r=0)),a?this.resolve(e,r,i):this}be.prototype.and=function(){let t=this.result.length,n,e,r,i;if(!t){let a=arguments[0];a&&(t=!!a.suggest,i=a.resolve,n=a.limit,e=a.offset,r=a.enrich&&i)}if(t){let{O:a,P:c,limit:f,offset:d,enrich:m,resolve:w,suggest:C}=Ts(this,"and",arguments);return rh.call(this,a,c,f,d,m,w,C)}return i?this.resolve(n,e,r):this};function rh(t,n,e,r,i,a,c){if(n.length){let f=this;return Promise.all(n).then(function(d){t=[];for(let m=0,w;m<d.length;m++)(w=d[m]).length&&(t[m]=w);return rh.call(f,t,[],e,r,i,a,c)})}if(t.length)if(this.result.length&&t.unshift(this.result),2>t.length)this.result=t[0];else{if(n=Ug(t))return this.result=eh(t,n,e,r,c,this.h,a),a?i?kt.call(this.index,this.result):this.result:this;this.result=[]}else c||(this.result=t);return a?this.resolve(e,r,i):this}be.prototype.xor=function(){let{O:t,P:n,limit:e,offset:r,enrich:i,resolve:a,suggest:c}=Ts(this,"xor",arguments);return ih.call(this,t,n,e,r,i,a,c)};function ih(t,n,e,r,i,a,c){if(n.length){let f=this;return Promise.all(n).then(function(d){t=[];for(let m=0,w;m<d.length;m++)(w=d[m]).length&&(t[m]=w);return ih.call(f,t,[],e,r,i,a,c)})}if(t.length)if(this.result.length&&t.unshift(this.result),2>t.length)this.result=t[0];else return this.result=Hg.call(this,t,e,r,a,this.h),a?i?kt.call(this.index,this.result):this.result:this;else c||(this.result=t);return a?this.resolve(e,r,i):this}function Hg(t,n,e,r,i){let a=[],c=Ee(),f=0;for(let d=0,m;d<t.length;d++)if(m=t[d]){f<m.length&&(f=m.length);for(let w=0,C;w<m.length;w++)if(C=m[w])for(let _=0,M;_<C.length;_++)M=C[_],c[M]=c[M]?2:1}for(let d=0,m,w=0;d<f;d++)for(let C=0,_;C<t.length;C++)if((_=t[C])&&(m=_[d])){for(let M=0,k;M<m.length;M++)if(k=m[M],c[k]===1)if(e)e--;else if(r){if(a.push(k),a.length===n)return a}else{let j=d+(C?i:0);if(a[j]||(a[j]=[]),a[j].push(k),++w===n)return a}}return a}be.prototype.not=function(){let{O:t,P:n,limit:e,offset:r,enrich:i,resolve:a,suggest:c}=Ts(this,"not",arguments);return sh.call(this,t,n,e,r,i,a,c)};function sh(t,n,e,r,i,a,c){if(n.length){let f=this;return Promise.all(n).then(function(d){t=[];for(let m=0,w;m<d.length;m++)(w=d[m]).length&&(t[m]=w);return sh.call(f,t,[],e,r,i,a,c)})}if(t.length&&this.result.length)this.result=Wg.call(this,t,e,r,a);else if(a)return this.resolve(e,r,i);return a?i?kt.call(this.index,this.result):this.result:this}function Wg(t,n,e,r){let i=[];t=new Set(t.flat().flat());for(let a=0,c,f=0;a<this.result.length;a++)if(c=this.result[a]){for(let d=0,m;d<c.length;d++)if(m=c[d],!t.has(m)){if(e)e--;else if(r){if(i.push(m),i.length===n)return i}else if(i[a]||(i[a]=[]),i[a].push(m),++f===n)return i}}return i}function be(t){if(!this||this.constructor!==be)return new be(t);if(t&&t.index)return t.resolve=!1,this.index=t.index,this.h=t.boost||0,this.result=t.index.search(t).result,this;this.index=null,this.result=t||[],this.h=0}be.prototype.limit=function(t){if(this.result.length){let n=[];for(let e=0,r;e<this.result.length;e++)if(r=this.result[e])if(r.length<=t){if(n[e]=r,t-=r.length,!t)break}else{n[e]=r.slice(0,t);break}this.result=n}return this};be.prototype.offset=function(t){if(this.result.length){let n=[];for(let e=0,r;e<this.result.length;e++)(r=this.result[e])&&(r.length<=t?t-=r.length:(n[e]=r.slice(t),t=0));this.result=n}return this};be.prototype.boost=function(t){return this.h+=t,this};be.prototype.resolve=function(t,n,e){let r=this.result,i=this.index;return this.result=this.index=null,r.length?(typeof t=="object"&&(e=t.enrich,n=t.offset,t=t.limit),ka.call(i,r,t||100,n,e)):r};Ee();hn.prototype.search=function(t,n,e,r){e||(!n&&Gr(t)?(e=t,t=""):Gr(n)&&(e=n,n=0));let i=[];var a=[];let c;var f;let d,m,w,C=0;var _=!0;let M;if(e){e.constructor===Array&&(e={index:e}),t=e.query||t,c=e.pluck,d=e.merge,m=c||e.field||(m=e.index)&&(m.index?null:m),w=this.tag&&e.tag;var k=e.suggest;_=e.resolve!==!1,_||c||!(m=m||this.field)||(Xe(m)?c=m:(m.constructor===Array&&m.length===1&&(m=m[0]),c=m.field||m.index)),M=(f=this.store&&e.enrich&&_)&&e.highlight,n=e.limit||n;var j=e.offset||0;if(n||(n=100),w&&(!this.db||!r)){w.constructor!==Array&&(w=[w]);var L=[];for(let fe=0,ne;fe<w.length;fe++)if(ne=w[fe],ne.field&&ne.tag){var q=ne.tag;if(q.constructor===Array)for(var Q=0;Q<q.length;Q++)L.push(ne.field,q[Q]);else L.push(ne.field,q)}else{q=Object.keys(ne);for(let ye=0,Te,me;ye<q.length;ye++)if(Te=q[ye],me=ne[Te],me.constructor===Array)for(Q=0;Q<me.length;Q++)L.push(Te,me[Q]);else L.push(Te,me)}if(w=L,!t){if(_=[],L.length)for(a=0;a<L.length;a+=2){if(this.db){if(k=this.index.get(L[a]),!k)continue;_.push(k=k.db.tag(L[a+1],n,j,f))}else k=qg.call(this,L[a],L[a+1],n,j,f);i.push({field:L[a],tag:L[a+1],result:k})}return _.length?Promise.all(_).then(function(fe){for(let ne=0;ne<fe.length;ne++)i[ne].result=fe[ne];return i}):i}}m&&m.constructor!==Array&&(m=[m])}m||(m=this.field),L=!r&&(this.worker||this.db)&&[];let ie;for(let fe=0,ne,ye,Te;fe<m.length;fe++){if(ye=m[fe],this.db&&this.tag&&!this.F[fe])continue;let me;if(Xe(ye)||(me=ye,ye=me.field,t=me.query||t,n=me.limit||n,j=me.offset||j,k=me.suggest||k,f=this.store&&(me.enrich||f)),r)ne=r[fe];else if(q=me||e,Q=this.index.get(ye),w&&(this.db&&(q.tag=w,ie=Q.db.support_tag_search,q.field=m),ie||(q.enrich=!1)),L){L[fe]=Q.search(t,n,q),q&&f&&(q.enrich=f);continue}else ne=Q.search(t,n,q),q&&f&&(q.enrich=f);if(Te=ne&&(_?ne.length:ne.result.length),w&&Te){if(q=[],Q=0,this.db&&r){if(!ie)for(let Ye=m.length;Ye<r.length;Ye++){let Ne=r[Ye];if(Ne&&Ne.length)Q++,q.push(Ne);else if(!k)return _?i:new be(i)}}else for(let Ye=0,Ne,_s;Ye<w.length;Ye+=2){if(Ne=this.tag.get(w[Ye]),!Ne){if(k)continue;return _?i:new be(i)}if(_s=(Ne=Ne&&Ne.get(w[Ye+1]))&&Ne.length)Q++,q.push(Ne);else if(!k)return _?i:new be(i)}if(Q){if(ne=Gg(ne,q,_),Te=ne.length,!Te&&!k)return _?ne:new be(ne);Q--}}if(Te)a[C]=ye,i.push(ne),C++;else if(m.length===1)return _?i:new be(i)}if(L){if(this.db&&w&&w.length&&!ie)for(f=0;f<w.length;f+=2){if(a=this.index.get(w[f]),!a){if(k)continue;return _?i:new be(i)}L.push(a.db.tag(w[f+1],n,j,!1))}let fe=this;return Promise.all(L).then(function(ne){return ne.length?fe.search(t,n,e,ne):ne})}if(!C)return _?i:new be(i);if(c&&(!f||!this.store))return i[0];for(L=[],j=0;j<a.length;j++){if(k=i[j],f&&k.length&&typeof k[0].doc>"u"&&(this.db?L.push(k=this.index.get(this.field[0]).db.enrich(k)):k=kt.call(this,k)),c)return _?M?Sa(t,k,this.index,c,M):k:new be(k);i[j]={field:a[j],result:k}}if(f&&this.db&&L.length){let fe=this;return Promise.all(L).then(function(ne){for(let ye=0;ye<ne.length;ye++)i[ye].result=ne[ye];return d?Bl(i):M?Sa(t,i,fe.index,c,M):i})}return d?Bl(i):M?Sa(t,i,this.index,c,M):i};function Sa(t,n,e,r,i){let a,c;for(let d=0,m,w,C;d<n.length;d++){let _;if(r)_=n,C=r;else{var f=n[d];if(C=f.field,!C)continue;_=f.result}w=e.get(C),m=w.encoder,f=w.tokenize,m!==a&&(a=m,c=a.encode(t));for(let M=0;M<_.length;M++){let k="",j=Hr(_[M].doc,C).split(/\s+/);for(let L=0,q,Q;L<j.length;L++){q=j[L],Q=m.encode(q),Q=1<Q.length?Q.join(" "):Q[0];let ie;if(Q&&q)for(let fe=0,ne;fe<c.length;fe++)if(ne=c[fe],f==="strict"){if(Q===ne){k+=(k?" ":"")+i.replace("$1",q),ie=!0;break}}else{let ye=Q.indexOf(ne);if(-1<ye){k+=(k?" ":"")+q.substring(0,ye)+i.replace("$1",q.substring(ye,ye+ne.length))+q.substring(ye+ne.length),ie=!0;break}}ie||(k+=(k?" ":"")+j[L])}_[M].highlight=k}if(r)break}return n}function Bl(t){let n=[],e=Ee();for(let r=0,i,a;r<t.length;r++){i=t[r],a=i.result;for(let c=0,f,d,m;c<a.length;c++)d=a[c],typeof d!="object"&&(d={id:d}),f=d.id,(m=e[f])?m.push(i.field):(d.field=e[f]=[i.field],n.push(d))}return n}function qg(t,n,e,r,i){if(t=this.tag.get(t),!t)return[];if((n=(t=t&&t.get(n))&&t.length-r)&&0<n)return(n>e||r)&&(t=t.slice(r,r+e)),i&&(t=kt.call(this,t)),t}function kt(t){if(!this||!this.store)return t;let n=Array(t.length);for(let e=0,r;e<t.length;e++)r=t[e],n[e]={id:r,doc:this.store.get(r)};return n}function hn(t){if(!this||this.constructor!==hn)return new hn(t);let n=t.document||t.doc||t,e,r;if(this.F=[],this.field=[],this.J=[],this.key=(e=n.key||n.id)&&Es(e,this.J)||"id",(r=t.keystore||0)&&(this.keystore=r),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?r?new Je(r):new Set:r?new at(r):new Map,this.C=(e=n.store||null)&&e&&e!==!0&&[],this.store=e&&(r?new at(r):new Map),this.cache=(e=t.cache||null)&&new fn(e),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=Xg.call(this,t,n),this.tag=null,(e=n.tag)&&(typeof e=="string"&&(e=[e]),e.length)){this.tag=new Map,this.D=[],this.R=[];for(let i=0,a,c;i<e.length;i++){if(a=e[i],c=a.field||a,!c)throw Error("The tag field from the document descriptor is undefined.");a.custom?this.D[i]=a.custom:(this.D[i]=Es(c,this.J),a.filter&&(typeof this.D[i]=="string"&&(this.D[i]=new String(this.D[i])),this.D[i].I=a.filter)),this.R[i]=c,this.tag.set(c,new Map)}}if(this.worker){this.fastupdate=!1;let i=[];for(let a of this.index.values())a.then&&i.push(a);if(i.length){let a=this;return Promise.all(i).then(function(c){let f=new Map,d=0;for(let w of a.index.entries()){let C=w[0];var m=w[1];if(m.then){m=i[d].encoder||{};let _=f.get(m);_||(_=m.encode?m:new Wr(m),f.set(m,_)),m=c[d],m.encoder=_,a.index.set(C,m),d++}}return a})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}W=hn.prototype;W.mount=function(t){let n=this.field;if(this.tag)for(let a=0,c;a<this.R.length;a++){c=this.R[a];var e=void 0;this.index.set(c,e=new ut({},this.reg)),n===this.field&&(n=n.slice(0)),n.push(c),e.tag=this.tag.get(c)}e=[];let r={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let a=0,c,f;a<n.length;a++){r.field=f=n[a],c=this.index.get(f);let d=new t.constructor(t.id,r);d.id=t.id,e[a]=d.mount(c),c.document=!0,a?c.bypass=!0:c.store=this.store}let i=this;return this.db=Promise.all(e).then(function(){i.db=!0})};W.commit=function(t,n){return te(this,null,function*(){let e=[];for(let r of this.index.values())e.push(r.commit(t,n));yield Promise.all(e),this.reg.clear()})};W.destroy=function(){let t=[];for(let n of this.index.values())t.push(n.destroy());return Promise.all(t)};function Xg(t,n){let e=new Map,r=n.index||n.field||n;Xe(r)&&(r=[r]);for(let i=0,a,c;i<r.length;i++){if(a=r[i],Xe(a)||(c=a,a=a.field),c=Gr(c)?Object.assign({},t,c):t,this.worker){let f=new qr(c);f.encoder=c.encoder,e.set(a,f)}this.worker||e.set(a,new ut(c,this.reg)),c.custom?this.F[i]=c.custom:(this.F[i]=Es(a,this.J),c.filter&&(typeof this.F[i]=="string"&&(this.F[i]=new String(this.F[i])),this.F[i].I=c.filter)),this.field[i]=a}if(this.C){t=n.store,Xe(t)&&(t=[t]);for(let i=0,a,c;i<t.length;i++)a=t[i],c=a.field||a,a.custom?(this.C[i]=a.custom,a.custom.V=c):(this.C[i]=Es(c,this.J),a.filter&&(typeof this.C[i]=="string"&&(this.C[i]=new String(this.C[i])),this.C[i].I=a.filter))}return e}function Es(t,n){let e=t.split(":"),r=0;for(let i=0;i<e.length;i++)t=e[i],t[t.length-1]==="]"&&(t=t.substring(0,t.length-2))&&(n[r]=!0),t&&(e[r++]=t);return r<e.length&&(e.length=r),1<r?e:e[0]}W.append=function(t,n){return this.add(t,n,!0)};W.update=function(t,n){return this.remove(t).add(t,n)};W.remove=function(t){Gr(t)&&(t=Hr(t,this.key));for(var n of this.index.values())n.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let e of this.tag.values())for(let r of e){n=r[0];let i=r[1],a=i.indexOf(t);-1<a&&(1<i.length?i.splice(a,1):e.delete(n))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this};W.clear=function(){let t=[];for(let n of this.index.values()){let e=n.clear();e.then&&t.push(e)}if(this.tag)for(let n of this.tag.values())n.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this};W.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)};W.cleanup=function(){for(let t of this.index.values())t.cleanup();return this};W.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(n){return n[0]&&n[0].doc||null}):this.store.get(t)||null};W.set=function(t,n){return typeof t=="object"&&(n=t,t=Hr(n,this.key)),this.store.set(t,n),this};W.searchCache=oh;W.export=function(t,n,e=0,r=0){if(e<this.field.length){let c=this.field[e];if((n=this.index.get(c).export(t,c,e,r=1))&&n.then){let f=this;return n.then(function(){return f.export(t,c,e+1)})}return this.export(t,c,e+1)}let i,a;switch(r){case 0:i="reg",a=Jl(this.reg),n=null;break;case 1:i="tag",a=this.tag&&ql(this.tag,this.reg.size),n=null;break;case 2:i="doc",a=this.store&&Pa(this.store),n=null;break;default:return}return Rs.call(this,t,n,i,a,e,r)};W.import=function(t,n){var e=t.split(".");e[e.length-1]==="json"&&e.pop();let r=2<e.length?e[0]:"";if(e=2<e.length?e[2]:e[1],this.worker&&r)return this.index.get(r).import(t);if(n){if(typeof n=="string"&&(n=JSON.parse(n)),r)return this.index.get(r).import(e,n);switch(e){case"reg":this.fastupdate=!1,this.reg=Yl(n,this.reg);for(let i=0,a;i<this.field.length;i++)a=this.index.get(this.field[i]),a.fastupdate=!1,a.reg=this.reg;if(this.worker){n=[];for(let i of this.index.values())n.push(i.import(t));return Promise.all(n)}break;case"tag":this.tag=Xl(n,this.tag);break;case"doc":this.store=Ma(n,this.store)}}};Da(hn.prototype);function oh(t,n,e){let r=(typeof t=="object"?""+t.query:t).toLowerCase();this.cache||(this.cache=new fn);let i=this.cache.get(r);if(!i){if(i=this.search(t,n,e),i.then){let a=this;i.then(function(c){return a.cache.set(r,c),c})}this.cache.set(r,i)}return i}function fn(t){this.limit=t&&t!==!0?t:1e3,this.cache=new Map,this.h=""}fn.prototype.set=function(t,n){this.cache.set(this.h=t,n),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)};fn.prototype.get=function(t){let n=this.cache.get(t);return n&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,n)),n};fn.prototype.remove=function(t){for(let n of this.cache){let e=n[0];n[1].includes(t)&&this.cache.delete(e)}};fn.prototype.clear=function(){this.cache.clear(),this.h=""};var zl={normalize:!1,numeric:!1,dedupe:!1},ys={},Ta=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),$l=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),Kl=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],Vl={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,\u00DF:2,d:3,t:3,l:4,m:5,n:5,r:6},Jg={Exact:zl,Default:ys,Normalize:ys,LatinBalance:{mapper:Ta},LatinAdvanced:{mapper:Ta,matcher:$l,replacer:Kl},LatinExtra:{mapper:Ta,replacer:Kl.concat([/(?!^)[aeo]/g,""]),matcher:$l},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let e=0;e<t.length;e++){var n=t[e];let r=n.charAt(0),i=Vl[r];for(let a=1,c;a<n.length&&(c=n.charAt(a),c==="h"||c==="w"||!(c=Vl[c])||c===i||(r+=c,i=c,r.length!==4));a++);t[e]=r}}},CJK:{split:""},LatinExact:zl,LatinDefault:ys,LatinSimple:ys};ut.prototype.remove=function(t,n){let e=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(e){if(this.fastupdate){for(let r=0,i;r<e.length;r++)if(i=e[r])if(2>i.length)i.pop();else{let a=i.indexOf(t);a===e.length-1?i.pop():i.splice(a,1)}}else Xr(this.map,t),this.depth&&Xr(this.ctx,t);n||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.T&&ah(this)),this.cache&&this.cache.remove(t),this};function Xr(t,n){let e=0;var r=typeof n>"u";if(t.constructor===Array){for(let i=0,a,c;i<t.length;i++)if((a=t[i])&&a.length)if(r)e++;else if(c=a.indexOf(n),0<=c){1<a.length?(a.splice(c,1),e++):delete t[i];break}else e++}else for(let i of t.entries()){r=i[0];let a=Xr(i[1],n);a?e+=a:t.delete(r)}return e}var Yg={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};ut.prototype.add=function(t,n,e,r){if(n&&(t||t===0)){if(!r&&!e&&this.reg.has(t))return this.update(t,n);r=this.depth,n=this.encoder.encode(n,!r);let m=n.length;if(m){let w=Ee(),C=Ee(),_=this.resolution;for(let M=0;M<m;M++){let k=n[this.rtl?m-1-M:M];var i=k.length;if(i&&(r||!C[k])){var a=this.score?this.score(n,k,M,null,0):ws(_,m,M),c="";switch(this.tokenize){case"full":if(2<i){for(let j=0,L;j<i;j++)for(a=i;a>j;a--){c=k.substring(j,a),L=this.rtl?i-1-j:j;var f=this.score?this.score(n,k,M,c,L):ws(_,m,M,i,L);Vr(this,C,c,f,t,e)}break}case"bidirectional":case"reverse":if(1<i){for(f=i-1;0<f;f--){c=k[this.rtl?i-1-f:f]+c;var d=this.score?this.score(n,k,M,c,f):ws(_,m,M,i,f);Vr(this,C,c,d,t,e)}c=""}case"forward":if(1<i){for(f=0;f<i;f++)c+=k[this.rtl?i-1-f:f],Vr(this,C,c,a,t,e);break}default:if(Vr(this,C,k,a,t,e),r&&1<m&&M<m-1){for(i=Ee(),c=this.U,a=k,f=Math.min(r+1,this.rtl?M+1:m-M),i[a]=1,d=1;d<f;d++)if((k=n[this.rtl?m-1-M-d:M+d])&&!i[k]){i[k]=1;let j=this.score?this.score(n,a,M,k,d-1):ws(c+(m/2>c?0:1),m,M,f-1,d-1),L=this.bidirectional&&k>a;Vr(this,w,L?a:k,j,t,e,L?k:a)}}}}}this.fastupdate||this.reg.add(t)}else n=""}return this.db&&(n||this.commit_task.push({del:t}),this.T&&ah(this)),this};function Vr(t,n,e,r,i,a,c){let f=c?t.ctx:t.map,d;if((!n[e]||c&&!(d=n[e])[c])&&(c?(n=d||(n[e]=Ee()),n[c]=1,(d=f.get(c))?f=d:f.set(c,f=new Map)):n[e]=1,(d=f.get(e))?f=d:f.set(e,f=d=[]),f=f[r]||(f[r]=[]),!a||!f.includes(i))){if(f.length===2**31-1){if(n=new ln(f),t.fastupdate)for(let m of t.reg.values())m.includes(f)&&(m[m.indexOf(f)]=n);d[r]=f=n}f.push(i),t.fastupdate&&((r=t.reg.get(i))?r.push(f):t.reg.set(i,[f]))}}function ws(t,n,e,r,i){return e&&1<t?n+(r||0)<=t?e+(i||0):(t-1)/(n+(r||0))*(e+(i||0))+1|0:0}ut.prototype.search=function(t,n,e){e||(n||typeof t!="object"?typeof n=="object"&&(e=n,n=0):(e=t,t=""));let r=[],i,a,c,f=0,d,m,w,C,_;e?(t=e.query||t,n=e.limit||n,f=e.offset||0,a=e.context,c=e.suggest,_=(d=e.resolve!==!1)&&e.enrich,w=e.boost,C=e.resolution,m=this.db&&e.tag):d=this.resolve,a=this.depth&&a!==!1;let M=this.encoder.encode(t,!a);if(i=M.length,n=n||(d?100:0),i===1)return Hl.call(this,M[0],"",n,f,d,_,m);if(i===2&&a&&!c)return Hl.call(this,M[1],M[0],n,f,d,_,m);let k=Ee(),j=0,L;if(a&&(L=M[0],j=1),C||C===0||(C=L?this.U:this.resolution),this.db){if(this.db.search&&(t=this.db.search(this,M,n,f,c,d,_,m),t!==!1))return t;let q=this;return function(){return te(this,null,function*(){for(let Q,ie;j<i;j++){if((ie=M[j])&&!k[ie]){if(k[ie]=1,Q=yield xa(q,ie,L,0,0,!1,!1),Q=Wl(Q,r,c,C)){r=Q;break}L&&(c&&Q&&r.length||(L=ie))}c&&L&&j===i-1&&!r.length&&(C=q.resolution,L="",j=-1,k=Ee())}return Gl(r,C,n,f,c,w,d)})}()}for(let q,Q;j<i;j++){if((Q=M[j])&&!k[Q]){if(k[Q]=1,q=xa(this,Q,L,0,0,!1,!1),q=Wl(q,r,c,C)){r=q;break}L&&(c&&q&&r.length||(L=Q))}c&&L&&j===i-1&&!r.length&&(C=this.resolution,L="",j=-1,k=Ee())}return Gl(r,C,n,f,c,w,d)};function Gl(t,n,e,r,i,a,c){let f=t.length,d=t;if(1<f)d=eh(t,n,e,r,i,a,c);else if(f===1)return c?ka.call(null,t[0],e,r):new be(t[0]);return c?d:new be(d)}function Hl(t,n,e,r,i,a,c){return t=xa(this,t,n,e,r,i,a,c),this.db?t.then(function(f){return i?f||[]:new be(f)}):t&&t.length?i?ka.call(this,t,e,r):new be(t):i?[]:new be}function Wl(t,n,e,r){let i=[];if(t&&t.length){if(t.length<=r){n.push(t);return}for(let a=0,c;a<r;a++)(c=t[a])&&(i[a]=c);if(i.length){n.push(i);return}}if(!e)return i}function xa(t,n,e,r,i,a,c,f){let d;return e&&(d=t.bidirectional&&n>e)&&(d=e,e=n,n=d),t.db?t.db.get(n,e,r,i,a,c,f):(t=e?(t=t.ctx.get(e))&&t.get(n):t.map.get(n),t)}function ut(t,n){if(!this||this.constructor!==ut)return new ut(t);if(t){var e=Xe(t)?t:t.preset;e&&(t=Object.assign({},Yg[e],t))}else t={};e=t.context;let r=e===!0?{depth:1}:e||{},i=Xe(t.encoder)?Jg[t.encoder]:t.encode||t.encoder||{};this.encoder=i.encode?i:typeof i=="object"?new Wr(i):{encode:i},this.resolution=t.resolution||9,this.tokenize=e=(e=t.tokenize)&&e!=="default"&&e!=="exact"&&e||"strict",this.depth=e==="strict"&&r.depth||0,this.bidirectional=r.bidirectional!==!1,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(e=t.keystore||0)&&(this.keystore=e),this.map=e?new at(e):new Map,this.ctx=e?new at(e):new Map,this.reg=n||(this.fastupdate?e?new at(e):new Map:e?new Je(e):new Set),this.U=r.resolution||3,this.rtl=i.rtl||t.rtl||!1,this.cache=(e=t.cache||null)&&new fn(e),this.resolve=t.resolve!==!1,(e=t.db)&&(this.db=this.mount(e)),this.T=t.commit!==!1,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}W=ut.prototype;W.mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)};W.commit=function(t,n){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this,t,n)};W.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()};function ah(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t,void 0,void 0)},1))}W.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db&&(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[{clear:!0}]),this};W.append=function(t,n){return this.add(t,n,!0)};W.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)};W.update=function(t,n){let e=this,r=this.remove(t);return r&&r.then?r.then(()=>e.add(t,n)):this.add(t,n)};W.cleanup=function(){return this.fastupdate?(Xr(this.map),this.depth&&Xr(this.ctx),this):this};W.searchCache=oh;W.export=function(t,n,e=0,r=0){let i,a;switch(r){case 0:i="reg",a=Jl(this.reg);break;case 1:i="cfg",a=null;break;case 2:i="map",a=Pa(this.map,this.reg.size);break;case 3:i="ctx",a=ql(this.ctx,this.reg.size);break;default:return}return Rs.call(this,t,n,i,a,e,r)};W.import=function(t,n){if(n)switch(typeof n=="string"&&(n=JSON.parse(n)),t=t.split("."),t[t.length-1]==="json"&&t.pop(),t.length===3&&t.shift(),t=1<t.length?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=Yl(n,this.reg);break;case"map":this.map=Ma(n,this.map);break;case"ctx":this.ctx=Xl(n,this.ctx)}};W.serialize=function(t=!0){let n="",e="",r="";if(this.reg.size){let a;for(var i of this.reg.keys())a||(a=typeof i),n+=(n?",":"")+(a==="string"?'"'+i+'"':i);n="index.reg=new Set(["+n+"]);",e=Ll(this.map,a),e="index.map=new Map(["+e+"]);";for(let c of this.ctx.entries()){i=c[0];let f=Ll(c[1],a);f="new Map(["+f+"])",f='["'+i+'",'+f+"]",r+=(r?",":"")+f}r="index.ctx=new Map(["+r+"]);"}return t?"function inject(index){"+n+e+r+"}":n+e+r};Da(ut.prototype);var uh=typeof window<"u"&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),Ss=["map","ctx","tag","reg","cfg"],un=Ee();function Oa(t,n={}){if(!this||this.constructor!==Oa)return new Oa(t,n);typeof t=="object"&&(n=t,t=t.name),t||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(t?":"+t.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=n.field?n.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=n.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}W=Oa.prototype;W.mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())};W.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist(),un[t.id]||(un[t.id]=[]),un[t.id].push(t.field);let n=uh.open(t.id,1);return n.onupgradeneeded=function(){let e=t.db=this.result;for(let r=0,i;r<Ss.length;r++){i=Ss[r];for(let a=0,c;a<un[t.id].length;a++)c=un[t.id][a],e.objectStoreNames.contains(i+(i!=="reg"&&c?":"+c:""))||e.createObjectStore(i+(i!=="reg"&&c?":"+c:""))}},t.db=jt(n,function(e){t.db=e,t.db.onversionchange=function(){t.close()}})};W.close=function(){this.db&&this.db.close(),this.db=null};W.destroy=function(){let t=uh.deleteDatabase(this.id);return jt(t)};W.clear=function(){let t=[];for(let e=0,r;e<Ss.length;e++){r=Ss[e];for(let i=0,a;i<un[this.id].length;i++)a=un[this.id][i],t.push(r+(r!=="reg"&&a?":"+a:""))}let n=this.db.transaction(t,"readwrite");for(let e=0;e<t.length;e++)n.objectStore(t[e]).clear();return jt(n)};W.get=function(t,n,e=0,r=0,i=!0,a=!1){t=this.db.transaction((n?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((n?"ctx":"map")+(this.field?":"+this.field:"")).get(n?n+":"+t:t);let c=this;return jt(t).then(function(f){let d=[];if(!f||!f.length)return d;if(i){if(!e&&!r&&f.length===1)return f[0];for(let m=0,w;m<f.length;m++)if((w=f[m])&&w.length){if(r>=w.length){r-=w.length;continue}let C=e?r+Math.min(w.length-r,e):w.length;for(let _=r;_<C;_++)d.push(w[_]);if(r=0,d.length===e)break}return a?c.enrich(d):d}return f})};W.tag=function(t,n=0,e=0,r=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);let i=this;return jt(t).then(function(a){return!a||!a.length||e>=a.length?[]:!n&&!e?a:(a=a.slice(e,e+n),r?i.enrich(a):a)})};W.enrich=function(t){typeof t!="object"&&(t=[t]);let n=this.db.transaction("reg","readonly").objectStore("reg"),e=[];for(let r=0;r<t.length;r++)e[r]=jt(n.get(t[r]));return Promise.all(e).then(function(r){for(let i=0;i<r.length;i++)r[i]={id:t[i],doc:r[i]?JSON.parse(r[i]):null};return r})};W.has=function(t){return t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t),jt(t).then(function(n){return!!n})};W.search=null;W.info=function(){};W.transaction=function(t,n,e){t+=t!=="reg"&&this.field?":"+this.field:"";let r=this.h[t+":"+n];if(r)return e.call(this,r);let i=this.db.transaction(t,n);this.h[t+":"+n]=r=i.objectStore(t);let a=e.call(this,r);return this.h[t+":"+n]=null,jt(i).finally(function(){return i=r=null,a})};W.commit=function(t,n,e){return te(this,null,function*(){if(n)yield this.clear(),t.commit_task=[];else{let r=t.commit_task;t.commit_task=[];for(let i=0,a;i<r.length;i++)if(a=r[i],a.clear){yield this.clear(),n=!0;break}else r[i]=a.del;n||(e||(r=r.concat(jg(t.reg))),r.length&&(yield this.remove(r)))}t.reg.size&&(yield this.transaction("map","readwrite",function(r){for(let i of t.map){let a=i[0],c=i[1];c.length&&(n?r.put(c,a):r.get(a).onsuccess=function(){let f=this.result;var d;if(f&&f.length){let m=Math.max(f.length,c.length);for(let w=0,C,_;w<m;w++)if((_=c[w])&&_.length){if((C=f[w])&&C.length)for(d=0;d<_.length;d++)C.push(_[d]);else f[w]=_;d=1}}else f=c,d=1;d&&r.put(f,a)})}}),yield this.transaction("ctx","readwrite",function(r){for(let i of t.ctx){let a=i[0],c=i[1];for(let f of c){let d=f[0],m=f[1];m.length&&(n?r.put(m,a+":"+d):r.get(a+":"+d).onsuccess=function(){let w=this.result;var C;if(w&&w.length){let _=Math.max(w.length,m.length);for(let M=0,k,j;M<_;M++)if((j=m[M])&&j.length){if((k=w[M])&&k.length)for(C=0;C<j.length;C++)k.push(j[C]);else w[M]=j;C=1}}else w=m,C=1;C&&r.put(w,a+":"+d)})}}}),t.store?yield this.transaction("reg","readwrite",function(r){for(let i of t.store){let a=i[0],c=i[1];r.put(typeof c=="object"?JSON.stringify(c):1,a)}}):t.bypass||(yield this.transaction("reg","readwrite",function(r){for(let i of t.reg.keys())r.put(1,i)})),t.tag&&(yield this.transaction("tag","readwrite",function(r){for(let i of t.tag){let a=i[0],c=i[1];c.length&&(r.get(a).onsuccess=function(){let f=this.result;f=f&&f.length?f.concat(c):c,r.put(f,a)})}})),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())})};function Ca(t,n,e){let r=t.value,i,a=0;for(let c=0,f;c<r.length;c++){if(f=e?r:r[c]){for(let d=0,m,w;d<n.length;d++)if(w=n[d],m=f.indexOf(w),0<=m)if(i=1,1<f.length)f.splice(m,1);else{r[c]=[];break}a+=f.length}if(e)break}a?i&&t.update(r):t.delete(),t.continue()}W.remove=function(t){return typeof t!="object"&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(n){n.openCursor().onsuccess=function(){let e=this.result;e&&Ca(e,t)}}),this.transaction("ctx","readwrite",function(n){n.openCursor().onsuccess=function(){let e=this.result;e&&Ca(e,t)}}),this.transaction("tag","readwrite",function(n){n.openCursor().onsuccess=function(){let e=this.result;e&&Ca(e,t,!0)}}),this.transaction("reg","readwrite",function(n){for(let e=0;e<t.length;e++)n.delete(t[e])})])};function jt(t,n){return new Promise((e,r)=>{t.onsuccess=t.oncomplete=function(){n&&n(this.result),n=null,e(this.result)},t.onerror=t.onblocked=r,t=null})}var ch=hn;var Cs=class t{constructor(){}indices={};initIndex(n,e,r){return te(this,null,function*(){this.indices[e]=this.createIndex(r)})}search(n,e){return te(this,null,function*(){let r=this.indices[n];return r?yield r.searchAsync(e,{limit:10,enrich:!0}):[]})}getIndex(n){return this.indices[n]}addToIndex(n,e){return te(this,null,function*(){let r=this.indices[n];r&&r.add(e)})}importIndex(n,e){return te(this,null,function*(){try{let r=this.indices[n],i=JSON.parse(e);if(r&&i)for(let a of i)yield r.import(a.key,a.data)}catch(r){throw new Error(`Error importing index for table ${n}: ${r}`)}})}exportIndex(n){return te(this,null,function*(){let e=this.indices[n];if(!e)throw new Error(`No index found for table ${n}`);let r=[];return yield e.export((i,a)=>{r.push({key:i.toString(),data:a})}),JSON.stringify(r)})}removeFromIndex(n,e){return te(this,null,function*(){let r=this.indices[n];r&&r.remove(e)})}clearIndex(n){return te(this,null,function*(){this.indices[n]=this.createIndex(["name"])})}createIndex(n){return new ch({tokenize:"forward",cache:!0,document:{id:"uuid",index:n}})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})};var lh=class t extends Ml{constructor(e){super("lasagna-db");this.flexsearchIndexService=e;let r=new Set;for(let i of kl){if(r.has(i.version))throw new Error(`Duplicate migration version: ${i.version}`);r.add(i.version);let a=this.version(i.version).stores(i.schema);i.update&&a.upgrade(i.update),console.log(`Migration ${i.version} applied`)}setTimeout(()=>{this.initIndexes()})}productsStore;recipesStore;categoryStore;relations=new Map;initIndexes(){return Promise.all([this.initIndex("productsStore"),this.initIndex("recipesStore"),this.initIndex("categoryProductsStore"),this.initIndex("categoryRecipesStore"),this.initIndex("tags")]).then(()=>{})}initIndex(e){return te(this,null,function*(){yield this.flexsearchIndexService.initIndex(this.getStore(e),e,["name"]);let r=yield this.getOne("indicesStore",e);r?yield this.flexsearchIndexService.importIndex(e,r.indexData):(yield this.getAll(e).then(i=>te(this,null,function*(){for(let a of i)yield this.flexsearchIndexService.addToIndex(e,a)})),yield this.saveIndex(e))})}saveIndex(e){return te(this,null,function*(){try{if(this.flexsearchIndexService.getIndex(e)){let i=yield this.flexsearchIndexService.exportIndex(e);yield this.replaceData("indicesStore",e,{table:e,indexData:i})}else{console.error("No index data found for table:",e);return}}catch(r){throw console.error("Error saving index:",r),r}})}loadIndex(e){return te(this,null,function*(){let r=yield this.filter("indicesStore","table",e,!0);return r?.[0]?r[0].indexData:null})}addData(e,r,i){return te(this,null,function*(){try{let a=i||this.generateUuid(),c=Ae(V({},r),{uuid:a});return yield this[e].put(c),e==="indicesStore"||(yield this.flexsearchIndexService.addToIndex(e,c),yield this.saveIndex(e)),a}catch(a){throw a}})}replaceData(e,r,i){return te(this,null,function*(){let a=Ae(V({},i),{uuid:r});yield this[e].put(a),e!=="indicesStore"&&(yield this.flexsearchIndexService.addToIndex(e,a),yield this.saveIndex(e))})}search(e,r,i){return te(this,null,function*(){return this[e].where(r).equals(i).toArray()})}filter(e,r,i,a=!1){return te(this,null,function*(){return this[e].filter(c=>a?c[r]===i:c[r]?.toLowerCase().includes(i.toLowerCase())).toArray()})}getStore(e){return this[e]}getOne(e,r){return te(this,null,function*(){return this[e].get(r)})}getOneWithRelations(e,r){return te(this,null,function*(){let a=yield this[e].get(r);if(!a)return Promise.resolve({data:null,relations:{}});let c={},f=yield this.parse(a,c);return this.apply(a,f),{data:a,relations:c}})}parse(i){return te(this,arguments,function*(e,r={}){let a=Object.entries(e);for(let[c,f]of a)if(Array.isArray(f))for(let d of e[c]){let m=yield this.parse(d,r)}else{let d=vs[c];if(d&&f){let{tableName:m,key:w}=this._parseRelations(d),C=yield this.getOneWithRelations(m,f),_={[f]:C.data};r[c]=V(V({},r[c]||{}),_)}}return r})}apply(e,r={}){let i=Object.entries(e);for(let[a,c]of i)if(Array.isArray(c))for(let f of e[a])this.apply(f,r);else{let f=r[a];if(!vs[a])continue;e[a]=f?.[e[a]]}}getAll(e){return te(this,null,function*(){return this[e].toArray()})}getFirst(e){return te(this,null,function*(){return this[e].toCollection().first()})}getMany(e,r){return te(this,null,function*(){return this[e].where("uuid").anyOf(r).toArray()})}remove(e,r){return te(this,null,function*(){yield this[e].delete(r),e!=="indicesStore"&&(yield this.flexsearchIndexService.removeFromIndex(e,r),yield this.saveIndex(e))})}clear(e){return te(this,null,function*(){yield this[e].clear(),yield this.flexsearchIndexService.clearIndex(e),yield this.saveIndex(e)})}generateUuid(){return Nl()}balkAdd(e,r,i=!0){return te(this,null,function*(){yield this[e].bulkPut(r.map(a=>Ae(V({},a),{uuid:i?this.generateUuid():a.uuid||this.generateUuid()})))})}uniqueKeys(e,r){return te(this,null,function*(){return this[e].orderBy(r).uniqueKeys()})}getVersion(e){return te(this,null,function*(){return this.idbdb.version})}restoreAllData(e){return te(this,null,function*(){let r=Object.values(zr).filter(i=>i!=="indicesStore");for(let i of r){let a=e.find(c=>c.store===i);if(a)yield this.clear(i),yield this.balkAdd(i,a.data,!1);else throw new Error(`Store ${i} not found in backup data`)}})}_putRelations(e,r){return te(this,null,function*(){let i=Object.keys(e);for(let a of i)if(Array.isArray(e[a]))for(let c=0;c<e[a].length;c++)yield this._putRelations(e[a][c],r);else{let c=yield r(a,e[a]);c&&(e[a]=c[0])}})}_parseRelationAndGet(e,r){return te(this,null,function*(){if(!r)return;let i=vs[e];if(!i)return;let{tableName:a,key:c}=this._parseRelations(i);if(!(!a||!c))return this.getStore(a).where(c).equals(r).toArray()})}_parseRelations(e){let[r,i]=e.split(".");return{tableName:r,key:i}}static \u0275fac=function(r){return new(r||t)(oe(Cs))};static \u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"})};export{Ko as a,id as b,Er as c,Mc as d,Dd as e,Dv as f,Xd as g,Pv as h,Mv as i,Pt as j,Ve as k,it as l,jn as m,Qi as n,vt as o,ga as p,Fn as q,Vn as r,ps as s,Cg as t,Ag as u,Dg as v,zr as w,Vy as x,Nl as y,Cs as z,lh as A};
