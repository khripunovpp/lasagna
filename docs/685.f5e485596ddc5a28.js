"use strict";(self.webpackChunklasagna=self.webpackChunklasagna||[]).push([[685],{553:(P,d,e)=>{e.d(d,{i:()=>p});var o=e(1007);const t=["*"];let p=(()=>{class c{constructor(){}flat=(0,o.hFB)(!1);center=(0,o.hFB)(!1);static \u0275fac=function(n){return new(n||c)};static \u0275cmp=o.VBU({type:c,selectors:[["lg-card"]],inputs:{flat:[1,"flat"],center:[1,"center"]},ngContentSelectors:t,decls:2,vars:4,consts:[[1,"card"]],template:function(n,r){1&n&&(o.NAR(),o.j41(0,"div",0),o.SdG(1),o.k0s()),2&n&&o.AVh("flat",r.flat())("center",r.center())},styles:["[_nghost-%COMP%]{display:flex;width:100%}.card[_ngcontent-%COMP%]{background-color:#fff;padding:24px;border-radius:32px;width:100%;display:flex;flex-direction:column}.card.flat[_ngcontent-%COMP%]{padding:0}.card.center[_ngcontent-%COMP%]{justify-content:center;align-items:center}"]})}return c})()},1086:(P,d,e)=>{e.d(d,{W:()=>p});var o=e(1007);const t=["*"];let p=(()=>{class c{level=(0,o.vPA)(1);static \u0275fac=function(n){return new(n||c)};static \u0275cmp=o.VBU({type:c,selectors:[["lg-title"]],ngContentSelectors:t,decls:2,vars:0,consts:[["role","heading",1,"title"]],template:function(n,r){1&n&&(o.NAR(),o.j41(0,"p",0),o.SdG(1),o.k0s())},styles:[".title[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin:0}"]})}return c})()},4314:(P,d,e)=>{e.r(d),e.d(d,{CategoryListComponent:()=>g});var o=e(467),t=e(1007),p=e(7782),c=e(7512),y=e(1119),O=e(1072),n=e(553),r=e(5642),i=e(1086),l=e(2933);function _(s,m){if(1&s){const a=t.RV6();t.j41(0,"lg-gap-row",0)(1,"div",2),t.EFF(2),t.k0s(),t.j41(3,"lg-button",3),t.EFF(4," Edit "),t.k0s(),t.j41(5,"lg-button",4),t.bIt("click",function(){const f=t.eBV(a).$implicit,C=t.XpG();return t.Njj(C.deleteCategory(f))}),t.nrm(6,"mat-icon",5),t.k0s()()}if(2&s){const a=m.$implicit;t.Y8G("center",!0),t.R7$(2),t.SpI(" ",a.name," "),t.R7$(),t.Aen("primary"),t.Y8G("size","small")("link","/edit-category/"+a.uuid)("flat",!0),t.R7$(2),t.Aen("danger"),t.Y8G("size","small")("icon",!0)}}function u(s,m){1&s&&(t.j41(0,"div"),t.EFF(1,"No categories found"),t.k0s())}let g=(()=>{class s{categoryRepository;constructor(a){this.categoryRepository=a}categories=(0,t.vPA)([]);deleteCategory(a){this.categoryRepository.deleteCategory(a.uuid,()=>{this.loadCategory()})}ngOnInit(){var a=this;return(0,o.A)(function*(){yield a.loadCategory()})()}loadCategory(){this.categoryRepository.getCategory(a=>{const E=a.toSorted((f,C)=>f.name.localeCompare(C.name));this.categories.set(E)})}static \u0275fac=function(E){return new(E||s)(t.rXU(l.P))};static \u0275cmp=t.VBU({type:s,selectors:[["lg-category-list"]],decls:11,vars:7,consts:[[3,"center"],[3,"flat","link","size"],[1,"expand"],[3,"size","link","flat"],[3,"click","size","icon"],["aria-hidden","false","aria-label","Example home icon","fontIcon","close"]],template:function(E,f){1&E&&(t.j41(0,"lg-container")(1,"lg-gap-row",0)(2,"lg-title"),t.EFF(3," Categories "),t.k0s(),t.j41(4,"lg-button",1),t.EFF(5," Add "),t.k0s()(),t.j41(6,"lg-card")(7,"lg-gap-column"),t.Z7z(8,_,7,11,"lg-gap-row",0,t.Vm6,!1,u,2,0,"div"),t.k0s()()()),2&E&&(t.R7$(),t.Y8G("center",!0),t.R7$(3),t.Aen("primary"),t.Y8G("flat",!0)("link","/add-category")("size","small"),t.R7$(4),t.Dyx(f.categories()))},dependencies:[p.K,c.I,y.Q,O.d,n.i,r.H,i.W],styles:["[_nghost-%COMP%]{display:block}"]})}return s})()},4374:(P,d,e)=>{e.d(d,{F:()=>o});var o=function(t){return t.PRODUCTS="productsStore",t.RECIPES="recipesStore",t.CATEGORIES="categoryStore",t}(o||{})},5559:(P,d,e)=>{e.d(d,{Q:()=>c});var o=e(467),t=e(4374),p=e(1007);let c=(()=>{class y{constructor(){}get _uuid(){return Math.random().toString(36).substring(2)+Date.now().toString(36)}openDb(n){return new Promise(function(){var r=(0,o.A)(function*(i,l){const _=yield window.indexedDB.open("lasagna-db",1);_.onerror=u=>{l(u)},_.onsuccess=u=>{n(u.target?.result)},_.onupgradeneeded=u=>{const g=u.target?.result;g.createObjectStore(t.F.PRODUCTS,{keyPath:"uuid",autoIncrement:!0}).createIndex("name","name",{unique:!1}),g.createObjectStore(t.F.RECIPES,{keyPath:"uuid",autoIncrement:!0}).createIndex("name","name",{unique:!1}),g.createObjectStore(t.F.CATEGORIES,{keyPath:"uuid",autoIncrement:!0}).createIndex("name","name",{unique:!1})},i()});return function(i,l){return r.apply(this,arguments)}}())}addData(n,r){this.openDb(i=>{i.transaction(n,"readwrite").objectStore(n).add({...r,uuid:this._uuid})})}replaceData(n,r,i){return this.openDb(l=>{l.transaction(n,"readwrite").objectStore(n).put({...i,uuid:r})})}search(n,r,i,l){this.openDb(_=>{_.transaction(n,"readonly").objectStore(n).index(r).getAll(i).onsuccess=a=>{l(a.target.result)}})}getOne(n,r,i){this.openDb(l=>{l.transaction(n,"readonly").objectStore(n).get(r).onsuccess=s=>{i(s.target.result)}})}static \u0275fac=function(r){return new(r||y)};static \u0275prov=p.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()},7468:(P,d,e)=>{e.d(d,{p:()=>r});var o=e(1985),t=e(3073),p=e(8750),c=e(9326),y=e(4360),O=e(6450),n=e(8496);function r(...i){const l=(0,c.ms)(i),{args:_,keys:u}=(0,t.D)(i),g=new o.c(s=>{const{length:m}=_;if(!m)return void s.complete();const a=new Array(m);let E=m,f=m;for(let C=0;C<m;C++){let D=!1;(0,p.Tg)(_[C]).subscribe((0,y._)(s,M=>{D||(D=!0,f--),a[C]=M},()=>E--,void 0,()=>{(!E||!D)&&(f||s.next(u?(0,n.e)(u,a):a),s.complete())}))}});return l?g.pipe((0,O.I)(l)):g}}}]);