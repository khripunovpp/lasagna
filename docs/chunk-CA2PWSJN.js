import {
  TabDirective,
  TabsComponent
} from "./chunk-GVWCTC7L.js";
import {
  GroupSortService
} from "./chunk-MFMKMC64.js";
import {
  GroupingHeaderDirective,
  GroupingTileDirective,
  GroupingTilesComponent,
  UploadComponent
} from "./chunk-UO3JCBBV.js";
import {
  CardListComponent,
  CardListItemDirective
} from "./chunk-X6OMBN5U.js";
import {
  matchMediaSignal,
  mobileBreakpoint
} from "./chunk-JNKATJIU.js";
import {
  DeleteConfirmationPopoverComponent,
  DeleteConfirmationService
} from "./chunk-PN5PQSS2.js";
import {
  MultiselectComponent,
  SelfStartDirective
} from "./chunk-QCDXA5J3.js";
import {
  NumberInputComponent
} from "./chunk-X57NSDUU.js";
import {
  ControlComponent
} from "./chunk-HUXXML4Q.js";
import {
  InputComponent
} from "./chunk-GIEGUCCS.js";
import "./chunk-WDCOU2SU.js";
import "./chunk-IWKECZQN.js";
import "./chunk-SSW253TQ.js";
import {
  ExpandDirective
} from "./chunk-STX6NIUK.js";
import {
  MatIcon
} from "./chunk-MKQIBRI6.js";
import {
  ContainerComponent
} from "./chunk-WON5FF4H.js";
import {
  FlexRowComponent
} from "./chunk-UFJVMPSL.js";
import "./chunk-R64U7JLD.js";
import {
  CardComponent
} from "./chunk-PJDK3IYM.js";
import {
  TimeAgoPipe
} from "./chunk-FDNQMWQM.js";
import {
  CategoryProductsRepository,
  CategoryRecipesRepository,
  SelectResourcesService,
  TransferDataService
} from "./chunk-WZJWRJIG.js";
import {
  OnboardingService
} from "./chunk-PWIGGAMT.js";
import "./chunk-ETIKHZBE.js";
import "./chunk-IGVRSL6U.js";
import {
  CategoryProduct,
  CategoryRecipe,
  LogCenterService,
  NotificationsService,
  SettingsService,
  categoryProductDTOFromFormValue,
  categoryProductToFormValue,
  categoryRecipeDTOFromFormValue,
  categoryRecipeToFormValue,
  errorHandler
} from "./chunk-JVOZ4YPY.js";
import {
  APP_SERVER_IS_RU
} from "./chunk-GRS3SI4M.js";
import {
  DexieIndexDbService
} from "./chunk-7REZCGNQ.js";
import "./chunk-T5CRNY7R.js";
import "./chunk-5WJUMO7X.js";
import {
  FadeInComponent
} from "./chunk-YUWU6IJY.js";
import {
  TitleComponent
} from "./chunk-T6NLT234.js";
import "./chunk-GGH4TL4E.js";
import {
  DefaultValueAccessor,
  FormControl,
  FormControlName,
  FormGroup,
  FormGroupDirective,
  FormsModule,
  NG_VALUE_ACCESSOR,
  NgControlStatus,
  NgControlStatusGroup,
  NgModel,
  ReactiveFormsModule,
  Validators,
  injectQueryParams,
  takeUntilDestroyed,
  ɵNgNoValidate
} from "./chunk-4GKKNB6P.js";
import {
  ButtonComponent
} from "./chunk-IHCVSUQN.js";
import {
  TranslatePipe,
  TranslateService
} from "./chunk-KKROIGFS.js";
import {
  Router
} from "./chunk-UUUEGOMT.js";
import "./chunk-CE7BC4LB.js";
import "./chunk-IWOUTMKL.js";
import {
  FlexColumnComponent
} from "./chunk-3KXU4X6J.js";
import {
  AsyncPipe,
  CommonModule,
  DatePipe,
  NgClass,
  NgTemplateOutlet
} from "./chunk-KBRICXTE.js";
import {
  Component,
  DestroyRef,
  Directive,
  EventEmitter,
  HostBinding,
  HostListener,
  Inject,
  Injectable,
  Input,
  Output,
  ViewChild,
  ViewEncapsulation,
  computed,
  debounceTime,
  defer,
  effect,
  forwardRef,
  inject,
  input,
  model,
  output,
  setClassMetadata,
  signal,
  ɵsetClassDebugInfo,
  ɵɵNgOnChangesFeature,
  ɵɵProvidersFeature,
  ɵɵadvance,
  ɵɵattribute,
  ɵɵclassMap,
  ɵɵclassProp,
  ɵɵconditional,
  ɵɵconditionalCreate,
  ɵɵdeclareLet,
  ɵɵdefineComponent,
  ɵɵdefineDirective,
  ɵɵdefineInjectable,
  ɵɵdirectiveInject,
  ɵɵelement,
  ɵɵelementContainer,
  ɵɵelementEnd,
  ɵɵelementStart,
  ɵɵgetCurrentView,
  ɵɵinterpolate,
  ɵɵlistener,
  ɵɵloadQuery,
  ɵɵnamespaceSVG,
  ɵɵnextContext,
  ɵɵpipe,
  ɵɵpipeBind1,
  ɵɵpipeBind2,
  ɵɵprojection,
  ɵɵprojectionDef,
  ɵɵproperty,
  ɵɵpureFunction0,
  ɵɵpureFunction1,
  ɵɵqueryRefresh,
  ɵɵreference,
  ɵɵrepeater,
  ɵɵrepeaterCreate,
  ɵɵrepeaterTrackByIndex,
  ɵɵresetView,
  ɵɵrestoreView,
  ɵɵsanitizeHtml,
  ɵɵsanitizeUrl,
  ɵɵstyleMap,
  ɵɵstyleProp,
  ɵɵtemplate,
  ɵɵtemplateRefExtractor,
  ɵɵtext,
  ɵɵtextInterpolate,
  ɵɵtextInterpolate1,
  ɵɵtextInterpolate2,
  ɵɵviewQuery
} from "./chunk-Z5TNFCCP.js";
import "./chunk-PZQLIUCM.js";
import "./chunk-7YWLATDR.js";
import "./chunk-46DXP6YY.js";

// src/app/features/controls/form/radio.component.ts
var _c0 = ["*"];
function RadioComponent_Conditional_4_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "span", 4);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext(2);
    \u0275\u0275property("innerHTML", ctx_r0.customMark(), \u0275\u0275sanitizeHtml);
  }
}
function RadioComponent_Conditional_4_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275namespaceSVG();
    \u0275\u0275elementStart(0, "svg", 5);
    \u0275\u0275element(1, "path", 6);
    \u0275\u0275elementEnd();
  }
}
function RadioComponent_Conditional_4_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275conditionalCreate(0, RadioComponent_Conditional_4_Conditional_0_Template, 1, 1, "span", 4)(1, RadioComponent_Conditional_4_Conditional_1_Template, 2, 0, ":svg:svg", 5);
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275conditional(ctx_r0.customMark() ? 0 : 1);
  }
}
var RadioComponent = class _RadioComponent {
  constructor() {
  }
  modelValue = false;
  customMark = input("", ...ngDevMode ? [{ debugName: "customMark" }] : []);
  name = input("", ...ngDevMode ? [{ debugName: "name" }] : []);
  value = input("", ...ngDevMode ? [{ debugName: "value" }] : []);
  // value = input<string>('');
  size = input("default", ...ngDevMode ? [{ debugName: "size" }] : []);
  markOnHover = input(false, ...ngDevMode ? [{ debugName: "markOnHover" }] : []);
  radio = input(false, ...ngDevMode ? [{ debugName: "radio" }] : []);
  noMark = input(false, ...ngDevMode ? [{ debugName: "noMark" }] : []);
  onCheckboxChanged = output();
  onKeydown(event) {
    event.preventDefault();
    this.onChangeCheckbox(!this.modelValue);
  }
  onChange = () => {
  };
  onTouched = () => {
  };
  writeValue(value) {
    this._change(value);
  }
  registerOnChange(fn) {
    this.onChange = fn;
  }
  registerOnTouched(fn) {
    this.onTouched = fn;
  }
  onChangeCheckbox(value) {
    this._change(value);
  }
  _change(value) {
    if (typeof value === "boolean") {
      this.modelValue = value;
    } else {
      this.modelValue = ["true", "false"].includes(value) ? value === "true" : value;
    }
    this.onChange(this.modelValue);
    this.onCheckboxChanged.emit(this.modelValue);
  }
  static \u0275fac = function RadioComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _RadioComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _RadioComponent, selectors: [["lg-radio"]], hostBindings: function RadioComponent_HostBindings(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275listener("keydown.enter", function RadioComponent_keydown_enter_HostBindingHandler($event) {
        return ctx.onKeydown($event);
      })("keydown.space", function RadioComponent_keydown_space_HostBindingHandler($event) {
        return ctx.onKeydown($event);
      });
    }
  }, inputs: { customMark: [1, "customMark"], name: [1, "name"], value: [1, "value"], size: [1, "size"], markOnHover: [1, "markOnHover"], radio: [1, "radio"], noMark: [1, "noMark"] }, outputs: { onCheckboxChanged: "onCheckboxChanged" }, features: [\u0275\u0275ProvidersFeature([
    {
      provide: NG_VALUE_ACCESSOR,
      useExisting: forwardRef(() => _RadioComponent),
      multi: true
    }
  ])], ngContentSelectors: _c0, decls: 6, vars: 11, consts: [["tabindex", "0", 1, "lg-radio", 3, "ngClass"], [1, "checkbox", 3, "ngModelChange", "checked", "ngModel", "type"], [1, "lg-radio__mark"], [1, "lg-radio__mark-inner"], [3, "innerHTML"], ["xmlns", "http://www.w3.org/2000/svg", "width", "24", "height", "24", "viewBox", "0 0 24 24"], ["fill", "currentColor", "d", "M9.5 16.5l-4.25-4.25 1.4-1.4L9.5 13.7l7.35-7.35 1.4 1.4z"]], template: function RadioComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275projectionDef();
      \u0275\u0275elementStart(0, "label", 0)(1, "input", 1);
      \u0275\u0275listener("ngModelChange", function RadioComponent_Template_input_ngModelChange_1_listener($event) {
        return ctx.onChangeCheckbox($event);
      });
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(2, "span", 2)(3, "span", 3);
      \u0275\u0275conditionalCreate(4, RadioComponent_Conditional_4_Template, 2, 1);
      \u0275\u0275elementEnd()();
      \u0275\u0275projection(5);
      \u0275\u0275elementEnd();
    }
    if (rf & 2) {
      \u0275\u0275property("ngClass", ctx.size());
      \u0275\u0275attribute("for", ctx.name() + "-" + ctx.value());
      \u0275\u0275advance();
      \u0275\u0275property("checked", ctx.modelValue)("ngModel", ctx.modelValue)("type", ctx.radio() ? "radio" : "checkbox");
      \u0275\u0275attribute("id", ctx.name() + "-" + ctx.value())("name", ctx.name())("value", ctx.radio() ? ctx.value() : ctx.modelValue);
      \u0275\u0275advance();
      \u0275\u0275classProp("lg-radio__hoverOnly", ctx.markOnHover());
      \u0275\u0275advance(2);
      \u0275\u0275conditional(!ctx.noMark() ? 4 : -1);
    }
  }, dependencies: [FormsModule, DefaultValueAccessor, NgControlStatus, NgModel, NgClass], styles: ["/* angular:styles/component:scss;855696940d7692094d119f28a47304f42366845cf9b16d1afdc08d9c6e266570;/Users/khripunovpavel/Documents/my/lasagna/lasagna/src/app/features/controls/form/radio.component.ts */\n.lg-radio {\n  display: flex;\n  align-items: center;\n  border-radius: 12px;\n  gap: 8px;\n}\n.lg-radio:focus-within {\n  outline-color: var(--active-color);\n}\n.lg-radio__mark {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 51px;\n  height: 51px;\n  border-radius: 12px;\n  background-color: var(--control-bg);\n  opacity: 0.2;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  border: 1px solid transparent;\n}\n.lg-radio__hoverOnly {\n  background-color: transparent;\n  border-color: var(--text-color);\n}\n.lg-radio__hoverOnly .lg-radio__mark-inner {\n  opacity: 0;\n  transition: all 0.2s ease-in-out;\n}\n@media (hover: hover) {\n  .lg-radio__mark:hover {\n    opacity: 1;\n  }\n  .lg-radio__hoverOnly:hover .lg-radio__mark-inner {\n    opacity: 1;\n  }\n}\n.checkbox {\n  display: none;\n}\n.checkbox:checked + .lg-radio__mark {\n  background-color: var(--control-bg-selected);\n  opacity: 1;\n  font-weight: 700;\n}\n.checkbox:checked + .lg-radio__hoverOnly {\n  border-color: var(--control-bg-selected);\n}\n.checkbox:checked + .lg-radio__hoverOnly .lg-radio__mark-inner {\n  opacity: 1;\n}\n.lg-radio.small .lg-radio__mark {\n  width: 16px;\n  height: 16px;\n  border-radius: 6px;\n}\n/*# sourceMappingURL=radio.component.css.map */\n"], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(RadioComponent, [{
    type: Component,
    args: [{ selector: "lg-radio", standalone: true, template: `
      <label [attr.for]="name()+'-'+value()"
             [ngClass]="size()"
             class="lg-radio"
             tabindex="0">
          <input (ngModelChange)="onChangeCheckbox($event)"
                 [attr.id]="name()+'-'+value()"
                 [attr.name]="name()"
                 [attr.value]="radio() ? value() : modelValue"
                 [checked]="modelValue"
                 [ngModel]="modelValue"
                 [type]="radio() ? 'radio' : 'checkbox'"
                 class="checkbox">
          <span [class.lg-radio__hoverOnly]="markOnHover()"
                class="lg-radio__mark">
              <span class="lg-radio__mark-inner">
                  @if (!noMark()) {
                      @if (customMark()) {
                          <span [innerHTML]="customMark()"></span>
                      } @else {
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                               viewBox="0 0 24 24">
                      <path fill="currentColor"
                            d="M9.5 16.5l-4.25-4.25 1.4-1.4L9.5 13.7l7.35-7.35 1.4 1.4z"/>
                  </svg>
                      }
                  }
              </span>
          </span>

          <ng-content></ng-content>
      </label>
  `, encapsulation: ViewEncapsulation.None, providers: [
      {
        provide: NG_VALUE_ACCESSOR,
        useExisting: forwardRef(() => RadioComponent),
        multi: true
      }
    ], imports: [
      FormsModule,
      NgClass
    ], styles: ["/* angular:styles/component:scss;855696940d7692094d119f28a47304f42366845cf9b16d1afdc08d9c6e266570;/Users/khripunovpavel/Documents/my/lasagna/lasagna/src/app/features/controls/form/radio.component.ts */\n.lg-radio {\n  display: flex;\n  align-items: center;\n  border-radius: 12px;\n  gap: 8px;\n}\n.lg-radio:focus-within {\n  outline-color: var(--active-color);\n}\n.lg-radio__mark {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 51px;\n  height: 51px;\n  border-radius: 12px;\n  background-color: var(--control-bg);\n  opacity: 0.2;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  border: 1px solid transparent;\n}\n.lg-radio__hoverOnly {\n  background-color: transparent;\n  border-color: var(--text-color);\n}\n.lg-radio__hoverOnly .lg-radio__mark-inner {\n  opacity: 0;\n  transition: all 0.2s ease-in-out;\n}\n@media (hover: hover) {\n  .lg-radio__mark:hover {\n    opacity: 1;\n  }\n  .lg-radio__hoverOnly:hover .lg-radio__mark-inner {\n    opacity: 1;\n  }\n}\n.checkbox {\n  display: none;\n}\n.checkbox:checked + .lg-radio__mark {\n  background-color: var(--control-bg-selected);\n  opacity: 1;\n  font-weight: 700;\n}\n.checkbox:checked + .lg-radio__hoverOnly {\n  border-color: var(--control-bg-selected);\n}\n.checkbox:checked + .lg-radio__hoverOnly .lg-radio__mark-inner {\n  opacity: 1;\n}\n.lg-radio.small .lg-radio__mark {\n  width: 16px;\n  height: 16px;\n  border-radius: 6px;\n}\n/*# sourceMappingURL=radio.component.css.map */\n"] }]
  }], () => [], { onKeydown: [{
    type: HostListener,
    args: ["keydown.enter", ["$event"]]
  }, {
    type: HostListener,
    args: ["keydown.space", ["$event"]]
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(RadioComponent, { className: "RadioComponent", filePath: "src/app/features/controls/form/radio.component.ts", lineNumber: 128 });
})();

// src/app/features/controls/form/currency-select.component.ts
var CurrencySelectComponent = class _CurrencySelectComponent {
  _translate;
  constructor(_translate) {
    this._translate = _translate;
  }
  // Язык передаётся через input-сигнал
  lang = input("en", ...ngDevMode ? [{ debugName: "lang" }] : []);
  globalCurrencyList = computed(() => {
    return [
      { code: "USD", name: this._translate.instant("currency.USD") },
      { code: "EUR", name: this._translate.instant("currency.EUR") },
      { code: "RUB", name: this._translate.instant("currency.RUB") },
      { code: "GBP", name: this._translate.instant("currency.GBP") },
      { code: "JPY", name: this._translate.instant("currency.JPY") },
      { code: "CNY", name: this._translate.instant("currency.CNY") },
      { code: "INR", name: this._translate.instant("currency.INR") },
      { code: "KZT", name: this._translate.instant("currency.KZT") },
      { code: "UAH", name: this._translate.instant("currency.UAH") },
      { code: "PLN", name: this._translate.instant("currency.PLN") },
      { code: "TRY", name: this._translate.instant("currency.TRY") },
      { code: "ILS", name: this._translate.instant("currency.ILS") }
    ];
  }, ...ngDevMode ? [{ debugName: "globalCurrencyList" }] : []);
  ruRegion = inject(APP_SERVER_IS_RU);
  ruRegionCurrency = computed(() => {
    return [
      { code: "RUB", name: this._translate.instant("currency.RUB") },
      { code: "USD", name: this._translate.instant("currency.USD") },
      { code: "EUR", name: this._translate.instant("currency.EUR") }
    ];
  }, ...ngDevMode ? [{ debugName: "ruRegionCurrency" }] : []);
  currencyList = computed(() => {
    return this.ruRegion ? this.ruRegionCurrency() : this.globalCurrencyList();
  }, ...ngDevMode ? [{ debugName: "currencyList" }] : []);
  selectedCurrency = model("USD", ...ngDevMode ? [{ debugName: "selectedCurrency" }] : []);
  writeValue(obj) {
    const currencyCode = obj || "USD";
    this.selectedCurrency.set(currencyCode);
    const foundCurrency = this.currencyList().find((c) => c.code === currencyCode);
    if (foundCurrency) {
      this.selectedCurrency.set(foundCurrency.code);
    }
  }
  registerOnChange(fn) {
    this.onChange = fn;
  }
  registerOnTouched(fn) {
    this.onTouched = fn;
  }
  setDisabledState(isDisabled) {
  }
  onCurrencySelected(currency) {
    const currencyCode = typeof currency === "string" ? currency : currency?.code;
    this.selectedCurrency.set(currency);
    this.onChange(currencyCode);
    this.onTouched();
  }
  onChange = (val) => {
  };
  onTouched = () => {
  };
  static \u0275fac = function CurrencySelectComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _CurrencySelectComponent)(\u0275\u0275directiveInject(TranslateService));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _CurrencySelectComponent, selectors: [["lg-currency-select"]], inputs: { lang: [1, "lang"], selectedCurrency: [1, "selectedCurrency"] }, outputs: { selectedCurrency: "selectedCurrencyChange" }, features: [\u0275\u0275ProvidersFeature([
    {
      provide: NG_VALUE_ACCESSOR,
      multi: true,
      useExisting: forwardRef(() => _CurrencySelectComponent)
    }
  ])], decls: 8, vars: 13, consts: [[3, "size"], ["lgExpand", "", 3, "label"], ["compareField", "code", 3, "onSelected", "multi", "ngModel", "placeholder", "staticItems"], [1, "text-small", "text-muted"]], template: function CurrencySelectComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "lg-flex-column", 0)(1, "lg-control", 1);
      \u0275\u0275pipe(2, "translate");
      \u0275\u0275elementStart(3, "lg-multiselect", 2);
      \u0275\u0275pipe(4, "translate");
      \u0275\u0275listener("onSelected", function CurrencySelectComponent_Template_lg_multiselect_onSelected_3_listener($event) {
        return ctx.onCurrencySelected($event);
      });
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(5, "small", 3);
      \u0275\u0275text(6);
      \u0275\u0275pipe(7, "translate");
      \u0275\u0275elementEnd()();
    }
    if (rf & 2) {
      \u0275\u0275property("size", "small");
      \u0275\u0275advance();
      \u0275\u0275property("label", \u0275\u0275pipeBind1(2, 7, "language.settings.currency-title"));
      \u0275\u0275advance(2);
      \u0275\u0275property("multi", false)("ngModel", ctx.selectedCurrency())("placeholder", \u0275\u0275pipeBind1(4, 9, "currency.select-placeholder"))("staticItems", ctx.currencyList());
      \u0275\u0275advance(3);
      \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(7, 11, "language.settings.currency-informer"), " ");
    }
  }, dependencies: [
    ReactiveFormsModule,
    NgControlStatus,
    FormsModule,
    NgModel,
    MultiselectComponent,
    ControlComponent,
    ExpandDirective,
    FlexColumnComponent,
    TranslatePipe
  ], styles: ["\n\n[_nghost-%COMP%] {\n  display: flex;\n  flex: 1;\n}\n/*# sourceMappingURL=currency-select.component.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(CurrencySelectComponent, [{
    type: Component,
    args: [{ selector: "lg-currency-select", standalone: true, imports: [
      ReactiveFormsModule,
      FormsModule,
      TranslatePipe,
      MultiselectComponent,
      ControlComponent,
      ExpandDirective,
      FlexColumnComponent
    ], providers: [
      {
        provide: NG_VALUE_ACCESSOR,
        multi: true,
        useExisting: forwardRef(() => CurrencySelectComponent)
      }
    ], template: `
    <lg-flex-column [size]="'small'">
      <lg-control [label]="'language.settings.currency-title' | translate"
                  lgExpand>
        <lg-multiselect
          (onSelected)="onCurrencySelected($event)"
          [multi]="false"
          [ngModel]="selectedCurrency()"
          [placeholder]="'currency.select-placeholder' | translate"
          [staticItems]="currencyList()"
          compareField="code">
        </lg-multiselect>
      </lg-control>
      <small class="text-small text-muted">
        {{ 'language.settings.currency-informer' | translate }}

      </small>
    </lg-flex-column>
  `, styles: ["/* angular:styles/component:scss;7f0a6256fd6fa1c43aa1d91ee52e564eb10f7cdc031a7f39e2d832e3417dd676;/Users/khripunovpavel/Documents/my/lasagna/lasagna/src/app/features/controls/form/currency-select.component.ts */\n:host {\n  display: flex;\n  flex: 1;\n}\n/*# sourceMappingURL=currency-select.component.css.map */\n"] }]
  }], () => [{ type: TranslateService }], null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(CurrencySelectComponent, { className: "CurrencySelectComponent", filePath: "src/app/features/controls/form/currency-select.component.ts", lineNumber: 62 });
})();

// src/app/features/settings/view/localisation/localisation-settings.component.ts
var _forTrack0 = ($index, $item) => $item.code;
function LocalisationSettingsComponent_For_6_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span");
    \u0275\u0275text(1);
    \u0275\u0275pipe(2, "translate");
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const lang_r1 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(2, 1, lang_r1.name));
  }
}
function LocalisationSettingsComponent_For_6_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "lg-radio", 7);
    \u0275\u0275listener("change", function LocalisationSettingsComponent_For_6_Conditional_2_Template_lg_radio_change_0_listener() {
      \u0275\u0275restoreView(_r2);
      const lang_r1 = \u0275\u0275nextContext().$implicit;
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.changeLang(lang_r1.code));
    });
    \u0275\u0275text(1);
    \u0275\u0275pipe(2, "translate");
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r3 = \u0275\u0275nextContext();
    const lang_r1 = ctx_r3.$implicit;
    const \u0275$index_10_r5 = ctx_r3.$index;
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275property("markOnHover", true)("radio", true)("name", "lang")("value", lang_r1.code)("ngModel", ctx_r2.selectedLangModel()[\u0275$index_10_r5])("size", "small")("noMark", true);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(2, 8, lang_r1.name), " ");
  }
}
function LocalisationSettingsComponent_For_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "lg-flex-row", 4);
    \u0275\u0275conditionalCreate(1, LocalisationSettingsComponent_For_6_Conditional_1_Template, 3, 3, "span")(2, LocalisationSettingsComponent_For_6_Conditional_2_Template, 3, 10, "lg-radio", 6);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275property("center", true)("mobileMode", true)("size", "small");
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r2.onlyOneLanguage() ? 1 : 2);
  }
}
var LocalisationSettingsComponent = class _LocalisationSettingsComponent {
  constructor() {
    this.selectedLangModel.update((oldValue) => {
      return this._settingsService.languages.map(((value) => this._settingsService.settingsSignal()?.getSetting("lang")?.data === value));
    });
    this.currency.set(this._settingsService.settingsSignal()?.getSetting("currency")?.data || "USD");
  }
  currency = model("EUR", ...ngDevMode ? [{ debugName: "currency" }] : []);
  langsMap = {
    "en": "settings.language.english",
    "pt": "settings.language.portuguese",
    "ru": "settings.language.russian"
  };
  selectedLangModel = model([], ...ngDevMode ? [{ debugName: "selectedLangModel" }] : []);
  _notificationsService = inject(NotificationsService);
  _settingsService = inject(SettingsService);
  selectedLang = this._settingsService.lang;
  languages = computed(() => {
    return this._settingsService.languages.map((lang) => ({
      code: lang,
      name: this.langsMap[lang] ? this.langsMap[lang] : lang
    }));
  }, ...ngDevMode ? [{ debugName: "languages" }] : []);
  onlyOneLanguage = computed(() => this.languages().length <= 1, ...ngDevMode ? [{ debugName: "onlyOneLanguage" }] : []);
  async changeLang(lang) {
    try {
      await this._settingsService.changeLang(lang);
      this._notificationsService.success("settings.language.changed");
      window.location.reload();
    } catch (error) {
      this._notificationsService.error(errorHandler(error));
    }
  }
  async changeCurrency(currency) {
    try {
      await this._settingsService.changeCurrency(String(currency).toUpperCase());
      this._notificationsService.success("settings.currency.changed");
      window.location.reload();
    } catch (error) {
      this._notificationsService.error(errorHandler(error));
    }
  }
  static \u0275fac = function LocalisationSettingsComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _LocalisationSettingsComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _LocalisationSettingsComponent, selectors: [["lg-language-settings"]], inputs: { currency: [1, "currency"], selectedLangModel: [1, "selectedLangModel"] }, outputs: { currency: "currencyChange", selectedLangModel: "selectedLangModelChange" }, decls: 8, vars: 6, consts: [["size", "medium"], [3, "label"], [1, "language-settings"], [3, "size"], [3, "center", "mobileMode", "size"], [3, "ngModelChange", "lang", "ngModel"], ["lgSelfStart", "", 3, "markOnHover", "radio", "name", "value", "ngModel", "size", "noMark"], ["lgSelfStart", "", 3, "change", "markOnHover", "radio", "name", "value", "ngModel", "size", "noMark"]], template: function LocalisationSettingsComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "lg-flex-column", 0)(1, "lg-control", 1);
      \u0275\u0275pipe(2, "translate");
      \u0275\u0275elementStart(3, "section", 2)(4, "lg-flex-column", 3);
      \u0275\u0275repeaterCreate(5, LocalisationSettingsComponent_For_6_Template, 3, 4, "lg-flex-row", 4, _forTrack0);
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(7, "lg-currency-select", 5);
      \u0275\u0275listener("ngModelChange", function LocalisationSettingsComponent_Template_lg_currency_select_ngModelChange_7_listener($event) {
        return ctx.changeCurrency($event);
      });
      \u0275\u0275elementEnd()();
    }
    if (rf & 2) {
      \u0275\u0275advance();
      \u0275\u0275property("label", \u0275\u0275pipeBind1(2, 4, "language.settings.language-title"));
      \u0275\u0275advance(3);
      \u0275\u0275property("size", "small");
      \u0275\u0275advance();
      \u0275\u0275repeater(ctx.languages());
      \u0275\u0275advance(2);
      \u0275\u0275property("lang", ctx.selectedLang())("ngModel", ctx.currency());
    }
  }, dependencies: [
    FlexRowComponent,
    FlexColumnComponent,
    FormsModule,
    NgControlStatus,
    NgModel,
    RadioComponent,
    CurrencySelectComponent,
    SelfStartDirective,
    ControlComponent,
    TranslatePipe
  ], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(LocalisationSettingsComponent, [{
    type: Component,
    args: [{ selector: "lg-language-settings", standalone: true, template: `
    <lg-flex-column size="medium">
      <lg-control [label]="'language.settings.language-title' | translate">
        <section class="language-settings">
          <lg-flex-column [size]="'small'">
            @for (lang of languages(); track lang.code; let i = $index) {
              <lg-flex-row [center]="true"
                           [mobileMode]="true"
                           [size]="'small'">
                @if (onlyOneLanguage()) {
                  <span> {{ lang.name | translate }}</span>
                } @else {
                  <lg-radio [markOnHover]="true"
                            [radio]="true"
                            lgSelfStart
                            [name]="'lang'"
                            [value]="lang.code"
                            [ngModel]="selectedLangModel()[i]"
                            (change)="changeLang(lang.code)"
                            [size]="'small'"
                            [noMark]="true">
                    {{ lang.name | translate }}
                  </lg-radio>
                }
              </lg-flex-row>
            }
          </lg-flex-column>
        </section>
      </lg-control>

      <lg-currency-select
        (ngModelChange)="changeCurrency($event)"
        [lang]="selectedLang()"
        [ngModel]="currency()">
      </lg-currency-select>
    </lg-flex-column>
  `, imports: [
      FlexRowComponent,
      FlexColumnComponent,
      FormsModule,
      RadioComponent,
      CurrencySelectComponent,
      TranslatePipe,
      FlexColumnComponent,
      SelfStartDirective,
      ControlComponent
    ] }]
  }], () => [], null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(LocalisationSettingsComponent, { className: "LocalisationSettingsComponent", filePath: "src/app/features/settings/view/localisation/localisation-settings.component.ts", lineNumber: 68 });
})();

// src/app/features/settings/view/backup/backup-settings.component.ts
function BackupSettingsComponent_Conditional_5_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275text(0);
    \u0275\u0275pipe(1, "translate");
    \u0275\u0275pipe(2, "timeAgo");
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275textInterpolate2(" ", \u0275\u0275pipeBind1(1, 2, "backup.last-label"), " ", \u0275\u0275pipeBind1(2, 4, ctx_r0.transferDataService.currenBackupDate), " ");
  }
}
var BackupSettingsComponent = class _BackupSettingsComponent {
  constructor() {
  }
  deleteConfirmationService = inject(DeleteConfirmationService);
  downloadBackupParam = injectQueryParams("download_backup");
  transferDataService = inject(TransferDataService);
  notificationsService = inject(NotificationsService);
  dexieIndexDbService = inject(DexieIndexDbService);
  translate = inject(TranslateService);
  ngAfterViewInit() {
    if (this.downloadBackupParam()) {
      this.onBackup();
    }
  }
  async onBackup() {
    const loader = this.notificationsService.loading(this.translate.instant("backup.creating"));
    try {
      await this.transferDataService.exportAll("json");
      this.notificationsService.success(this.translate.instant("backup.created"));
      localStorage.setItem("lastBackupDate", Date.now().toString());
    } catch (e) {
      this.notificationsService.showJsonErrors([JSON.stringify(e)], this.translate.instant("backup.failed"));
      console.error(e);
    } finally {
      loader.close();
    }
  }
  async onRestore(event) {
    this.deleteConfirmationService.configure({
      message: this.translate.instant("backup.restore-confirmation"),
      confirmText: this.translate.instant("backup.restore-confirmation-confirm"),
      onSuccess: async () => {
        const loader = this.notificationsService.loading(this.translate.instant("backup.restoring"));
        try {
          await this.transferDataService.restoreAllData(event);
          this.notificationsService.success(this.translate.instant("backup.restored"));
        } catch (e) {
          this.notificationsService.showJsonErrors([JSON.stringify(e?.toString()).trim()], this.translate.instant("backup.restore-failed"));
          console.error(e);
        } finally {
          loader.close();
          loader.close();
        }
      }
    });
  }
  async onFlush() {
    this.deleteConfirmationService.configure({
      message: this.translate.instant("backup.flush-confirmation"),
      confirmText: this.translate.instant("backup.flush-confirmation-confirm"),
      onSuccess: async () => {
        try {
          await this.dexieIndexDbService.flushCache();
          this.notificationsService.success(this.translate.instant("backup.flushed"));
          window.location.reload();
        } catch (e) {
          this.notificationsService.showJsonErrors([JSON.stringify(e)], this.translate.instant("backup.flush-failed"));
          console.error(e);
        } finally {
        }
      }
    });
  }
  async onDeleteAll() {
    this.deleteConfirmationService.configure({
      message: this.translate.instant("backup.delete-all.confirmation"),
      confirmText: this.translate.instant("backup.delete-all.confirmation-confirm"),
      onSuccess: async () => {
        try {
          await this.dexieIndexDbService.deleteAllData();
          localStorage.clear();
          this.notificationsService.success(this.translate.instant("all-data.deleted"));
          setTimeout(() => {
            window.location.reload();
          }, 1e3);
        } catch (e) {
          this.notificationsService.showJsonErrors([JSON.stringify(e)], this.translate.instant("all-data.delete-failed"));
          console.error(e);
        } finally {
        }
      }
    });
  }
  static \u0275fac = function BackupSettingsComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _BackupSettingsComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _BackupSettingsComponent, selectors: [["lg-backup-settings"]], features: [\u0275\u0275ProvidersFeature([
    DeleteConfirmationService
  ])], decls: 32, vars: 36, consts: [[3, "center", "mobileMode"], ["lgSelfStart", "", 3, "click"], [2, "--card-bg", "#fcd9b5"], [3, "position"], [1, "text-center"], [3, "click"], [3, "filesSelected", "accept"], [2, "--card-bg", "#e78888"], [1, "text-center", "text-inverse"]], template: function BackupSettingsComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "lg-flex-column")(1, "lg-flex-row", 0)(2, "lg-button", 1);
      \u0275\u0275listener("click", function BackupSettingsComponent_Template_lg_button_click_2_listener() {
        return ctx.onBackup();
      });
      \u0275\u0275text(3);
      \u0275\u0275pipe(4, "translate");
      \u0275\u0275elementEnd();
      \u0275\u0275conditionalCreate(5, BackupSettingsComponent_Conditional_5_Template, 3, 6);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(6, "lg-card", 2)(7, "lg-flex-column", 3)(8, "div", 4);
      \u0275\u0275text(9);
      \u0275\u0275pipe(10, "translate");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(11, "lg-button", 5);
      \u0275\u0275listener("click", function BackupSettingsComponent_Template_lg_button_click_11_listener() {
        return ctx.onFlush();
      });
      \u0275\u0275text(12);
      \u0275\u0275pipe(13, "translate");
      \u0275\u0275elementEnd()()();
      \u0275\u0275elementStart(14, "lg-upload", 6);
      \u0275\u0275listener("filesSelected", function BackupSettingsComponent_Template_lg_upload_filesSelected_14_listener($event) {
        return ctx.onRestore($event);
      });
      \u0275\u0275elementStart(15, "lg-card", 7)(16, "lg-flex-column", 3)(17, "div", 8);
      \u0275\u0275text(18);
      \u0275\u0275pipe(19, "translate");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(20, "lg-button");
      \u0275\u0275text(21);
      \u0275\u0275pipe(22, "translate");
      \u0275\u0275elementEnd()()()();
      \u0275\u0275elementStart(23, "lg-card", 7)(24, "lg-flex-column", 3)(25, "div", 8);
      \u0275\u0275text(26);
      \u0275\u0275pipe(27, "translate");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(28, "lg-button", 5);
      \u0275\u0275listener("click", function BackupSettingsComponent_Template_lg_button_click_28_listener() {
        return ctx.onDeleteAll();
      });
      \u0275\u0275text(29);
      \u0275\u0275pipe(30, "translate");
      \u0275\u0275elementEnd()()()();
      \u0275\u0275element(31, "lg-delete-confirmation-popover");
    }
    if (rf & 2) {
      \u0275\u0275advance();
      \u0275\u0275property("center", true)("mobileMode", true);
      \u0275\u0275advance();
      \u0275\u0275styleMap("success");
      \u0275\u0275advance();
      \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(4, 22, "backup.make-btn"), " ");
      \u0275\u0275advance(2);
      \u0275\u0275conditional(ctx.transferDataService.currenBackupDate ? 5 : -1);
      \u0275\u0275advance(2);
      \u0275\u0275property("position", "center");
      \u0275\u0275advance(2);
      \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(10, 24, "backup.flush-informer"), " ");
      \u0275\u0275advance(2);
      \u0275\u0275styleMap("success");
      \u0275\u0275advance();
      \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(13, 26, "backup.flush-btn"), " ");
      \u0275\u0275advance(2);
      \u0275\u0275property("accept", ".json");
      \u0275\u0275advance(2);
      \u0275\u0275property("position", "center");
      \u0275\u0275advance(2);
      \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(19, 28, "backup.restore-informer"), " ");
      \u0275\u0275advance(2);
      \u0275\u0275styleMap("danger");
      \u0275\u0275advance();
      \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(22, 30, "backup.restore-btn"), " ");
      \u0275\u0275advance(3);
      \u0275\u0275property("position", "center");
      \u0275\u0275advance(2);
      \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(27, 32, "backup.delete-all.informer"), " ");
      \u0275\u0275advance(2);
      \u0275\u0275styleMap("danger");
      \u0275\u0275advance();
      \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(30, 34, "backup.delete-all.btn"), " ");
    }
  }, dependencies: [
    CardComponent,
    FlexRowComponent,
    FlexColumnComponent,
    FormsModule,
    ButtonComponent,
    UploadComponent,
    SelfStartDirective,
    DeleteConfirmationPopoverComponent,
    TimeAgoPipe,
    TranslatePipe
  ], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(BackupSettingsComponent, [{
    type: Component,
    args: [{ selector: "lg-backup-settings", standalone: true, template: `
    <lg-flex-column>
      <lg-flex-row [center]="true" [mobileMode]="true">
        <lg-button (click)="onBackup()"
                   [style]="'success'"
                   lgSelfStart>
          {{ 'backup.make-btn'|translate }}
        </lg-button>

        @if (transferDataService.currenBackupDate) {
          {{ 'backup.last-label'|translate }} {{ transferDataService.currenBackupDate | timeAgo }}
        }
      </lg-flex-row>

      <lg-card style="--card-bg:#fcd9b5">
        <lg-flex-column [position]="'center'">
          <div class="text-center">
            {{ 'backup.flush-informer'|translate }}
          </div>

          <lg-button (click)="onFlush()" [style]="'success'">
            {{ 'backup.flush-btn'|translate }}
          </lg-button>
        </lg-flex-column>
      </lg-card>

      <lg-upload (filesSelected)="onRestore($event)" [accept]="'.json'">
        <lg-card style="--card-bg:#e78888">
          <lg-flex-column [position]="'center'">
            <div class="text-center text-inverse">
              {{ 'backup.restore-informer'|translate }}
            </div>

            <lg-button [style]="'danger'">
              {{ 'backup.restore-btn'|translate }}
            </lg-button>
          </lg-flex-column>
        </lg-card>
      </lg-upload>

      <lg-card style="--card-bg:#e78888">
        <lg-flex-column [position]="'center'">
          <div class="text-center text-inverse">
            {{ 'backup.delete-all.informer'|translate }}
          </div>

          <lg-button (click)="onDeleteAll()" [style]="'danger'">
            {{ 'backup.delete-all.btn'|translate }}
          </lg-button>
        </lg-flex-column>
      </lg-card>
    </lg-flex-column>

    <lg-delete-confirmation-popover></lg-delete-confirmation-popover>
  `, imports: [
      CardComponent,
      FlexRowComponent,
      FlexColumnComponent,
      FormsModule,
      TimeAgoPipe,
      ButtonComponent,
      UploadComponent,
      TranslatePipe,
      SelfStartDirective,
      DeleteConfirmationPopoverComponent
    ], providers: [
      DeleteConfirmationService
    ] }]
  }], () => [], null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(BackupSettingsComponent, { className: "BackupSettingsComponent", filePath: "src/app/features/settings/view/backup/backup-settings.component.ts", lineNumber: 96 });
})();

// src/app/features/controls/form/file-input.component.ts
var _c02 = ["fileInput"];
var _c1 = [[["after"]]];
var _c2 = ["after"];
function FileInputComponent_Conditional_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "span", 5);
    \u0275\u0275text(1);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r2 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275textInterpolate(ctx_r2.errorMessage());
  }
}
var FileInputComponent = class _FileInputComponent {
  translateService = inject(TranslateService);
  fileInput;
  accept = input("", ...ngDevMode ? [{ debugName: "accept" }] : []);
  // image/*, .pdf и т.п.
  multiple = input(false, ...ngDevMode ? [{ debugName: "multiple" }] : []);
  disable = input(false, ...ngDevMode ? [{ debugName: "disable" }] : []);
  theme = input("default", ...ngDevMode ? [{ debugName: "theme" }] : []);
  base64Mode = input(false, ...ngDevMode ? [{ debugName: "base64Mode" }] : []);
  buttonStyle = input("default", ...ngDevMode ? [{ debugName: "buttonStyle" }] : []);
  // стиль lg-button
  buttonText = input("file-input.upload-file", ...ngDevMode ? [{ debugName: "buttonText" }] : []);
  // button text translation key
  fileSizeLimitMb = input(2, ...ngDevMode ? [{ debugName: "fileSizeLimitMb" }] : []);
  // Лимит по умолчанию: 2MB
  noAfter = signal(false, ...ngDevMode ? [{ debugName: "noAfter" }] : []);
  errorMessage = signal(null, ...ngDevMode ? [{ debugName: "errorMessage" }] : []);
  writeValue(value) {
  }
  registerOnChange(fn) {
    this.onChange = fn;
  }
  registerOnTouched(fn) {
    this.onTouched = fn;
  }
  async onFileChange(event) {
    const inputEl = event.target;
    const files = inputEl.files;
    if (!files || files.length === 0) {
      this.onChange(null);
      return;
    }
    const overLimitFiles = Array.from(files).filter((file) => file.size > this.fileSizeLimitMb() * 1024 * 1024);
    if (overLimitFiles.length > 0) {
      this.errorMessage.set(this.translateService.instant("errors.file-input.size-exceeded", { limit: this.fileSizeLimitMb() }));
      this.onChange(null);
      return;
    } else {
      this.errorMessage.set(null);
    }
    let result;
    if (this.base64Mode()) {
      const base64List = await Promise.all(Array.from(files).map((file) => this.readFileAsBase64(file)));
      result = this.multiple() ? base64List : base64List[0];
    } else {
      result = this.multiple() ? Array.from(files) : files[0];
    }
    this.onChange(result);
    this.onTouched();
  }
  ngAfterViewInit() {
    const after = this.fileInput?.nativeElement.nextElementSibling?.nextElementSibling;
    if (after?.childElementCount === 0) {
      this.noAfter.set(true);
    }
  }
  focus() {
    this.fileInput?.nativeElement.focus();
  }
  onChange = () => {
  };
  onTouched = () => {
  };
  readFileAsBase64(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.onload = () => resolve(reader.result);
      reader.onerror = () => reject(reader.error);
      reader.readAsDataURL(file);
    });
  }
  static \u0275fac = function FileInputComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _FileInputComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _FileInputComponent, selectors: [["lg-file-input"]], viewQuery: function FileInputComponent_Query(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275viewQuery(_c02, 7);
    }
    if (rf & 2) {
      let _t;
      \u0275\u0275queryRefresh(_t = \u0275\u0275loadQuery()) && (ctx.fileInput = _t.first);
    }
  }, inputs: { accept: [1, "accept"], multiple: [1, "multiple"], disable: [1, "disable"], theme: [1, "theme"], base64Mode: [1, "base64Mode"], buttonStyle: [1, "buttonStyle"], buttonText: [1, "buttonText"], fileSizeLimitMb: [1, "fileSizeLimitMb"] }, features: [\u0275\u0275ProvidersFeature([{
    provide: NG_VALUE_ACCESSOR,
    useExisting: forwardRef(() => _FileInputComponent),
    multi: true
  }])], ngContentSelectors: _c2, decls: 9, vars: 15, consts: [["fileInput", ""], [1, "lg-file-input"], ["type", "file", 1, "hidden-input", 3, "change", "disabled"], ["size", "small", 3, "onClick", "disabled", "outlined"], [1, "lg-file-input__after"], [1, "error-message"]], template: function FileInputComponent_Template(rf, ctx) {
    if (rf & 1) {
      const _r1 = \u0275\u0275getCurrentView();
      \u0275\u0275projectionDef(_c1);
      \u0275\u0275elementStart(0, "div", 1)(1, "input", 2, 0);
      \u0275\u0275listener("change", function FileInputComponent_Template_input_change_1_listener($event) {
        \u0275\u0275restoreView(_r1);
        return \u0275\u0275resetView(ctx.onFileChange($event));
      });
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(3, "lg-button", 3);
      \u0275\u0275listener("onClick", function FileInputComponent_Template_lg_button_onClick_3_listener() {
        \u0275\u0275restoreView(_r1);
        const fileInput_r2 = \u0275\u0275reference(2);
        return \u0275\u0275resetView(fileInput_r2.click());
      });
      \u0275\u0275text(4);
      \u0275\u0275pipe(5, "translate");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(6, "div", 4);
      \u0275\u0275projection(7);
      \u0275\u0275conditionalCreate(8, FileInputComponent_Conditional_8_Template, 2, 1, "span", 5);
      \u0275\u0275elementEnd()();
    }
    if (rf & 2) {
      \u0275\u0275classProp("contrast", ctx.theme() === "contrast");
      \u0275\u0275advance();
      \u0275\u0275property("disabled", ctx.disable());
      \u0275\u0275attribute("accept", ctx.accept())("multiple", ctx.multiple() ? "" : null);
      \u0275\u0275advance(2);
      \u0275\u0275styleMap(ctx.buttonStyle());
      \u0275\u0275property("disabled", ctx.disable())("outlined", true);
      \u0275\u0275advance();
      \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(5, 13, ctx.buttonText()), " ");
      \u0275\u0275advance(2);
      \u0275\u0275styleProp("display", ctx.noAfter() && !ctx.errorMessage() ? "none" : "flex");
      \u0275\u0275advance(2);
      \u0275\u0275conditional(ctx.errorMessage() ? 8 : -1);
    }
  }, dependencies: [ButtonComponent, TranslatePipe], styles: ["\n\n[_nghost-%COMP%] {\n  display: flex;\n  flex: 1;\n}\n.lg-file-input[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 16px;\n  flex: 1;\n}\n.lg-file-input__after[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 0 16px;\n  white-space: nowrap;\n  flex: 0 0 auto;\n}\n.hidden-input[_ngcontent-%COMP%] {\n  display: none;\n}\n.error-message[_ngcontent-%COMP%] {\n  color: #d32f2f;\n  font-size: 13px;\n  white-space: nowrap;\n}\n/*# sourceMappingURL=file-input.component.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(FileInputComponent, [{
    type: Component,
    args: [{ selector: "lg-file-input", standalone: true, imports: [ButtonComponent, TranslatePipe], template: `
      <div [class.contrast]="theme() === 'contrast'" class="lg-file-input">
        <input #fileInput
          (change)="onFileChange($event)"
          [attr.accept]="accept()"
          [attr.multiple]="multiple() ? '' : null"
          [disabled]="disable()"
          class="hidden-input"
          type="file">

        <lg-button (onClick)="fileInput.click()"
          [disabled]="disable()"
          [style]="buttonStyle()"
          [outlined]="true"
          size="small">
          {{ buttonText() | translate }}
        </lg-button>

        <div [style.display]="noAfter() && !errorMessage() ? 'none' : 'flex'" class="lg-file-input__after">
          <ng-content select="after"></ng-content>
          @if (errorMessage()) {
            <span class="error-message">{{ errorMessage() }}</span>
          }
        </div>
      </div>
      `, providers: [{
      provide: NG_VALUE_ACCESSOR,
      useExisting: forwardRef(() => FileInputComponent),
      multi: true
    }], styles: ["/* angular:styles/component:scss;979fcae3008e4ac4099b3be2b8bc473d070148625fee500472447fef7e46b64f;/Users/khripunovpavel/Documents/my/lasagna/lasagna/src/app/features/controls/form/file-input.component.ts */\n:host {\n  display: flex;\n  flex: 1;\n}\n.lg-file-input {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 16px;\n  flex: 1;\n}\n.lg-file-input__after {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 0 16px;\n  white-space: nowrap;\n  flex: 0 0 auto;\n}\n.hidden-input {\n  display: none;\n}\n.error-message {\n  color: #d32f2f;\n  font-size: 13px;\n  white-space: nowrap;\n}\n/*# sourceMappingURL=file-input.component.css.map */\n"] }]
  }], null, { fileInput: [{
    type: ViewChild,
    args: ["fileInput", { static: true }]
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(FileInputComponent, { className: "FileInputComponent", filePath: "src/app/features/controls/form/file-input.component.ts", lineNumber: 76 });
})();

// src/app/features/settings/view/finance-settings/invoices-settings/invoices-settings.component.ts
function InvoicesSettingsComponent_Conditional_3_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 2);
    \u0275\u0275element(1, "img", 6);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r0 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("src", ctx_r0.logoBase64(), \u0275\u0275sanitizeUrl);
  }
}
var InvoicesSettingsComponent = class _InvoicesSettingsComponent {
  _settingsService;
  constructor(_settingsService) {
    this._settingsService = _settingsService;
  }
  prefix;
  form = new FormGroup({
    prefix: new FormControl(null),
    precision: new FormControl(null),
    logo: new FormControl(null)
  });
  logoBase64 = signal(null, ...ngDevMode ? [{ debugName: "logoBase64" }] : []);
  destroyRef = inject(DestroyRef);
  ngAfterViewInit() {
    const precisions = this._settingsService.getInvoicePrecision();
    this.form.patchValue({
      prefix: this._settingsService.getInvoicePrefix(),
      precision: precisions[0] ?? 2
    });
    this.logoBase64.set(this._settingsService.getInvoiceLogo() ?? null);
    this.form.valueChanges.pipe(takeUntilDestroyed(this.destroyRef), debounceTime(500)).subscribe(async (value) => {
      if (value.logo) {
        this.logoBase64.set(await this.resizeAndCropImageToBase64(value.logo));
      }
      this._settingsService.setInvoiceLogo(this.logoBase64());
      this._settingsService.setInvoicePrefix(value.prefix ?? "");
      this._settingsService.setInvoicePrecisions(value.precision ?? 2);
      await this._settingsService.saveSettings();
    });
  }
  resizeAndCropImageToBase64(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.onload = () => {
        const img = new Image();
        img.onload = () => {
          const canvas = document.createElement("canvas");
          const ctx = canvas.getContext("2d");
          canvas.width = 200;
          canvas.height = 200;
          const imgWidth = img.width;
          const imgHeight = img.height;
          const x = (canvas.width - imgWidth) / 2;
          const y = (canvas.height - imgHeight) / 2;
          ctx.drawImage(img, x, y);
          const base64 = canvas.toDataURL("image/png");
          document.body.appendChild(canvas);
          resolve(base64);
        };
        img.onerror = reject;
        img.src = reader.result;
      };
      reader.onerror = reject;
      reader.readAsDataURL(file);
    });
  }
  static \u0275fac = function InvoicesSettingsComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _InvoicesSettingsComponent)(\u0275\u0275directiveInject(SettingsService));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _InvoicesSettingsComponent, selectors: [["lg-invoices-settings"]], decls: 13, vars: 17, consts: [["size", "medium", 3, "formGroup"], [3, "label"], [1, "lg-invoices-settings__logo"], ["formControlName", "logo", 3, "buttonStyle", "buttonText"], ["formControlName", "prefix"], ["formControlName", "precision"], ["alt", "Logo", 3, "src"]], template: function InvoicesSettingsComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "lg-flex-column", 0)(1, "lg-control", 1);
      \u0275\u0275pipe(2, "translate");
      \u0275\u0275conditionalCreate(3, InvoicesSettingsComponent_Conditional_3_Template, 2, 1, "div", 2);
      \u0275\u0275element(4, "lg-file-input", 3);
      \u0275\u0275pipe(5, "translate");
      \u0275\u0275pipe(6, "translate");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(7, "lg-control", 1);
      \u0275\u0275pipe(8, "translate");
      \u0275\u0275element(9, "lg-input", 4);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(10, "lg-control", 1);
      \u0275\u0275pipe(11, "translate");
      \u0275\u0275element(12, "lg-number-input", 5);
      \u0275\u0275elementEnd()();
    }
    if (rf & 2) {
      \u0275\u0275property("formGroup", ctx.form);
      \u0275\u0275advance();
      \u0275\u0275property("label", \u0275\u0275pipeBind1(2, 7, "settings.invoices.logo"));
      \u0275\u0275advance(2);
      \u0275\u0275conditional(ctx.logoBase64() ? 3 : -1);
      \u0275\u0275advance();
      \u0275\u0275property("buttonStyle", ctx.logoBase64() ? "danger" : "default")("buttonText", ctx.logoBase64() ? \u0275\u0275pipeBind1(5, 9, "settings.invoices.replace-logo") : \u0275\u0275pipeBind1(6, 11, "settings.invoices.upload-logo"));
      \u0275\u0275advance(3);
      \u0275\u0275property("label", \u0275\u0275pipeBind1(8, 13, "settings.invoices.prefix"));
      \u0275\u0275advance(3);
      \u0275\u0275property("label", \u0275\u0275pipeBind1(11, 15, "settings.invoices.precision"));
    }
  }, dependencies: [
    FlexColumnComponent,
    InputComponent,
    ReactiveFormsModule,
    NgControlStatus,
    NgControlStatusGroup,
    FormGroupDirective,
    FormControlName,
    NumberInputComponent,
    FileInputComponent,
    ControlComponent,
    TranslatePipe
  ], styles: ["\n\n.lg-invoices-settings__logo[_ngcontent-%COMP%] {\n  width: 100%;\n  max-width: 200px;\n  height: auto;\n  border-radius: 12px;\n  object-fit: cover;\n  background-color: var(--control-bg);\n  padding: 15px;\n}\n.lg-invoices-settings__logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 100%;\n  height: auto;\n}\n/*# sourceMappingURL=invoices-settings.component.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(InvoicesSettingsComponent, [{
    type: Component,
    args: [{ selector: "lg-invoices-settings", standalone: true, template: `
    <lg-flex-column [formGroup]="form"
                    size="medium">
      <lg-control [label]=" 'settings.invoices.logo' | translate">
        @if (logoBase64()) {
          <div class="lg-invoices-settings__logo">
            <img [src]="logoBase64()"
                 alt="Logo">
          </div>
        }

        <lg-file-input [buttonStyle]="logoBase64() ? 'danger' : 'default'"
                       [buttonText]="logoBase64() ? ('settings.invoices.replace-logo' | translate) : ('settings.invoices.upload-logo' | translate)"
                       formControlName="logo"></lg-file-input>
      </lg-control>

      <lg-control [label]=" 'settings.invoices.prefix' | translate">
        <lg-input formControlName="prefix"></lg-input>
      </lg-control>

      <lg-control [label]=" 'settings.invoices.precision' | translate">
        <lg-number-input formControlName="precision"></lg-number-input>
      </lg-control>
    </lg-flex-column>
  `, imports: [
      FlexColumnComponent,
      InputComponent,
      ReactiveFormsModule,
      NumberInputComponent,
      FileInputComponent,
      TranslatePipe,
      ControlComponent
    ], styles: ["/* angular:styles/component:scss;e0d8895451349280e2981e26c8683aa89ea24fd1dd236064a375bce82ab76a62;/Users/khripunovpavel/Documents/my/lasagna/lasagna/src/app/features/settings/view/finance-settings/invoices-settings/invoices-settings.component.ts */\n.lg-invoices-settings__logo {\n  width: 100%;\n  max-width: 200px;\n  height: auto;\n  border-radius: 12px;\n  object-fit: cover;\n  background-color: var(--control-bg);\n  padding: 15px;\n}\n.lg-invoices-settings__logo img {\n  width: 100%;\n  height: auto;\n}\n/*# sourceMappingURL=invoices-settings.component.css.map */\n"] }]
  }], () => [{ type: SettingsService }], null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(InvoicesSettingsComponent, { className: "InvoicesSettingsComponent", filePath: "src/app/features/settings/view/finance-settings/invoices-settings/invoices-settings.component.ts", lineNumber: 71 });
})();

// src/app/features/settings/service/providers/logs.grouping.ts
var LogsByMinuteGroupingStrategy = class {
  groupBy(item) {
    const date = new Date(item.timestamp);
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    const hours = String(date.getHours()).padStart(2, "0");
    const minutes = String(date.getMinutes()).padStart(2, "0");
    return `${year}-${month}-${day} ${hours}:${minutes}`;
  }
  innerSort(a, b, direction = "desc", field = "timestamp") {
    const dateA = new Date(a.timestamp);
    const dateB = new Date(b.timestamp);
    if (direction === "asc") {
      return dateA.getTime() - dateB.getTime();
    } else {
      return dateB.getTime() - dateA.getTime();
    }
  }
  groupingSort(a, b, direction = "desc") {
    const dateA = new Date(a);
    const dateB = new Date(b);
    if (direction === "asc") {
      return dateA.getTime() - dateB.getTime();
    } else {
      return dateB.getTime() - dateA.getTime();
    }
  }
};

// src/app/shared/view/ui/pagination/pagination.component.ts
function PaginationComponent_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "div", 0)(1, "lg-flex-row", 1)(2, "lg-button", 2);
    \u0275\u0275listener("click", function PaginationComponent_Conditional_0_Template_lg_button_click_2_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.previousPage());
    });
    \u0275\u0275elementStart(3, "span", 3);
    \u0275\u0275text(4, "\u25C0");
    \u0275\u0275elementEnd();
    \u0275\u0275text(5);
    \u0275\u0275pipe(6, "translate");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(7, "div", 4)(8, "span", 5);
    \u0275\u0275text(9);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(10, "span", 6);
    \u0275\u0275text(11, "/");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "span", 7);
    \u0275\u0275text(13);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(14, "lg-button", 2);
    \u0275\u0275listener("click", function PaginationComponent_Conditional_0_Template_lg_button_click_14_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.nextPage());
    });
    \u0275\u0275text(15);
    \u0275\u0275pipe(16, "translate");
    \u0275\u0275elementStart(17, "span", 3);
    \u0275\u0275text(18, "\u25B6");
    \u0275\u0275elementEnd()()()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275advance();
    \u0275\u0275property("center", true);
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r1.currentPage() === 1);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(6, 7, "pagination.previous"), " ");
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r1.currentPage());
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r1.totalPages());
    \u0275\u0275advance();
    \u0275\u0275property("disabled", ctx_r1.currentPage() === ctx_r1.totalPages());
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(16, 9, "pagination.next"), " ");
  }
}
var PaginationComponent = class _PaginationComponent {
  config;
  pageChange = new EventEmitter();
  currentPage = signal(1, ...ngDevMode ? [{ debugName: "currentPage" }] : []);
  totalPages = signal(1, ...ngDevMode ? [{ debugName: "totalPages" }] : []);
  hidden = computed(() => this.totalPages() ? null : true, ...ngDevMode ? [{ debugName: "hidden" }] : []);
  totalItems = signal(0, ...ngDevMode ? [{ debugName: "totalItems" }] : []);
  itemsPerPage = signal(20, ...ngDevMode ? [{ debugName: "itemsPerPage" }] : []);
  ngOnInit() {
    this.updatePagination();
  }
  ngOnChanges(changes) {
    if (changes["config"]) {
      this.updatePagination();
    }
  }
  updatePagination() {
    if (!this.config)
      return;
    this.currentPage.set(this.config.currentPage);
    this.totalItems.set(this.config.totalItems);
    this.itemsPerPage.set(this.config.itemsPerPage);
    this.totalPages.set(Math.ceil(this.config.totalItems / this.config.itemsPerPage));
  }
  previousPage() {
    if (this.currentPage() > 1) {
      const newPage = this.currentPage() - 1;
      this.currentPage.set(newPage);
      this.pageChange.emit(newPage);
    }
  }
  nextPage() {
    if (this.currentPage() < this.totalPages()) {
      const newPage = this.currentPage() + 1;
      this.currentPage.set(newPage);
      this.pageChange.emit(newPage);
    }
  }
  static \u0275fac = function PaginationComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _PaginationComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _PaginationComponent, selectors: [["lg-pagination"]], hostVars: 1, hostBindings: function PaginationComponent_HostBindings(rf, ctx) {
    if (rf & 2) {
      \u0275\u0275attribute("hidden", ctx.hidden);
    }
  }, inputs: { config: "config" }, outputs: { pageChange: "pageChange" }, features: [\u0275\u0275NgOnChangesFeature], decls: 1, vars: 1, consts: [[1, "pagination"], [3, "center"], [1, "pagination__btn", 3, "click", "disabled"], [1, "pagination__icon"], [1, "pagination__info"], [1, "pagination__current"], [1, "pagination__separator"], [1, "pagination__total"]], template: function PaginationComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275conditionalCreate(0, PaginationComponent_Conditional_0_Template, 19, 11, "div", 0);
    }
    if (rf & 2) {
      \u0275\u0275conditional(ctx.totalPages() > 1 ? 0 : -1);
    }
  }, dependencies: [
    ButtonComponent,
    FlexRowComponent,
    TranslatePipe
  ], styles: ["\n\n.pagination[_ngcontent-%COMP%] {\n  margin-top: var(--spacing-lg);\n  padding-top: var(--spacing-lg);\n  border-top: 1px solid var(--color-border);\n}\n.pagination__info[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n  padding: var(--spacing-sm) var(--spacing-lg);\n  background: var(--color-background-secondary);\n  border-radius: var(--border-radius-lg);\n  font-weight: 600;\n}\n.pagination__current[_ngcontent-%COMP%] {\n  color: var(--color-primary);\n}\n.pagination__separator[_ngcontent-%COMP%] {\n  color: var(--color-text-muted);\n}\n.pagination__total[_ngcontent-%COMP%] {\n  color: var(--color-text);\n}\n.pagination__btn[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n  padding: var(--spacing-sm) var(--spacing-lg);\n  border-radius: var(--border-radius-lg);\n  font-weight: 600;\n  transition: all 0.3s ease;\n}\n.pagination__icon[_ngcontent-%COMP%] {\n  font-size: var(--font-size-sm);\n}\n/*# sourceMappingURL=pagination.component.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(PaginationComponent, [{
    type: Component,
    args: [{ selector: "lg-pagination", standalone: true, imports: [
      ButtonComponent,
      FlexRowComponent,
      TranslatePipe
    ], template: `
    @if (totalPages() > 1) {
      <div class="pagination">
        <lg-flex-row [center]="true">
          <lg-button
            (click)="previousPage()"
            [disabled]="currentPage() === 1"
            class="pagination__btn">
            <span class="pagination__icon">\u25C0</span>
            {{ 'pagination.previous' | translate }}
          </lg-button>

          <div class="pagination__info">
            <span class="pagination__current">{{ currentPage() }}</span>
            <span class="pagination__separator">/</span>
            <span class="pagination__total">{{ totalPages() }}</span>
          </div>

          <lg-button
            (click)="nextPage()"
            [disabled]="currentPage() === totalPages()"
            class="pagination__btn">
            {{ 'pagination.next' | translate }}
            <span class="pagination__icon">\u25B6</span>
          </lg-button>
        </lg-flex-row>
      </div>
    }
  `, styles: ["/* angular:styles/component:scss;cb73350e811c2b4594eaa7878eee732e1765b29f859ed183a03544ee52df486d;/Users/khripunovpavel/Documents/my/lasagna/lasagna/src/app/shared/view/ui/pagination/pagination.component.ts */\n.pagination {\n  margin-top: var(--spacing-lg);\n  padding-top: var(--spacing-lg);\n  border-top: 1px solid var(--color-border);\n}\n.pagination__info {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n  padding: var(--spacing-sm) var(--spacing-lg);\n  background: var(--color-background-secondary);\n  border-radius: var(--border-radius-lg);\n  font-weight: 600;\n}\n.pagination__current {\n  color: var(--color-primary);\n}\n.pagination__separator {\n  color: var(--color-text-muted);\n}\n.pagination__total {\n  color: var(--color-text);\n}\n.pagination__btn {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n  padding: var(--spacing-sm) var(--spacing-lg);\n  border-radius: var(--border-radius-lg);\n  font-weight: 600;\n  transition: all 0.3s ease;\n}\n.pagination__icon {\n  font-size: var(--font-size-sm);\n}\n/*# sourceMappingURL=pagination.component.css.map */\n"] }]
  }], null, { config: [{
    type: Input
  }], pageChange: [{
    type: Output
  }], hidden: [{
    type: HostBinding,
    args: ["attr.hidden"]
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(PaginationComponent, { className: "PaginationComponent", filePath: "src/app/shared/view/ui/pagination/pagination.component.ts", lineNumber: 105 });
})();

// src/app/shared/service/services/pagination.service.ts
var PaginationService = class _PaginationService {
  _items = signal([], ...ngDevMode ? [{ debugName: "_items" }] : []);
  _currentPage = signal(1, ...ngDevMode ? [{ debugName: "_currentPage" }] : []);
  _itemsPerPage = signal(20, ...ngDevMode ? [{ debugName: "_itemsPerPage" }] : []);
  // Computed values
  totalItems = computed(() => this._items().length, ...ngDevMode ? [{ debugName: "totalItems" }] : []);
  totalPages = computed(() => Math.ceil(this.totalItems() / this._itemsPerPage()), ...ngDevMode ? [{ debugName: "totalPages" }] : []);
  currentPage = computed(() => this._currentPage(), ...ngDevMode ? [{ debugName: "currentPage" }] : []);
  itemsPerPage = computed(() => this._itemsPerPage(), ...ngDevMode ? [{ debugName: "itemsPerPage" }] : []);
  paginatedItems = computed(() => {
    const startIndex = (this.currentPage() - 1) * this.itemsPerPage();
    const endIndex = startIndex + this.itemsPerPage();
    return this._items().slice(startIndex, endIndex);
  }, ...ngDevMode ? [{ debugName: "paginatedItems" }] : []);
  config = computed(() => ({
    itemsPerPage: this.itemsPerPage(),
    currentPage: this.currentPage(),
    totalItems: this.totalItems()
  }), ...ngDevMode ? [{ debugName: "config" }] : []);
  /**
   * Устанавливает массив элементов для пагинации
   */
  setItems(items) {
    this._items.set(items);
    this.resetToFirstPage();
  }
  /**
   * Устанавливает количество элементов на странице
   */
  setItemsPerPage(itemsPerPage) {
    this._itemsPerPage.set(itemsPerPage);
    this.resetToFirstPage();
  }
  /**
   * Переходит на указанную страницу
   */
  goToPage(page) {
    if (page >= 1 && page <= this.totalPages()) {
      this._currentPage.set(page);
    }
  }
  /**
   * Переходит на следующую страницу
   */
  nextPage() {
    if (this.currentPage() < this.totalPages()) {
      this._currentPage.set(this.currentPage() + 1);
    }
  }
  /**
   * Переходит на предыдущую страницу
   */
  previousPage() {
    if (this.currentPage() > 1) {
      this._currentPage.set(this.currentPage() - 1);
    }
  }
  /**
   * Переходит на первую страницу
   */
  firstPage() {
    this._currentPage.set(1);
  }
  /**
   * Переходит на последнюю страницу
   */
  lastPage() {
    this._currentPage.set(this.totalPages());
  }
  /**
   * Сбрасывает на первую страницу
   */
  resetToFirstPage() {
    this._currentPage.set(1);
  }
  /**
   * Проверяет, есть ли следующая страница
   */
  hasNextPage() {
    return this.currentPage() < this.totalPages();
  }
  /**
   * Проверяет, есть ли предыдущая страница
   */
  hasPreviousPage() {
    return this.currentPage() > 1;
  }
  /**
   * Получает информацию о текущем диапазоне элементов
   */
  getRangeInfo() {
    const start = (this.currentPage() - 1) * this.itemsPerPage() + 1;
    const end = Math.min(this.currentPage() * this.itemsPerPage(), this.totalItems());
    return {
      start,
      end,
      total: this.totalItems(),
      currentPage: this.currentPage(),
      totalPages: this.totalPages()
    };
  }
  static \u0275fac = function PaginationService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _PaginationService)();
  };
  static \u0275prov = /* @__PURE__ */ \u0275\u0275defineInjectable({ token: _PaginationService, factory: _PaginationService.\u0275fac, providedIn: "root" });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(PaginationService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], null, null);
})();

// src/app/features/settings/view/log-center/log-center.component.ts
var _c03 = (a0) => ({ label: "log-center.total", value: a0, type: "default" });
var _c12 = (a0) => ({ label: "log-center.errors", value: a0, type: "error" });
var _c22 = (a0) => ({ label: "log-center.warnings", value: a0, type: "warning" });
var _c3 = (a0) => ({ label: "log-center.logs", value: a0, type: "info" });
function LogCenterComponent_ng_container_7_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementContainer(0);
  }
}
function LogCenterComponent_ng_container_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementContainer(0);
  }
}
function LogCenterComponent_ng_container_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementContainer(0);
  }
}
function LogCenterComponent_Conditional_10_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementContainer(0);
  }
}
function LogCenterComponent_Conditional_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, LogCenterComponent_Conditional_10_ng_container_0_Template, 1, 0, "ng-container", 5);
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    const statItemTemplate_r3 = \u0275\u0275reference(16);
    \u0275\u0275property("ngTemplateOutlet", statItemTemplate_r3)("ngTemplateOutletContext", \u0275\u0275pureFunction1(2, _c3, ctx_r1.paginationService.getRangeInfo().start + "-" + ctx_r1.paginationService.getRangeInfo().end + " / " + ctx_r1.paginationService.totalItems()));
  }
}
function LogCenterComponent_Conditional_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "lg-flex-column", 7)(1, "span");
    \u0275\u0275text(2);
    \u0275\u0275pipe(3, "translate");
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(3, 1, "log-center.no-logs-subtitle"));
  }
}
function LogCenterComponent_Conditional_13_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "lg-title", 12);
    \u0275\u0275text(1);
    \u0275\u0275pipe(2, "timeAgo");
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const field_r4 = ctx.$implicit;
    \u0275\u0275property("level", 3);
    \u0275\u0275advance();
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(2, 2, field_r4), " ");
  }
}
function LogCenterComponent_Conditional_13_ng_template_2_Conditional_11_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 19)(1, "span", 24);
    \u0275\u0275text(2);
    \u0275\u0275pipe(3, "translate");
    \u0275\u0275elementEnd();
    \u0275\u0275text(4);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const log_r5 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", \u0275\u0275pipeBind1(3, 2, "log-center.source"), ":");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", log_r5.source, " ");
  }
}
function LogCenterComponent_Conditional_13_ng_template_2_Conditional_17_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 22)(1, "span", 25);
    \u0275\u0275text(2);
    \u0275\u0275pipe(3, "translate");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "span", 26);
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const log_r5 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1("", \u0275\u0275pipeBind1(3, 2, "log-center.url"), ":");
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(log_r5.url);
  }
}
function LogCenterComponent_Conditional_13_ng_template_2_Conditional_18_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 23)(1, "details")(2, "summary");
    \u0275\u0275text(3);
    \u0275\u0275pipe(4, "translate");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(5, "pre");
    \u0275\u0275text(6);
    \u0275\u0275elementEnd()()();
  }
  if (rf & 2) {
    const log_r5 = \u0275\u0275nextContext().$implicit;
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(4, 2, "log-center.details"));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(ctx_r1.formatData(log_r5.data));
  }
}
function LogCenterComponent_Conditional_13_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "div", 13)(1, "div", 14)(2, "div", 15)(3, "span", 16);
    \u0275\u0275text(4);
    \u0275\u0275elementEnd()();
    \u0275\u0275elementStart(5, "div", 17)(6, "span", 18);
    \u0275\u0275text(7);
    \u0275\u0275pipe(8, "translate");
    \u0275\u0275elementEnd();
    \u0275\u0275text(9);
    \u0275\u0275pipe(10, "date");
    \u0275\u0275elementEnd();
    \u0275\u0275conditionalCreate(11, LogCenterComponent_Conditional_13_ng_template_2_Conditional_11_Template, 5, 4, "div", 19);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(12, "div", 20)(13, "span", 21);
    \u0275\u0275text(14);
    \u0275\u0275pipe(15, "translate");
    \u0275\u0275elementEnd();
    \u0275\u0275text(16);
    \u0275\u0275elementEnd();
    \u0275\u0275conditionalCreate(17, LogCenterComponent_Conditional_13_ng_template_2_Conditional_17_Template, 6, 4, "div", 22);
    \u0275\u0275conditionalCreate(18, LogCenterComponent_Conditional_13_ng_template_2_Conditional_18_Template, 7, 4, "div", 23);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const log_r5 = ctx.$implicit;
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275classMap("log-entry--" + log_r5.level);
    \u0275\u0275advance(4);
    \u0275\u0275textInterpolate(ctx_r1.getLocalizedLevel(log_r5.level));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("", \u0275\u0275pipeBind1(8, 10, "log-center.time"), ":");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind2(10, 12, log_r5.timestamp, "shortTime"), " ");
    \u0275\u0275advance(2);
    \u0275\u0275conditional(log_r5.source ? 11 : -1);
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate1("", \u0275\u0275pipeBind1(15, 15, "log-center.message"), ":");
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", log_r5.message, " ");
    \u0275\u0275advance();
    \u0275\u0275conditional(log_r5.url ? 17 : -1);
    \u0275\u0275advance();
    \u0275\u0275conditional(log_r5.data ? 18 : -1);
  }
}
function LogCenterComponent_Conditional_13_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "lg-grouping-tiles", 8);
    \u0275\u0275template(1, LogCenterComponent_Conditional_13_ng_template_1_Template, 3, 4, "ng-template", 10)(2, LogCenterComponent_Conditional_13_ng_template_2_Template, 19, 17, "ng-template", 11);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275property("sortResult", ctx_r1.groupedLogs())("selectable", false);
  }
}
function LogCenterComponent_ng_template_15_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "lg-flex-column", 27)(1, "span");
    \u0275\u0275text(2);
    \u0275\u0275pipe(3, "translate");
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(4, "b");
    \u0275\u0275text(5);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const label_r6 = ctx.label;
    const value_r7 = ctx.value;
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(3, 2, label_r6));
    \u0275\u0275advance(3);
    \u0275\u0275textInterpolate(value_r7);
  }
}
var LogCenterComponent = class _LogCenterComponent {
  paginationService = inject(PaginationService);
  logs = signal([], ...ngDevMode ? [{ debugName: "logs" }] : []);
  paginatedLogs = signal([], ...ngDevMode ? [{ debugName: "paginatedLogs" }] : []);
  groupedLogs = signal(null, ...ngDevMode ? [{ debugName: "groupedLogs" }] : []);
  stats = signal({
    total: 0,
    byLevel: { info: 0, warning: 0, error: 0, success: 0 }
  }, ...ngDevMode ? [{ debugName: "stats" }] : []);
  _logCenter = inject(LogCenterService);
  _groupSortService = inject(GroupSortService);
  _translateService = inject(TranslateService);
  ngOnInit() {
    this.loadLogs();
  }
  loadLogs() {
    const allLogs = this._logCenter.getLogs().sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());
    this.logs.set(allLogs);
    this.stats.set(this._logCenter.getLogStats());
    this.paginationService.setItems(allLogs);
    this.paginationService.setItemsPerPage(10);
    this.updatePaginatedAndGroupedLogs();
  }
  async updatePaginatedAndGroupedLogs() {
    const paginatedLogs = this.paginationService.paginatedItems();
    this.paginatedLogs.set(paginatedLogs);
    const groupingStrategy = new LogsByMinuteGroupingStrategy();
    const grouped = await this._groupSortService.groupItems(
      paginatedLogs,
      groupingStrategy,
      "desc",
      // новые группы сверху
      "timestamp"
    );
    this.groupedLogs.set(grouped);
  }
  onPageChange(page) {
    this.paginationService.goToPage(page);
    this.updatePaginatedAndGroupedLogs();
  }
  clearLogs() {
    if (confirm("Are you sure you want to clear all logs?")) {
      this._logCenter.clearLogs();
      this.loadLogs();
    }
  }
  formatData(data) {
    if (typeof data === "object") {
      return JSON.stringify(data, null, 2);
    }
    return String(data);
  }
  getLocalizedLevel(level) {
    return this._translateService.instant("log-center.level." + level);
  }
  static \u0275fac = function LogCenterComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _LogCenterComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _LogCenterComponent, selectors: [["lg-log-center"]], decls: 17, vars: 20, consts: [["statItemTemplate", ""], [1, "log-center"], ["size", "medium"], ["size", "small", 3, "click", "disabled"], ["size", "medium", 3, "mobileMode"], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], [1, "log-center__logs"], ["position", "center", "size", "medium"], [3, "sortResult", "selectable"], [3, "pageChange", "config"], ["lgGroupingHeader", ""], ["lgGroupingTile", ""], [3, "level"], [1, "log-entry"], [1, "log-entry__header"], [1, "log-entry__level"], [1, "log-entry__level-badge"], [1, "log-entry__time"], [1, "log-entry__time-label"], [1, "log-entry__source"], [1, "log-entry__message"], [1, "log-entry__message-label"], [1, "log-entry__url"], [1, "log-entry__data"], [1, "log-entry__source-label"], [1, "log-entry__url-label"], [1, "log-entry__url-value"], ["size", "tiny"]], template: function LogCenterComponent_Template(rf, ctx) {
    if (rf & 1) {
      const _r1 = \u0275\u0275getCurrentView();
      \u0275\u0275elementStart(0, "div", 1)(1, "lg-flex-column")(2, "lg-flex-row", 2)(3, "lg-button", 3);
      \u0275\u0275listener("click", function LogCenterComponent_Template_lg_button_click_3_listener() {
        \u0275\u0275restoreView(_r1);
        return \u0275\u0275resetView(ctx.clearLogs());
      });
      \u0275\u0275text(4);
      \u0275\u0275pipe(5, "translate");
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(6, "lg-flex-row", 4);
      \u0275\u0275template(7, LogCenterComponent_ng_container_7_Template, 1, 0, "ng-container", 5)(8, LogCenterComponent_ng_container_8_Template, 1, 0, "ng-container", 5)(9, LogCenterComponent_ng_container_9_Template, 1, 0, "ng-container", 5);
      \u0275\u0275conditionalCreate(10, LogCenterComponent_Conditional_10_Template, 1, 4, "ng-container");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(11, "div", 6);
      \u0275\u0275conditionalCreate(12, LogCenterComponent_Conditional_12_Template, 4, 3, "lg-flex-column", 7)(13, LogCenterComponent_Conditional_13_Template, 3, 2, "lg-grouping-tiles", 8);
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(14, "lg-pagination", 9);
      \u0275\u0275listener("pageChange", function LogCenterComponent_Template_lg_pagination_pageChange_14_listener($event) {
        \u0275\u0275restoreView(_r1);
        return \u0275\u0275resetView(ctx.onPageChange($event));
      });
      \u0275\u0275elementEnd()()();
      \u0275\u0275template(15, LogCenterComponent_ng_template_15_Template, 6, 4, "ng-template", null, 0, \u0275\u0275templateRefExtractor);
    }
    if (rf & 2) {
      let tmp_11_0;
      const statItemTemplate_r3 = \u0275\u0275reference(16);
      \u0275\u0275advance(3);
      \u0275\u0275property("disabled", ctx.stats().total === 0);
      \u0275\u0275advance();
      \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(5, 12, "log-center.clear-all"), " ");
      \u0275\u0275advance(2);
      \u0275\u0275property("mobileMode", true);
      \u0275\u0275advance();
      \u0275\u0275property("ngTemplateOutlet", statItemTemplate_r3)("ngTemplateOutletContext", \u0275\u0275pureFunction1(14, _c03, ctx.stats().total));
      \u0275\u0275advance();
      \u0275\u0275property("ngTemplateOutlet", statItemTemplate_r3)("ngTemplateOutletContext", \u0275\u0275pureFunction1(16, _c12, ctx.stats().byLevel.error));
      \u0275\u0275advance();
      \u0275\u0275property("ngTemplateOutlet", statItemTemplate_r3)("ngTemplateOutletContext", \u0275\u0275pureFunction1(18, _c22, ctx.stats().byLevel.warning));
      \u0275\u0275advance();
      \u0275\u0275conditional(ctx.paginationService.totalPages() > 1 ? 10 : -1);
      \u0275\u0275advance(2);
      \u0275\u0275conditional(((tmp_11_0 = ctx.groupedLogs()) == null ? null : tmp_11_0.groups == null ? null : tmp_11_0.groups.length) === 0 ? 12 : 13);
      \u0275\u0275advance(2);
      \u0275\u0275property("config", ctx.paginationService.config());
    }
  }, dependencies: [
    CommonModule,
    NgTemplateOutlet,
    ButtonComponent,
    GroupingTilesComponent,
    GroupingTileDirective,
    GroupingHeaderDirective,
    TitleComponent,
    PaginationComponent,
    FlexColumnComponent,
    FlexRowComponent,
    DatePipe,
    TranslatePipe,
    TimeAgoPipe
  ], styles: ["\n\n.log-center[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-md);\n  overflow: hidden;\n}\n.log-center__header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: var(--spacing-md);\n}\n.log-center__stat[_ngcontent-%COMP%] {\n  font-size: var(--font-size-sm);\n}\n.log-center__stat--error[_ngcontent-%COMP%] {\n  color: var(--color-error);\n  font-weight: bold;\n}\n.log-center__stat--warning[_ngcontent-%COMP%] {\n  color: var(--color-warning);\n  font-weight: bold;\n}\n.log-center__stat--info[_ngcontent-%COMP%] {\n  color: var(--color-info);\n  font-weight: bold;\n}\n.log-center__actions[_ngcontent-%COMP%] {\n  margin-top: var(--spacing-md);\n  padding-top: var(--spacing-md);\n  border-top: 1px solid var(--color-border);\n}\n.log-center__logs[_ngcontent-%COMP%] {\n  overflow-y: auto;\n}\n.log-center__empty[_ngcontent-%COMP%] {\n  text-align: center;\n  padding: var(--spacing-xl);\n  color: var(--color-text-muted);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--spacing-md);\n}\n.log-center__empty-icon[_ngcontent-%COMP%] {\n  font-size: 3rem;\n  opacity: 0.5;\n}\n.log-center__empty-title[_ngcontent-%COMP%] {\n  font-size: var(--font-size-lg);\n  font-weight: bold;\n  color: var(--color-text-muted);\n}\n.log-center__empty-subtitle[_ngcontent-%COMP%] {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-muted);\n  opacity: 0.8;\n}\n.log-entry[_ngcontent-%COMP%] {\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  padding: var(--spacing-md);\n  background: var(--color-background);\n  margin-bottom: var(--spacing-sm);\n}\n.log-entry--error[_ngcontent-%COMP%] {\n  border-left: 4px solid var(--color-error);\n}\n.log-entry--warning[_ngcontent-%COMP%] {\n  border-left: 4px solid var(--color-warning);\n}\n.log-entry--info[_ngcontent-%COMP%] {\n  border-left: 4px solid var(--color-info);\n}\n.log-entry--success[_ngcontent-%COMP%] {\n  border-left: 4px solid var(--color-success);\n}\n.log-entry__header[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-md);\n  margin-bottom: var(--spacing-sm);\n  flex-wrap: wrap;\n}\n.log-entry__level[_ngcontent-%COMP%] {\n  flex-shrink: 0;\n}\n.log-entry__level-badge[_ngcontent-%COMP%] {\n  padding: var(--spacing-xs) var(--spacing-sm);\n  border-radius: var(--border-radius-sm);\n  font-size: var(--font-size-xs);\n  font-weight: bold;\n  text-transform: uppercase;\n}\n.log-entry--error[_ngcontent-%COMP%]   .log-entry__level-badge[_ngcontent-%COMP%] {\n  background: var(--color-error, #ff4d4d);\n  color: white;\n}\n.log-entry--warning[_ngcontent-%COMP%]   .log-entry__level-badge[_ngcontent-%COMP%] {\n  background: var(--color-warning, #ffcc00);\n  color: white;\n}\n.log-entry--info[_ngcontent-%COMP%]   .log-entry__level-badge[_ngcontent-%COMP%] {\n  background: var(--color-info, #007bff);\n  color: white;\n}\n.log-entry--success[_ngcontent-%COMP%]   .log-entry__level-badge[_ngcontent-%COMP%] {\n  background: var(--color-success, #28a745);\n  color: white;\n}\n.log-entry__time[_ngcontent-%COMP%] {\n  color: var(--color-text-muted);\n  font-size: var(--font-size-sm);\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n}\n.log-entry__time-label[_ngcontent-%COMP%] {\n  font-weight: bold;\n  color: var(--color-text-muted);\n}\n.log-entry__source[_ngcontent-%COMP%] {\n  color: var(--color-text-muted);\n  font-size: var(--font-size-sm);\n  font-style: italic;\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n}\n.log-entry__source-label[_ngcontent-%COMP%] {\n  font-weight: bold;\n  color: var(--color-text-muted);\n}\n.log-entry__message[_ngcontent-%COMP%] {\n  margin-bottom: var(--spacing-sm);\n  word-break: break-word;\n  display: flex;\n  align-items: flex-start;\n  gap: var(--spacing-xs);\n}\n.log-entry__message-label[_ngcontent-%COMP%] {\n  font-weight: bold;\n  color: var(--color-text-muted);\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n.log-entry__url[_ngcontent-%COMP%] {\n  margin-bottom: var(--spacing-sm);\n  font-size: var(--font-size-sm);\n}\n.log-entry__url-label[_ngcontent-%COMP%] {\n  color: var(--color-text-muted);\n  margin-right: var(--spacing-xs);\n}\n.log-entry__url-value[_ngcontent-%COMP%] {\n  color: var(--color-primary);\n  word-break: break-all;\n}\n.log-entry__data[_ngcontent-%COMP%] {\n  margin-top: var(--spacing-sm);\n}\n.log-entry__data[_ngcontent-%COMP%]   details[_ngcontent-%COMP%] {\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius-sm);\n  padding: var(--spacing-sm);\n}\n.log-entry__data[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%] {\n  cursor: pointer;\n  color: var(--color-primary);\n  font-weight: bold;\n  margin-bottom: var(--spacing-sm);\n}\n.log-entry__data[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%] {\n  background: var(--color-background-secondary);\n  padding: var(--spacing-sm);\n  border-radius: var(--border-radius-sm);\n  overflow-x: auto;\n  font-size: var(--font-size-sm);\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n@media (max-width: 768px) {\n  .log-center__header[_ngcontent-%COMP%] {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  .log-center__stats[_ngcontent-%COMP%] {\n    gap: var(--spacing-md);\n  }\n  .log-entry__header[_ngcontent-%COMP%] {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: var(--spacing-sm);\n  }\n}\n/*# sourceMappingURL=log-center.component.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(LogCenterComponent, [{
    type: Component,
    args: [{ selector: "lg-log-center", standalone: true, imports: [
      CommonModule,
      ButtonComponent,
      TranslatePipe,
      GroupingTilesComponent,
      GroupingTileDirective,
      GroupingHeaderDirective,
      TitleComponent,
      PaginationComponent,
      TimeAgoPipe,
      FlexColumnComponent,
      FlexRowComponent
    ], template: `
    <div class="log-center">
      <lg-flex-column>
        <lg-flex-row size="medium">
          <lg-button
            (click)="clearLogs()"
            [disabled]="stats().total === 0"
            size="small">
            {{ 'log-center.clear-all' | translate }}
          </lg-button>
        </lg-flex-row>

        <lg-flex-row [mobileMode]="true" size="medium">
          <ng-container *ngTemplateOutlet="statItemTemplate; context: {
          label: 'log-center.total',
          value: stats().total,
          type: 'default'
        }"></ng-container>
          <ng-container *ngTemplateOutlet="statItemTemplate; context: {
          label: 'log-center.errors',
          value: stats().byLevel.error,
          type: 'error'
        }"></ng-container>
          <ng-container *ngTemplateOutlet="statItemTemplate; context: {
          label: 'log-center.warnings',
          value: stats().byLevel.warning,
          type: 'warning'
        }"></ng-container>
          @if (paginationService.totalPages() > 1) {
            <ng-container *ngTemplateOutlet="statItemTemplate; context: {
            label: 'log-center.logs',
            value: paginationService.getRangeInfo().start + '-' + paginationService.getRangeInfo().end + ' / ' + paginationService.totalItems(),
            type: 'info'
          }"></ng-container>
          }
        </lg-flex-row>

        <div class="log-center__logs">
          @if (groupedLogs()?.groups?.length === 0) {
            <lg-flex-column position="center"
                            size="medium">
              <span> {{ 'log-center.no-logs-subtitle' | translate }}</span>
            </lg-flex-column>
          } @else {
            <lg-grouping-tiles [sortResult]="groupedLogs()" [selectable]="false">
              <ng-template lgGroupingHeader let-field>
                <lg-title [level]="3">
                  {{ field|timeAgo }}
                </lg-title>
              </ng-template>

              <ng-template lgGroupingTile let-log>
                <div class="log-entry" [class]="'log-entry--' + log.level">
                  <div class="log-entry__header">
                    <div class="log-entry__level">
                      <span class="log-entry__level-badge">{{ getLocalizedLevel(log.level) }}</span>
                    </div>
                    <div class="log-entry__time">
                      <span class="log-entry__time-label">{{ 'log-center.time' | translate }}:</span>
                      {{ log.timestamp | date:'shortTime' }}
                    </div>
                    @if (log.source) {
                      <div class="log-entry__source">
                        <span class="log-entry__source-label">{{ 'log-center.source' | translate }}:</span>
                        {{ log.source }}
                      </div>
                    }
                  </div>
                  <div class="log-entry__message">
                    <span class="log-entry__message-label">{{ 'log-center.message' | translate }}:</span>
                    {{ log.message }}
                  </div>
                  @if (log.url) {
                    <div class="log-entry__url">
                      <span class="log-entry__url-label">{{ 'log-center.url' | translate }}:</span>
                      <span class="log-entry__url-value">{{ log.url }}</span>
                    </div>
                  }
                  @if (log.data) {
                    <div class="log-entry__data">
                      <details>
                        <summary>{{ 'log-center.details' | translate }}</summary>
                        <pre>{{ formatData(log.data) }}</pre>
                      </details>
                    </div>
                  }
                </div>
              </ng-template>
            </lg-grouping-tiles>
          }
        </div>

        <lg-pagination
          (pageChange)="onPageChange($event)"
          [config]="paginationService.config()">
        </lg-pagination>
      </lg-flex-column>
    </div>
    <!-- Stat Item Template -->
    <ng-template #statItemTemplate let-label="label" let-type="type" let-value="value">
      <lg-flex-column size="tiny">
        <span>{{ label | translate }}</span>
        <b>{{ value }}</b>
      </lg-flex-column>
    </ng-template>
  `, styles: ["/* angular:styles/component:scss;6c7832472bd2a1d240b02c4afcd1de1951a29f430ee70f840d61076a2fe8818d;/Users/khripunovpavel/Documents/my/lasagna/lasagna/src/app/features/settings/view/log-center/log-center.component.ts */\n.log-center {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-md);\n  overflow: hidden;\n}\n.log-center__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: var(--spacing-md);\n}\n.log-center__stat {\n  font-size: var(--font-size-sm);\n}\n.log-center__stat--error {\n  color: var(--color-error);\n  font-weight: bold;\n}\n.log-center__stat--warning {\n  color: var(--color-warning);\n  font-weight: bold;\n}\n.log-center__stat--info {\n  color: var(--color-info);\n  font-weight: bold;\n}\n.log-center__actions {\n  margin-top: var(--spacing-md);\n  padding-top: var(--spacing-md);\n  border-top: 1px solid var(--color-border);\n}\n.log-center__logs {\n  overflow-y: auto;\n}\n.log-center__empty {\n  text-align: center;\n  padding: var(--spacing-xl);\n  color: var(--color-text-muted);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--spacing-md);\n}\n.log-center__empty-icon {\n  font-size: 3rem;\n  opacity: 0.5;\n}\n.log-center__empty-title {\n  font-size: var(--font-size-lg);\n  font-weight: bold;\n  color: var(--color-text-muted);\n}\n.log-center__empty-subtitle {\n  font-size: var(--font-size-sm);\n  color: var(--color-text-muted);\n  opacity: 0.8;\n}\n.log-entry {\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius);\n  padding: var(--spacing-md);\n  background: var(--color-background);\n  margin-bottom: var(--spacing-sm);\n}\n.log-entry--error {\n  border-left: 4px solid var(--color-error);\n}\n.log-entry--warning {\n  border-left: 4px solid var(--color-warning);\n}\n.log-entry--info {\n  border-left: 4px solid var(--color-info);\n}\n.log-entry--success {\n  border-left: 4px solid var(--color-success);\n}\n.log-entry__header {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-md);\n  margin-bottom: var(--spacing-sm);\n  flex-wrap: wrap;\n}\n.log-entry__level {\n  flex-shrink: 0;\n}\n.log-entry__level-badge {\n  padding: var(--spacing-xs) var(--spacing-sm);\n  border-radius: var(--border-radius-sm);\n  font-size: var(--font-size-xs);\n  font-weight: bold;\n  text-transform: uppercase;\n}\n.log-entry--error .log-entry__level-badge {\n  background: var(--color-error, #ff4d4d);\n  color: white;\n}\n.log-entry--warning .log-entry__level-badge {\n  background: var(--color-warning, #ffcc00);\n  color: white;\n}\n.log-entry--info .log-entry__level-badge {\n  background: var(--color-info, #007bff);\n  color: white;\n}\n.log-entry--success .log-entry__level-badge {\n  background: var(--color-success, #28a745);\n  color: white;\n}\n.log-entry__time {\n  color: var(--color-text-muted);\n  font-size: var(--font-size-sm);\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n}\n.log-entry__time-label {\n  font-weight: bold;\n  color: var(--color-text-muted);\n}\n.log-entry__source {\n  color: var(--color-text-muted);\n  font-size: var(--font-size-sm);\n  font-style: italic;\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n}\n.log-entry__source-label {\n  font-weight: bold;\n  color: var(--color-text-muted);\n}\n.log-entry__message {\n  margin-bottom: var(--spacing-sm);\n  word-break: break-word;\n  display: flex;\n  align-items: flex-start;\n  gap: var(--spacing-xs);\n}\n.log-entry__message-label {\n  font-weight: bold;\n  color: var(--color-text-muted);\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n.log-entry__url {\n  margin-bottom: var(--spacing-sm);\n  font-size: var(--font-size-sm);\n}\n.log-entry__url-label {\n  color: var(--color-text-muted);\n  margin-right: var(--spacing-xs);\n}\n.log-entry__url-value {\n  color: var(--color-primary);\n  word-break: break-all;\n}\n.log-entry__data {\n  margin-top: var(--spacing-sm);\n}\n.log-entry__data details {\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius-sm);\n  padding: var(--spacing-sm);\n}\n.log-entry__data summary {\n  cursor: pointer;\n  color: var(--color-primary);\n  font-weight: bold;\n  margin-bottom: var(--spacing-sm);\n}\n.log-entry__data pre {\n  background: var(--color-background-secondary);\n  padding: var(--spacing-sm);\n  border-radius: var(--border-radius-sm);\n  overflow-x: auto;\n  font-size: var(--font-size-sm);\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n@media (max-width: 768px) {\n  .log-center__header {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  .log-center__stats {\n    gap: var(--spacing-md);\n  }\n  .log-entry__header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: var(--spacing-sm);\n  }\n}\n/*# sourceMappingURL=log-center.component.css.map */\n"] }]
  }], null, null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(LogCenterComponent, { className: "LogCenterComponent", filePath: "src/app/features/settings/view/log-center/log-center.component.ts", lineNumber: 381 });
})();

// src/app/features/settings/view/log-center/log-center-page.component.ts
var LogCenterPageComponent = class _LogCenterPageComponent {
  static \u0275fac = function LogCenterPageComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _LogCenterPageComponent)();
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _LogCenterPageComponent, selectors: [["lg-log-center-page"]], decls: 1, vars: 0, template: function LogCenterPageComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275element(0, "lg-log-center");
    }
  }, dependencies: [LogCenterComponent], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(LogCenterPageComponent, [{
    type: Component,
    args: [{
      selector: "lg-log-center-page",
      standalone: true,
      imports: [LogCenterComponent],
      template: `
    <lg-log-center></lg-log-center>
  `
    }]
  }], null, null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(LogCenterPageComponent, { className: "LogCenterPageComponent", filePath: "src/app/features/settings/view/log-center/log-center-page.component.ts", lineNumber: 12 });
})();

// src/app/features/settings/view/categories/category-product/list/category-list.component.ts
var _c04 = () => [];
function CategoryListComponent_For_9_ng_template_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "lg-flex-row", 4)(1, "div", 5);
    \u0275\u0275listener("click", function CategoryListComponent_For_9_ng_template_0_Template_div_click_1_listener() {
      \u0275\u0275restoreView(_r1);
      const category_r2 = \u0275\u0275nextContext().$implicit;
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.onEdit.emit(category_r2.uuid));
    });
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "lg-button", 6);
    \u0275\u0275listener("click", function CategoryListComponent_For_9_ng_template_0_Template_lg_button_click_3_listener() {
      \u0275\u0275restoreView(_r1);
      const category_r2 = \u0275\u0275nextContext().$implicit;
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.deleteCategory(category_r2));
    });
    \u0275\u0275element(4, "mat-icon", 7);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const category_r2 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275property("center", true);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", category_r2.name, " ");
    \u0275\u0275advance();
    \u0275\u0275styleMap("danger");
    \u0275\u0275property("size", "tiny")("icon", true);
  }
}
function CategoryListComponent_For_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, CategoryListComponent_For_9_ng_template_0_Template, 5, 6, "ng-template", 3);
  }
}
var CategoryListComponent = class _CategoryListComponent {
  categoryRepository;
  _notificationsService;
  constructor(categoryRepository, _notificationsService) {
    this.categoryRepository = categoryRepository;
    this._notificationsService = _notificationsService;
  }
  onEdit = new EventEmitter();
  categories = defer(() => this.categoryRepository.categories$);
  deleteCategory(category) {
    if (!category.uuid) {
      return Promise.resolve();
    }
    return this.categoryRepository.deleteOne(category.uuid).then(() => {
      this.loadCategory();
      this._notificationsService.success("categories.deleted");
    }).catch((e) => {
      this._notificationsService.error(errorHandler(e));
    });
  }
  ngOnInit() {
    this.loadCategory();
  }
  async loadCategory() {
    try {
      await this.categoryRepository.loadAll();
    } catch (e) {
      this._notificationsService.error(errorHandler(e));
    }
  }
  static \u0275fac = function CategoryListComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _CategoryListComponent)(\u0275\u0275directiveInject(CategoryProductsRepository), \u0275\u0275directiveInject(NotificationsService));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _CategoryListComponent, selectors: [["lg-category-list"]], outputs: { onEdit: "onEdit" }, decls: 10, vars: 7, consts: [[3, "size"], [1, "text-small"], [2, "--card-list-bg", "var(--control-bg)"], ["lgCardListItem", ""], [3, "center"], ["lgExpand", "", 2, "cursor", "pointer", 3, "click"], [3, "click", "size", "icon"], ["aria-hidden", "false", "aria-label", "Delete", "fontIcon", "close"]], template: function CategoryListComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "lg-fade-in")(1, "lg-flex-column", 0)(2, "div", 1);
      \u0275\u0275text(3);
      \u0275\u0275pipe(4, "translate");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(5, "lg-card-list", 2);
      \u0275\u0275declareLet(6);
      \u0275\u0275pipe(7, "async");
      \u0275\u0275repeaterCreate(8, CategoryListComponent_For_9_Template, 1, 0, null, 3, \u0275\u0275repeaterTrackByIndex);
      \u0275\u0275elementEnd()()();
    }
    if (rf & 2) {
      \u0275\u0275advance();
      \u0275\u0275property("size", "small");
      \u0275\u0275advance(2);
      \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(4, 2, "categories.products.title"));
      const cats_r4 = \u0275\u0275pipeBind1(7, 4, ctx.categories) ?? \u0275\u0275pureFunction0(6, _c04);
      \u0275\u0275advance(5);
      \u0275\u0275repeater(cats_r4);
    }
  }, dependencies: [
    FlexRowComponent,
    ButtonComponent,
    MatIcon,
    CardListComponent,
    CardListItemDirective,
    FadeInComponent,
    ExpandDirective,
    FlexColumnComponent,
    TranslatePipe,
    AsyncPipe
  ], styles: ["\n\n[_nghost-%COMP%] {\n  display: block;\n}\n/*# sourceMappingURL=category-list.component.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(CategoryListComponent, [{
    type: Component,
    args: [{ selector: "lg-category-list", standalone: true, template: `
    <lg-fade-in>
      <lg-flex-column [size]="'small'">
        <div class="text-small">{{ 'categories.products.title' | translate }}</div>

        <lg-card-list style="--card-list-bg: var(--control-bg)">
          @let cats = (categories | async) ?? [];
          @for (category of cats; track i; let i = $index) {
            <ng-template lgCardListItem>
              <lg-flex-row [center]="true">
                <div lgExpand (click)="onEdit.emit(category.uuid)" style="cursor: pointer;">
                  {{ category.name }}
                </div>

                <lg-button [style]="'danger'"
                           [size]="'tiny'"
                           [icon]="true"
                           (click)="deleteCategory(category)">
                  <mat-icon aria-hidden="false" aria-label="Delete"
                            fontIcon="close"></mat-icon>
                </lg-button>
              </lg-flex-row>
            </ng-template>
          }
        </lg-card-list>
      </lg-flex-column>
    </lg-fade-in>
  `, imports: [
      FlexRowComponent,
      ButtonComponent,
      MatIcon,
      TitleComponent,
      CardListComponent,
      CardListItemDirective,
      FadeInComponent,
      TranslatePipe,
      ExpandDirective,
      AsyncPipe,
      FlexColumnComponent
    ], styles: ["/* angular:styles/component:scss;01c1eed413cbcab17b345a4da1b468b4e2a0a4e51bc2f6ee57d46c1ca65a67bb;/Users/khripunovpavel/Documents/my/lasagna/lasagna/src/app/features/settings/view/categories/category-product/list/category-list.component.ts */\n:host {\n  display: block;\n}\n/*# sourceMappingURL=category-list.component.css.map */\n"] }]
  }], () => [{ type: CategoryProductsRepository }, { type: NotificationsService }], { onEdit: [{
    type: Output
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(CategoryListComponent, { className: "CategoryListComponent", filePath: "src/app/features/settings/view/categories/category-product/list/category-list.component.ts", lineNumber: 70 });
})();

// src/app/features/settings/view/categories/category-recipe/list/category-recipe-list.component.ts
var _c05 = () => [];
function CategoryRecipeListComponent_For_9_ng_template_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "lg-flex-row", 4)(1, "div", 5);
    \u0275\u0275listener("click", function CategoryRecipeListComponent_For_9_ng_template_0_Template_div_click_1_listener() {
      \u0275\u0275restoreView(_r1);
      const category_r2 = \u0275\u0275nextContext().$implicit;
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.onEdit.emit(category_r2.uuid));
    });
    \u0275\u0275text(2);
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(3, "lg-button", 6);
    \u0275\u0275listener("click", function CategoryRecipeListComponent_For_9_ng_template_0_Template_lg_button_click_3_listener() {
      \u0275\u0275restoreView(_r1);
      const category_r2 = \u0275\u0275nextContext().$implicit;
      const ctx_r2 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r2.deleteCategory(category_r2));
    });
    \u0275\u0275element(4, "mat-icon", 7);
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const category_r2 = \u0275\u0275nextContext().$implicit;
    \u0275\u0275property("center", true);
    \u0275\u0275advance(2);
    \u0275\u0275textInterpolate1(" ", category_r2.name, " ");
    \u0275\u0275advance();
    \u0275\u0275styleMap("danger");
    \u0275\u0275property("size", "tiny")("icon", true);
  }
}
function CategoryRecipeListComponent_For_9_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275template(0, CategoryRecipeListComponent_For_9_ng_template_0_Template, 5, 6, "ng-template", 3);
  }
}
var CategoryRecipeListComponent = class _CategoryRecipeListComponent {
  categoryRepository;
  _notificationsService;
  constructor(categoryRepository, _notificationsService) {
    this.categoryRepository = categoryRepository;
    this._notificationsService = _notificationsService;
  }
  onEdit = new EventEmitter();
  categories = defer(() => this.categoryRepository.categories$);
  deleteCategory(category) {
    if (!category.uuid)
      return Promise.resolve();
    return this.categoryRepository.deleteCategory(category.uuid).then(() => {
      this.loadCategory();
      this._notificationsService.success("categories.deleted");
    }).catch((e) => {
      this._notificationsService.error(errorHandler(e));
    });
  }
  ngOnInit() {
    this.loadCategory();
  }
  async loadCategory() {
    try {
      await this.categoryRepository.loadAll();
    } catch (e) {
      this._notificationsService.error(errorHandler(e));
    }
  }
  static \u0275fac = function CategoryRecipeListComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _CategoryRecipeListComponent)(\u0275\u0275directiveInject(CategoryRecipesRepository), \u0275\u0275directiveInject(NotificationsService));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _CategoryRecipeListComponent, selectors: [["lg-category-recipe-list"]], outputs: { onEdit: "onEdit" }, decls: 10, vars: 7, consts: [[3, "size"], [1, "text-small"], [2, "--card-list-bg", "var(--control-bg)"], ["lgCardListItem", ""], [3, "center"], ["lgExpand", "", 2, "cursor", "pointer", 3, "click"], [3, "click", "size", "icon"], ["aria-hidden", "false", "aria-label", "Delete", "fontIcon", "close"]], template: function CategoryRecipeListComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "lg-fade-in")(1, "lg-flex-column", 0)(2, "div", 1);
      \u0275\u0275text(3);
      \u0275\u0275pipe(4, "translate");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(5, "lg-card-list", 2);
      \u0275\u0275declareLet(6);
      \u0275\u0275pipe(7, "async");
      \u0275\u0275repeaterCreate(8, CategoryRecipeListComponent_For_9_Template, 1, 0, null, 3, \u0275\u0275repeaterTrackByIndex);
      \u0275\u0275elementEnd()()();
    }
    if (rf & 2) {
      \u0275\u0275advance();
      \u0275\u0275property("size", "small");
      \u0275\u0275advance(2);
      \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(4, 2, "categories.recipes.title"));
      const cats_r4 = \u0275\u0275pipeBind1(7, 4, ctx.categories) ?? \u0275\u0275pureFunction0(6, _c05);
      \u0275\u0275advance(5);
      \u0275\u0275repeater(cats_r4);
    }
  }, dependencies: [
    FlexRowComponent,
    ButtonComponent,
    MatIcon,
    CardListComponent,
    CardListItemDirective,
    FadeInComponent,
    ExpandDirective,
    FlexColumnComponent,
    TranslatePipe,
    AsyncPipe
  ], styles: ["\n\n[_nghost-%COMP%] {\n  display: block;\n}\n/*# sourceMappingURL=category-recipe-list.component.css.map */"] });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(CategoryRecipeListComponent, [{
    type: Component,
    args: [{ selector: "lg-category-recipe-list", standalone: true, template: `
    <lg-fade-in>
     <lg-flex-column [size]="'small'">
        <div class="text-small"> {{ 'categories.recipes.title' | translate }}</div>

        <lg-card-list style="--card-list-bg: var(--control-bg)">
          @let cats = (categories | async) ?? [];
          @for (category of cats; track i; let i = $index) {
            <ng-template lgCardListItem>
              <lg-flex-row [center]="true">
                <div lgExpand (click)="onEdit.emit(category.uuid)" style="cursor: pointer;">
                  {{ category.name }}
                </div>

                <lg-button [style]="'danger'"
                           [size]="'tiny'"
                           [icon]="true"
                           (click)="deleteCategory(category)">
                  <mat-icon aria-hidden="false" aria-label="Delete"
                            fontIcon="close"></mat-icon>
                </lg-button>
              </lg-flex-row>
            </ng-template>
          }
        </lg-card-list>
      </lg-flex-column>
    </lg-fade-in>
  `, imports: [
      FlexRowComponent,
      ButtonComponent,
      MatIcon,
      TitleComponent,
      CardListComponent,
      CardListItemDirective,
      FadeInComponent,
      TranslatePipe,
      ExpandDirective,
      AsyncPipe,
      FlexColumnComponent
    ], styles: ["/* angular:styles/component:scss;01c1eed413cbcab17b345a4da1b468b4e2a0a4e51bc2f6ee57d46c1ca65a67bb;/Users/khripunovpavel/Documents/my/lasagna/lasagna/src/app/features/settings/view/categories/category-recipe/list/category-recipe-list.component.ts */\n:host {\n  display: block;\n}\n/*# sourceMappingURL=category-recipe-list.component.css.map */\n"] }]
  }], () => [{ type: CategoryRecipesRepository }, { type: NotificationsService }], { onEdit: [{
    type: Output
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(CategoryRecipeListComponent, { className: "CategoryRecipeListComponent", filePath: "src/app/features/settings/view/categories/category-recipe/list/category-recipe-list.component.ts", lineNumber: 70 });
})();

// src/app/shared/view/directives/no-wrap.directive.ts
var NoWrapDirective = class _NoWrapDirective {
  constructor() {
  }
  whiteSpace = "nowrap";
  static \u0275fac = function NoWrapDirective_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _NoWrapDirective)();
  };
  static \u0275dir = /* @__PURE__ */ \u0275\u0275defineDirective({ type: _NoWrapDirective, selectors: [["", "lgNoWrap", ""]], hostVars: 2, hostBindings: function NoWrapDirective_HostBindings(rf, ctx) {
    if (rf & 2) {
      \u0275\u0275styleProp("white-space", ctx.whiteSpace);
    }
  } });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NoWrapDirective, [{
    type: Directive,
    args: [{
      standalone: true,
      selector: "[lgNoWrap]"
    }]
  }], () => [], { whiteSpace: [{
    type: HostBinding,
    args: ["style.white-space"]
  }] });
})();

// src/app/features/settings/view/categories/category-product/add-category/add-category-form.component.ts
function AddCategoryFormComponent_Conditional_11_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275text(0);
    \u0275\u0275pipe(1, "translate");
  }
  if (rf & 2) {
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(1, 1, "settings.category.save"), " ");
  }
}
function AddCategoryFormComponent_Conditional_11_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275text(0);
    \u0275\u0275pipe(1, "translate");
  }
  if (rf & 2) {
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(1, 1, "settings.category.no-changes"), " ");
  }
}
function AddCategoryFormComponent_Conditional_11_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "lg-button", 8);
    \u0275\u0275listener("click", function AddCategoryFormComponent_Conditional_11_Template_lg_button_click_0_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.editCategory());
    });
    \u0275\u0275conditionalCreate(1, AddCategoryFormComponent_Conditional_11_Conditional_1_Template, 2, 3)(2, AddCategoryFormComponent_Conditional_11_Conditional_2_Template, 2, 3);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275styleMap("primary");
    \u0275\u0275property("disabled", !ctx_r1.form.dirty)("size", ctx_r1.isMobile() ? "small" : "regular");
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r1.form.dirty ? 1 : 2);
  }
}
function AddCategoryFormComponent_Conditional_12_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275text(0);
    \u0275\u0275pipe(1, "translate");
  }
  if (rf & 2) {
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(1, 1, "settings.category.add"), " ");
  }
}
function AddCategoryFormComponent_Conditional_12_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275text(0);
    \u0275\u0275pipe(1, "translate");
  }
  if (rf & 2) {
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(1, 1, "settings.category.enter-name"), " ");
  }
}
function AddCategoryFormComponent_Conditional_12_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "lg-button", 8);
    \u0275\u0275listener("click", function AddCategoryFormComponent_Conditional_12_Template_lg_button_click_0_listener() {
      \u0275\u0275restoreView(_r3);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.addCategory());
    });
    \u0275\u0275conditionalCreate(1, AddCategoryFormComponent_Conditional_12_Conditional_1_Template, 2, 3)(2, AddCategoryFormComponent_Conditional_12_Conditional_2_Template, 2, 3);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275styleMap("primary");
    \u0275\u0275property("disabled", !ctx_r1.form.dirty)("size", ctx_r1.isMobile() ? "small" : "regular");
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r1.form.dirty ? 1 : 2);
  }
}
var AddCategoryFormComponent = class _AddCategoryFormComponent {
  _categoryRepository;
  _notificationsService;
  constructor(_categoryRepository, _notificationsService) {
    this._categoryRepository = _categoryRepository;
    this._notificationsService = _notificationsService;
  }
  isMobile = matchMediaSignal(mobileBreakpoint);
  form = new FormGroup({
    name: new FormControl("", Validators.required)
  });
  category = signal(void 0, ...ngDevMode ? [{ debugName: "category" }] : []);
  uuid = input("", ...ngDevMode ? [{ debugName: "uuid" }] : []);
  onSaved = new EventEmitter();
  uuidEffect = effect(() => {
    if (!this.uuid()) {
      this.category.set(CategoryProduct.empty());
      return;
    }
    this._categoryRepository.getOne(this.uuid()).then((category) => {
      this.reset(category);
    }).catch((error) => {
      this._notificationsService.error(errorHandler(error));
    });
  }, ...ngDevMode ? [{ debugName: "uuidEffect" }] : []);
  _destroyRef = inject(DestroyRef);
  reset(category) {
    this.form.reset(categoryProductToFormValue(category));
    this.category.set(category);
    this.form.markAsPristine();
  }
  ngOnInit() {
    this.form.valueChanges.pipe(takeUntilDestroyed(this._destroyRef)).subscribe((values) => {
      this.category()?.update(categoryProductDTOFromFormValue(values));
    });
  }
  addCategory() {
    if (!this.category() || !this.form.dirty) {
      return Promise.resolve();
    }
    return this._categoryRepository.addOne(this.category()).then(() => {
      this.onSaved.emit(this.uuid());
      this.form.reset({
        name: ""
      });
      this._notificationsService.success("settings.category.added");
      this.form.markAsPristine();
      this._categoryRepository.loadAll();
    }).catch((error) => {
      this._notificationsService.error(errorHandler(error));
    });
  }
  editCategory() {
    if (!this.category() || !this.form.dirty) {
      return Promise.resolve();
    }
    return this._categoryRepository.updateOne(this.uuid(), this.category()).then(() => {
      this.onSaved.emit(this.uuid());
      this.form.reset({
        name: ""
      });
      this._notificationsService.success("settings.category.edited");
      this.form.markAsPristine();
      this._categoryRepository.loadAll();
    }).catch((error) => {
      this._notificationsService.error(errorHandler(error));
    });
  }
  onEnter() {
    if (this.uuid()) {
      this.editCategory();
    } else {
      this.addCategory();
    }
  }
  static \u0275fac = function AddCategoryFormComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _AddCategoryFormComponent)(\u0275\u0275directiveInject(CategoryProductsRepository), \u0275\u0275directiveInject(NotificationsService));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _AddCategoryFormComponent, selectors: [["lg-add-category-form"]], inputs: { uuid: [1, "uuid"] }, outputs: { onSaved: "onSaved" }, decls: 13, vars: 12, consts: [[3, "size"], [1, "text-small"], [3, "formGroup"], [3, "bottom", "size"], ["lgExpand", ""], ["formControlName", "name", 3, "onEnter", "placeholder", "size"], ["lgNoWrap", ""], [3, "disabled", "style", "size"], [3, "click", "disabled", "size"]], template: function AddCategoryFormComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "lg-fade-in")(1, "lg-flex-column", 0)(2, "div", 1);
      \u0275\u0275text(3);
      \u0275\u0275pipe(4, "translate");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(5, "form", 2)(6, "lg-flex-row", 3)(7, "lg-control", 4)(8, "lg-input", 5);
      \u0275\u0275pipe(9, "translate");
      \u0275\u0275listener("onEnter", function AddCategoryFormComponent_Template_lg_input_onEnter_8_listener() {
        return ctx.onEnter();
      });
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(10, "div", 6);
      \u0275\u0275conditionalCreate(11, AddCategoryFormComponent_Conditional_11_Template, 3, 5, "lg-button", 7)(12, AddCategoryFormComponent_Conditional_12_Template, 3, 5, "lg-button", 7);
      \u0275\u0275elementEnd()()()()();
    }
    if (rf & 2) {
      \u0275\u0275advance();
      \u0275\u0275property("size", "small");
      \u0275\u0275advance(2);
      \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(4, 8, "categories.add-recipe"));
      \u0275\u0275advance(2);
      \u0275\u0275property("formGroup", ctx.form);
      \u0275\u0275advance();
      \u0275\u0275property("bottom", true)("size", "medium");
      \u0275\u0275advance(2);
      \u0275\u0275property("placeholder", \u0275\u0275pipeBind1(9, 10, "settings.category.placeholder"))("size", ctx.isMobile() ? "small" : "normal");
      \u0275\u0275advance(3);
      \u0275\u0275conditional(ctx.uuid() ? 11 : 12);
    }
  }, dependencies: [
    ReactiveFormsModule,
    \u0275NgNoValidate,
    NgControlStatus,
    NgControlStatusGroup,
    FormGroupDirective,
    FormControlName,
    InputComponent,
    ControlComponent,
    ButtonComponent,
    FlexRowComponent,
    ExpandDirective,
    NoWrapDirective,
    FadeInComponent,
    FlexColumnComponent,
    TranslatePipe
  ], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(AddCategoryFormComponent, [{
    type: Component,
    args: [{ selector: "lg-add-category-form", standalone: true, template: `
    <lg-fade-in>
      <lg-flex-column [size]="'small'">
        <div class="text-small">{{ 'categories.add-recipe' | translate }}</div>

        <form [formGroup]="form">
          <lg-flex-row [bottom]="true"
                       [size]="'medium'">
            <lg-control lgExpand>
              <lg-input (onEnter)="onEnter()"
                        [placeholder]="'settings.category.placeholder' | translate"
                        [size]="isMobile() ? 'small' : 'normal'"
                        formControlName="name"></lg-input>
            </lg-control>

            <div lgNoWrap>
              @if (uuid()) {
                <lg-button [disabled]="!form.dirty"
                           [style]="'primary'"
                           [size]="isMobile() ? 'small' : 'regular'"
                           (click)="editCategory()">
                  @if (form.dirty) {
                    {{ 'settings.category.save' | translate }}
                  } @else {
                    {{ 'settings.category.no-changes' | translate }}
                  }
                </lg-button>
              } @else {
                <lg-button [disabled]="!form.dirty"
                           [style]="'primary'"
                           [size]="isMobile() ? 'small' : 'regular'"
                           (click)="addCategory()">
                  @if (form.dirty) {
                    {{ 'settings.category.add' | translate }}
                  } @else {
                    {{ 'settings.category.enter-name' | translate }}
                  }
                </lg-button>
              }</div>
          </lg-flex-row>
        </form>
      </lg-flex-column>
    </lg-fade-in>
  `, imports: [
      ReactiveFormsModule,
      InputComponent,
      ControlComponent,
      ButtonComponent,
      FlexRowComponent,
      ExpandDirective,
      NoWrapDirective,
      TranslatePipe,
      FadeInComponent,
      FlexColumnComponent
    ] }]
  }], () => [{ type: CategoryProductsRepository }, { type: NotificationsService }], { onSaved: [{
    type: Output
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(AddCategoryFormComponent, { className: "AddCategoryFormComponent", filePath: "src/app/features/settings/view/categories/category-product/add-category/add-category-form.component.ts", lineNumber: 88 });
})();

// src/app/features/settings/view/categories/category-recipe/add-category/add-category-recipe-form.component.ts
function AddCategoryRecipeFormComponent_Conditional_11_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275text(0);
    \u0275\u0275pipe(1, "translate");
  }
  if (rf & 2) {
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(1, 1, "settings.category.save"), " ");
  }
}
function AddCategoryRecipeFormComponent_Conditional_11_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275text(0);
    \u0275\u0275pipe(1, "translate");
  }
  if (rf & 2) {
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(1, 1, "settings.category.no-changes"), " ");
  }
}
function AddCategoryRecipeFormComponent_Conditional_11_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "lg-button", 8);
    \u0275\u0275listener("click", function AddCategoryRecipeFormComponent_Conditional_11_Template_lg_button_click_0_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.editCategory());
    });
    \u0275\u0275conditionalCreate(1, AddCategoryRecipeFormComponent_Conditional_11_Conditional_1_Template, 2, 3)(2, AddCategoryRecipeFormComponent_Conditional_11_Conditional_2_Template, 2, 3);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275styleMap("primary");
    \u0275\u0275property("disabled", !ctx_r1.form.dirty)("size", ctx_r1.isMobile() ? "small" : "regular");
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r1.form.dirty ? 1 : 2);
  }
}
function AddCategoryRecipeFormComponent_Conditional_12_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275text(0);
    \u0275\u0275pipe(1, "translate");
  }
  if (rf & 2) {
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(1, 1, "settings.category.add"), " ");
  }
}
function AddCategoryRecipeFormComponent_Conditional_12_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275text(0);
    \u0275\u0275pipe(1, "translate");
  }
  if (rf & 2) {
    \u0275\u0275textInterpolate1(" ", \u0275\u0275pipeBind1(1, 1, "settings.category.enter-name"), " ");
  }
}
function AddCategoryRecipeFormComponent_Conditional_12_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "lg-button", 8);
    \u0275\u0275listener("click", function AddCategoryRecipeFormComponent_Conditional_12_Template_lg_button_click_0_listener() {
      \u0275\u0275restoreView(_r3);
      const ctx_r1 = \u0275\u0275nextContext();
      return \u0275\u0275resetView(ctx_r1.addCategory());
    });
    \u0275\u0275conditionalCreate(1, AddCategoryRecipeFormComponent_Conditional_12_Conditional_1_Template, 2, 3)(2, AddCategoryRecipeFormComponent_Conditional_12_Conditional_2_Template, 2, 3);
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext();
    \u0275\u0275styleMap("primary");
    \u0275\u0275property("disabled", !ctx_r1.form.dirty)("size", ctx_r1.isMobile() ? "small" : "regular");
    \u0275\u0275advance();
    \u0275\u0275conditional(ctx_r1.form.dirty ? 1 : 2);
  }
}
var AddCategoryRecipeFormComponent = class _AddCategoryRecipeFormComponent {
  _categoryRepository;
  _selectResourcesService;
  _router;
  _notificationsService;
  constructor(_categoryRepository, _selectResourcesService, _router, _notificationsService) {
    this._categoryRepository = _categoryRepository;
    this._selectResourcesService = _selectResourcesService;
    this._router = _router;
    this._notificationsService = _notificationsService;
  }
  isMobile = matchMediaSignal(mobileBreakpoint);
  form = new FormGroup({
    name: new FormControl("", Validators.required)
  });
  category = signal(void 0, ...ngDevMode ? [{ debugName: "category" }] : []);
  uuid = input("", ...ngDevMode ? [{ debugName: "uuid" }] : []);
  onSaved = new EventEmitter();
  uuidEffect = effect(() => {
    if (!this.uuid()) {
      this.category.set(CategoryRecipe.empty());
      return;
    }
    this._categoryRepository.getOne(this.uuid()).then((category) => {
      this.form.reset(categoryRecipeToFormValue(category));
      this.category.set(category);
      this.form.markAsPristine();
    }).catch((error) => {
      this._notificationsService.error(errorHandler(error));
    });
  }, ...ngDevMode ? [{ debugName: "uuidEffect" }] : []);
  ngOnInit() {
    this.form.valueChanges.subscribe((values) => {
      this.category()?.update(categoryRecipeDTOFromFormValue(values));
    });
  }
  addCategory() {
    if (!this.category() || !this.form.dirty) {
      return Promise.resolve();
    }
    return this._categoryRepository.addCategory(this.category()).then(() => {
      this.onSaved.emit(this.uuid());
      this.form.reset({
        name: ""
      });
      this._notificationsService.success("settings.category.added");
      this.form.markAsPristine();
      this._categoryRepository.loadAll();
    }).catch((error) => {
      this._notificationsService.error(errorHandler(error));
    });
  }
  editCategory() {
    if (!this.category() || !this.form.dirty) {
      return Promise.resolve();
    }
    return this._categoryRepository.editCategory(this.uuid(), this.category()).then(() => {
      this.onSaved.emit(this.uuid());
      this.form.reset({
        name: ""
      });
      this._notificationsService.success("settings.category.edited");
      this.form.markAsPristine();
      this._categoryRepository.loadAll();
    }).catch((error) => {
      this._notificationsService.error(errorHandler(error));
    });
  }
  onEnter() {
    if (this.uuid()) {
      this.editCategory();
    } else {
      this.addCategory();
    }
  }
  static \u0275fac = function AddCategoryRecipeFormComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _AddCategoryRecipeFormComponent)(\u0275\u0275directiveInject(CategoryRecipesRepository), \u0275\u0275directiveInject(SelectResourcesService), \u0275\u0275directiveInject(Router), \u0275\u0275directiveInject(NotificationsService));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _AddCategoryRecipeFormComponent, selectors: [["lg-add-category-recipe-form"]], inputs: { uuid: [1, "uuid"] }, outputs: { onSaved: "onSaved" }, decls: 13, vars: 12, consts: [[3, "size"], [1, "text-small"], [3, "formGroup"], [3, "bottom", "size"], ["lgExpand", ""], ["formControlName", "name", 3, "onEnter", "placeholder", "size"], ["lgNoWrap", ""], [3, "disabled", "style", "size"], [3, "click", "disabled", "size"]], template: function AddCategoryRecipeFormComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "lg-fade-in")(1, "lg-flex-column", 0)(2, "div", 1);
      \u0275\u0275text(3);
      \u0275\u0275pipe(4, "translate");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(5, "form", 2)(6, "lg-flex-row", 3)(7, "lg-control", 4)(8, "lg-input", 5);
      \u0275\u0275pipe(9, "translate");
      \u0275\u0275listener("onEnter", function AddCategoryRecipeFormComponent_Template_lg_input_onEnter_8_listener() {
        return ctx.onEnter();
      });
      \u0275\u0275elementEnd()();
      \u0275\u0275elementStart(10, "div", 6);
      \u0275\u0275conditionalCreate(11, AddCategoryRecipeFormComponent_Conditional_11_Template, 3, 5, "lg-button", 7)(12, AddCategoryRecipeFormComponent_Conditional_12_Template, 3, 5, "lg-button", 7);
      \u0275\u0275elementEnd()()()()();
    }
    if (rf & 2) {
      \u0275\u0275advance();
      \u0275\u0275property("size", "small");
      \u0275\u0275advance(2);
      \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(4, 8, "categories.add-product"));
      \u0275\u0275advance(2);
      \u0275\u0275property("formGroup", ctx.form);
      \u0275\u0275advance();
      \u0275\u0275property("bottom", true)("size", "medium");
      \u0275\u0275advance(2);
      \u0275\u0275property("placeholder", \u0275\u0275pipeBind1(9, 10, "settings.category.placeholder"))("size", ctx.isMobile() ? "small" : "normal");
      \u0275\u0275advance(3);
      \u0275\u0275conditional(ctx.uuid() ? 11 : 12);
    }
  }, dependencies: [
    ReactiveFormsModule,
    \u0275NgNoValidate,
    NgControlStatus,
    NgControlStatusGroup,
    FormGroupDirective,
    FormControlName,
    InputComponent,
    ControlComponent,
    ButtonComponent,
    FlexRowComponent,
    ExpandDirective,
    NoWrapDirective,
    FadeInComponent,
    FlexColumnComponent,
    TranslatePipe
  ], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(AddCategoryRecipeFormComponent, [{
    type: Component,
    args: [{ selector: "lg-add-category-recipe-form", standalone: true, template: `
    <lg-fade-in>
     <lg-flex-column [size]="'small'">
        <div class="text-small">{{ 'categories.add-product' | translate }}</div>

        <form [formGroup]="form">
          <lg-flex-row [bottom]="true"
                       [size]="'medium'">
            <lg-control lgExpand>
              <lg-input (onEnter)="onEnter()"
                        [placeholder]="'settings.category.placeholder' | translate"
                        [size]="isMobile() ? 'small' : 'normal'"
                        formControlName="name"></lg-input>
            </lg-control>

            <div lgNoWrap>
              @if (uuid()) {
                <lg-button [disabled]="!form.dirty"
                           [style]="'primary'"
                           [size]="isMobile() ? 'small' : 'regular'"
                           (click)="editCategory()">
                  @if (form.dirty) {
                    {{ 'settings.category.save' | translate }}
                  } @else {
                    {{ 'settings.category.no-changes' | translate }}
                  }
                </lg-button>
              } @else {
                <lg-button [disabled]="!form.dirty"
                           [style]="'primary'"
                           [size]="isMobile() ? 'small' : 'regular'"
                           (click)="addCategory()">
                  @if (form.dirty) {
                    {{ 'settings.category.add' | translate }}
                  } @else {
                    {{ 'settings.category.enter-name' | translate }}
                  }
                </lg-button>
              }
            </div>
          </lg-flex-row>
        </form>
      </lg-flex-column>
    </lg-fade-in>
  `, imports: [
      ReactiveFormsModule,
      InputComponent,
      ControlComponent,
      ButtonComponent,
      FlexRowComponent,
      ExpandDirective,
      NoWrapDirective,
      TranslatePipe,
      FadeInComponent,
      FlexColumnComponent,
      TitleComponent
    ] }]
  }], () => [{ type: CategoryRecipesRepository }, { type: SelectResourcesService, decorators: [{
    type: Inject,
    args: [SelectResourcesService]
  }] }, { type: Router }, { type: NotificationsService }], { onSaved: [{
    type: Output
  }] });
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(AddCategoryRecipeFormComponent, { className: "AddCategoryRecipeFormComponent", filePath: "src/app/features/settings/view/categories/category-recipe/add-category/add-category-recipe-form.component.ts", lineNumber: 91 });
})();

// src/app/features/settings/view/settings.component.ts
function SettingsComponent_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "lg-language-settings");
  }
}
function SettingsComponent_ng_template_8_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "lg-flex-column")(1, "lg-add-category-form", 7);
    \u0275\u0275listener("onSaved", function SettingsComponent_ng_template_8_ng_template_1_Template_lg_add_category_form_onSaved_1_listener() {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r1.editedCategoryProduct.set(""));
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "lg-category-list", 8);
    \u0275\u0275listener("onEdit", function SettingsComponent_ng_template_8_ng_template_1_Template_lg_category_list_onEdit_2_listener($event) {
      \u0275\u0275restoreView(_r1);
      const ctx_r1 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r1.editedCategoryProduct.set($event));
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275property("uuid", ctx_r1.editedCategoryProduct());
  }
}
function SettingsComponent_ng_template_8_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = \u0275\u0275getCurrentView();
    \u0275\u0275elementStart(0, "lg-flex-column")(1, "lg-add-category-recipe-form", 7);
    \u0275\u0275listener("onSaved", function SettingsComponent_ng_template_8_ng_template_3_Template_lg_add_category_recipe_form_onSaved_1_listener() {
      \u0275\u0275restoreView(_r3);
      const ctx_r1 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r1.editedCategoryRecipe.set(""));
    });
    \u0275\u0275elementEnd();
    \u0275\u0275elementStart(2, "lg-category-recipe-list", 8);
    \u0275\u0275listener("onEdit", function SettingsComponent_ng_template_8_ng_template_3_Template_lg_category_recipe_list_onEdit_2_listener($event) {
      \u0275\u0275restoreView(_r3);
      const ctx_r1 = \u0275\u0275nextContext(2);
      return \u0275\u0275resetView(ctx_r1.editedCategoryRecipe.set($event));
    });
    \u0275\u0275elementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = \u0275\u0275nextContext(2);
    \u0275\u0275advance();
    \u0275\u0275property("uuid", ctx_r1.editedCategoryRecipe());
  }
}
function SettingsComponent_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275elementStart(0, "lg-tabs", 5);
    \u0275\u0275template(1, SettingsComponent_ng_template_8_ng_template_1_Template, 3, 1, "ng-template", 6);
    \u0275\u0275pipe(2, "translate");
    \u0275\u0275template(3, SettingsComponent_ng_template_8_ng_template_3_Template, 3, 1, "ng-template", 6);
    \u0275\u0275pipe(4, "translate");
    \u0275\u0275elementEnd();
  }
  if (rf & 2) {
    \u0275\u0275property("flat", true)("scrollable", false)("silent", true);
    \u0275\u0275advance();
    \u0275\u0275property("label", \u0275\u0275pipeBind1(2, 5, "categories.products.link-label"));
    \u0275\u0275advance(2);
    \u0275\u0275property("label", \u0275\u0275pipeBind1(4, 7, "categories.recipes.link-label"));
  }
}
function SettingsComponent_ng_template_10_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "lg-invoices-settings");
  }
}
function SettingsComponent_ng_template_12_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "lg-backup-settings");
  }
}
function SettingsComponent_ng_template_14_Template(rf, ctx) {
  if (rf & 1) {
    \u0275\u0275element(0, "lg-log-center-page");
  }
}
var SettingsComponent = class _SettingsComponent {
  settingsService;
  constructor(settingsService) {
    this.settingsService = settingsService;
  }
  editedCategoryProduct = signal("", ...ngDevMode ? [{ debugName: "editedCategoryProduct" }] : []);
  editedCategoryRecipe = signal("", ...ngDevMode ? [{ debugName: "editedCategoryRecipe" }] : []);
  _onboardingService = inject(OnboardingService);
  ngOnInit() {
    this._onboardingService.markSettingsDone();
  }
  static \u0275fac = function SettingsComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || _SettingsComponent)(\u0275\u0275directiveInject(SettingsService));
  };
  static \u0275cmp = /* @__PURE__ */ \u0275\u0275defineComponent({ type: _SettingsComponent, selectors: [["lg-settings"]], decls: 16, vars: 22, consts: [["alias", "language", "lgTab", "", 3, "label"], ["alias", "categoires", "lgTab", "", 3, "label"], ["alias", "invoice", "lgTab", "", 3, "label"], ["alias", "backup", "lgTab", "", 3, "label"], ["alias", "logs", "lgTab", "", 3, "label"], [3, "flat", "scrollable", "silent"], ["alias", "system", "lgTab", "", 3, "label"], [3, "onSaved", "uuid"], [3, "onEdit"]], template: function SettingsComponent_Template(rf, ctx) {
    if (rf & 1) {
      \u0275\u0275elementStart(0, "lg-fade-in")(1, "lg-container")(2, "lg-title");
      \u0275\u0275text(3);
      \u0275\u0275pipe(4, "translate");
      \u0275\u0275elementEnd();
      \u0275\u0275elementStart(5, "lg-tabs");
      \u0275\u0275template(6, SettingsComponent_ng_template_6_Template, 1, 0, "ng-template", 0);
      \u0275\u0275pipe(7, "translate");
      \u0275\u0275template(8, SettingsComponent_ng_template_8_Template, 5, 9, "ng-template", 1);
      \u0275\u0275pipe(9, "translate");
      \u0275\u0275template(10, SettingsComponent_ng_template_10_Template, 1, 0, "ng-template", 2);
      \u0275\u0275pipe(11, "translate");
      \u0275\u0275template(12, SettingsComponent_ng_template_12_Template, 1, 0, "ng-template", 3);
      \u0275\u0275pipe(13, "translate");
      \u0275\u0275template(14, SettingsComponent_ng_template_14_Template, 1, 0, "ng-template", 4);
      \u0275\u0275pipe(15, "translate");
      \u0275\u0275elementEnd()()();
    }
    if (rf & 2) {
      \u0275\u0275advance(3);
      \u0275\u0275textInterpolate(\u0275\u0275pipeBind1(4, 10, "settings.title"));
      \u0275\u0275advance(3);
      \u0275\u0275property("label", \u0275\u0275interpolate(\u0275\u0275pipeBind1(7, 12, "language.settings-title")));
      \u0275\u0275advance(2);
      \u0275\u0275property("label", \u0275\u0275interpolate(\u0275\u0275pipeBind1(9, 14, "categories.settings-title")));
      \u0275\u0275advance(2);
      \u0275\u0275property("label", \u0275\u0275pipeBind1(11, 16, "settings.invoice.title"));
      \u0275\u0275advance(2);
      \u0275\u0275property("label", \u0275\u0275interpolate(\u0275\u0275pipeBind1(13, 18, "backup.settings-title")));
      \u0275\u0275advance(2);
      \u0275\u0275property("label", \u0275\u0275interpolate(\u0275\u0275pipeBind1(15, 20, "log-center.title")));
    }
  }, dependencies: [
    ContainerComponent,
    TitleComponent,
    FadeInComponent,
    LocalisationSettingsComponent,
    BackupSettingsComponent,
    TabDirective,
    TabsComponent,
    InvoicesSettingsComponent,
    LogCenterPageComponent,
    CategoryListComponent,
    CategoryRecipeListComponent,
    FlexColumnComponent,
    AddCategoryFormComponent,
    AddCategoryRecipeFormComponent,
    TranslatePipe
  ], encapsulation: 2 });
};
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(SettingsComponent, [{
    type: Component,
    args: [{ selector: "lg-settings", standalone: true, imports: [
      ContainerComponent,
      TitleComponent,
      FadeInComponent,
      LocalisationSettingsComponent,
      BackupSettingsComponent,
      TranslatePipe,
      TabDirective,
      TabsComponent,
      InvoicesSettingsComponent,
      LogCenterPageComponent,
      CategoryListComponent,
      CategoryRecipeListComponent,
      FlexColumnComponent,
      AddCategoryFormComponent,
      AddCategoryRecipeFormComponent
    ], template: `<lg-fade-in>
  <lg-container>
    <lg-title>{{ 'settings.title'|translate }}</lg-title>

    <lg-tabs>
      <ng-template alias="language" label="{{ 'language.settings-title'|translate }}" lgTab>
        <lg-language-settings></lg-language-settings>
      </ng-template>

      <ng-template alias="categoires" label="{{ 'categories.settings-title'|translate }}" lgTab>
        <lg-tabs [flat]="true"
                 [scrollable]="false"
                 [silent]="true">
          <ng-template [label]="'categories.products.link-label' | translate" alias="system" lgTab>
            <lg-flex-column>
              <lg-add-category-form (onSaved)="editedCategoryProduct.set('')"
                                    [uuid]="editedCategoryProduct()"></lg-add-category-form>
              <lg-category-list (onEdit)="editedCategoryProduct.set($event)"></lg-category-list>
            </lg-flex-column>
          </ng-template>

          <ng-template [label]="'categories.recipes.link-label' | translate" alias="system" lgTab>
            <lg-flex-column>
              <lg-add-category-recipe-form (onSaved)="editedCategoryRecipe.set('')"
                                           [uuid]="editedCategoryRecipe()"></lg-add-category-recipe-form>
              <lg-category-recipe-list (onEdit)="editedCategoryRecipe.set($event)"></lg-category-recipe-list>
            </lg-flex-column>
          </ng-template>
        </lg-tabs>
      </ng-template>

      <ng-template [label]="'settings.invoice.title' | translate" alias="invoice" lgTab>
        <lg-invoices-settings></lg-invoices-settings>
      </ng-template>

      <!--      <ng-template [label]="'settings.credentials.title' | translate" alias="credentials" lgTab>-->
      <!--        <lg-credentials-settings></lg-credentials-settings>-->
      <!--      </ng-template>-->

      <!--      <ng-template [label]="'settings.taxes.title' | translate" alias="taxes" lgTab>-->
      <!--        <lg-taxes-settings></lg-taxes-settings>-->
      <!--      </ng-template>-->

      <ng-template alias="backup" label="{{ 'backup.settings-title'|translate }}" lgTab>
        <lg-backup-settings></lg-backup-settings>
      </ng-template>

      <ng-template alias="logs" label="{{ 'log-center.title'|translate }}" lgTab>
        <lg-log-center-page></lg-log-center-page>
      </ng-template>
    </lg-tabs>
  </lg-container>
</lg-fade-in>

` }]
  }], () => [{ type: SettingsService }], null);
})();
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && \u0275setClassDebugInfo(SettingsComponent, { className: "SettingsComponent", filePath: "src/app/features/settings/view/settings.component.ts", lineNumber: 48 });
})();
export {
  SettingsComponent
};
//# sourceMappingURL=chunk-CA2PWSJN.js.map
