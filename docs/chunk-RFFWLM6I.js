import{a as dr,b as ac,c as uc,d as cc,e as Ii,l as xi,m as lc,n as Mo,o as Ai}from"./chunk-J66PYGJX.js";import{$a as Oo,A as nt,Aa as ju,Ba as Uu,Bb as Qu,Bc as Ci,Ca as Jt,D as Wt,Da as At,Dc as ic,E as _t,Ea as ur,Ec as sc,Fa as Cn,Fc as oc,G as Ro,Ga as _n,Gc as _i,H as En,Ha as Lu,I as Sn,Ia as Fu,Ib as Zu,J as It,Ja as Bu,Jc as Ae,K as Eo,Ka as zu,L as Cu,La as $u,M as _u,Ma as Ku,Na as Vu,Nb as ec,O as Iu,Oa as Yt,P as Ke,Pb as tc,Q as So,Qa as Gu,Qb as nc,R as Ce,S as he,Ta as cr,U as ue,V as or,Va as Hu,W as xu,Wa as Ao,X as ge,Xa as He,Y as se,Z as q,Za as Wu,_ as Tn,_a as qu,a as bu,aa as Au,ab as Xu,b as Ru,ba as xt,bb as lr,c as bi,ca as Ge,cb as hr,d as vo,e as yo,f as ht,g as $e,gb as Do,ha as qt,hb as Ju,ia as To,j as ft,ja as Ei,k as Me,ka as Ou,kb as Ti,l as ee,lb as fr,lc as Po,m as sr,mb as Yu,n as Eu,na as Si,o as Su,oa as Du,pa as ar,q as de,qa as Co,r as wo,ra as Pu,s as Le,sa as _o,t as bo,ta as Mu,u as Tu,ua as Io,uc as rc,v as Ri,va as ku,wa as Xt,ya as xo,za as Nu}from"./chunk-MV5CNZ6J.js";import{a as Ff}from"./chunk-DELOOZDJ.js";import{a as V,b as Ie,c as wu,d as Uf,e as Lf,f as ae}from"./chunk-2WH2EVR6.js";var _l=Uf((va,ya)=>{"use strict";(function(e,n){typeof va=="object"&&typeof ya<"u"?ya.exports=n():typeof define=="function"&&define.amd?define(n):(e=typeof globalThis<"u"?globalThis:e||self,e.Dexie=n())})(va,function(){"use strict";var e=function(s,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(u[h]=l[h])},e(s,o)};function n(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");e(s,o);function u(){this.constructor=s}s.prototype=o===null?Object.create(o):(u.prototype=o.prototype,new u)}var t=function(){return t=Object.assign||function(o){for(var u,l=1,h=arguments.length;l<h;l++){u=arguments[l];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(o[p]=u[p])}return o},t.apply(this,arguments)};function r(s,o,u){if(u||arguments.length===2)for(var l=0,h=o.length,p;l<h;l++)(p||!(l in o))&&(p||(p=Array.prototype.slice.call(o,0,l)),p[l]=o[l]);return s.concat(p||Array.prototype.slice.call(o))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,a=Object.keys,c=Array.isArray;typeof Promise<"u"&&!i.Promise&&(i.Promise=Promise);function f(s,o){return typeof o!="object"||a(o).forEach(function(u){s[u]=o[u]}),s}var d=Object.getPrototypeOf,m={}.hasOwnProperty;function w(s,o){return m.call(s,o)}function C(s,o){typeof o=="function"&&(o=o(d(s))),(typeof Reflect>"u"?a:Reflect.ownKeys)(o).forEach(function(u){M(s,u,o[u])})}var I=Object.defineProperty;function M(s,o,u,l){I(s,o,f(u&&w(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},l))}function k(s){return{from:function(o){return s.prototype=Object.create(o.prototype),M(s.prototype,"constructor",s),{extend:C.bind(null,s.prototype)}}}}var j=Object.getOwnPropertyDescriptor;function L(s,o){var u=j(s,o),l;return u||(l=d(s))&&L(l,o)}var W=[].slice;function Q(s,o,u){return W.call(s,o,u)}function re(s,o){return o(s)}function fe(s){if(!s)throw new Error("Assertion Failed")}function te(s){i.setImmediate?setImmediate(s):setTimeout(s,0)}function ye(s,o){return s.reduce(function(u,l,h){var p=o(l,h);return p&&(u[p[0]]=p[1]),u},{})}function Te(s,o){if(typeof o=="string"&&w(s,o))return s[o];if(!o)return s;if(typeof o!="string"){for(var u=[],l=0,h=o.length;l<h;++l){var p=Te(s,o[l]);u.push(p)}return u}var g=o.indexOf(".");if(g!==-1){var v=s[o.substr(0,g)];return v==null?void 0:Te(v,o.substr(g+1))}}function me(s,o,u){if(!(!s||o===void 0)&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof o!="string"&&"length"in o){fe(typeof u!="string"&&"length"in u);for(var l=0,h=o.length;l<h;++l)me(s,o[l],u[l])}else{var p=o.indexOf(".");if(p!==-1){var g=o.substr(0,p),v=o.substr(p+1);if(v==="")u===void 0?c(s)&&!isNaN(parseInt(g))?s.splice(g,1):delete s[g]:s[g]=u;else{var y=s[g];(!y||!w(s,g))&&(y=s[g]={}),me(y,v,u)}}else u===void 0?c(s)&&!isNaN(parseInt(o))?s.splice(o,1):delete s[o]:s[o]=u}}function Ye(s,o){typeof o=="string"?me(s,o,void 0):"length"in o&&[].map.call(o,function(u){me(s,u,void 0)})}function Ne(s){var o={};for(var u in s)w(s,u)&&(o[u]=s[u]);return o}var Ts=[].concat;function Da(s){return Ts.apply([],s)}var oh="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Da([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(o){return o+s+"Array"})}))).filter(function(s){return i[s]}),Pa=new Set(oh.map(function(s){return i[s]}));function Ma(s){var o={};for(var u in s)if(w(s,u)){var l=s[u];o[u]=!l||typeof l!="object"||Pa.has(l.constructor)?l:Ma(l)}return o}function ah(s){for(var o in s)if(w(s,o))return!1;return!0}var Vn=null;function jt(s){Vn=new WeakMap;var o=Cs(s);return Vn=null,o}function Cs(s){if(!s||typeof s!="object")return s;var o=Vn.get(s);if(o)return o;if(c(s)){o=[],Vn.set(s,o);for(var u=0,l=s.length;u<l;++u)o.push(Cs(s[u]))}else if(Pa.has(s.constructor))o=s;else{var h=d(s);o=h===Object.prototype?{}:Object.create(h),Vn.set(s,o);for(var p in s)w(s,p)&&(o[p]=Cs(s[p]))}return o}var uh={}.toString;function _s(s){return uh.call(s).slice(8,-1)}var Is=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ch=typeof Is=="symbol"?function(s){var o;return s!=null&&(o=s[Is])&&o.apply(s)}:function(){return null};function Ut(s,o){var u=s.indexOf(o);return u>=0&&s.splice(u,1),u>=0}var dn={};function ut(s){var o,u,l,h;if(arguments.length===1){if(c(s))return s.slice();if(this===dn&&typeof s=="string")return[s];if(h=ch(s)){for(u=[];l=h.next(),!l.done;)u.push(l.value);return u}if(s==null)return[s];if(o=s.length,typeof o=="number"){for(u=new Array(o);o--;)u[o]=s[o];return u}return[s]}for(o=arguments.length,u=new Array(o);o--;)u[o]=arguments[o];return u}var xs=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},lh=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],ka=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],As=lh.concat(ka),hh={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function pn(s,o){this.name=s,this.message=o}k(pn).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Na(s,o){return s+". Errors: "+Object.keys(o).map(function(u){return o[u].toString()}).filter(function(u,l,h){return h.indexOf(u)===l}).join(`
`)}function Wr(s,o,u,l){this.failures=o,this.failedKeys=l,this.successCount=u,this.message=Na(s,o)}k(Wr).from(pn);function gn(s,o){this.name="BulkError",this.failures=Object.keys(o).map(function(u){return o[u]}),this.failuresByPos=o,this.message=Na(s,this.failures)}k(gn).from(pn);var Os=As.reduce(function(s,o){return s[o]=o+"Error",s},{}),fh=pn,J=As.reduce(function(s,o){var u=o+"Error";function l(h,p){this.name=u,h?typeof h=="string"?(this.message="".concat(h).concat(p?`
 `+p:""),this.inner=p||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=hh[o]||u,this.inner=null)}return k(l).from(fh),s[o]=l,s},{});J.Syntax=SyntaxError,J.Type=TypeError,J.Range=RangeError;var ja=ka.reduce(function(s,o){return s[o+"Error"]=J[o],s},{});function dh(s,o){if(!s||s instanceof pn||s instanceof TypeError||s instanceof SyntaxError||!s.name||!ja[s.name])return s;var u=new ja[s.name](o||s.message,s);return"stack"in s&&M(u,"stack",{get:function(){return this.inner.stack}}),u}var qr=As.reduce(function(s,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(s[o+"Error"]=J[o]),s},{});qr.ModifyError=Wr,qr.DexieError=pn,qr.BulkError=gn;function ve(){}function Gn(s){return s}function ph(s,o){return s==null||s===Gn?o:function(u){return o(s(u))}}function Lt(s,o){return function(){s.apply(this,arguments),o.apply(this,arguments)}}function gh(s,o){return s===ve?o:function(){var u=s.apply(this,arguments);u!==void 0&&(arguments[0]=u);var l=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var p=o.apply(this,arguments);return l&&(this.onsuccess=this.onsuccess?Lt(l,this.onsuccess):l),h&&(this.onerror=this.onerror?Lt(h,this.onerror):h),p!==void 0?p:u}}function mh(s,o){return s===ve?o:function(){s.apply(this,arguments);var u=this.onsuccess,l=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?Lt(u,this.onsuccess):u),l&&(this.onerror=this.onerror?Lt(l,this.onerror):l)}}function vh(s,o){return s===ve?o:function(u){var l=s.apply(this,arguments);f(u,l);var h=this.onsuccess,p=this.onerror;this.onsuccess=null,this.onerror=null;var g=o.apply(this,arguments);return h&&(this.onsuccess=this.onsuccess?Lt(h,this.onsuccess):h),p&&(this.onerror=this.onerror?Lt(p,this.onerror):p),l===void 0?g===void 0?void 0:g:f(l,g)}}function yh(s,o){return s===ve?o:function(){return o.apply(this,arguments)===!1?!1:s.apply(this,arguments)}}function Ds(s,o){return s===ve?o:function(){var u=s.apply(this,arguments);if(u&&typeof u.then=="function"){for(var l=this,h=arguments.length,p=new Array(h);h--;)p[h]=arguments[h];return u.then(function(){return o.apply(l,p)})}return o.apply(this,arguments)}}var Qe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ua(s,o){Qe=s}var Hn={},La=100,Ps=typeof Promise>"u"?[]:function(){var s=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[s,d(s),s];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,d(o),s]}(),Fa=Ps[0],Ba=Ps[1],wh=Ps[2],bh=Ba&&Ba.then,Ft=Fa&&Fa.constructor,Ms=!!wh;function Rh(){queueMicrotask(Sh)}var Wn=function(s,o){qn.push([s,o]),Xr&&(Rh(),Xr=!1)},ks=!0,Xr=!0,Bt=[],Jr=[],Ns=Gn,vt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ve,pgp:!1,env:{},finalize:ve},G=vt,qn=[],zt=0,Yr=[];function z(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=G;if(typeof s!="function"){if(s!==Hn)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Us(this,this._value);return}this._state=null,this._value=null,++o.ref,$a(this,s)}var js={get:function(){var s=G,o=ti;function u(l,h){var p=this,g=!s.global&&(s!==G||o!==ti),v=g&&!wt(),y=new z(function(b,S){Ls(p,new za(Ga(l,s,g,v),Ga(h,s,g,v),b,S,s))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return u.prototype=Hn,u},set:function(s){M(this,"then",s&&s.prototype===Hn?js:{get:function(){return s},set:js.set})}};C(z.prototype,{then:js,_then:function(s,o){Ls(this,new za(null,null,s,o,G))},catch:function(s){if(arguments.length===1)return this.then(null,s);var o=arguments[0],u=arguments[1];return typeof o=="function"?this.then(null,function(l){return l instanceof o?u(l):Qr(l)}):this.then(null,function(l){return l&&l.name===o?u(l):Qr(l)})},finally:function(s){return this.then(function(o){return z.resolve(s()).then(function(){return o})},function(o){return z.resolve(s()).then(function(){return Qr(o)})})},timeout:function(s,o){var u=this;return s<1/0?new z(function(l,h){var p=setTimeout(function(){return h(new J.Timeout(o))},s);u.then(l,h).finally(clearTimeout.bind(null,p))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&M(z.prototype,Symbol.toStringTag,"Dexie.Promise"),vt.env=Va();function za(s,o,u,l,h){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof o=="function"?o:null,this.resolve=u,this.reject=l,this.psd=h}C(z,{all:function(){var s=ut.apply(null,arguments).map(ni);return new z(function(o,u){s.length===0&&o([]);var l=s.length;s.forEach(function(h,p){return z.resolve(h).then(function(g){s[p]=g,--l||o(s)},u)})})},resolve:function(s){if(s instanceof z)return s;if(s&&typeof s.then=="function")return new z(function(u,l){s.then(u,l)});var o=new z(Hn,!0,s);return o},reject:Qr,race:function(){var s=ut.apply(null,arguments).map(ni);return new z(function(o,u){s.map(function(l){return z.resolve(l).then(o,u)})})},PSD:{get:function(){return G},set:function(s){return G=s}},totalEchoes:{get:function(){return ti}},newPSD:yt,usePSD:$t,scheduler:{get:function(){return Wn},set:function(s){Wn=s}},rejectionMapper:{get:function(){return Ns},set:function(s){Ns=s}},follow:function(s,o){return new z(function(u,l){return yt(function(h,p){var g=G;g.unhandleds=[],g.onunhandled=p,g.finalize=Lt(function(){var v=this;Th(function(){v.unhandleds.length===0?h():p(v.unhandleds[0])})},g.finalize),s()},o,u,l)})}}),Ft&&(Ft.allSettled&&M(z,"allSettled",function(){var s=ut.apply(null,arguments).map(ni);return new z(function(o){s.length===0&&o([]);var u=s.length,l=new Array(u);s.forEach(function(h,p){return z.resolve(h).then(function(g){return l[p]={status:"fulfilled",value:g}},function(g){return l[p]={status:"rejected",reason:g}}).then(function(){return--u||o(l)})})})}),Ft.any&&typeof AggregateError<"u"&&M(z,"any",function(){var s=ut.apply(null,arguments).map(ni);return new z(function(o,u){s.length===0&&u(new AggregateError([]));var l=s.length,h=new Array(l);s.forEach(function(p,g){return z.resolve(p).then(function(v){return o(v)},function(v){h[g]=v,--l||u(new AggregateError(h))})})})}),Ft.withResolvers&&(z.withResolvers=Ft.withResolvers));function $a(s,o){try{o(function(u){if(s._state===null){if(u===s)throw new TypeError("A promise cannot be resolved with itself.");var l=s._lib&&mn();u&&typeof u.then=="function"?$a(s,function(h,p){u instanceof z?u._then(h,p):u.then(h,p)}):(s._state=!0,s._value=u,Ka(s)),l&&vn()}},Us.bind(null,s))}catch(u){Us(s,u)}}function Us(s,o){if(Jr.push(o),s._state===null){var u=s._lib&&mn();o=Ns(o),s._state=!1,s._value=o,Ch(s),Ka(s),u&&vn()}}function Ka(s){var o=s._listeners;s._listeners=[];for(var u=0,l=o.length;u<l;++u)Ls(s,o[u]);var h=s._PSD;--h.ref||h.finalize(),zt===0&&(++zt,Wn(function(){--zt===0&&Fs()},[]))}function Ls(s,o){if(s._state===null){s._listeners.push(o);return}var u=s._state?o.onFulfilled:o.onRejected;if(u===null)return(s._state?o.resolve:o.reject)(s._value);++o.psd.ref,++zt,Wn(Eh,[u,s,o])}function Eh(s,o,u){try{var l,h=o._value;!o._state&&Jr.length&&(Jr=[]),l=Qe&&o._consoleTask?o._consoleTask.run(function(){return s(h)}):s(h),!o._state&&Jr.indexOf(h)===-1&&_h(o),u.resolve(l)}catch(p){u.reject(p)}finally{--zt===0&&Fs(),--u.psd.ref||u.psd.finalize()}}function Sh(){$t(vt,function(){mn()&&vn()})}function mn(){var s=ks;return ks=!1,Xr=!1,s}function vn(){var s,o,u;do for(;qn.length>0;)for(s=qn,qn=[],u=s.length,o=0;o<u;++o){var l=s[o];l[0].apply(null,l[1])}while(qn.length>0);ks=!0,Xr=!0}function Fs(){var s=Bt;Bt=[],s.forEach(function(l){l._PSD.onunhandled.call(null,l._value,l)});for(var o=Yr.slice(0),u=o.length;u;)o[--u]()}function Th(s){function o(){s(),Yr.splice(Yr.indexOf(o),1)}Yr.push(o),++zt,Wn(function(){--zt===0&&Fs()},[])}function Ch(s){Bt.some(function(o){return o._value===s._value})||Bt.push(s)}function _h(s){for(var o=Bt.length;o;)if(Bt[--o]._value===s._value){Bt.splice(o,1);return}}function Qr(s){return new z(Hn,!1,s)}function we(s,o){var u=G;return function(){var l=mn(),h=G;try{return bt(u,!0),s.apply(this,arguments)}catch(p){o&&o(p)}finally{bt(h,!1),l&&vn()}}}var _e={awaits:0,echoes:0,id:0},Ih=0,Zr=[],ei=0,ti=0,xh=0;function yt(s,o,u,l){var h=G,p=Object.create(h);p.parent=h,p.ref=0,p.global=!1,p.id=++xh,vt.env,p.env=Ms?{Promise:z,PromiseProp:{value:z,configurable:!0,writable:!0},all:z.all,race:z.race,allSettled:z.allSettled,any:z.any,resolve:z.resolve,reject:z.reject}:{},o&&f(p,o),++h.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()};var g=$t(p,s,u,l);return p.ref===0&&p.finalize(),g}function yn(){return _e.id||(_e.id=++Ih),++_e.awaits,_e.echoes+=La,_e.id}function wt(){return _e.awaits?(--_e.awaits===0&&(_e.id=0),_e.echoes=_e.awaits*La,!0):!1}(""+bh).indexOf("[native code]")===-1&&(yn=wt=ve);function ni(s){return _e.echoes&&s&&s.constructor===Ft?(yn(),s.then(function(o){return wt(),o},function(o){return wt(),Se(o)})):s}function Ah(s){++ti,(!_e.echoes||--_e.echoes===0)&&(_e.echoes=_e.awaits=_e.id=0),Zr.push(G),bt(s,!0)}function Oh(){var s=Zr[Zr.length-1];Zr.pop(),bt(s,!1)}function bt(s,o){var u=G;if((o?_e.echoes&&(!ei++||s!==G):ei&&(!--ei||s!==G))&&queueMicrotask(o?Ah.bind(null,s):Oh),s!==G&&(G=s,u===vt&&(vt.env=Va()),Ms)){var l=vt.env.Promise,h=s.env;(u.global||s.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),l.all=h.all,l.race=h.race,l.resolve=h.resolve,l.reject=h.reject,h.allSettled&&(l.allSettled=h.allSettled),h.any&&(l.any=h.any))}}function Va(){var s=i.Promise;return Ms?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function $t(s,o,u,l,h){var p=G;try{return bt(s,!0),o(u,l,h)}finally{bt(p,!1)}}function Ga(s,o,u,l){return typeof s!="function"?s:function(){var h=G;u&&yn(),bt(o,!0);try{return s.apply(this,arguments)}finally{bt(h,!1),l&&queueMicrotask(wt)}}}function Bs(s){Promise===Ft&&_e.echoes===0?ei===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}var Se=z.reject;function zs(s,o,u,l){if(!s.idbdb||!s._state.openComplete&&!G.letThrough&&!s._vip){if(s._state.openComplete)return Se(new J.DatabaseClosed(s._state.dbOpenError));if(!s._state.isBeingOpened){if(!s._state.autoOpen)return Se(new J.DatabaseClosed);s.open().catch(ve)}return s._state.dbReadyPromise.then(function(){return zs(s,o,u,l)})}else{var h=s._createTransaction(o,u,s._dbSchema);try{h.create(),s._state.PR1398_maxLoop=3}catch(p){return p.name===Os.InvalidState&&s.isOpen()&&--s._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),s.close({disableAutoOpen:!1}),s.open().then(function(){return zs(s,o,u,l)})):Se(p)}return h._promise(o,function(p,g){return yt(function(){return G.trans=h,l(p,g,h)})}).then(function(p){if(o==="readwrite")try{h.idbtrans.commit()}catch{}return o==="readonly"?p:h._completion.then(function(){return p})})}}var Ha="4.0.11",Kt="\uFFFF",$s=-1/0,ct="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wa="String expected.",wn=[],ri="__dbnames",Ks="readonly",Vs="readwrite";function Vt(s,o){return s?o?function(){return s.apply(this,arguments)&&o.apply(this,arguments)}:s:o}var qa={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ii(s){return typeof s=="string"&&!/\./.test(s)?function(o){return o[s]===void 0&&s in o&&(o=jt(o),delete o[s]),o}:function(o){return o}}function Xa(){throw J.Type()}function ce(s,o){try{var u=Ja(s),l=Ja(o);if(u!==l)return u==="Array"?1:l==="Array"?-1:u==="binary"?1:l==="binary"?-1:u==="string"?1:l==="string"?-1:u==="Date"?1:l!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return s>o?1:s<o?-1:0;case"binary":return Ph(Ya(s),Ya(o));case"Array":return Dh(s,o)}}catch{}return NaN}function Dh(s,o){for(var u=s.length,l=o.length,h=u<l?u:l,p=0;p<h;++p){var g=ce(s[p],o[p]);if(g!==0)return g}return u===l?0:u<l?-1:1}function Ph(s,o){for(var u=s.length,l=o.length,h=u<l?u:l,p=0;p<h;++p)if(s[p]!==o[p])return s[p]<o[p]?-1:1;return u===l?0:u<l?-1:1}function Ja(s){var o=typeof s;if(o!=="object")return o;if(ArrayBuffer.isView(s))return"binary";var u=_s(s);return u==="ArrayBuffer"?"binary":u}function Ya(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}var Qa=function(){function s(){}return s.prototype._trans=function(o,u,l){var h=this._tx||G.trans,p=this.name,g=Qe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(o==="readonly"?"read":"write"," ").concat(this.name));function v(S,R,x){if(!x.schema[p])throw new J.NotFound("Table "+p+" not part of transaction");return u(x.idbtrans,x)}var y=mn();try{var b=h&&h.db._novip===this.db._novip?h===G.trans?h._promise(o,v,l):yt(function(){return h._promise(o,v,l)},{trans:h,transless:G.transless||G}):zs(this.db,o,[this.name],v);return g&&(b._consoleTask=g,b=b.catch(function(S){return console.trace(S),Se(S)})),b}finally{y&&vn()}},s.prototype.get=function(o,u){var l=this;return o&&o.constructor===Object?this.where(o).first(u):o==null?Se(new J.Type("Invalid argument to Table.get()")):this._trans("readonly",function(h){return l.core.get({trans:h,key:o}).then(function(p){return l.hook.reading.fire(p)})}).then(u)},s.prototype.where=function(o){if(typeof o=="string")return new this.db.WhereClause(this,o);if(c(o))return new this.db.WhereClause(this,"[".concat(o.join("+"),"]"));var u=a(o);if(u.length===1)return this.where(u[0]).equals(o[u[0]]);var l=this.schema.indexes.concat(this.schema.primKey).filter(function(S){if(S.compound&&u.every(function(x){return S.keyPath.indexOf(x)>=0})){for(var R=0;R<u.length;++R)if(u.indexOf(S.keyPath[R])===-1)return!1;return!0}return!1}).sort(function(S,R){return S.keyPath.length-R.keyPath.length})[0];if(l&&this.db._maxKey!==Kt){var h=l.keyPath.slice(0,u.length);return this.where(h).equals(h.map(function(S){return o[S]}))}!l&&Qe&&console.warn("The query ".concat(JSON.stringify(o)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(u.join("+"),"]"));var p=this.schema.idxByName;function g(S,R){return ce(S,R)===0}var v=u.reduce(function(S,R){var x=S[0],U=S[1],E=p[R],T=o[R];return[x||E,x||!E?Vt(U,E&&E.multi?function(_){var P=Te(_,R);return c(P)&&P.some(function(O){return g(T,O)})}:function(_){return g(T,Te(_,R))}):U]},[null,null]),y=v[0],b=v[1];return y?this.where(y.name).equals(o[y.keyPath]).filter(b):l?this.filter(b):this.where(u).equals("")},s.prototype.filter=function(o){return this.toCollection().and(o)},s.prototype.count=function(o){return this.toCollection().count(o)},s.prototype.offset=function(o){return this.toCollection().offset(o)},s.prototype.limit=function(o){return this.toCollection().limit(o)},s.prototype.each=function(o){return this.toCollection().each(o)},s.prototype.toArray=function(o){return this.toCollection().toArray(o)},s.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},s.prototype.orderBy=function(o){return new this.db.Collection(new this.db.WhereClause(this,c(o)?"[".concat(o.join("+"),"]"):o))},s.prototype.reverse=function(){return this.toCollection().reverse()},s.prototype.mapToClass=function(o){var u=this,l=u.db,h=u.name;this.schema.mappedClass=o,o.prototype instanceof Xa&&(o=function(y){n(b,y);function b(){return y!==null&&y.apply(this,arguments)||this}return Object.defineProperty(b.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),b.prototype.table=function(){return h},b}(o));for(var p=new Set,g=o.prototype;g;g=d(g))Object.getOwnPropertyNames(g).forEach(function(y){return p.add(y)});var v=function(y){if(!y)return y;var b=Object.create(o.prototype);for(var S in y)if(!p.has(S))try{b[S]=y[S]}catch{}return b};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),o},s.prototype.defineClass=function(){function o(u){f(this,u)}return this.mapToClass(o)},s.prototype.add=function(o,u){var l=this,h=this.schema.primKey,p=h.auto,g=h.keyPath,v=o;return g&&p&&(v=ii(g)(o)),this._trans("readwrite",function(y){return l.core.mutate({trans:y,type:"add",keys:u!=null?[u]:null,values:[v]})}).then(function(y){return y.numFailures?z.reject(y.failures[0]):y.lastResult}).then(function(y){if(g)try{me(o,g,y)}catch{}return y})},s.prototype.update=function(o,u){if(typeof o=="object"&&!c(o)){var l=Te(o,this.schema.primKey.keyPath);return l===void 0?Se(new J.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(l).modify(u)}else return this.where(":id").equals(o).modify(u)},s.prototype.put=function(o,u){var l=this,h=this.schema.primKey,p=h.auto,g=h.keyPath,v=o;return g&&p&&(v=ii(g)(o)),this._trans("readwrite",function(y){return l.core.mutate({trans:y,type:"put",values:[v],keys:u!=null?[u]:null})}).then(function(y){return y.numFailures?z.reject(y.failures[0]):y.lastResult}).then(function(y){if(g)try{me(o,g,y)}catch{}return y})},s.prototype.delete=function(o){var u=this;return this._trans("readwrite",function(l){return u.core.mutate({trans:l,type:"delete",keys:[o]})}).then(function(l){return l.numFailures?z.reject(l.failures[0]):void 0})},s.prototype.clear=function(){var o=this;return this._trans("readwrite",function(u){return o.core.mutate({trans:u,type:"deleteRange",range:qa})}).then(function(u){return u.numFailures?z.reject(u.failures[0]):void 0})},s.prototype.bulkGet=function(o){var u=this;return this._trans("readonly",function(l){return u.core.getMany({keys:o,trans:l}).then(function(h){return h.map(function(p){return u.hook.reading.fire(p)})})})},s.prototype.bulkAdd=function(o,u,l){var h=this,p=Array.isArray(u)?u:void 0;l=l||(p?void 0:u);var g=l?l.allKeys:void 0;return this._trans("readwrite",function(v){var y=h.schema.primKey,b=y.auto,S=y.keyPath;if(S&&p)throw new J.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(p&&p.length!==o.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var R=o.length,x=S&&b?o.map(ii(S)):o;return h.core.mutate({trans:v,type:"add",keys:p,values:x,wantResults:g}).then(function(U){var E=U.numFailures,T=U.results,_=U.lastResult,P=U.failures,O=g?T:_;if(E===0)return O;throw new gn("".concat(h.name,".bulkAdd(): ").concat(E," of ").concat(R," operations failed"),P)})})},s.prototype.bulkPut=function(o,u,l){var h=this,p=Array.isArray(u)?u:void 0;l=l||(p?void 0:u);var g=l?l.allKeys:void 0;return this._trans("readwrite",function(v){var y=h.schema.primKey,b=y.auto,S=y.keyPath;if(S&&p)throw new J.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(p&&p.length!==o.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var R=o.length,x=S&&b?o.map(ii(S)):o;return h.core.mutate({trans:v,type:"put",keys:p,values:x,wantResults:g}).then(function(U){var E=U.numFailures,T=U.results,_=U.lastResult,P=U.failures,O=g?T:_;if(E===0)return O;throw new gn("".concat(h.name,".bulkPut(): ").concat(E," of ").concat(R," operations failed"),P)})})},s.prototype.bulkUpdate=function(o){var u=this,l=this.core,h=o.map(function(v){return v.key}),p=o.map(function(v){return v.changes}),g=[];return this._trans("readwrite",function(v){return l.getMany({trans:v,keys:h,cache:"clone"}).then(function(y){var b=[],S=[];o.forEach(function(x,U){var E=x.key,T=x.changes,_=y[U];if(_){for(var P=0,O=Object.keys(T);P<O.length;P++){var D=O[P],N=T[D];if(D===u.schema.primKey.keyPath){if(ce(N,E)!==0)throw new J.Constraint("Cannot update primary key in bulkUpdate()")}else me(_,D,N)}g.push(U),b.push(E),S.push(_)}});var R=b.length;return l.mutate({trans:v,type:"put",keys:b,values:S,updates:{keys:h,changeSpecs:p}}).then(function(x){var U=x.numFailures,E=x.failures;if(U===0)return R;for(var T=0,_=Object.keys(E);T<_.length;T++){var P=_[T],O=g[Number(P)];if(O!=null){var D=E[P];delete E[P],E[O]=D}}throw new gn("".concat(u.name,".bulkUpdate(): ").concat(U," of ").concat(R," operations failed"),E)})})})},s.prototype.bulkDelete=function(o){var u=this,l=o.length;return this._trans("readwrite",function(h){return u.core.mutate({trans:h,type:"delete",keys:o})}).then(function(h){var p=h.numFailures,g=h.lastResult,v=h.failures;if(p===0)return g;throw new gn("".concat(u.name,".bulkDelete(): ").concat(p," of ").concat(l," operations failed"),v)})},s}();function Xn(s){var o={},u=function(v,y){if(y){for(var b=arguments.length,S=new Array(b-1);--b;)S[b-1]=arguments[b];return o[v].subscribe.apply(null,S),s}else if(typeof v=="string")return o[v]};u.addEventType=p;for(var l=1,h=arguments.length;l<h;++l)p(arguments[l]);return u;function p(v,y,b){if(typeof v=="object")return g(v);y||(y=yh),b||(b=ve);var S={subscribers:[],fire:b,subscribe:function(R){S.subscribers.indexOf(R)===-1&&(S.subscribers.push(R),S.fire=y(S.fire,R))},unsubscribe:function(R){S.subscribers=S.subscribers.filter(function(x){return x!==R}),S.fire=S.subscribers.reduce(y,b)}};return o[v]=u[v]=S,S}function g(v){a(v).forEach(function(y){var b=v[y];if(c(b))p(y,v[y][0],v[y][1]);else if(b==="asap")var S=p(y,Gn,function(){for(var x=arguments.length,U=new Array(x);x--;)U[x]=arguments[x];S.subscribers.forEach(function(E){te(function(){E.apply(null,U)})})});else throw new J.InvalidArgument("Invalid event config")})}}function Jn(s,o){return k(o).from({prototype:s}),o}function Mh(s){return Jn(Qa.prototype,function(u,l,h){this.db=s,this._tx=h,this.name=u,this.schema=l,this.hook=s._allTables[u]?s._allTables[u].hook:Xn(null,{creating:[gh,ve],reading:[ph,Gn],updating:[vh,ve],deleting:[mh,ve]})})}function bn(s,o){return!(s.filter||s.algorithm||s.or)&&(o?s.justLimit:!s.replayFilter)}function Gs(s,o){s.filter=Vt(s.filter,o)}function Hs(s,o,u){var l=s.replayFilter;s.replayFilter=l?function(){return Vt(l(),o())}:o,s.justLimit=u&&!l}function kh(s,o){s.isMatch=Vt(s.isMatch,o)}function si(s,o){if(s.isPrimKey)return o.primaryKey;var u=o.getIndexByKeyPath(s.index);if(!u)throw new J.Schema("KeyPath "+s.index+" on object store "+o.name+" is not indexed");return u}function Za(s,o,u){var l=si(s,o.schema);return o.openCursor({trans:u,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:l,range:s.range}})}function oi(s,o,u,l){var h=s.replayFilter?Vt(s.filter,s.replayFilter()):s.filter;if(s.or){var p={},g=function(v,y,b){if(!h||h(y,b,function(x){return y.stop(x)},function(x){return y.fail(x)})){var S=y.primaryKey,R=""+S;R==="[object ArrayBuffer]"&&(R=""+new Uint8Array(S)),w(p,R)||(p[R]=!0,o(v,y,b))}};return Promise.all([s.or._iterate(g,u),eu(Za(s,l,u),s.algorithm,g,!s.keysOnly&&s.valueMapper)])}else return eu(Za(s,l,u),Vt(s.algorithm,h),o,!s.keysOnly&&s.valueMapper)}function eu(s,o,u,l){var h=l?function(g,v,y){return u(l(g),v,y)}:u,p=we(h);return s.then(function(g){if(g)return g.start(function(){var v=function(){return g.continue()};(!o||o(g,function(y){return v=y},function(y){g.stop(y),v=ve},function(y){g.fail(y),v=ve}))&&p(g.value,g,function(y){return v=y}),v()})})}var Yn=function(){function s(o){this["@@propmod"]=o}return s.prototype.execute=function(o){var u,l=this["@@propmod"];if(l.add!==void 0){var h=l.add;if(c(h))return r(r([],c(o)?o:[],!0),h,!0).sort();if(typeof h=="number")return(Number(o)||0)+h;if(typeof h=="bigint")try{return BigInt(o)+h}catch{return BigInt(0)+h}throw new TypeError("Invalid term ".concat(h))}if(l.remove!==void 0){var p=l.remove;if(c(p))return c(o)?o.filter(function(v){return!p.includes(v)}).sort():[];if(typeof p=="number")return Number(o)-p;if(typeof p=="bigint")try{return BigInt(o)-p}catch{return BigInt(0)-p}throw new TypeError("Invalid subtrahend ".concat(p))}var g=(u=l.replacePrefix)===null||u===void 0?void 0:u[0];return g&&typeof o=="string"&&o.startsWith(g)?l.replacePrefix[1]+o.substring(g.length):o},s}(),Nh=function(){function s(){}return s.prototype._read=function(o,u){var l=this._ctx;return l.error?l.table._trans(null,Se.bind(null,l.error)):l.table._trans("readonly",o).then(u)},s.prototype._write=function(o){var u=this._ctx;return u.error?u.table._trans(null,Se.bind(null,u.error)):u.table._trans("readwrite",o,"locked")},s.prototype._addAlgorithm=function(o){var u=this._ctx;u.algorithm=Vt(u.algorithm,o)},s.prototype._iterate=function(o,u){return oi(this._ctx,o,u,this._ctx.table.core)},s.prototype.clone=function(o){var u=Object.create(this.constructor.prototype),l=Object.create(this._ctx);return o&&f(l,o),u._ctx=l,u},s.prototype.raw=function(){return this._ctx.valueMapper=null,this},s.prototype.each=function(o){var u=this._ctx;return this._read(function(l){return oi(u,o,l,u.table.core)})},s.prototype.count=function(o){var u=this;return this._read(function(l){var h=u._ctx,p=h.table.core;if(bn(h,!0))return p.count({trans:l,query:{index:si(h,p.schema),range:h.range}}).then(function(v){return Math.min(v,h.limit)});var g=0;return oi(h,function(){return++g,!1},l,p).then(function(){return g})}).then(o)},s.prototype.sortBy=function(o,u){var l=o.split(".").reverse(),h=l[0],p=l.length-1;function g(b,S){return S?g(b[l[S]],S-1):b[h]}var v=this._ctx.dir==="next"?1:-1;function y(b,S){var R=g(b,p),x=g(S,p);return ce(R,x)*v}return this.toArray(function(b){return b.sort(y)}).then(u)},s.prototype.toArray=function(o){var u=this;return this._read(function(l){var h=u._ctx;if(h.dir==="next"&&bn(h,!0)&&h.limit>0){var p=h.valueMapper,g=si(h,h.table.core.schema);return h.table.core.query({trans:l,limit:h.limit,values:!0,query:{index:g,range:h.range}}).then(function(y){var b=y.result;return p?b.map(p):b})}else{var v=[];return oi(h,function(y){return v.push(y)},l,h.table.core).then(function(){return v})}},o)},s.prototype.offset=function(o){var u=this._ctx;return o<=0?this:(u.offset+=o,bn(u)?Hs(u,function(){var l=o;return function(h,p){return l===0?!0:l===1?(--l,!1):(p(function(){h.advance(l),l=0}),!1)}}):Hs(u,function(){var l=o;return function(){return--l<0}}),this)},s.prototype.limit=function(o){return this._ctx.limit=Math.min(this._ctx.limit,o),Hs(this._ctx,function(){var u=o;return function(l,h,p){return--u<=0&&h(p),u>=0}},!0),this},s.prototype.until=function(o,u){return Gs(this._ctx,function(l,h,p){return o(l.value)?(h(p),u):!0}),this},s.prototype.first=function(o){return this.limit(1).toArray(function(u){return u[0]}).then(o)},s.prototype.last=function(o){return this.reverse().first(o)},s.prototype.filter=function(o){return Gs(this._ctx,function(u){return o(u.value)}),kh(this._ctx,o),this},s.prototype.and=function(o){return this.filter(o)},s.prototype.or=function(o){return new this.db.WhereClause(this._ctx.table,o,this)},s.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},s.prototype.desc=function(){return this.reverse()},s.prototype.eachKey=function(o){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(l,h){o(h.key,h)})},s.prototype.eachUniqueKey=function(o){return this._ctx.unique="unique",this.eachKey(o)},s.prototype.eachPrimaryKey=function(o){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(l,h){o(h.primaryKey,h)})},s.prototype.keys=function(o){var u=this._ctx;u.keysOnly=!u.isMatch;var l=[];return this.each(function(h,p){l.push(p.key)}).then(function(){return l}).then(o)},s.prototype.primaryKeys=function(o){var u=this._ctx;if(u.dir==="next"&&bn(u,!0)&&u.limit>0)return this._read(function(h){var p=si(u,u.table.core.schema);return u.table.core.query({trans:h,values:!1,limit:u.limit,query:{index:p,range:u.range}})}).then(function(h){var p=h.result;return p}).then(o);u.keysOnly=!u.isMatch;var l=[];return this.each(function(h,p){l.push(p.primaryKey)}).then(function(){return l}).then(o)},s.prototype.uniqueKeys=function(o){return this._ctx.unique="unique",this.keys(o)},s.prototype.firstKey=function(o){return this.limit(1).keys(function(u){return u[0]}).then(o)},s.prototype.lastKey=function(o){return this.reverse().firstKey(o)},s.prototype.distinct=function(){var o=this._ctx,u=o.index&&o.table.schema.idxByName[o.index];if(!u||!u.multi)return this;var l={};return Gs(this._ctx,function(h){var p=h.primaryKey.toString(),g=w(l,p);return l[p]=!0,!g}),this},s.prototype.modify=function(o){var u=this,l=this._ctx;return this._write(function(h){var p;if(typeof o=="function")p=o;else{var g=a(o),v=g.length;p=function(O){for(var D=!1,N=0;N<v;++N){var A=g[N],F=o[A],$=Te(O,A);F instanceof Yn?(me(O,A,F.execute($)),D=!0):$!==F&&(me(O,A,F),D=!0)}return D}}var y=l.table.core,b=y.schema.primaryKey,S=b.outbound,R=b.extractKey,x=200,U=u.db._options.modifyChunkSize;U&&(typeof U=="object"?x=U[y.name]||U["*"]||200:x=U);var E=[],T=0,_=[],P=function(O,D){var N=D.failures,A=D.numFailures;T+=O-A;for(var F=0,$=a(N);F<$.length;F++){var B=$[F];E.push(N[B])}};return u.clone().primaryKeys().then(function(O){var D=bn(l)&&l.limit===1/0&&(typeof o!="function"||o===Ws)&&{index:l.index,range:l.range},N=function(A){var F=Math.min(x,O.length-A);return y.getMany({trans:h,keys:O.slice(A,A+F),cache:"immutable"}).then(function($){for(var B=[],Y=[],oe=S?[]:null,K=[],ie=0;ie<F;++ie){var Z=$[ie],le={value:jt(Z),primKey:O[A+ie]};p.call(le,le.value,le)!==!1&&(le.value==null?K.push(O[A+ie]):!S&&ce(R(Z),R(le.value))!==0?(K.push(O[A+ie]),B.push(le.value)):(Y.push(le.value),S&&oe.push(O[A+ie])))}return Promise.resolve(B.length>0&&y.mutate({trans:h,type:"add",values:B}).then(function(X){for(var Re in X.failures)K.splice(parseInt(Re),1);P(B.length,X)})).then(function(){return(Y.length>0||D&&typeof o=="object")&&y.mutate({trans:h,type:"put",keys:oe,values:Y,criteria:D,changeSpec:typeof o!="function"&&o,isAdditionalChunk:A>0}).then(function(X){return P(Y.length,X)})}).then(function(){return(K.length>0||D&&o===Ws)&&y.mutate({trans:h,type:"delete",keys:K,criteria:D,isAdditionalChunk:A>0}).then(function(X){return P(K.length,X)})}).then(function(){return O.length>A+F&&N(A+x)})})};return N(0).then(function(){if(E.length>0)throw new Wr("Error modifying one or more objects",E,T,_);return O.length})})})},s.prototype.delete=function(){var o=this._ctx,u=o.range;return bn(o)&&(o.isPrimKey||u.type===3)?this._write(function(l){var h=o.table.core.schema.primaryKey,p=u;return o.table.core.count({trans:l,query:{index:h,range:p}}).then(function(g){return o.table.core.mutate({trans:l,type:"deleteRange",range:p}).then(function(v){var y=v.failures;v.lastResult,v.results;var b=v.numFailures;if(b)throw new Wr("Could not delete some values",Object.keys(y).map(function(S){return y[S]}),g-b);return g-b})})}):this.modify(Ws)},s}(),Ws=function(s,o){return o.value=null};function jh(s){return Jn(Nh.prototype,function(u,l){this.db=s;var h=qa,p=null;if(l)try{h=l()}catch(b){p=b}var g=u._ctx,v=g.table,y=v.hook.reading.fire;this._ctx={table:v,index:g.index,isPrimKey:!g.index||v.schema.primKey.keyPath&&g.index===v.schema.primKey.name,range:h,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:p,or:g.or,valueMapper:y!==Gn?y:null}})}function Uh(s,o){return s<o?-1:s===o?0:1}function Lh(s,o){return s>o?-1:s===o?0:1}function Ue(s,o,u){var l=s instanceof nu?new s.Collection(s):s;return l._ctx.error=u?new u(o):new TypeError(o),l}function Rn(s){return new s.Collection(s,function(){return tu("")}).limit(0)}function Fh(s){return s==="next"?function(o){return o.toUpperCase()}:function(o){return o.toLowerCase()}}function Bh(s){return s==="next"?function(o){return o.toLowerCase()}:function(o){return o.toUpperCase()}}function zh(s,o,u,l,h,p){for(var g=Math.min(s.length,l.length),v=-1,y=0;y<g;++y){var b=o[y];if(b!==l[y])return h(s[y],u[y])<0?s.substr(0,y)+u[y]+u.substr(y+1):h(s[y],l[y])<0?s.substr(0,y)+l[y]+u.substr(y+1):v>=0?s.substr(0,v)+o[v]+u.substr(v+1):null;h(s[y],b)<0&&(v=y)}return g<l.length&&p==="next"?s+u.substr(s.length):g<s.length&&p==="prev"?s.substr(0,u.length):v<0?null:s.substr(0,v)+l[v]+u.substr(v+1)}function ai(s,o,u,l){var h,p,g,v,y,b,S,R=u.length;if(!u.every(function(T){return typeof T=="string"}))return Ue(s,Wa);function x(T){h=Fh(T),p=Bh(T),g=T==="next"?Uh:Lh;var _=u.map(function(P){return{lower:p(P),upper:h(P)}}).sort(function(P,O){return g(P.lower,O.lower)});v=_.map(function(P){return P.upper}),y=_.map(function(P){return P.lower}),b=T,S=T==="next"?"":l}x("next");var U=new s.Collection(s,function(){return Rt(v[0],y[R-1]+l)});U._ondirectionchange=function(T){x(T)};var E=0;return U._addAlgorithm(function(T,_,P){var O=T.key;if(typeof O!="string")return!1;var D=p(O);if(o(D,y,E))return!0;for(var N=null,A=E;A<R;++A){var F=zh(O,D,v[A],y[A],g,b);F===null&&N===null?E=A+1:(N===null||g(N,F)>0)&&(N=F)}return _(N!==null?function(){T.continue(N+S)}:P),!1}),U}function Rt(s,o,u,l){return{type:2,lower:s,upper:o,lowerOpen:u,upperOpen:l}}function tu(s){return{type:1,lower:s,upper:s}}var nu=function(){function s(){}return Object.defineProperty(s.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),s.prototype.between=function(o,u,l,h){l=l!==!1,h=h===!0;try{return this._cmp(o,u)>0||this._cmp(o,u)===0&&(l||h)&&!(l&&h)?Rn(this):new this.Collection(this,function(){return Rt(o,u,!l,!h)})}catch{return Ue(this,ct)}},s.prototype.equals=function(o){return o==null?Ue(this,ct):new this.Collection(this,function(){return tu(o)})},s.prototype.above=function(o){return o==null?Ue(this,ct):new this.Collection(this,function(){return Rt(o,void 0,!0)})},s.prototype.aboveOrEqual=function(o){return o==null?Ue(this,ct):new this.Collection(this,function(){return Rt(o,void 0,!1)})},s.prototype.below=function(o){return o==null?Ue(this,ct):new this.Collection(this,function(){return Rt(void 0,o,!1,!0)})},s.prototype.belowOrEqual=function(o){return o==null?Ue(this,ct):new this.Collection(this,function(){return Rt(void 0,o)})},s.prototype.startsWith=function(o){return typeof o!="string"?Ue(this,Wa):this.between(o,o+Kt,!0,!0)},s.prototype.startsWithIgnoreCase=function(o){return o===""?this.startsWith(o):ai(this,function(u,l){return u.indexOf(l[0])===0},[o],Kt)},s.prototype.equalsIgnoreCase=function(o){return ai(this,function(u,l){return u===l[0]},[o],"")},s.prototype.anyOfIgnoreCase=function(){var o=ut.apply(dn,arguments);return o.length===0?Rn(this):ai(this,function(u,l){return l.indexOf(u)!==-1},o,"")},s.prototype.startsWithAnyOfIgnoreCase=function(){var o=ut.apply(dn,arguments);return o.length===0?Rn(this):ai(this,function(u,l){return l.some(function(h){return u.indexOf(h)===0})},o,Kt)},s.prototype.anyOf=function(){var o=this,u=ut.apply(dn,arguments),l=this._cmp;try{u.sort(l)}catch{return Ue(this,ct)}if(u.length===0)return Rn(this);var h=new this.Collection(this,function(){return Rt(u[0],u[u.length-1])});h._ondirectionchange=function(g){l=g==="next"?o._ascending:o._descending,u.sort(l)};var p=0;return h._addAlgorithm(function(g,v,y){for(var b=g.key;l(b,u[p])>0;)if(++p,p===u.length)return v(y),!1;return l(b,u[p])===0?!0:(v(function(){g.continue(u[p])}),!1)}),h},s.prototype.notEqual=function(o){return this.inAnyRange([[$s,o],[o,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},s.prototype.noneOf=function(){var o=ut.apply(dn,arguments);if(o.length===0)return new this.Collection(this);try{o.sort(this._ascending)}catch{return Ue(this,ct)}var u=o.reduce(function(l,h){return l?l.concat([[l[l.length-1][1],h]]):[[$s,h]]},null);return u.push([o[o.length-1],this.db._maxKey]),this.inAnyRange(u,{includeLowers:!1,includeUppers:!1})},s.prototype.inAnyRange=function(o,u){var l=this,h=this._cmp,p=this._ascending,g=this._descending,v=this._min,y=this._max;if(o.length===0)return Rn(this);if(!o.every(function(A){return A[0]!==void 0&&A[1]!==void 0&&p(A[0],A[1])<=0}))return Ue(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",J.InvalidArgument);var b=!u||u.includeLowers!==!1,S=u&&u.includeUppers===!0;function R(A,F){for(var $=0,B=A.length;$<B;++$){var Y=A[$];if(h(F[0],Y[1])<0&&h(F[1],Y[0])>0){Y[0]=v(Y[0],F[0]),Y[1]=y(Y[1],F[1]);break}}return $===B&&A.push(F),A}var x=p;function U(A,F){return x(A[0],F[0])}var E;try{E=o.reduce(R,[]),E.sort(U)}catch{return Ue(this,ct)}var T=0,_=S?function(A){return p(A,E[T][1])>0}:function(A){return p(A,E[T][1])>=0},P=b?function(A){return g(A,E[T][0])>0}:function(A){return g(A,E[T][0])>=0};function O(A){return!_(A)&&!P(A)}var D=_,N=new this.Collection(this,function(){return Rt(E[0][0],E[E.length-1][1],!b,!S)});return N._ondirectionchange=function(A){A==="next"?(D=_,x=p):(D=P,x=g),E.sort(U)},N._addAlgorithm(function(A,F,$){for(var B=A.key;D(B);)if(++T,T===E.length)return F($),!1;return O(B)?!0:(l._cmp(B,E[T][1])===0||l._cmp(B,E[T][0])===0||F(function(){x===p?A.continue(E[T][0]):A.continue(E[T][1])}),!1)}),N},s.prototype.startsWithAnyOf=function(){var o=ut.apply(dn,arguments);return o.every(function(u){return typeof u=="string"})?o.length===0?Rn(this):this.inAnyRange(o.map(function(u){return[u,u+Kt]})):Ue(this,"startsWithAnyOf() only works with strings")},s}();function $h(s){return Jn(nu.prototype,function(u,l,h){if(this.db=s,this._ctx={table:u,index:l===":id"?null:l,or:h},this._cmp=this._ascending=ce,this._descending=function(p,g){return ce(g,p)},this._max=function(p,g){return ce(p,g)>0?p:g},this._min=function(p,g){return ce(p,g)<0?p:g},this._IDBKeyRange=s._deps.IDBKeyRange,!this._IDBKeyRange)throw new J.MissingAPI})}function Ze(s){return we(function(o){return Qn(o),s(o.target.error),!1})}function Qn(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var Zn="storagemutated",qs="x-storagemutated-1",Et=Xn(null,Zn),Kh=function(){function s(){}return s.prototype._lock=function(){return fe(!G.global),++this._reculock,this._reculock===1&&!G.global&&(G.lockOwnerFor=this),this},s.prototype._unlock=function(){if(fe(!G.global),--this._reculock===0)for(G.global||(G.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var o=this._blockedFuncs.shift();try{$t(o[1],o[0])}catch{}}return this},s.prototype._locked=function(){return this._reculock&&G.lockOwnerFor!==this},s.prototype.create=function(o){var u=this;if(!this.mode)return this;var l=this.db.idbdb,h=this.db._state.dbOpenError;if(fe(!this.idbtrans),!o&&!l)switch(h&&h.name){case"DatabaseClosedError":throw new J.DatabaseClosed(h);case"MissingAPIError":throw new J.MissingAPI(h.message,h);default:throw new J.OpenFailed(h)}if(!this.active)throw new J.TransactionInactive;return fe(this._completion._state===null),o=this.idbtrans=o||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):l.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),o.onerror=we(function(p){Qn(p),u._reject(o.error)}),o.onabort=we(function(p){Qn(p),u.active&&u._reject(new J.Abort(o.error)),u.active=!1,u.on("abort").fire(p)}),o.oncomplete=we(function(){u.active=!1,u._resolve(),"mutatedParts"in o&&Et.storagemutated.fire(o.mutatedParts)}),this},s.prototype._promise=function(o,u,l){var h=this;if(o==="readwrite"&&this.mode!=="readwrite")return Se(new J.ReadOnly("Transaction is readonly"));if(!this.active)return Se(new J.TransactionInactive);if(this._locked())return new z(function(g,v){h._blockedFuncs.push([function(){h._promise(o,u,l).then(g,v)},G])});if(l)return yt(function(){var g=new z(function(v,y){h._lock();var b=u(v,y,h);b&&b.then&&b.then(v,y)});return g.finally(function(){return h._unlock()}),g._lib=!0,g});var p=new z(function(g,v){var y=u(g,v,h);y&&y.then&&y.then(g,v)});return p._lib=!0,p},s.prototype._root=function(){return this.parent?this.parent._root():this},s.prototype.waitFor=function(o){var u=this._root(),l=z.resolve(o);if(u._waitingFor)u._waitingFor=u._waitingFor.then(function(){return l});else{u._waitingFor=l,u._waitingQueue=[];var h=u.idbtrans.objectStore(u.storeNames[0]);(function g(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(h.get(-1/0).onsuccess=g)})()}var p=u._waitingFor;return new z(function(g,v){l.then(function(y){return u._waitingQueue.push(we(g.bind(null,y)))},function(y){return u._waitingQueue.push(we(v.bind(null,y)))}).finally(function(){u._waitingFor===p&&(u._waitingFor=null)})})},s.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new J.Abort))},s.prototype.table=function(o){var u=this._memoizedTables||(this._memoizedTables={});if(w(u,o))return u[o];var l=this.schema[o];if(!l)throw new J.NotFound("Table "+o+" not part of transaction");var h=new this.db.Table(o,l,this);return h.core=this.db.core.table(o),u[o]=h,h},s}();function Vh(s){return Jn(Kh.prototype,function(u,l,h,p,g){var v=this;this.db=s,this.mode=u,this.storeNames=l,this.schema=h,this.chromeTransactionDurability=p,this.idbtrans=null,this.on=Xn(this,"complete","error","abort"),this.parent=g||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new z(function(y,b){v._resolve=y,v._reject=b}),this._completion.then(function(){v.active=!1,v.on.complete.fire()},function(y){var b=v.active;return v.active=!1,v.on.error.fire(y),v.parent?v.parent._reject(y):b&&v.idbtrans&&v.idbtrans.abort(),Se(y)})})}function Xs(s,o,u,l,h,p,g){return{name:s,keyPath:o,unique:u,multi:l,auto:h,compound:p,src:(u&&!g?"&":"")+(l?"*":"")+(h?"++":"")+ru(o)}}function ru(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function Js(s,o,u){return{name:s,primKey:o,indexes:u,mappedClass:null,idxByName:ye(u,function(l){return[l.name,l]})}}function Gh(s){return s.length===1?s[0]:s}var er=function(s){try{return s.only([[]]),er=function(){return[[]]},[[]]}catch{return er=function(){return Kt},Kt}};function Ys(s){return s==null?function(){}:typeof s=="string"?Hh(s):function(o){return Te(o,s)}}function Hh(s){var o=s.split(".");return o.length===1?function(u){return u[s]}:function(u){return Te(u,s)}}function iu(s){return[].slice.call(s)}var Wh=0;function tr(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function qh(s,o,u){function l(R,x){var U=iu(R.objectStoreNames);return{schema:{name:R.name,tables:U.map(function(E){return x.objectStore(E)}).map(function(E){var T=E.keyPath,_=E.autoIncrement,P=c(T),O=T==null,D={},N={name:E.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:O,compound:P,keyPath:T,autoIncrement:_,unique:!0,extractKey:Ys(T)},indexes:iu(E.indexNames).map(function(A){return E.index(A)}).map(function(A){var F=A.name,$=A.unique,B=A.multiEntry,Y=A.keyPath,oe=c(Y),K={name:F,compound:oe,keyPath:Y,unique:$,multiEntry:B,extractKey:Ys(Y)};return D[tr(Y)]=K,K}),getIndexByKeyPath:function(A){return D[tr(A)]}};return D[":id"]=N.primaryKey,T!=null&&(D[tr(T)]=N.primaryKey),N})},hasGetAll:U.length>0&&"getAll"in x.objectStore(U[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function h(R){if(R.type===3)return null;if(R.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var x=R.lower,U=R.upper,E=R.lowerOpen,T=R.upperOpen,_=x===void 0?U===void 0?null:o.upperBound(U,!!T):U===void 0?o.lowerBound(x,!!E):o.bound(x,U,!!E,!!T);return _}function p(R){var x=R.name;function U(_){var P=_.trans,O=_.type,D=_.keys,N=_.values,A=_.range;return new Promise(function(F,$){F=we(F);var B=P.objectStore(x),Y=B.keyPath==null,oe=O==="put"||O==="add";if(!oe&&O!=="delete"&&O!=="deleteRange")throw new Error("Invalid operation type: "+O);var K=(D||N||{length:1}).length;if(D&&N&&D.length!==N.length)throw new Error("Given keys array must have same length as given values array.");if(K===0)return F({numFailures:0,failures:{},results:[],lastResult:void 0});var ie,Z=[],le=[],X=0,Re=function(tt){++X,Qn(tt)};if(O==="deleteRange"){if(A.type===4)return F({numFailures:X,failures:le,results:[],lastResult:void 0});A.type===3?Z.push(ie=B.clear()):Z.push(ie=B.delete(h(A)))}else{var Pe=oe?Y?[N,D]:[N,null]:[D,null],et=Pe[0],je=Pe[1];if(oe)for(var ze=0;ze<K;++ze)Z.push(ie=je&&je[ze]!==void 0?B[O](et[ze],je[ze]):B[O](et[ze])),ie.onerror=Re;else for(var ze=0;ze<K;++ze)Z.push(ie=B[O](et[ze])),ie.onerror=Re}var Ct=function(tt){var ir=tt.target.result;Z.forEach(function(Ve,wi){return Ve.error!=null&&(le[wi]=Ve.error)}),F({numFailures:X,failures:le,results:O==="delete"?D:Z.map(function(Ve){return Ve.result}),lastResult:ir})};ie.onerror=function(tt){Re(tt),Ct(tt)},ie.onsuccess=Ct})}function E(_){var P=_.trans,O=_.values,D=_.query,N=_.reverse,A=_.unique;return new Promise(function(F,$){F=we(F);var B=D.index,Y=D.range,oe=P.objectStore(x),K=B.isPrimaryKey?oe:oe.index(B.name),ie=N?A?"prevunique":"prev":A?"nextunique":"next",Z=O||!("openKeyCursor"in K)?K.openCursor(h(Y),ie):K.openKeyCursor(h(Y),ie);Z.onerror=Ze($),Z.onsuccess=we(function(le){var X=Z.result;if(!X){F(null);return}X.___id=++Wh,X.done=!1;var Re=X.continue.bind(X),Pe=X.continuePrimaryKey;Pe&&(Pe=Pe.bind(X));var et=X.advance.bind(X),je=function(){throw new Error("Cursor not started")},ze=function(){throw new Error("Cursor not stopped")};X.trans=P,X.stop=X.continue=X.continuePrimaryKey=X.advance=je,X.fail=we($),X.next=function(){var Ct=this,tt=1;return this.start(function(){return tt--?Ct.continue():Ct.stop()}).then(function(){return Ct})},X.start=function(Ct){var tt=new Promise(function(Ve,wi){Ve=we(Ve),Z.onerror=Ze(wi),X.fail=wi,X.stop=function(jf){X.stop=X.continue=X.continuePrimaryKey=X.advance=ze,Ve(jf)}}),ir=function(){if(Z.result)try{Ct()}catch(Ve){X.fail(Ve)}else X.done=!0,X.start=function(){throw new Error("Cursor behind last entry")},X.stop()};return Z.onsuccess=we(function(Ve){Z.onsuccess=ir,ir()}),X.continue=Re,X.continuePrimaryKey=Pe,X.advance=et,ir(),tt},F(X)},$)})}function T(_){return function(P){return new Promise(function(O,D){O=we(O);var N=P.trans,A=P.values,F=P.limit,$=P.query,B=F===1/0?void 0:F,Y=$.index,oe=$.range,K=N.objectStore(x),ie=Y.isPrimaryKey?K:K.index(Y.name),Z=h(oe);if(F===0)return O({result:[]});if(_){var le=A?ie.getAll(Z,B):ie.getAllKeys(Z,B);le.onsuccess=function(et){return O({result:et.target.result})},le.onerror=Ze(D)}else{var X=0,Re=A||!("openKeyCursor"in ie)?ie.openCursor(Z):ie.openKeyCursor(Z),Pe=[];Re.onsuccess=function(et){var je=Re.result;if(!je)return O({result:Pe});if(Pe.push(A?je.value:je.primaryKey),++X===F)return O({result:Pe});je.continue()},Re.onerror=Ze(D)}})}}return{name:x,schema:R,mutate:U,getMany:function(_){var P=_.trans,O=_.keys;return new Promise(function(D,N){D=we(D);for(var A=P.objectStore(x),F=O.length,$=new Array(F),B=0,Y=0,oe,K=function(X){var Re=X.target;($[Re._pos]=Re.result)!=null,++Y===B&&D($)},ie=Ze(N),Z=0;Z<F;++Z){var le=O[Z];le!=null&&(oe=A.get(O[Z]),oe._pos=Z,oe.onsuccess=K,oe.onerror=ie,++B)}B===0&&D($)})},get:function(_){var P=_.trans,O=_.key;return new Promise(function(D,N){D=we(D);var A=P.objectStore(x),F=A.get(O);F.onsuccess=function($){return D($.target.result)},F.onerror=Ze(N)})},query:T(y),openCursor:E,count:function(_){var P=_.query,O=_.trans,D=P.index,N=P.range;return new Promise(function(A,F){var $=O.objectStore(x),B=D.isPrimaryKey?$:$.index(D.name),Y=h(N),oe=Y?B.count(Y):B.count();oe.onsuccess=we(function(K){return A(K.target.result)}),oe.onerror=Ze(F)})}}}var g=l(s,u),v=g.schema,y=g.hasGetAll,b=v.tables.map(function(R){return p(R)}),S={};return b.forEach(function(R){return S[R.name]=R}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(R){var x=S[R];if(!x)throw new Error("Table '".concat(R,"' not found"));return S[R]},MIN_KEY:-1/0,MAX_KEY:er(o),schema:v}}function Xh(s,o){return o.reduce(function(u,l){var h=l.create;return t(t({},u),h(u))},s)}function Jh(s,o,u,l){var h=u.IDBKeyRange;u.indexedDB;var p=Xh(qh(o,h,l),s.dbcore);return{dbcore:p}}function ui(s,o){var u=o.db,l=Jh(s._middlewares,u,s._deps,o);s.core=l.dbcore,s.tables.forEach(function(h){var p=h.name;s.core.schema.tables.some(function(g){return g.name===p})&&(h.core=s.core.table(p),s[p]instanceof s.Table&&(s[p].core=h.core))})}function ci(s,o,u,l){u.forEach(function(h){var p=l[h];o.forEach(function(g){var v=L(g,h);(!v||"value"in v&&v.value===void 0)&&(g===s.Transaction.prototype||g instanceof s.Transaction?M(g,h,{get:function(){return this.table(h)},set:function(y){I(this,h,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):g[h]=new s.Table(h,p))})})}function Qs(s,o){o.forEach(function(u){for(var l in u)u[l]instanceof s.Table&&delete u[l]})}function Yh(s,o){return s._cfg.version-o._cfg.version}function Qh(s,o,u,l){var h=s._dbSchema;u.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=Js("$meta",ou("")[0],[]),s._storeNames.push("$meta"));var p=s._createTransaction("readwrite",s._storeNames,h);p.create(u),p._completion.catch(l);var g=p._reject.bind(p),v=G.transless||G;yt(function(){if(G.trans=p,G.transless=v,o===0)a(h).forEach(function(y){eo(u,y,h[y].primKey,h[y].indexes)}),ui(s,u),z.follow(function(){return s.on.populate.fire(p)}).catch(g);else return ui(s,u),ef(s,p,o).then(function(y){return tf(s,y,p,u)}).catch(g)})}function Zh(s,o){su(s._dbSchema,o),o.db.version%10===0&&!o.objectStoreNames.contains("$meta")&&o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var u=hi(s,s.idbdb,o);fi(s,s._dbSchema,o);for(var l=Zs(u,s._dbSchema),h=function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var S=o.objectStore(b.name);b.add.forEach(function(R){Qe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(R.src)),li(S,R)})},p=0,g=l.change;p<g.length;p++){var v=g[p],y=h(v);if(typeof y=="object")return y.value}}function ef(s,o,u){return o.storeNames.includes("$meta")?o.table("$meta").get("version").then(function(l){return l??u}):z.resolve(u)}function tf(s,o,u,l){var h=[],p=s._versions,g=s._dbSchema=hi(s,s.idbdb,l),v=p.filter(function(b){return b._cfg.version>=o});if(v.length===0)return z.resolve();v.forEach(function(b){h.push(function(){var S=g,R=b._cfg.dbschema;fi(s,S,l),fi(s,R,l),g=s._dbSchema=R;var x=Zs(S,R);x.add.forEach(function(O){eo(l,O[0],O[1].primKey,O[1].indexes)}),x.change.forEach(function(O){if(O.recreate)throw new J.Upgrade("Not yet support for changing primary key");var D=l.objectStore(O.name);O.add.forEach(function(N){return li(D,N)}),O.change.forEach(function(N){D.deleteIndex(N.name),li(D,N)}),O.del.forEach(function(N){return D.deleteIndex(N)})});var U=b._cfg.contentUpgrade;if(U&&b._cfg.version>o){ui(s,l),u._memoizedTables={};var E=Ne(R);x.del.forEach(function(O){E[O]=S[O]}),Qs(s,[s.Transaction.prototype]),ci(s,[s.Transaction.prototype],a(E),E),u.schema=E;var T=xs(U);T&&yn();var _,P=z.follow(function(){if(_=U(u),_&&T){var O=wt.bind(null,null);_.then(O,O)}});return _&&typeof _.then=="function"?z.resolve(_):P.then(function(){return _})}}),h.push(function(S){var R=b._cfg.dbschema;nf(R,S),Qs(s,[s.Transaction.prototype]),ci(s,[s.Transaction.prototype],s._storeNames,s._dbSchema),u.schema=s._dbSchema}),h.push(function(S){s.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(s.idbdb.version/10)===b._cfg.version?(s.idbdb.deleteObjectStore("$meta"),delete s._dbSchema.$meta,s._storeNames=s._storeNames.filter(function(R){return R!=="$meta"})):S.objectStore("$meta").put(b._cfg.version,"version"))})});function y(){return h.length?z.resolve(h.shift()(u.idbtrans)).then(y):z.resolve()}return y().then(function(){su(g,l)})}function Zs(s,o){var u={del:[],add:[],change:[]},l;for(l in s)o[l]||u.del.push(l);for(l in o){var h=s[l],p=o[l];if(!h)u.add.push([l,p]);else{var g={name:l,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||h.primKey.auto!==p.primKey.auto)g.recreate=!0,u.change.push(g);else{var v=h.idxByName,y=p.idxByName,b=void 0;for(b in v)y[b]||g.del.push(b);for(b in y){var S=v[b],R=y[b];S?S.src!==R.src&&g.change.push(R):g.add.push(R)}(g.del.length>0||g.add.length>0||g.change.length>0)&&u.change.push(g)}}}return u}function eo(s,o,u,l){var h=s.db.createObjectStore(o,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return l.forEach(function(p){return li(h,p)}),h}function su(s,o){a(s).forEach(function(u){o.db.objectStoreNames.contains(u)||(Qe&&console.debug("Dexie: Creating missing table",u),eo(o,u,s[u].primKey,s[u].indexes))})}function nf(s,o){[].slice.call(o.db.objectStoreNames).forEach(function(u){return s[u]==null&&o.db.deleteObjectStore(u)})}function li(s,o){s.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function hi(s,o,u){var l={},h=Q(o.objectStoreNames,0);return h.forEach(function(p){for(var g=u.objectStore(p),v=g.keyPath,y=Xs(ru(v),v||"",!0,!1,!!g.autoIncrement,v&&typeof v!="string",!0),b=[],S=0;S<g.indexNames.length;++S){var R=g.index(g.indexNames[S]);v=R.keyPath;var x=Xs(R.name,v,!!R.unique,!!R.multiEntry,!1,v&&typeof v!="string",!1);b.push(x)}l[p]=Js(p,y,b)}),l}function rf(s,o,u){s.verno=o.version/10;var l=s._dbSchema=hi(s,o,u);s._storeNames=Q(o.objectStoreNames,0),ci(s,[s._allTables],a(l),l)}function sf(s,o){var u=hi(s,s.idbdb,o),l=Zs(u,s._dbSchema);return!(l.add.length||l.change.some(function(h){return h.add.length||h.change.length}))}function fi(s,o,u){for(var l=u.db.objectStoreNames,h=0;h<l.length;++h){var p=l[h],g=u.objectStore(p);s._hasGetAll="getAll"in g;for(var v=0;v<g.indexNames.length;++v){var y=g.indexNames[v],b=g.index(y).keyPath,S=typeof b=="string"?b:"["+Q(b).join("+")+"]";if(o[p]){var R=o[p].idxByName[S];R&&(R.name=y,delete o[p].idxByName[S],o[p].idxByName[y]=R)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function ou(s){return s.split(",").map(function(o,u){o=o.trim();var l=o.replace(/([&*]|\+\+)/g,""),h=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Xs(l,h||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),c(h),u===0)})}var of=function(){function s(){}return s.prototype._parseStoresSpec=function(o,u){a(o).forEach(function(l){if(o[l]!==null){var h=ou(o[l]),p=h.shift();if(p.unique=!0,p.multi)throw new J.Schema("Primary key cannot be multi-valued");h.forEach(function(g){if(g.auto)throw new J.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new J.Schema("Index must have a name and cannot be an empty string")}),u[l]=Js(l,p,h)}})},s.prototype.stores=function(o){var u=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,o):o;var l=u._versions,h={},p={};return l.forEach(function(g){f(h,g._cfg.storesSource),p=g._cfg.dbschema={},g._parseStoresSpec(h,p)}),u._dbSchema=p,Qs(u,[u._allTables,u,u.Transaction.prototype]),ci(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],a(p),p),u._storeNames=a(p),this},s.prototype.upgrade=function(o){return this._cfg.contentUpgrade=Ds(this._cfg.contentUpgrade||ve,o),this},s}();function af(s){return Jn(of.prototype,function(u){this.db=s,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function to(s,o){var u=s._dbNamesDB;return u||(u=s._dbNamesDB=new lt(ri,{addons:[],indexedDB:s,IDBKeyRange:o}),u.version(1).stores({dbnames:"name"})),u.table("dbnames")}function no(s){return s&&typeof s.databases=="function"}function uf(s){var o=s.indexedDB,u=s.IDBKeyRange;return no(o)?Promise.resolve(o.databases()).then(function(l){return l.map(function(h){return h.name}).filter(function(h){return h!==ri})}):to(o,u).toCollection().primaryKeys()}function cf(s,o){var u=s.indexedDB,l=s.IDBKeyRange;!no(u)&&o!==ri&&to(u,l).put({name:o}).catch(ve)}function lf(s,o){var u=s.indexedDB,l=s.IDBKeyRange;!no(u)&&o!==ri&&to(u,l).delete(o).catch(ve)}function ro(s){return yt(function(){return G.letThrough=!0,s()})}function hf(){var s=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!s||!indexedDB.databases)return Promise.resolve();var o;return new Promise(function(u){var l=function(){return indexedDB.databases().finally(u)};o=setInterval(l,100),l()}).finally(function(){return clearInterval(o)})}var io;function so(s){return!("from"in s)}var De=function(s,o){if(this)f(this,arguments.length?{d:1,from:s,to:arguments.length>1?o:s}:{d:0});else{var u=new De;return s&&"d"in s&&f(u,s),u}};C(De.prototype,(io={add:function(s){return rr(this,s),this},addKey:function(s){return nr(this,s,s),this},addKeys:function(s){var o=this;return s.forEach(function(u){return nr(o,u,u)}),this},hasKey:function(s){var o=di(this).next(s).value;return o&&ce(o.from,s)<=0&&ce(o.to,s)>=0}},io[Is]=function(){return di(this)},io));function nr(s,o,u){var l=ce(o,u);if(!isNaN(l)){if(l>0)throw RangeError();if(so(s))return f(s,{from:o,to:u,d:1});var h=s.l,p=s.r;if(ce(u,s.from)<0)return h?nr(h,o,u):s.l={from:o,to:u,d:1,l:null,r:null},uu(s);if(ce(o,s.to)>0)return p?nr(p,o,u):s.r={from:o,to:u,d:1,l:null,r:null},uu(s);ce(o,s.from)<0&&(s.from=o,s.l=null,s.d=p?p.d+1:1),ce(u,s.to)>0&&(s.to=u,s.r=null,s.d=s.l?s.l.d+1:1);var g=!s.r;h&&!s.l&&rr(s,h),p&&g&&rr(s,p)}}function rr(s,o){function u(l,h){var p=h.from,g=h.to,v=h.l,y=h.r;nr(l,p,g),v&&u(l,v),y&&u(l,y)}so(o)||u(s,o)}function au(s,o){var u=di(o),l=u.next();if(l.done)return!1;for(var h=l.value,p=di(s),g=p.next(h.from),v=g.value;!l.done&&!g.done;){if(ce(v.from,h.to)<=0&&ce(v.to,h.from)>=0)return!0;ce(h.from,v.from)<0?h=(l=u.next(v.from)).value:v=(g=p.next(h.from)).value}return!1}function di(s){var o=so(s)?null:{s:0,n:s};return{next:function(u){for(var l=arguments.length>0;o;)switch(o.s){case 0:if(o.s=1,l)for(;o.n.l&&ce(u,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!l||ce(u,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function uu(s){var o,u,l=(((o=s.r)===null||o===void 0?void 0:o.d)||0)-(((u=s.l)===null||u===void 0?void 0:u.d)||0),h=l>1?"r":l<-1?"l":"";if(h){var p=h==="r"?"l":"r",g=t({},s),v=s[h];s.from=v.from,s.to=v.to,s[h]=v[h],g[h]=v[p],s[p]=g,g.d=cu(g)}s.d=cu(s)}function cu(s){var o=s.r,u=s.l;return(o?u?Math.max(o.d,u.d):o.d:u?u.d:0)+1}function pi(s,o){return a(o).forEach(function(u){s[u]?rr(s[u],o[u]):s[u]=Ma(o[u])}),s}function oo(s,o){return s.all||o.all||Object.keys(s).some(function(u){return o[u]&&au(o[u],s[u])})}var Gt={},ao={},uo=!1;function gi(s,o){pi(ao,s),uo||(uo=!0,setTimeout(function(){uo=!1;var u=ao;ao={},co(u,!1)},0))}function co(s,o){o===void 0&&(o=!1);var u=new Set;if(s.all)for(var l=0,h=Object.values(Gt);l<h.length;l++){var p=h[l];lu(p,s,u,o)}else for(var g in s){var v=/^idb\:\/\/(.*)\/(.*)\//.exec(g);if(v){var y=v[1],b=v[2],p=Gt["idb://".concat(y,"/").concat(b)];p&&lu(p,s,u,o)}}u.forEach(function(S){return S()})}function lu(s,o,u,l){for(var h=[],p=0,g=Object.entries(s.queries.query);p<g.length;p++){for(var v=g[p],y=v[0],b=v[1],S=[],R=0,x=b;R<x.length;R++){var U=x[R];oo(o,U.obsSet)?U.subscribers.forEach(function(P){return u.add(P)}):l&&S.push(U)}l&&h.push([y,S])}if(l)for(var E=0,T=h;E<T.length;E++){var _=T[E],y=_[0],S=_[1];s.queries.query[y]=S}}function ff(s){var o=s._state,u=s._deps.indexedDB;if(o.isBeingOpened||s.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?Se(o.dbOpenError):s});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var l=o.openCanceller,h=Math.round(s.verno*10),p=!1;function g(){if(o.openCanceller!==l)throw new J.DatabaseClosed("db.open() was cancelled")}var v=o.dbReadyResolve,y=null,b=!1,S=function(){return new z(function(R,x){if(g(),!u)throw new J.MissingAPI;var U=s.name,E=o.autoSchema||!h?u.open(U):u.open(U,h);if(!E)throw new J.MissingAPI;E.onerror=Ze(x),E.onblocked=we(s._fireOnBlocked),E.onupgradeneeded=we(function(T){if(y=E.transaction,o.autoSchema&&!s._options.allowEmptyDB){E.onerror=Qn,y.abort(),E.result.close();var _=u.deleteDatabase(U);_.onsuccess=_.onerror=we(function(){x(new J.NoSuchDatabase("Database ".concat(U," doesnt exist")))})}else{y.onerror=Ze(x);var P=T.oldVersion>Math.pow(2,62)?0:T.oldVersion;b=P<1,s.idbdb=E.result,p&&Zh(s,y),Qh(s,P/10,y,x)}},x),E.onsuccess=we(function(){y=null;var T=s.idbdb=E.result,_=Q(T.objectStoreNames);if(_.length>0)try{var P=T.transaction(Gh(_),"readonly");if(o.autoSchema)rf(s,T,P);else if(fi(s,s._dbSchema,P),!sf(s,P)&&!p)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),T.close(),h=T.version+1,p=!0,R(S());ui(s,P)}catch{}wn.push(s),T.onversionchange=we(function(O){o.vcFired=!0,s.on("versionchange").fire(O)}),T.onclose=we(function(O){s.on("close").fire(O)}),b&&cf(s._deps,U),R()},x)}).catch(function(R){switch(R?.name){case"UnknownError":if(o.PR1398_maxLoop>0)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),S();break;case"VersionError":if(h>0)return h=0,S();break}return z.reject(R)})};return z.race([l,(typeof navigator>"u"?z.resolve():hf()).then(S)]).then(function(){return g(),o.onReadyBeingFired=[],z.resolve(ro(function(){return s.on.ready.fire(s.vip)})).then(function R(){if(o.onReadyBeingFired.length>0){var x=o.onReadyBeingFired.reduce(Ds,ve);return o.onReadyBeingFired=[],z.resolve(ro(function(){return x(s.vip)})).then(R)}})}).finally(function(){o.openCanceller===l&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(R){o.dbOpenError=R;try{y&&y.abort()}catch{}return l===o.openCanceller&&s._close(),Se(R)}).finally(function(){o.openComplete=!0,v()}).then(function(){if(b){var R={};s.tables.forEach(function(x){x.schema.indexes.forEach(function(U){U.name&&(R["idb://".concat(s.name,"/").concat(x.name,"/").concat(U.name)]=new De(-1/0,[[[]]]))}),R["idb://".concat(s.name,"/").concat(x.name,"/")]=R["idb://".concat(s.name,"/").concat(x.name,"/:dels")]=new De(-1/0,[[[]]])}),Et(Zn).fire(R),co(R,!0)}return s})}function lo(s){var o=function(g){return s.next(g)},u=function(g){return s.throw(g)},l=p(o),h=p(u);function p(g){return function(v){var y=g(v),b=y.value;return y.done?b:!b||typeof b.then!="function"?c(b)?Promise.all(b).then(l,h):l(b):b.then(l,h)}}return p(o)()}function df(s,o,u){var l=arguments.length;if(l<2)throw new J.InvalidArgument("Too few arguments");for(var h=new Array(l-1);--l;)h[l-1]=arguments[l];u=h.pop();var p=Da(h);return[s,p,u]}function hu(s,o,u,l,h){return z.resolve().then(function(){var p=G.transless||G,g=s._createTransaction(o,u,s._dbSchema,l);g.explicit=!0;var v={trans:g,transless:p};if(l)g.idbtrans=l.idbtrans;else try{g.create(),g.idbtrans._explicit=!0,s._state.PR1398_maxLoop=3}catch(R){return R.name===Os.InvalidState&&s.isOpen()&&--s._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),s.close({disableAutoOpen:!1}),s.open().then(function(){return hu(s,o,u,null,h)})):Se(R)}var y=xs(h);y&&yn();var b,S=z.follow(function(){if(b=h.call(g,g),b)if(y){var R=wt.bind(null,null);b.then(R,R)}else typeof b.next=="function"&&typeof b.throw=="function"&&(b=lo(b))},v);return(b&&typeof b.then=="function"?z.resolve(b).then(function(R){return g.active?R:Se(new J.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):S.then(function(){return b})).then(function(R){return l&&g._resolve(),g._completion.then(function(){return R})}).catch(function(R){return g._reject(R),Se(R)})})}function mi(s,o,u){for(var l=c(s)?s.slice():[s],h=0;h<u;++h)l.push(o);return l}function pf(s){return t(t({},s),{table:function(o){var u=s.table(o),l=u.schema,h={},p=[];function g(T,_,P){var O=tr(T),D=h[O]=h[O]||[],N=T==null?0:typeof T=="string"?1:T.length,A=_>0,F=t(t({},P),{name:A?"".concat(O,"(virtual-from:").concat(P.name,")"):P.name,lowLevelIndex:P,isVirtual:A,keyTail:_,keyLength:N,extractKey:Ys(T),unique:!A&&P.unique});if(D.push(F),F.isPrimaryKey||p.push(F),N>1){var $=N===2?T[0]:T.slice(0,N-1);g($,_+1,P)}return D.sort(function(B,Y){return B.keyTail-Y.keyTail}),F}var v=g(l.primaryKey.keyPath,0,l.primaryKey);h[":id"]=[v];for(var y=0,b=l.indexes;y<b.length;y++){var S=b[y];g(S.keyPath,0,S)}function R(T){var _=h[tr(T)];return _&&_[0]}function x(T,_){return{type:T.type===1?2:T.type,lower:mi(T.lower,T.lowerOpen?s.MAX_KEY:s.MIN_KEY,_),lowerOpen:!0,upper:mi(T.upper,T.upperOpen?s.MIN_KEY:s.MAX_KEY,_),upperOpen:!0}}function U(T){var _=T.query.index;return _.isVirtual?t(t({},T),{query:{index:_.lowLevelIndex,range:x(T.query.range,_.keyTail)}}):T}var E=t(t({},u),{schema:t(t({},l),{primaryKey:v,indexes:p,getIndexByKeyPath:R}),count:function(T){return u.count(U(T))},query:function(T){return u.query(U(T))},openCursor:function(T){var _=T.query.index,P=_.keyTail,O=_.isVirtual,D=_.keyLength;if(!O)return u.openCursor(T);function N(A){function F(B){B!=null?A.continue(mi(B,T.reverse?s.MAX_KEY:s.MIN_KEY,P)):T.unique?A.continue(A.key.slice(0,D).concat(T.reverse?s.MIN_KEY:s.MAX_KEY,P)):A.continue()}var $=Object.create(A,{continue:{value:F},continuePrimaryKey:{value:function(B,Y){A.continuePrimaryKey(mi(B,s.MAX_KEY,P),Y)}},primaryKey:{get:function(){return A.primaryKey}},key:{get:function(){var B=A.key;return D===1?B[0]:B.slice(0,D)}},value:{get:function(){return A.value}}});return $}return u.openCursor(U(T)).then(function(A){return A&&N(A)})}});return E}})}var gf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:pf};function ho(s,o,u,l){return u=u||{},l=l||"",a(s).forEach(function(h){if(!w(o,h))u[l+h]=void 0;else{var p=s[h],g=o[h];if(typeof p=="object"&&typeof g=="object"&&p&&g){var v=_s(p),y=_s(g);v!==y?u[l+h]=o[h]:v==="Object"?ho(p,g,u,l+h+"."):p!==g&&(u[l+h]=o[h])}else p!==g&&(u[l+h]=o[h])}}),a(o).forEach(function(h){w(s,h)||(u[l+h]=o[h])}),u}function fo(s,o){return o.type==="delete"?o.keys:o.keys||o.values.map(s.extractKey)}var mf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return t(t({},s),{table:function(o){var u=s.table(o),l=u.schema.primaryKey,h=t(t({},u),{mutate:function(p){var g=G.trans,v=g.table(o).hook,y=v.deleting,b=v.creating,S=v.updating;switch(p.type){case"add":if(b.fire===ve)break;return g._promise("readwrite",function(){return R(p)},!0);case"put":if(b.fire===ve&&S.fire===ve)break;return g._promise("readwrite",function(){return R(p)},!0);case"delete":if(y.fire===ve)break;return g._promise("readwrite",function(){return R(p)},!0);case"deleteRange":if(y.fire===ve)break;return g._promise("readwrite",function(){return x(p)},!0)}return u.mutate(p);function R(E){var T=G.trans,_=E.keys||fo(l,E);if(!_)throw new Error("Keys missing");return E=E.type==="add"||E.type==="put"?t(t({},E),{keys:_}):t({},E),E.type!=="delete"&&(E.values=r([],E.values,!0)),E.keys&&(E.keys=r([],E.keys,!0)),vf(u,E,_).then(function(P){var O=_.map(function(D,N){var A=P[N],F={onerror:null,onsuccess:null};if(E.type==="delete")y.fire.call(F,D,A,T);else if(E.type==="add"||A===void 0){var $=b.fire.call(F,D,E.values[N],T);D==null&&$!=null&&(D=$,E.keys[N]=D,l.outbound||me(E.values[N],l.keyPath,D))}else{var B=ho(A,E.values[N]),Y=S.fire.call(F,B,D,A,T);if(Y){var oe=E.values[N];Object.keys(Y).forEach(function(K){w(oe,K)?oe[K]=Y[K]:me(oe,K,Y[K])})}}return F});return u.mutate(E).then(function(D){for(var N=D.failures,A=D.results,F=D.numFailures,$=D.lastResult,B=0;B<_.length;++B){var Y=A?A[B]:_[B],oe=O[B];Y==null?oe.onerror&&oe.onerror(N[B]):oe.onsuccess&&oe.onsuccess(E.type==="put"&&P[B]?E.values[B]:Y)}return{failures:N,results:A,numFailures:F,lastResult:$}}).catch(function(D){return O.forEach(function(N){return N.onerror&&N.onerror(D)}),Promise.reject(D)})})}function x(E){return U(E.trans,E.range,1e4)}function U(E,T,_){return u.query({trans:E,values:!1,query:{index:l,range:T},limit:_}).then(function(P){var O=P.result;return R({type:"delete",keys:O,trans:E}).then(function(D){return D.numFailures>0?Promise.reject(D.failures[0]):O.length<_?{failures:[],numFailures:0,lastResult:void 0}:U(E,t(t({},T),{lower:O[O.length-1],lowerOpen:!0}),_)})})}}});return h}})}};function vf(s,o,u){return o.type==="add"?Promise.resolve([]):s.getMany({trans:o.trans,keys:u,cache:"immutable"})}function fu(s,o,u){try{if(!o||o.keys.length<s.length)return null;for(var l=[],h=0,p=0;h<o.keys.length&&p<s.length;++h)ce(o.keys[h],s[p])===0&&(l.push(u?jt(o.values[h]):o.values[h]),++p);return l.length===s.length?l:null}catch{return null}}var yf={stack:"dbcore",level:-1,create:function(s){return{table:function(o){var u=s.table(o);return t(t({},u),{getMany:function(l){if(!l.cache)return u.getMany(l);var h=fu(l.keys,l.trans._cache,l.cache==="clone");return h?z.resolve(h):u.getMany(l).then(function(p){return l.trans._cache={keys:l.keys,values:l.cache==="clone"?jt(p):p},p})},mutate:function(l){return l.type!=="add"&&(l.trans._cache=null),u.mutate(l)}})}}}};function du(s,o){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function pu(s,o){switch(s){case"query":return o.values&&!o.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var wf={stack:"dbcore",level:0,name:"Observability",create:function(s){var o=s.schema.name,u=new De(s.MIN_KEY,s.MAX_KEY);return t(t({},s),{transaction:function(l,h,p){if(G.subscr&&h!=="readonly")throw new J.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(G.querier));return s.transaction(l,h,p)},table:function(l){var h=s.table(l),p=h.schema,g=p.primaryKey,v=p.indexes,y=g.extractKey,b=g.outbound,S=g.autoIncrement&&v.filter(function(E){return E.compound&&E.keyPath.includes(g.keyPath)}),R=t(t({},h),{mutate:function(E){var T,_,P=E.trans,O=E.mutatedParts||(E.mutatedParts={}),D=function(Z){var le="idb://".concat(o,"/").concat(l,"/").concat(Z);return O[le]||(O[le]=new De)},N=D(""),A=D(":dels"),F=E.type,$=E.type==="deleteRange"?[E.range]:E.type==="delete"?[E.keys]:E.values.length<50?[fo(g,E).filter(function(Z){return Z}),E.values]:[],B=$[0],Y=$[1],oe=E.trans._cache;if(c(B)){N.addKeys(B);var K=F==="delete"||B.length===Y.length?fu(B,oe):null;K||A.addKeys(B),(K||Y)&&bf(D,p,K,Y)}else if(B){var ie={from:(T=B.lower)!==null&&T!==void 0?T:s.MIN_KEY,to:(_=B.upper)!==null&&_!==void 0?_:s.MAX_KEY};A.add(ie),N.add(ie)}else N.add(u),A.add(u),p.indexes.forEach(function(Z){return D(Z.name).add(u)});return h.mutate(E).then(function(Z){return B&&(E.type==="add"||E.type==="put")&&(N.addKeys(Z.results),S&&S.forEach(function(le){for(var X=E.values.map(function(je){return le.extractKey(je)}),Re=le.keyPath.findIndex(function(je){return je===g.keyPath}),Pe=0,et=Z.results.length;Pe<et;++Pe)X[Pe][Re]=Z.results[Pe];D(le.name).addKeys(X)})),P.mutatedParts=pi(P.mutatedParts||{},O),Z})}}),x=function(E){var T,_,P=E.query,O=P.index,D=P.range;return[O,new De((T=D.lower)!==null&&T!==void 0?T:s.MIN_KEY,(_=D.upper)!==null&&_!==void 0?_:s.MAX_KEY)]},U={get:function(E){return[g,new De(E.key)]},getMany:function(E){return[g,new De().addKeys(E.keys)]},count:x,query:x,openCursor:x};return a(U).forEach(function(E){R[E]=function(T){var _=G.subscr,P=!!_,O=du(G,h)&&pu(E,T),D=O?T.obsSet={}:_;if(P){var N=function(K){var ie="idb://".concat(o,"/").concat(l,"/").concat(K);return D[ie]||(D[ie]=new De)},A=N(""),F=N(":dels"),$=U[E](T),B=$[0],Y=$[1];if(E==="query"&&B.isPrimaryKey&&!T.values?F.add(Y):N(B.name||"").add(Y),!B.isPrimaryKey)if(E==="count")F.add(u);else{var oe=E==="query"&&b&&T.values&&h.query(t(t({},T),{values:!1}));return h[E].apply(this,arguments).then(function(K){if(E==="query"){if(b&&T.values)return oe.then(function(X){var Re=X.result;return A.addKeys(Re),K});var ie=T.values?K.result.map(y):K.result;T.values?A.addKeys(ie):F.addKeys(ie)}else if(E==="openCursor"){var Z=K,le=T.values;return Z&&Object.create(Z,{key:{get:function(){return F.addKey(Z.primaryKey),Z.key}},primaryKey:{get:function(){var X=Z.primaryKey;return F.addKey(X),X}},value:{get:function(){return le&&A.addKey(Z.primaryKey),Z.value}}})}return K})}}return h[E].apply(this,arguments)}}),R}})}};function bf(s,o,u,l){function h(p){var g=s(p.name||"");function v(b){return b!=null?p.extractKey(b):null}var y=function(b){return p.multiEntry&&c(b)?b.forEach(function(S){return g.addKey(S)}):g.addKey(b)};(u||l).forEach(function(b,S){var R=u&&v(u[S]),x=l&&v(l[S]);ce(R,x)!==0&&(R!=null&&y(R),x!=null&&y(x))})}o.indexes.forEach(h)}function gu(s,o,u){if(u.numFailures===0)return o;if(o.type==="deleteRange")return null;var l=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;if(u.numFailures===l)return null;var h=t({},o);return c(h.keys)&&(h.keys=h.keys.filter(function(p,g){return!(g in u.failures)})),"values"in h&&c(h.values)&&(h.values=h.values.filter(function(p,g){return!(g in u.failures)})),h}function Rf(s,o){return o.lower===void 0?!0:o.lowerOpen?ce(s,o.lower)>0:ce(s,o.lower)>=0}function Ef(s,o){return o.upper===void 0?!0:o.upperOpen?ce(s,o.upper)<0:ce(s,o.upper)<=0}function po(s,o){return Rf(s,o)&&Ef(s,o)}function mu(s,o,u,l,h,p){if(!u||u.length===0)return s;var g=o.query.index,v=g.multiEntry,y=o.query.range,b=l.schema.primaryKey,S=b.extractKey,R=g.extractKey,x=(g.lowLevelIndex||g).extractKey,U=u.reduce(function(E,T){var _=E,P=[];if(T.type==="add"||T.type==="put")for(var O=new De,D=T.values.length-1;D>=0;--D){var N=T.values[D],A=S(N);if(!O.hasKey(A)){var F=R(N);(v&&c(F)?F.some(function(K){return po(K,y)}):po(F,y))&&(O.addKey(A),P.push(N))}}switch(T.type){case"add":{var $=new De().addKeys(o.values?E.map(function(K){return S(K)}):E);_=E.concat(o.values?P.filter(function(K){var ie=S(K);return $.hasKey(ie)?!1:($.addKey(ie),!0)}):P.map(function(K){return S(K)}).filter(function(K){return $.hasKey(K)?!1:($.addKey(K),!0)}));break}case"put":{var B=new De().addKeys(T.values.map(function(K){return S(K)}));_=E.filter(function(K){return!B.hasKey(o.values?S(K):K)}).concat(o.values?P:P.map(function(K){return S(K)}));break}case"delete":var Y=new De().addKeys(T.keys);_=E.filter(function(K){return!Y.hasKey(o.values?S(K):K)});break;case"deleteRange":var oe=T.range;_=E.filter(function(K){return!po(S(K),oe)});break}return _},s);return U===s?s:(U.sort(function(E,T){return ce(x(E),x(T))||ce(S(E),S(T))}),o.limit&&o.limit<1/0&&(U.length>o.limit?U.length=o.limit:s.length===o.limit&&U.length<o.limit&&(h.dirty=!0)),p?Object.freeze(U):U)}function vu(s,o){return ce(s.lower,o.lower)===0&&ce(s.upper,o.upper)===0&&!!s.lowerOpen==!!o.lowerOpen&&!!s.upperOpen==!!o.upperOpen}function Sf(s,o,u,l){if(s===void 0)return o!==void 0?-1:0;if(o===void 0)return 1;var h=ce(s,o);if(h===0){if(u&&l)return 0;if(u)return 1;if(l)return-1}return h}function Tf(s,o,u,l){if(s===void 0)return o!==void 0?1:0;if(o===void 0)return-1;var h=ce(s,o);if(h===0){if(u&&l)return 0;if(u)return-1;if(l)return 1}return h}function Cf(s,o){return Sf(s.lower,o.lower,s.lowerOpen,o.lowerOpen)<=0&&Tf(s.upper,o.upper,s.upperOpen,o.upperOpen)>=0}function _f(s,o,u,l){var h=Gt["idb://".concat(s,"/").concat(o)];if(!h)return[];var p=h.queries[u];if(!p)return[null,!1,h,null];var g=l.query?l.query.index.name:null,v=p[g||""];if(!v)return[null,!1,h,null];switch(u){case"query":var y=v.find(function(R){return R.req.limit===l.limit&&R.req.values===l.values&&vu(R.req.query.range,l.query.range)});if(y)return[y,!0,h,v];var b=v.find(function(R){var x="limit"in R.req?R.req.limit:1/0;return x>=l.limit&&(l.values?R.req.values:!0)&&Cf(R.req.query.range,l.query.range)});return[b,!1,h,v];case"count":var S=v.find(function(R){return vu(R.req.query.range,l.query.range)});return[S,!!S,h,v]}}function If(s,o,u,l){s.subscribers.add(u),l.addEventListener("abort",function(){s.subscribers.delete(u),s.subscribers.size===0&&xf(s,o)})}function xf(s,o){setTimeout(function(){s.subscribers.size===0&&Ut(o,s)},3e3)}var Af={stack:"dbcore",level:0,name:"Cache",create:function(s){var o=s.schema.name,u=t(t({},s),{transaction:function(l,h,p){var g=s.transaction(l,h,p);if(h==="readwrite"){var v=new AbortController,y=v.signal,b=function(S){return function(){if(v.abort(),h==="readwrite"){for(var R=new Set,x=0,U=l;x<U.length;x++){var E=U[x],T=Gt["idb://".concat(o,"/").concat(E)];if(T){var _=s.table(E),P=T.optimisticOps.filter(function(le){return le.trans===g});if(g._explicit&&S&&g.mutatedParts)for(var O=0,D=Object.values(T.queries.query);O<D.length;O++)for(var N=D[O],A=0,F=N.slice();A<F.length;A++){var $=F[A];oo($.obsSet,g.mutatedParts)&&(Ut(N,$),$.subscribers.forEach(function(le){return R.add(le)}))}else if(P.length>0){T.optimisticOps=T.optimisticOps.filter(function(le){return le.trans!==g});for(var B=0,Y=Object.values(T.queries.query);B<Y.length;B++)for(var N=Y[B],oe=0,K=N.slice();oe<K.length;oe++){var $=K[oe];if($.res!=null&&g.mutatedParts)if(S&&!$.dirty){var ie=Object.isFrozen($.res),Z=mu($.res,$.req,P,_,$,ie);$.dirty?(Ut(N,$),$.subscribers.forEach(function(Re){return R.add(Re)})):Z!==$.res&&($.res=Z,$.promise=z.resolve({result:Z}))}else $.dirty&&Ut(N,$),$.subscribers.forEach(function(Re){return R.add(Re)})}}}}R.forEach(function(le){return le()})}}};g.addEventListener("abort",b(!1),{signal:y}),g.addEventListener("error",b(!1),{signal:y}),g.addEventListener("complete",b(!0),{signal:y})}return g},table:function(l){var h=s.table(l),p=h.schema.primaryKey,g=t(t({},h),{mutate:function(v){var y=G.trans;if(p.outbound||y.db._options.cache==="disabled"||y.explicit||y.idbtrans.mode!=="readwrite")return h.mutate(v);var b=Gt["idb://".concat(o,"/").concat(l)];if(!b)return h.mutate(v);var S=h.mutate(v);return(v.type==="add"||v.type==="put")&&(v.values.length>=50||fo(p,v).some(function(R){return R==null}))?S.then(function(R){var x=t(t({},v),{values:v.values.map(function(E,T){var _;if(R.failures[T])return E;var P=!((_=p.keyPath)===null||_===void 0)&&_.includes(".")?jt(E):t({},E);return me(P,p.keyPath,R.results[T]),P})}),U=gu(b,x,R);b.optimisticOps.push(U),queueMicrotask(function(){return v.mutatedParts&&gi(v.mutatedParts)})}):(b.optimisticOps.push(v),v.mutatedParts&&gi(v.mutatedParts),S.then(function(R){if(R.numFailures>0){Ut(b.optimisticOps,v);var x=gu(b,v,R);x&&b.optimisticOps.push(x),v.mutatedParts&&gi(v.mutatedParts)}}),S.catch(function(){Ut(b.optimisticOps,v),v.mutatedParts&&gi(v.mutatedParts)})),S},query:function(v){var y;if(!du(G,h)||!pu("query",v))return h.query(v);var b=((y=G.trans)===null||y===void 0?void 0:y.db._options.cache)==="immutable",S=G,R=S.requery,x=S.signal,U=_f(o,l,"query",v),E=U[0],T=U[1],_=U[2],P=U[3];if(E&&T)E.obsSet=v.obsSet;else{var O=h.query(v).then(function(D){var N=D.result;if(E&&(E.res=N),b){for(var A=0,F=N.length;A<F;++A)Object.freeze(N[A]);Object.freeze(N)}else D.result=jt(N);return D}).catch(function(D){return P&&E&&Ut(P,E),Promise.reject(D)});E={obsSet:v.obsSet,promise:O,subscribers:new Set,type:"query",req:v,dirty:!1},P?P.push(E):(P=[E],_||(_=Gt["idb://".concat(o,"/").concat(l)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),_.queries.query[v.query.index.name||""]=P)}return If(E,P,R,x),E.promise.then(function(D){return{result:mu(D.result,v,_?.optimisticOps,h,E,b)}})}});return g}});return u}};function vi(s,o){return new Proxy(s,{get:function(u,l,h){return l==="db"?o:Reflect.get(u,l,h)}})}var lt=function(){function s(o,u){var l=this;this._middlewares={},this.verno=0;var h=s.dependencies;this._options=u=t({addons:s.addons,autoOpen:!0,indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange,cache:"cloned"},u),this._deps={indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange};var p=u.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ve,dbReadyPromise:null,cancelOpen:ve,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:u.autoOpen};g.dbReadyPromise=new z(function(y){g.dbReadyResolve=y}),g.openCanceller=new z(function(y,b){g.cancelOpen=b}),this._state=g,this.name=o,this.on=Xn(this,"populate","blocked","versionchange","close",{ready:[Ds,ve]}),this.on.ready.subscribe=re(this.on.ready.subscribe,function(y){return function(b,S){s.vip(function(){var R=l._state;if(R.openComplete)R.dbOpenError||z.resolve().then(b),S&&y(b);else if(R.onReadyBeingFired)R.onReadyBeingFired.push(b),S&&y(b);else{y(b);var x=l;S||y(function U(){x.on.ready.unsubscribe(b),x.on.ready.unsubscribe(U)})}})}}),this.Collection=jh(this),this.Table=Mh(this),this.Transaction=Vh(this),this.Version=af(this),this.WhereClause=$h(this),this.on("versionchange",function(y){y.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(l.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(l.name,"'. Closing db now to resume the delete request.")),l.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(l.name,"') was blocked")):console.warn("Upgrade '".concat(l.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=er(u.IDBKeyRange),this._createTransaction=function(y,b,S,R){return new l.Transaction(y,b,S,l._options.chromeTransactionDurability,R)},this._fireOnBlocked=function(y){l.on("blocked").fire(y),wn.filter(function(b){return b.name===l.name&&b!==l&&!b._state.vcFired}).map(function(b){return b.on("versionchange").fire(y)})},this.use(yf),this.use(Af),this.use(wf),this.use(gf),this.use(mf);var v=new Proxy(this,{get:function(y,b,S){if(b==="_vip")return!0;if(b==="table")return function(x){return vi(l.table(x),v)};var R=Reflect.get(y,b,S);return R instanceof Qa?vi(R,v):b==="tables"?R.map(function(x){return vi(x,v)}):b==="_createTransaction"?function(){var x=R.apply(this,arguments);return vi(x,v)}:R}});this.vip=v,p.forEach(function(y){return y(l)})}return s.prototype.version=function(o){if(isNaN(o)||o<.1)throw new J.Type("Given version is not a positive number");if(o=Math.round(o*10)/10,this.idbdb||this._state.isBeingOpened)throw new J.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,o);var u=this._versions,l=u.filter(function(h){return h._cfg.version===o})[0];return l||(l=new this.Version(o),u.push(l),u.sort(Yh),l.stores({}),this._state.autoSchema=!1,l)},s.prototype._whenReady=function(o){var u=this;return this.idbdb&&(this._state.openComplete||G.letThrough||this._vip)?o():new z(function(l,h){if(u._state.openComplete)return h(new J.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen){h(new J.DatabaseClosed);return}u.open().catch(ve)}u._state.dbReadyPromise.then(l,h)}).then(o)},s.prototype.use=function(o){var u=o.stack,l=o.create,h=o.level,p=o.name;p&&this.unuse({stack:u,name:p});var g=this._middlewares[u]||(this._middlewares[u]=[]);return g.push({stack:u,create:l,level:h??10,name:p}),g.sort(function(v,y){return v.level-y.level}),this},s.prototype.unuse=function(o){var u=o.stack,l=o.name,h=o.create;return u&&this._middlewares[u]&&(this._middlewares[u]=this._middlewares[u].filter(function(p){return h?p.create!==h:l?p.name!==l:!1})),this},s.prototype.open=function(){var o=this;return $t(vt,function(){return ff(o)})},s.prototype._close=function(){var o=this._state,u=wn.indexOf(this);if(u>=0&&wn.splice(u,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}o.isBeingOpened||(o.dbReadyPromise=new z(function(l){o.dbReadyResolve=l}),o.openCanceller=new z(function(l,h){o.cancelOpen=h}))},s.prototype.close=function(o){var u=o===void 0?{disableAutoOpen:!0}:o,l=u.disableAutoOpen,h=this._state;l?(h.isBeingOpened&&h.cancelOpen(new J.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new J.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},s.prototype.delete=function(o){var u=this;o===void 0&&(o={disableAutoOpen:!0});var l=arguments.length>0&&typeof arguments[0]!="object",h=this._state;return new z(function(p,g){var v=function(){u.close(o);var y=u._deps.indexedDB.deleteDatabase(u.name);y.onsuccess=we(function(){lf(u._deps,u.name),p()}),y.onerror=Ze(g),y.onblocked=u._fireOnBlocked};if(l)throw new J.InvalidArgument("Invalid closeOptions argument to db.delete()");h.isBeingOpened?h.dbReadyPromise.then(v):v()})},s.prototype.backendDB=function(){return this.idbdb},s.prototype.isOpen=function(){return this.idbdb!==null},s.prototype.hasBeenClosed=function(){var o=this._state.dbOpenError;return o&&o.name==="DatabaseClosed"},s.prototype.hasFailed=function(){return this._state.dbOpenError!==null},s.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(s.prototype,"tables",{get:function(){var o=this;return a(this._allTables).map(function(u){return o._allTables[u]})},enumerable:!1,configurable:!0}),s.prototype.transaction=function(){var o=df.apply(this,arguments);return this._transaction.apply(this,o)},s.prototype._transaction=function(o,u,l){var h=this,p=G.trans;(!p||p.db!==this||o.indexOf("!")!==-1)&&(p=null);var g=o.indexOf("?")!==-1;o=o.replace("!","").replace("?","");var v,y;try{if(y=u.map(function(S){var R=S instanceof h.Table?S.name:S;if(typeof R!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return R}),o=="r"||o===Ks)v=Ks;else if(o=="rw"||o==Vs)v=Vs;else throw new J.InvalidArgument("Invalid transaction mode: "+o);if(p){if(p.mode===Ks&&v===Vs)if(g)p=null;else throw new J.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");p&&y.forEach(function(S){if(p&&p.storeNames.indexOf(S)===-1)if(g)p=null;else throw new J.SubTransaction("Table "+S+" not included in parent transaction.")}),g&&p&&!p.active&&(p=null)}}catch(S){return p?p._promise(null,function(R,x){x(S)}):Se(S)}var b=hu.bind(null,this,v,y,p,l);return p?p._promise(v,b,"lock"):G.trans?$t(G.transless,function(){return h._whenReady(b)}):this._whenReady(b)},s.prototype.table=function(o){if(!w(this._allTables,o))throw new J.InvalidTable("Table ".concat(o," does not exist"));return this._allTables[o]},s}(),Of=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Df=function(){function s(o){this._subscribe=o}return s.prototype.subscribe=function(o,u,l){return this._subscribe(!o||typeof o=="function"?{next:o,error:u,complete:l}:o)},s.prototype[Of]=function(){return this},s}(),yi;try{yi={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{yi={indexedDB:null,IDBKeyRange:null}}function yu(s){var o=!1,u,l=new Df(function(h){var p=xs(s);function g(P){var O=mn();try{p&&yn();var D=yt(s,P);return p&&(D=D.finally(wt)),D}finally{O&&vn()}}var v=!1,y,b={},S={},R={get closed(){return v},unsubscribe:function(){v||(v=!0,y&&y.abort(),x&&Et.storagemutated.unsubscribe(T))}};h.start&&h.start(R);var x=!1,U=function(){return Bs(_)};function E(){return oo(S,b)}var T=function(P){pi(b,P),E()&&U()},_=function(){if(!(v||!yi.indexedDB)){b={};var P={};y&&y.abort(),y=new AbortController;var O={subscr:P,signal:y.signal,requery:U,querier:s,trans:null},D=g(O);Promise.resolve(D).then(function(N){o=!0,u=N,!(v||O.signal.aborted)&&(b={},S=P,!ah(S)&&!x&&(Et(Zn,T),x=!0),Bs(function(){return!v&&h.next&&h.next(N)}))},function(N){o=!1,["DatabaseClosedError","AbortError"].includes(N?.name)||v||Bs(function(){v||h.error&&h.error(N)})})}};return setTimeout(U,0),R});return l.hasValue=function(){return o},l.getValue=function(){return u},l}var Ht=lt;C(Ht,t(t({},qr),{delete:function(s){var o=new Ht(s,{addons:[]});return o.delete()},exists:function(s){return new Ht(s,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return uf(Ht.dependencies).then(s)}catch{return Se(new J.MissingAPI)}},defineClass:function(){function s(o){f(this,o)}return s},ignoreTransaction:function(s){return G.trans?$t(G.transless,s):s()},vip:ro,async:function(s){return function(){try{var o=lo(s.apply(this,arguments));return!o||typeof o.then!="function"?z.resolve(o):o}catch(u){return Se(u)}}},spawn:function(s,o,u){try{var l=lo(s.apply(u,o||[]));return!l||typeof l.then!="function"?z.resolve(l):l}catch(h){return Se(h)}},currentTransaction:{get:function(){return G.trans||null}},waitFor:function(s,o){var u=z.resolve(typeof s=="function"?Ht.ignoreTransaction(s):s).timeout(o||6e4);return G.trans?G.trans.waitFor(u):u},Promise:z,debug:{get:function(){return Qe},set:function(s){Ua(s)}},derive:k,extend:f,props:C,override:re,Events:Xn,on:Et,liveQuery:yu,extendObservabilitySet:pi,getByKeyPath:Te,setByKeyPath:me,delByKeyPath:Ye,shallowClone:Ne,deepClone:jt,getObjectDiff:ho,cmp:ce,asap:te,minKey:$s,addons:[],connections:wn,errnames:Os,dependencies:yi,cache:Gt,semVer:Ha,version:Ha.split(".").map(function(s){return parseInt(s)}).reduce(function(s,o,u){return s+o/Math.pow(10,u*2)})})),Ht.maxKey=er(Ht.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Et(Zn,function(s){if(!St){var o;o=new CustomEvent(qs,{detail:s}),St=!0,dispatchEvent(o),St=!1}}),addEventListener(qs,function(s){var o=s.detail;St||go(o)}));function go(s){var o=St;try{St=!0,Et.storagemutated.fire(s),co(s,!0)}finally{St=o}}var St=!1,Tt,mo=function(){};typeof BroadcastChannel<"u"&&(mo=function(){Tt=new BroadcastChannel(qs),Tt.onmessage=function(s){return s.data&&go(s.data)}},mo(),typeof Tt.unref=="function"&&Tt.unref(),Et(Zn,function(s){St||Tt.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!lt.disableBfCache&&s.persisted){Qe&&console.debug("Dexie: handling persisted pagehide"),Tt?.close();for(var o=0,u=wn;o<u.length;o++){var l=u[o];l.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(s){!lt.disableBfCache&&s.persisted&&(Qe&&console.debug("Dexie: handling persisted pageshow"),mo(),go({all:new De(-1/0,[[]])}))}));function Pf(s){return new Yn({add:s})}function Mf(s){return new Yn({remove:s})}function kf(s,o){return new Yn({replacePrefix:[s,o]})}z.rejectionMapper=dh,Ua(Qe);var Nf=Object.freeze({__proto__:null,Dexie:lt,liveQuery:yu,Entity:Xa,cmp:ce,PropModification:Yn,replacePrefix:kf,add:Pf,remove:Mf,default:lt,RangeSet:De,mergeRanges:rr,rangesOverlap:au});return t(lt,Nf,{default:lt}),lt})});var In=new ge(""),Uo=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,a){return this._findPluginFor(r).addEventListener(t,r,i,a)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new he(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||e)(se(In),se(At))};static \u0275prov=ue({token:e,factory:e.\u0275fac})}return e})(),Qt=class{_doc;constructor(n){this._doc=n}manager},Oi="ng-app-id";function hc(e){for(let n of e)n.remove()}function fc(e,n){let t=n.createElement("style");return t.textContent=e,t}function Bf(e,n,t,r){let i=e.head?.querySelectorAll(`style[${Oi}="${n}"],link[${Oi}="${n}"]`);if(i)for(let a of i)a.removeAttribute(Oi),a instanceof HTMLLinkElement?r.set(a.href.slice(a.href.lastIndexOf("/")+1),{usage:0,elements:[a]}):a.textContent&&t.set(a.textContent,{usage:0,elements:[a]})}function No(e,n){let t=n.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),t}var Lo=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Mo(a),Bf(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,fc);r?.forEach(i=>this.addUsage(i,this.external,No))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let a=r.get(t);a?a.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(c=>this.addElement(c,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(hc(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])hc(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,fc(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,No(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Oi,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||e)(se(Ae),se(Io),se(xo,8),se(Xt))};static \u0275prov=ue({token:e,factory:e.\u0275fac})}return e})(),ko={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Fo=/%COMP%/g;var pc="%COMP%",zf=`_nghost-${pc}`,$f=`_ngcontent-${pc}`,Kf=!0,Vf=new ge("",{providedIn:"root",factory:()=>Kf});function Gf(e){return $f.replace(Fo,e)}function Hf(e){return zf.replace(Fo,e)}function gc(e,n){return n.map(t=>t.replace(Fo,e))}var Bo=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,a,c,f,d,m=null,w=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=f,this.ngZone=d,this.nonce=m,this.tracingService=w,this.platformIsServer=Mo(f),this.defaultRenderer=new pr(t,c,d,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ur.ShadowDom&&(r=Ie(V({},r),{encapsulation:ur.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Di?i.applyToHost(t):i instanceof gr&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,a=i.get(r.id);if(!a){let c=this.doc,f=this.ngZone,d=this.eventManager,m=this.sharedStylesHost,w=this.removeStylesOnCompDestroy,C=this.platformIsServer,I=this.tracingService;switch(r.encapsulation){case ur.Emulated:a=new Di(d,m,r,this.appId,w,c,f,C,I);break;case ur.ShadowDom:return new jo(d,m,t,r,c,f,this.nonce,C,I);default:a=new gr(d,m,r,w,c,f,C,I);break}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||e)(se(Uo),se(Lo),se(Io),se(Vf),se(Ae),se(Xt),se(At),se(xo),se(ju,8))};static \u0275prov=ue({token:e,factory:e.\u0275fac})}return e})(),pr=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,t,r,i,a){this.eventManager=n,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=a}destroy(){}destroyNode=null;createElement(n,t){return t?this.doc.createElementNS(ko[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(dc(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(dc(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){t.remove()}selectRootElement(n,t){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new he(-5104,!1);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;let a=ko[i];a?n.setAttributeNS(a,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){let i=ko[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(cr.DashCase|cr.Important)?n.style.setProperty(t,r,i&cr.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&cr.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n!=null&&(n[t]=r)}setValue(n,t){n.nodeValue=t}listen(n,t,r,i){if(typeof n=="string"&&(n=dr().getGlobalEventTarget(this.doc,n),!n))throw new he(5102,!1);let a=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(a=this.tracingService.wrapEventListener(n,t,a)),this.eventManager.addEventListener(n,t,a,i)}decoratePreventDefault(n){return t=>{if(t==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))===!1&&t.preventDefault()}}};function dc(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var jo=class extends pr{sharedStylesHost;hostEl;shadowRoot;constructor(n,t,r,i,a,c,f,d,m){super(n,a,c,d,m),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let w=i.styles;w=gc(i.id,w);for(let I of w){let M=document.createElement("style");f&&M.setAttribute("nonce",f),M.textContent=I,this.shadowRoot.appendChild(M)}let C=i.getExternalStyles?.();if(C)for(let I of C){let M=No(I,a);f&&M.setAttribute("nonce",f),this.shadowRoot.appendChild(M)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},gr=class extends pr{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,t,r,i,a,c,f,d,m){super(n,a,c,f,d),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let w=r.styles;this.styles=m?gc(m,w):w,this.styleUrls=r.getExternalStyles?.(m)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Di=class extends gr{contentAttr;hostAttr;constructor(n,t,r,i,a,c,f,d,m){let w=i+"-"+r.id;super(n,t,r,a,c,f,d,m,w),this.contentAttr=Gf(w),this.hostAttr=Hf(w)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){let r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}};var zo=class extends uc{supportsDOMEvents=!0},Pi=class e extends zo{static makeCurrent(){ac(new e)}onAndCancel(n,t,r,i){return n.addEventListener(t,r,i),()=>{n.removeEventListener(t,r,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return t=t||this.getDefaultDocument(),t.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return t==="window"?window:t==="document"?n:t==="body"?n.body:null}getBaseHref(n){let t=qf();return t==null?null:Xf(t)}resetBaseElement(){mr=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return xi(document.cookie,n)}},mr=null;function qf(){return mr=mr||document.querySelector("base"),mr?mr.getAttribute("href"):null}function Xf(e){return new URL(e,document.baseURI).pathname}var Jf=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ue({token:e,factory:e.\u0275fac})}return e})(),vc=(()=>{class e extends Qt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,a){return t.addEventListener(r,i,a),()=>this.removeEventListener(t,r,i,a)}removeEventListener(t,r,i,a){return t.removeEventListener(r,i,a)}static \u0275fac=function(r){return new(r||e)(se(Ae))};static \u0275prov=ue({token:e,factory:e.\u0275fac})}return e})(),mc=["alt","control","meta","shift"],Yf={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qf={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},yc=(()=>{class e extends Qt{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,r,i,a){let c=e.parseEventName(r),f=e.eventCallback(c.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>dr().onAndCancel(t,c.domEventName,f,a))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let a=e._normalizeKey(r.pop()),c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),mc.forEach(m=>{let w=r.indexOf(m);w>-1&&(r.splice(w,1),c+=m+".")}),c+=a,r.length!=0||a.length===0)return null;let d={};return d.domEventName=i,d.fullKey=c,d}static matchEventFullKeyCode(t,r){let i=Yf[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),mc.forEach(c=>{if(c!==i){let f=Qf[c];f(t)&&(a+=c+".")}}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{e.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||e)(se(Ae))};static \u0275prov=ue({token:e,factory:e.\u0275fac})}return e})();function Zf(e,n){return ic(V({rootComponent:e},ed(n)))}function ed(e){return{appProviders:[...sd,...e?.providers??[]],platformProviders:id}}function td(){Pi.makeCurrent()}function nd(){return new To}function rd(){return Mu(document),document}var id=[{provide:Xt,useValue:lc},{provide:ku,useValue:td,multi:!0},{provide:Ae,useFactory:rd}];var sd=[{provide:Au,useValue:"root"},{provide:To,useFactory:nd},{provide:In,useClass:vc,multi:!0,deps:[Ae]},{provide:In,useClass:yc,multi:!0,deps:[Ae]},Bo,Lo,Uo,{provide:Hu,useExisting:Bo},{provide:Ai,useClass:Jf},[]];var An=class{},vr=class{},pt=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),a=t.slice(r+1).trim();this.addHeaderEntry(i,a)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){let t=new e;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){let t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,t);let i=(n.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let a=n.value;if(!a)this.headers.delete(t),this.normalizedNames.delete(t);else{let c=this.headers.get(t);if(!c)return;c=c.filter(f=>a.indexOf(f)===-1),c.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}break}}addHeaderEntry(n,t){let r=n.toLowerCase();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(n,t){let r=(Array.isArray(t)?t:[t]).map(a=>a.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}};var ki=class{encodeKey(n){return wc(n)}encodeValue(n){return wc(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function od(e,n){let t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let a=i.indexOf("="),[c,f]=a==-1?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,a)),n.decodeValue(i.slice(a+1))],d=t.get(c)||[];d.push(f),t.set(c,d)}),t}var ad=/%(\d[a-f0-9])/gi,ud={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function wc(e){return encodeURIComponent(e).replace(ad,(n,t)=>ud[t]??n)}function Mi(e){return`${e}`}var dt=class e{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new ki,n.fromString){if(n.fromObject)throw new he(2805,!1);this.map=od(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{let r=n.fromObject[t],i=Array.isArray(r)?r.map(Mi):[Mi(r)];this.map.set(t,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){let t=[];return Object.keys(n).forEach(r=>{let i=n[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let t=this.encoder.encodeKey(n);return this.map.get(n).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let t=new e({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let t=(n.op==="a"?this.map.get(n.param):void 0)||[];t.push(Mi(n.value)),this.map.set(n.param,t);break;case"d":if(n.value!==void 0){let r=this.map.get(n.param)||[],i=r.indexOf(Mi(n.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var Ni=class{map=new Map;set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function cd(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function bc(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function Rc(e){return typeof Blob<"u"&&e instanceof Blob}function Ec(e){return typeof FormData<"u"&&e instanceof FormData}function ld(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Sc="Content-Type",Tc="Accept",Cc="X-Request-URL",_c="text/plain",Ic="application/json",hd=`${Ic}, ${_c}, */*`,xn=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(n,t,r,i){this.url=t,this.method=n.toUpperCase();let a;if(cd(this.method)||i?(this.body=r!==void 0?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params),this.transferCache=a.transferCache),this.headers??=new pt,this.context??=new Ni,!this.params)this.params=new dt,this.urlWithParams=t;else{let c=this.params.toString();if(c.length===0)this.urlWithParams=t;else{let f=t.indexOf("?"),d=f===-1?"?":f<t.length-1?"&":"";this.urlWithParams=t+d+c}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||bc(this.body)||Rc(this.body)||Ec(this.body)||ld(this.body)?this.body:this.body instanceof dt?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Ec(this.body)?null:Rc(this.body)?this.body.type||null:bc(this.body)?null:typeof this.body=="string"?_c:this.body instanceof dt?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Ic:null}clone(n={}){let t=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,a=n.transferCache??this.transferCache,c=n.body!==void 0?n.body:this.body,f=n.withCredentials??this.withCredentials,d=n.reportProgress??this.reportProgress,m=n.headers||this.headers,w=n.params||this.params,C=n.context??this.context;return n.setHeaders!==void 0&&(m=Object.keys(n.setHeaders).reduce((I,M)=>I.set(M,n.setHeaders[M]),m)),n.setParams&&(w=Object.keys(n.setParams).reduce((I,M)=>I.set(M,n.setParams[M]),w)),new e(t,r,c,{params:w,headers:m,context:C,reportProgress:d,responseType:i,withCredentials:f,transferCache:a})}},en=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(en||{}),On=class{headers;status;statusText;url;ok;type;constructor(n,t=200,r="OK"){this.headers=n.headers||new pt,this.status=n.status!==void 0?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},ji=class e extends On{constructor(n={}){super(n)}type=en.ResponseHeader;clone(n={}){return new e({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},tn=class e extends On{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=en.Response;clone(n={}){return new e({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},yr=class extends On{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},fd=200,dd=204;function $o(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var xc=(()=>{class e{handler;constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof xn)a=t;else{let d;i.headers instanceof pt?d=i.headers:d=new pt(i.headers);let m;i.params&&(i.params instanceof dt?m=i.params:m=new dt({fromObject:i.params})),a=new xn(t,r,i.body!==void 0?i.body:null,{headers:d,context:i.context,params:m,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let c=ee(a).pipe(_t(d=>this.handler.handle(d)));if(t instanceof xn||i.observe==="events")return c;let f=c.pipe(nt(d=>d instanceof tn));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe(de(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new he(2806,!1);return d.body}));case"blob":return f.pipe(de(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new he(2807,!1);return d.body}));case"text":return f.pipe(de(d=>{if(d.body!==null&&typeof d.body!="string")throw new he(2808,!1);return d.body}));case"json":default:return f.pipe(de(d=>d.body))}case"response":return f;default:throw new he(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new dt().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,$o(i,r))}post(t,r,i={}){return this.request("POST",t,$o(i,r))}put(t,r,i={}){return this.request("PUT",t,$o(i,r))}static \u0275fac=function(r){return new(r||e)(se(An))};static \u0275prov=ue({token:e,factory:e.\u0275fac})}return e})();var pd=new ge("");function gd(e,n){return n(e)}function md(e,n,t){return(r,i)=>Ge(t,()=>n(r,a=>e(a,i)))}var Ac=new ge(""),Vo=new ge(""),Oc=new ge("",{providedIn:"root",factory:()=>!0});var Ui=(()=>{class e extends An{backend;injector;chain=null;pendingTasks=q(Si);contributeToStability=q(Oc);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Ac),...this.injector.get(Vo,[])]));this.chain=r.reduceRight((i,a)=>md(i,a,this.injector),gd)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Sn(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(se(vr),se(xt))};static \u0275prov=ue({token:e,factory:e.\u0275fac})}return e})();var vd=/^\)\]\}',?\n/,yd=RegExp(`^${Cc}:`,"m");function wd(e){return"responseURL"in e&&e.responseURL?e.responseURL:yd.test(e.getAllResponseHeaders())?e.getResponseHeader(Cc):null}var Ko=(()=>{class e{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new he(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Me(r.\u0275loadImpl()):ee(null)).pipe(Ke(()=>new bi(a=>{let c=r.build();if(c.open(t.method,t.urlWithParams),t.withCredentials&&(c.withCredentials=!0),t.headers.forEach((j,L)=>c.setRequestHeader(j,L.join(","))),t.headers.has(Tc)||c.setRequestHeader(Tc,hd),!t.headers.has(Sc)){let j=t.detectContentTypeHeader();j!==null&&c.setRequestHeader(Sc,j)}if(t.responseType){let j=t.responseType.toLowerCase();c.responseType=j!=="json"?j:"text"}let f=t.serializeBody(),d=null,m=()=>{if(d!==null)return d;let j=c.statusText||"OK",L=new pt(c.getAllResponseHeaders()),W=wd(c)||t.url;return d=new ji({headers:L,status:c.status,statusText:j,url:W}),d},w=()=>{let{headers:j,status:L,statusText:W,url:Q}=m(),re=null;L!==dd&&(re=typeof c.response>"u"?c.responseText:c.response),L===0&&(L=re?fd:0);let fe=L>=200&&L<300;if(t.responseType==="json"&&typeof re=="string"){let te=re;re=re.replace(vd,"");try{re=re!==""?JSON.parse(re):null}catch(ye){re=te,fe&&(fe=!1,re={error:ye,text:re})}}fe?(a.next(new tn({body:re,headers:j,status:L,statusText:W,url:Q||void 0})),a.complete()):a.error(new yr({error:re,headers:j,status:L,statusText:W,url:Q||void 0}))},C=j=>{let{url:L}=m(),W=new yr({error:j,status:c.status||0,statusText:c.statusText||"Unknown Error",url:L||void 0});a.error(W)},I=!1,M=j=>{I||(a.next(m()),I=!0);let L={type:en.DownloadProgress,loaded:j.loaded};j.lengthComputable&&(L.total=j.total),t.responseType==="text"&&c.responseText&&(L.partialText=c.responseText),a.next(L)},k=j=>{let L={type:en.UploadProgress,loaded:j.loaded};j.lengthComputable&&(L.total=j.total),a.next(L)};return c.addEventListener("load",w),c.addEventListener("error",C),c.addEventListener("timeout",C),c.addEventListener("abort",C),t.reportProgress&&(c.addEventListener("progress",M),f!==null&&c.upload&&c.upload.addEventListener("progress",k)),c.send(f),a.next({type:en.Sent}),()=>{c.removeEventListener("error",C),c.removeEventListener("abort",C),c.removeEventListener("load",w),c.removeEventListener("timeout",C),t.reportProgress&&(c.removeEventListener("progress",M),f!==null&&c.upload&&c.upload.removeEventListener("progress",k)),c.readyState!==c.DONE&&c.abort()}})))}static \u0275fac=function(r){return new(r||e)(se(Ai))};static \u0275prov=ue({token:e,factory:e.\u0275fac})}return e})(),Dc=new ge(""),bd="XSRF-TOKEN",Rd=new ge("",{providedIn:"root",factory:()=>bd}),Ed="X-XSRF-TOKEN",Sd=new ge("",{providedIn:"root",factory:()=>Ed}),wr=class{},Td=(()=>{class e{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=xi(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||e)(se(Ae),se(Xt),se(Rd))};static \u0275prov=ue({token:e,factory:e.\u0275fac})}return e})();function Cd(e,n){let t=e.url.toLowerCase();if(!q(Dc)||e.method==="GET"||e.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return n(e);let r=q(wr).getToken(),i=q(Sd);return r!=null&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),n(e)}function _d(...e){let n=[xc,Ko,Ui,{provide:An,useExisting:Ui},{provide:vr,useFactory:()=>q(pd,{optional:!0})??q(Ko)},{provide:Ac,useValue:Cd,multi:!0},{provide:Dc,useValue:!0},{provide:wr,useClass:Td}];for(let t of e)n.push(...t.\u0275providers);return Tn(n)}var xd=new ge(""),Ad="b",Od="h",Dd="s",Pd="st",Md="u",kd="rt",Go=new ge(""),Nd=["GET","HEAD"];function jd(e,n){let I=q(Go),{isCacheActive:t}=I,r=wu(I,["isCacheActive"]),{transferCache:i,method:a}=e;if(!t||i===!1||a==="POST"&&!r.includePostRequests&&!i||a!=="POST"&&!Nd.includes(a)||!r.includeRequestsWithAuthHeaders&&Ud(e)||r.filter?.(e)===!1)return n(e);let c=q(Nu);if(q(xd,{optional:!0}))throw new he(2803,!1);let d=e.url,m=Ld(e,d),w=c.get(m,null),C=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(C=i.includeHeaders),w){let{[Ad]:M,[kd]:k,[Od]:j,[Dd]:L,[Pd]:W,[Md]:Q}=w,re=M;switch(k){case"arraybuffer":re=new TextEncoder().encode(M).buffer;break;case"blob":re=new Blob([M]);break}let fe=new pt(j);return ee(new tn({body:re,headers:fe,status:L,statusText:W,url:Q}))}return n(e).pipe(Ce(M=>{M instanceof tn}))}function Ud(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function Pc(e){return[...e.keys()].sort().map(n=>`${n}=${e.getAll(n)}`).join("&")}function Ld(e,n){let{params:t,method:r,responseType:i}=e,a=Pc(t),c=e.serializeBody();c instanceof URLSearchParams?c=Pc(c):typeof c!="string"&&(c="");let f=[r,i,n,c,a].join("|"),d=Fd(f);return d}function Fd(e){let n=0;for(let t of e)n=Math.imul(31,n)+t.charCodeAt(0)<<0;return n+=2147483648,n.toString()}function Mc(e){return[{provide:Go,useFactory:()=>(Uu("NgHttpTransferCache"),V({isCacheActive:!0},e))},{provide:Vo,useValue:jd,multi:!0},{provide:Ti,multi:!0,useFactory:()=>{let n=q(fr),t=q(Go);return()=>{n.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var kc=(()=>{class e{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||e)(se(Ae))};static \u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var zd={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},Ho=new ge(""),Nc=new ge(""),$d=(()=>{class e{events=[];overrides={};options;buildHammer(t){let r=new Hammer(t,this.options);r.get("pinch").set({enable:!0}),r.get("rotate").set({enable:!0});for(let i in this.overrides)r.get(i).set(this.overrides[i]);return r}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ue({token:e,factory:e.\u0275fac})}return e})(),Kd=(()=>{class e extends Qt{_config;_injector;loader;_loaderPromise=null;constructor(t,r,i,a){super(t),this._config=r,this._injector=i,this.loader=a}supports(t){return!(!zd.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader)}addEventListener(t,r,i){let a=this.manager.getZone();if(r=r.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||a.runOutsideAngular(()=>this.loader());let c=!1,f=()=>{c=!0};return a.runOutsideAngular(()=>this._loaderPromise.then(()=>{if(!window.Hammer){f=()=>{};return}c||(f=this.addEventListener(t,r,i))}).catch(()=>{f=()=>{}})),()=>{f()}}return a.runOutsideAngular(()=>{let c=this._config.buildHammer(t),f=function(d){a.runGuarded(function(){i(d)})};return c.on(r,f),()=>{c.off(r,f),typeof c.destroy=="function"&&c.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}static \u0275fac=function(r){return new(r||e)(se(Ae),se(Ho),se(qt),se(Nc,8))};static \u0275prov=ue({token:e,factory:e.\u0275fac})}return e})(),Cv=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=lr({type:e});static \u0275inj=or({providers:[{provide:In,useClass:Kd,multi:!0,deps:[Ae,Ho,qt,[new Du,Nc]]},{provide:Ho,useClass:$d}]})}return e})(),Vd=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=ue({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=se(Gd),i},providedIn:"root"})}return e})(),Gd=(()=>{class e extends Vd{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Yt.NONE:return r;case Yt.HTML:return _n(r,"HTML")?Cn(r):Vu(this._doc,String(r)).toString();case Yt.STYLE:return _n(r,"Style")?Cn(r):r;case Yt.SCRIPT:if(_n(r,"Script"))return Cn(r);throw new he(5200,!1);case Yt.URL:return _n(r,"URL")?Cn(r):Ku(String(r));case Yt.RESOURCE_URL:if(_n(r,"ResourceURL"))return Cn(r);throw new he(5201,!1);default:throw new he(5202,!1)}}bypassSecurityTrustHtml(t){return Lu(t)}bypassSecurityTrustStyle(t){return Fu(t)}bypassSecurityTrustScript(t){return Bu(t)}bypassSecurityTrustUrl(t){return zu(t)}bypassSecurityTrustResourceUrl(t){return $u(t)}static \u0275fac=function(r){return new(r||e)(se(Ae))};static \u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Li=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e[e.IncrementalHydration=4]="IncrementalHydration",e}(Li||{});function Hd(e,n=[],t={}){return{\u0275kind:e,\u0275providers:n}}function _v(){return Hd(Li.EventReplay,sc())}function Iv(...e){let n=[],t=new Set;for(let{\u0275providers:i,\u0275kind:a}of e)t.add(a),i.length&&n.push(i);let r=t.has(Li.HttpTransferCacheOptions);return Tn([[],oc(),t.has(Li.NoHttpTransferCache)||r?[]:Mc({}),n])}var ne="primary",Mr=Symbol("RouteTitle"),Yo=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function sn(e){return new Yo(e)}function Kc(e,n,t){let r=t.path.split("/");if(r.length>e.length||t.pathMatch==="full"&&(n.hasChildren()||r.length<e.length))return null;let i={};for(let a=0;a<r.length;a++){let c=r[a],f=e[a];if(c[0]===":")i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function qd(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!rt(e[t],n[t]))return!1;return!0}function rt(e,n){let t=e?Qo(e):void 0,r=n?Qo(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Vc(e[i],n[i]))return!1;return!0}function Qo(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Vc(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;let t=[...e].sort(),r=[...n].sort();return t.every((i,a)=>r[a]===i)}else return e===n}function Gc(e){return e.length>0?e[e.length-1]:null}function Pt(e){return Eu(e)?e:Ju(e)?Me(Promise.resolve(e)):ee(e)}var Xd={exact:Wc,subset:qc},Hc={exact:Jd,subset:Yd,ignored:()=>!0};function jc(e,n,t){return Xd[t.paths](e.root,n.root,t.matrixParams)&&Hc[t.queryParams](e.queryParams,n.queryParams)&&!(t.fragment==="exact"&&e.fragment!==n.fragment)}function Jd(e,n){return rt(e,n)}function Wc(e,n,t){if(!nn(e.segments,n.segments)||!zi(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!e.children[r]||!Wc(e.children[r],n.children[r],t))return!1;return!0}function Yd(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>Vc(e[t],n[t]))}function qc(e,n,t){return Xc(e,n,n.segments,t)}function Xc(e,n,t,r){if(e.segments.length>t.length){let i=e.segments.slice(0,t.length);return!(!nn(i,t)||n.hasChildren()||!zi(i,t,r))}else if(e.segments.length===t.length){if(!nn(e.segments,t)||!zi(e.segments,t,r))return!1;for(let i in n.children)if(!e.children[i]||!qc(e.children[i],n.children[i],r))return!1;return!0}else{let i=t.slice(0,e.segments.length),a=t.slice(e.segments.length);return!nn(e.segments,i)||!zi(e.segments,i,r)||!e.children[ne]?!1:Xc(e.children[ne],n,a,r)}}function zi(e,n,t){return n.every((r,i)=>Hc[t](e[i].parameters,r.parameters))}var st=class{root;queryParams;fragment;_queryParamMap;constructor(n=new pe([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=sn(this.queryParams),this._queryParamMap}toString(){return ep.serialize(this)}},pe=class{segments;children;parent=null;constructor(n,t){this.segments=n,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $i(this)}},Ot=class{path;parameters;_parameterMap;constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=sn(this.parameters),this._parameterMap}toString(){return Yc(this)}};function Qd(e,n){return nn(e,n)&&e.every((t,r)=>rt(t.parameters,n[r].parameters))}function nn(e,n){return e.length!==n.length?!1:e.every((t,r)=>t.path===n[r].path)}function Zd(e,n){let t=[];return Object.entries(e.children).forEach(([r,i])=>{r===ne&&(t=t.concat(n(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==ne&&(t=t.concat(n(i,r)))}),t}var kr=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=ue({token:e,factory:()=>new on,providedIn:"root"})}return e})(),on=class{parse(n){let t=new ea(n);return new st(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){let t=`/${br(n.root,!0)}`,r=rp(n.queryParams),i=typeof n.fragment=="string"?`#${tp(n.fragment)}`:"";return`${t}${r}${i}`}},ep=new on;function $i(e){return e.segments.map(n=>Yc(n)).join("/")}function br(e,n){if(!e.hasChildren())return $i(e);if(n){let t=e.children[ne]?br(e.children[ne],!1):"",r=[];return Object.entries(e.children).forEach(([i,a])=>{i!==ne&&r.push(`${i}:${br(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Zd(e,(r,i)=>i===ne?[br(e.children[ne],!1)]:[`${i}:${br(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[ne]!=null?`${$i(e)}/${t[0]}`:`${$i(e)}/(${t.join("//")})`}}function Jc(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fi(e){return Jc(e).replace(/%3B/gi,";")}function tp(e){return encodeURI(e)}function Zo(e){return Jc(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ki(e){return decodeURIComponent(e)}function Uc(e){return Ki(e.replace(/\+/g,"%20"))}function Yc(e){return`${Zo(e.path)}${np(e.parameters)}`}function np(e){return Object.entries(e).map(([n,t])=>`;${Zo(n)}=${Zo(t)}`).join("")}function rp(e){let n=Object.entries(e).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Fi(t)}=${Fi(i)}`).join("&"):`${Fi(t)}=${Fi(r)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}var ip=/^[^\/()?;#]+/;function Wo(e){let n=e.match(ip);return n?n[0]:""}var sp=/^[^\/()?;=#]+/;function op(e){let n=e.match(sp);return n?n[0]:""}var ap=/^[^=?&#]+/;function up(e){let n=e.match(ap);return n?n[0]:""}var cp=/^[^&#]+/;function lp(e){let n=e.match(cp);return n?n[0]:""}var ea=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[ne]=new pe(n,t)),r}parseSegment(){let n=Wo(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new he(4009,!1);return this.capture(n),new Ot(Ki(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let t=op(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Wo(this.remaining);i&&(r=i,this.capture(r))}n[Ki(t)]=Ki(r)}parseQueryParam(n){let t=up(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let c=lp(this.remaining);c&&(r=c,this.capture(r))}let i=Uc(t),a=Uc(r);if(n.hasOwnProperty(i)){let c=n[i];Array.isArray(c)||(c=[c],n[i]=c),c.push(a)}else n[i]=a}parseParens(n){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Wo(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new he(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):n&&(a=ne);let c=this.parseChildren();t[a]=Object.keys(c).length===1?c[ne]:new pe([],c),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new he(4011,!1)}};function Qc(e){return e.segments.length>0?new pe([],{[ne]:e}):e}function Zc(e){let n={};for(let[r,i]of Object.entries(e.children)){let a=Zc(i);if(r===ne&&a.segments.length===0&&a.hasChildren())for(let[c,f]of Object.entries(a.children))n[c]=f;else(a.segments.length>0||a.hasChildren())&&(n[r]=a)}let t=new pe(e.segments,n);return hp(t)}function hp(e){if(e.numberOfChildren===1&&e.children[ne]){let n=e.children[ne];return new pe(e.segments.concat(n.segments),n.children)}return e}function Dt(e){return e instanceof st}function el(e,n,t=null,r=null){let i=tl(e);return nl(i,n,t,r)}function tl(e){let n;function t(a){let c={};for(let d of a.children){let m=t(d);c[d.outlet]=m}let f=new pe(a.url,c);return a===e&&(n=f),f}let r=t(e.root),i=Qc(r);return n??i}function nl(e,n,t,r){let i=e;for(;i.parent;)i=i.parent;if(n.length===0)return qo(i,i,i,t,r);let a=fp(n);if(a.toRoot())return qo(i,i,new pe([],{}),t,r);let c=dp(a,i,e),f=c.processChildren?Er(c.segmentGroup,c.index,a.commands):il(c.segmentGroup,c.index,a.commands);return qo(i,c.segmentGroup,f,t,r)}function Gi(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Tr(e){return typeof e=="object"&&e!=null&&e.outlets}function qo(e,n,t,r,i){let a={};r&&Object.entries(r).forEach(([d,m])=>{a[d]=Array.isArray(m)?m.map(w=>`${w}`):`${m}`});let c;e===n?c=t:c=rl(e,n,t);let f=Qc(Zc(c));return new st(f,a,i)}function rl(e,n,t){let r={};return Object.entries(e.children).forEach(([i,a])=>{a===n?r[i]=t:r[i]=rl(a,n,t)}),new pe(e.segments,r)}var Hi=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&Gi(r[0]))throw new he(4003,!1);let i=r.find(Tr);if(i&&i!==Gc(r))throw new he(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fp(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Hi(!0,0,e);let n=0,t=!1,r=e.reduce((i,a,c)=>{if(typeof a=="object"&&a!=null){if(a.outlets){let f={};return Object.entries(a.outlets).forEach(([d,m])=>{f[d]=typeof m=="string"?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return typeof a!="string"?[...i,a]:c===0?(a.split("/").forEach((f,d)=>{d==0&&f==="."||(d==0&&f===""?t=!0:f===".."?n++:f!=""&&i.push(f))}),i):[...i,a]},[]);return new Hi(t,n,r)}var Mn=class{segmentGroup;processChildren;index;constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}};function dp(e,n,t){if(e.isAbsolute)return new Mn(n,!0,0);if(!t)return new Mn(n,!1,NaN);if(t.parent===null)return new Mn(t,!0,0);let r=Gi(e.commands[0])?0:1,i=t.segments.length-1+r;return pp(t,i,e.numberOfDoubleDots)}function pp(e,n,t){let r=e,i=n,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new he(4005,!1);i=r.segments.length}return new Mn(r,!1,i-a)}function gp(e){return Tr(e[0])?e[0].outlets:{[ne]:e}}function il(e,n,t){if(e??=new pe([],{}),e.segments.length===0&&e.hasChildren())return Er(e,n,t);let r=mp(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let a=new pe(e.segments.slice(0,r.pathIndex),{});return a.children[ne]=new pe(e.segments.slice(r.pathIndex),e.children),Er(a,0,i)}else return r.match&&i.length===0?new pe(e.segments,{}):r.match&&!e.hasChildren()?ta(e,n,t):r.match?Er(e,0,i):ta(e,n,t)}function Er(e,n,t){if(t.length===0)return new pe(e.segments,{});{let r=gp(t),i={};if(Object.keys(r).some(a=>a!==ne)&&e.children[ne]&&e.numberOfChildren===1&&e.children[ne].segments.length===0){let a=Er(e.children[ne],n,t);return new pe(e.segments,a.children)}return Object.entries(r).forEach(([a,c])=>{typeof c=="string"&&(c=[c]),c!==null&&(i[a]=il(e.children[a],n,c))}),Object.entries(e.children).forEach(([a,c])=>{r[a]===void 0&&(i[a]=c)}),new pe(e.segments,i)}}function mp(e,n,t){let r=0,i=n,a={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return a;let c=e.segments[i],f=t[r];if(Tr(f))break;let d=`${f}`,m=r<t.length-1?t[r+1]:null;if(i>0&&d===void 0)break;if(d&&m&&typeof m=="object"&&m.outlets===void 0){if(!Fc(d,m,c))return a;r+=2}else{if(!Fc(d,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ta(e,n,t){let r=e.segments.slice(0,n),i=0;for(;i<t.length;){let a=t[i];if(Tr(a)){let d=vp(a.outlets);return new pe(r,d)}if(i===0&&Gi(t[0])){let d=e.segments[n];r.push(new Ot(d.path,Lc(t[0]))),i++;continue}let c=Tr(a)?a.outlets[ne]:`${a}`,f=i<t.length-1?t[i+1]:null;c&&f&&Gi(f)?(r.push(new Ot(c,Lc(f))),i+=2):(r.push(new Ot(c,{})),i++)}return new pe(r,{})}function vp(e){let n={};return Object.entries(e).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[t]=ta(new pe([],{}),0,r))}),n}function Lc(e){let n={};return Object.entries(e).forEach(([t,r])=>n[t]=`${r}`),n}function Fc(e,n,t){return e==t.path&&rt(n,t.parameters)}var Vi="imperative",xe=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(xe||{}),Be=class{id;url;constructor(n,t){this.id=n,this.url=t}},an=class extends Be{type=xe.NavigationStart;navigationTrigger;restoredState;constructor(n,t,r="imperative",i=null){super(n,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qe=class extends Be{urlAfterRedirects;type=xe.NavigationEnd;constructor(n,t,r){super(n,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ke=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e}(ke||{}),Cr=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Cr||{}),it=class extends Be{reason;code;type=xe.NavigationCancel;constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gt=class extends Be{reason;code;type=xe.NavigationSkipped;constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i}},Nn=class extends Be{error;target;type=xe.NavigationError;constructor(n,t,r,i){super(n,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_r=class extends Be{urlAfterRedirects;state;type=xe.RoutesRecognized;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wi=class extends Be{urlAfterRedirects;state;type=xe.GuardsCheckStart;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qi=class extends Be{urlAfterRedirects;state;shouldActivate;type=xe.GuardsCheckEnd;constructor(n,t,r,i,a){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Xi=class extends Be{urlAfterRedirects;state;type=xe.ResolveStart;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ji=class extends Be{urlAfterRedirects;state;type=xe.ResolveEnd;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yi=class{route;type=xe.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Qi=class{route;type=xe.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Zi=class{snapshot;type=xe.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},es=class{snapshot;type=xe.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ts=class{snapshot;type=xe.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ns=class{snapshot;type=xe.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ir=class{},jn=class{url;navigationBehaviorOptions;constructor(n,t){this.url=n,this.navigationBehaviorOptions=t}};function yp(e,n){return e.providers&&!e._injector&&(e._injector=Oo(e.providers,n,`Route: ${e.path}`)),e._injector??n}function We(e){return e.outlet||ne}function wp(e,n){let t=e.filter(r=>We(r)===n);return t.push(...e.filter(r=>We(r)!==n)),t}function Nr(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){let t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var rs=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Nr(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Fn(this.rootInjector)}},Fn=(()=>{class e{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new rs(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||e)(se(xt))};static \u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),is=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){let t=na(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){let t=na(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){let t=ra(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return ra(n,this._root).map(t=>t.value)}};function na(e,n){if(e===n.value)return n;for(let t of n.children){let r=na(e,t);if(r)return r}return null}function ra(e,n){if(e===n.value)return[n];for(let t of n.children){let r=ra(e,t);if(r.length)return r.unshift(n),r}return[]}var Fe=class{value;children;constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}};function Pn(e){let n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}var xr=class extends is{snapshot;constructor(n,t){super(n),this.snapshot=t,ha(this,n)}toString(){return this.snapshot.toString()}};function sl(e){let n=bp(e),t=new $e([new Ot("",{})]),r=new $e({}),i=new $e({}),a=new $e({}),c=new $e(""),f=new mt(t,r,a,c,i,ne,e,n.root);return f.snapshot=n.root,new xr(new Fe(f,[]),n)}function bp(e){let n={},t={},r={},i="",a=new rn([],n,r,i,t,ne,e,null,{});return new Ar("",new Fe(a,[]))}var mt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,t,r,i,a,c,f,d){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=c,this.component=f,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(de(m=>m[Mr]))??ee(void 0),this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(de(n=>sn(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(de(n=>sn(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ss(e,n,t="emptyOnly"){let r,{routeConfig:i}=e;return n!==null&&(t==="always"||i?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:V(V({},n.params),e.params),data:V(V({},n.data),e.data),resolve:V(V(V(V({},e.data),n.data),i?.data),e._resolvedData)}:r={params:V({},e.params),data:V({},e.data),resolve:V(V({},e.data),e._resolvedData??{})},i&&al(i)&&(r.resolve[Mr]=i.title),r}var rn=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Mr]}constructor(n,t,r,i,a,c,f,d,m){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.routeConfig=d,this._resolve=m}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=sn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=sn(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${t}')`}},Ar=class extends is{url;constructor(n,t){super(t),this.url=n,ha(this,t)}toString(){return ol(this._root)}};function ha(e,n){n.value._routerState=e,n.children.forEach(t=>ha(e,t))}function ol(e){let n=e.children.length>0?` { ${e.children.map(ol).join(", ")} } `:"";return`${e.value}${n}`}function Xo(e){if(e.snapshot){let n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,rt(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),rt(n.params,t.params)||e.paramsSubject.next(t.params),qd(n.url,t.url)||e.urlSubject.next(t.url),rt(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function ia(e,n){let t=rt(e.params,n.params)&&Qd(e.url,n.url),r=!e.parent!=!n.parent;return t&&!r&&(!e.parent||ia(e.parent,n.parent))}function al(e){return typeof e.title=="string"||e.title===null}var ul=new ge(""),fa=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ne;activateEvents=new Jt;deactivateEvents=new Jt;attachEvents=new Jt;detachEvents=new Jt;routerOutletData=rc(void 0);parentContexts=q(Fn);location=q(Wu);changeDetector=q(Ci);inputBinder=q(cs,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new he(4013,!1);this._activatedRoute=t;let i=this.location,c=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,d=new sa(t,f,i.injector,this.routerOutletData);this.activated=i.createComponent(c,{index:i.length,injector:d,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=hr({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ar]})}return e})(),sa=class{route;childContexts;parent;outletData;constructor(n,t,r,i){this.route=n,this.childContexts=t,this.parent=r,this.outletData=i}get(n,t){return n===mt?this.route:n===Fn?this.childContexts:n===ul?this.outletData:this.parent.get(n,t)}},cs=new ge("");function Rp(e,n,t){let r=Or(e,n._root,t?t._root:void 0);return new xr(r,n)}function Or(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=n.value;let i=Ep(e,n,t);return new Fe(r,i)}else{if(e.shouldAttach(n.value)){let a=e.retrieve(n.value);if(a!==null){let c=a.route;return c.value._futureSnapshot=n.value,c.children=n.children.map(f=>Or(e,f)),c}}let r=Sp(n.value),i=n.children.map(a=>Or(e,a));return new Fe(r,i)}}function Ep(e,n,t){return n.children.map(r=>{for(let i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Or(e,r,i);return Or(e,r)})}function Sp(e){return new mt(new $e(e.url),new $e(e.params),new $e(e.queryParams),new $e(e.fragment),new $e(e.data),e.outlet,e.component,e)}var Un=class{redirectTo;navigationBehaviorOptions;constructor(n,t){this.redirectTo=n,this.navigationBehaviorOptions=t}},cl="ngNavigationCancelingError";function os(e,n){let{redirectTo:t,navigationBehaviorOptions:r}=Dt(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=ll(!1,ke.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function ll(e,n){let t=new Error(`NavigationCancelingError: ${e||""}`);return t[cl]=!0,t.cancellationCode=n,t}function Tp(e){return hl(e)&&Dt(e.url)}function hl(e){return!!e&&e[cl]}var Cp=(e,n,t,r)=>de(i=>(new oa(n,i.targetRouterState,i.currentRouterState,t,r).activate(e),i)),oa=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,t,r,i,a){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(n){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),Xo(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){let i=Pn(t);n.children.forEach(a=>{let c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(n,t,r){let i=n.value,a=t?t.value:null;if(i===a)if(i.component){let c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(n,t,c.children)}else this.deactivateChildRoutes(n,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){let r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,a=Pn(n);for(let c of Object.values(a))this.deactivateRouteAndItsChildren(c,i);if(r&&r.outlet){let c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:c,route:n,contexts:f})}}deactivateRouteAndOutlet(n,t){let r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,a=Pn(n);for(let c of Object.values(a))this.deactivateRouteAndItsChildren(c,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,t,r){let i=Pn(t);n.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new ns(a.value.snapshot))}),n.children.length&&this.forwardEvent(new es(n.value.snapshot))}activateRoutes(n,t,r){let i=n.value,a=t?t.value:null;if(Xo(i),i===a)if(i.component){let c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,c.children)}else this.activateChildRoutes(n,t,r);else if(i.component){let c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),Xo(f.route.value),this.activateChildRoutes(n,null,c.children)}else c.attachRef=null,c.route=i,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(n,null,c.children)}else this.activateChildRoutes(n,null,r)}},as=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},kn=class{component;route;constructor(n,t){this.component=n,this.route=t}};function _p(e,n,t){let r=e._root,i=n?n._root:null;return Rr(r,i,t,[r.value])}function Ip(e){let n=e.routeConfig?e.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:e,guards:n}}function Bn(e,n){let t=Symbol(),r=n.get(e,t);return r===t?typeof e=="function"&&!xu(e)?e:n.get(e):r}function Rr(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let a=Pn(n);return e.children.forEach(c=>{xp(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Object.entries(a).forEach(([c,f])=>Sr(f,t.getContext(c),i)),i}function xp(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let a=e.value,c=n?n.value:null,f=t?t.getContext(e.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){let d=Ap(c,a,a.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new as(r)):(a.data=c.data,a._resolvedData=c._resolvedData),a.component?Rr(e,n,f?f.children:null,r,i):Rr(e,n,t,r,i),d&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new kn(f.outlet.component,c))}else c&&Sr(n,f,i),i.canActivateChecks.push(new as(r)),a.component?Rr(e,null,f?f.children:null,r,i):Rr(e,null,t,r,i);return i}function Ap(e,n,t){if(typeof t=="function")return t(e,n);switch(t){case"pathParamsChange":return!nn(e.url,n.url);case"pathParamsOrQueryParamsChange":return!nn(e.url,n.url)||!rt(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ia(e,n)||!rt(e.queryParams,n.queryParams);case"paramsChange":default:return!ia(e,n)}}function Sr(e,n,t){let r=Pn(e),i=e.value;Object.entries(r).forEach(([a,c])=>{i.component?n?Sr(c,n.children.getContext(a),t):Sr(c,null,t):Sr(c,n,t)}),i.component?n&&n.outlet&&n.outlet.isActivated?t.canDeactivateChecks.push(new kn(n.outlet.component,i)):t.canDeactivateChecks.push(new kn(null,i)):t.canDeactivateChecks.push(new kn(null,i))}function jr(e){return typeof e=="function"}function Op(e){return typeof e=="boolean"}function Dp(e){return e&&jr(e.canLoad)}function Pp(e){return e&&jr(e.canActivate)}function Mp(e){return e&&jr(e.canActivateChild)}function kp(e){return e&&jr(e.canDeactivate)}function Np(e){return e&&jr(e.canMatch)}function fl(e){return e instanceof Su||e?.name==="EmptyError"}var Bi=Symbol("INITIAL_VALUE");function Ln(){return Ke(e=>wo(e.map(n=>n.pipe(En(1),Iu(Bi)))).pipe(de(n=>{for(let t of n)if(t!==!0){if(t===Bi)return Bi;if(t===!1||jp(t))return t}return!0}),nt(n=>n!==Bi),En(1)))}function jp(e){return Dt(e)||e instanceof Un}function Up(e,n){return Le(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return c.length===0&&a.length===0?ee(Ie(V({},t),{guardsResult:!0})):Lp(c,r,i,e).pipe(Le(f=>f&&Op(f)?Fp(r,a,e,n):ee(f)),de(f=>Ie(V({},t),{guardsResult:f})))})}function Lp(e,n,t,r){return Me(e).pipe(Le(i=>Vp(i.component,i.route,t,n,r)),It(i=>i!==!0,!0))}function Fp(e,n,t,r){return Me(n).pipe(_t(i=>Tu(zp(i.route.parent,r),Bp(i.route,r),Kp(e,i.path,t),$p(e,i.route,t))),It(i=>i!==!0,!0))}function Bp(e,n){return e!==null&&n&&n(new ts(e)),ee(!0)}function zp(e,n){return e!==null&&n&&n(new Zi(e)),ee(!0)}function $p(e,n,t){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(a=>Ri(()=>{let c=Nr(n)??t,f=Bn(a,c),d=Pp(f)?f.canActivate(n,e):Ge(c,()=>f(n,e));return Pt(d).pipe(It())}));return ee(i).pipe(Ln())}function Kp(e,n,t){let r=n[n.length-1],a=n.slice(0,n.length-1).reverse().map(c=>Ip(c)).filter(c=>c!==null).map(c=>Ri(()=>{let f=c.guards.map(d=>{let m=Nr(c.node)??t,w=Bn(d,m),C=Mp(w)?w.canActivateChild(r,e):Ge(m,()=>w(r,e));return Pt(C).pipe(It())});return ee(f).pipe(Ln())}));return ee(a).pipe(Ln())}function Vp(e,n,t,r,i){let a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!a||a.length===0)return ee(!0);let c=a.map(f=>{let d=Nr(n)??i,m=Bn(f,d),w=kp(m)?m.canDeactivate(e,n,t,r):Ge(d,()=>m(e,n,t,r));return Pt(w).pipe(It())});return ee(c).pipe(Ln())}function Gp(e,n,t,r){let i=n.canLoad;if(i===void 0||i.length===0)return ee(!0);let a=i.map(c=>{let f=Bn(c,e),d=Dp(f)?f.canLoad(n,t):Ge(e,()=>f(n,t));return Pt(d)});return ee(a).pipe(Ln(),dl(r))}function dl(e){return Ru(Ce(n=>{if(typeof n!="boolean")throw os(e,n)}),de(n=>n===!0))}function Hp(e,n,t,r){let i=n.canMatch;if(!i||i.length===0)return ee(!0);let a=i.map(c=>{let f=Bn(c,e),d=Np(f)?f.canMatch(n,t):Ge(e,()=>f(n,t));return Pt(d)});return ee(a).pipe(Ln(),dl(r))}var Dr=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},Pr=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function Dn(e){return sr(new Dr(e))}function Wp(e){return sr(new he(4e3,!1))}function qp(e){return sr(ll(!1,ke.GuardRejected))}var aa=class{urlSerializer;urlTree;constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[ne])return Wp(`${n.redirectTo}`);i=i.children[ne]}}applyRedirectCommands(n,t,r,i,a){if(typeof t!="string"){let f=t,{queryParams:d,fragment:m,routeConfig:w,url:C,outlet:I,params:M,data:k,title:j}=i,L=Ge(a,()=>f({params:M,data:k,queryParams:d,fragment:m,routeConfig:w,url:C,outlet:I,title:j}));if(L instanceof st)throw new Pr(L);t=L}let c=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r);if(t[0]==="/")throw new Pr(c);return c}applyRedirectCreateUrlTree(n,t,r,i){let a=this.createSegmentGroup(n,t.root,r,i);return new st(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){let r={};return Object.entries(n).forEach(([i,a])=>{if(typeof a=="string"&&a[0]===":"){let f=a.substring(1);r[i]=t[f]}else r[i]=a}),r}createSegmentGroup(n,t,r,i){let a=this.createSegments(n,t.segments,r,i),c={};return Object.entries(t.children).forEach(([f,d])=>{c[f]=this.createSegmentGroup(n,d,r,i)}),new pe(a,c)}createSegments(n,t,r,i){return t.map(a=>a.path[0]===":"?this.findPosParam(n,a,i):this.findOrReturn(a,r))}findPosParam(n,t,r){let i=r[t.path.substring(1)];if(!i)throw new he(4001,!1);return i}findOrReturn(n,t){let r=0;for(let i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}},ua={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xp(e,n,t,r,i){let a=pl(e,n,t);return a.matched?(r=yp(n,r),Hp(r,n,t,i).pipe(de(c=>c===!0?a:V({},ua)))):ee(a)}function pl(e,n,t){if(n.path==="**")return Jp(t);if(n.path==="")return n.pathMatch==="full"&&(e.hasChildren()||t.length>0)?V({},ua):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(n.matcher||Kc)(t,e,n);if(!i)return V({},ua);let a={};Object.entries(i.posParams??{}).forEach(([f,d])=>{a[f]=d.path});let c=i.consumed.length>0?V(V({},a),i.consumed[i.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function Jp(e){return{matched:!0,parameters:e.length>0?Gc(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Bc(e,n,t,r){return t.length>0&&Zp(e,t,r)?{segmentGroup:new pe(n,Qp(r,new pe(t,e.children))),slicedSegments:[]}:t.length===0&&eg(e,t,r)?{segmentGroup:new pe(e.segments,Yp(e,t,r,e.children)),slicedSegments:t}:{segmentGroup:new pe(e.segments,e.children),slicedSegments:t}}function Yp(e,n,t,r){let i={};for(let a of t)if(ls(e,n,a)&&!r[We(a)]){let c=new pe([],{});i[We(a)]=c}return V(V({},r),i)}function Qp(e,n){let t={};t[ne]=n;for(let r of e)if(r.path===""&&We(r)!==ne){let i=new pe([],{});t[We(r)]=i}return t}function Zp(e,n,t){return t.some(r=>ls(e,n,r)&&We(r)!==ne)}function eg(e,n,t){return t.some(r=>ls(e,n,r))}function ls(e,n,t){return(e.hasChildren()||n.length>0)&&t.pathMatch==="full"?!1:t.path===""}function tg(e,n,t){return n.length===0&&!e.children[t]}var ca=class{};function ng(e,n,t,r,i,a,c="emptyOnly"){return new la(e,n,t,r,i,c,a).recognize()}var rg=31,la=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,t,r,i,a,c,f){this.injector=n,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=c,this.urlSerializer=f,this.applyRedirects=new aa(this.urlSerializer,this.urlTree)}noMatchError(n){return new he(4002,`'${n.segmentGroup}'`)}recognize(){let n=Bc(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(de(({children:t,rootSnapshot:r})=>{let i=new Fe(r,t),a=new Ar("",i),c=el(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(c),{state:a,tree:c}}))}match(n){let t=new rn([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ne,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,ne,t).pipe(de(r=>({children:r,rootSnapshot:t})),Wt(r=>{if(r instanceof Pr)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Dr?this.noMatchError(r):r}))}processSegmentGroup(n,t,r,i,a){return r.segments.length===0&&r.hasChildren()?this.processChildren(n,t,r,a):this.processSegment(n,t,r,r.segments,i,!0,a).pipe(de(c=>c instanceof Fe?[c]:[]))}processChildren(n,t,r,i){let a=[];for(let c of Object.keys(r.children))c==="primary"?a.unshift(c):a.push(c);return Me(a).pipe(_t(c=>{let f=r.children[c],d=wp(t,c);return this.processSegmentGroup(n,d,f,c,i)}),_u((c,f)=>(c.push(...f),c)),Ro(null),Cu(),Le(c=>{if(c===null)return Dn(r);let f=gl(c);return ig(f),ee(f)}))}processSegment(n,t,r,i,a,c,f){return Me(t).pipe(_t(d=>this.processSegmentAgainstRoute(d._injector??n,t,d,r,i,a,c,f).pipe(Wt(m=>{if(m instanceof Dr)return ee(null);throw m}))),It(d=>!!d),Wt(d=>{if(fl(d))return tg(r,i,a)?ee(new ca):Dn(r);throw d}))}processSegmentAgainstRoute(n,t,r,i,a,c,f,d){return We(r)!==c&&(c===ne||!ls(i,a,r))?Dn(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(n,i,r,a,c,d):this.allowRedirects&&f?this.expandSegmentAgainstRouteUsingRedirect(n,i,t,r,a,c,d):Dn(i)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,a,c,f){let{matched:d,parameters:m,consumedSegments:w,positionalParamSegments:C,remainingSegments:I}=pl(t,i,a);if(!d)return Dn(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>rg&&(this.allowRedirects=!1));let M=new rn(a,m,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,zc(i),We(i),i.component??i._loadedComponent??null,i,$c(i)),k=ss(M,f,this.paramsInheritanceStrategy);M.params=Object.freeze(k.params),M.data=Object.freeze(k.data);let j=this.applyRedirects.applyRedirectCommands(w,i.redirectTo,C,M,n);return this.applyRedirects.lineralizeSegments(i,j).pipe(Le(L=>this.processSegment(n,r,t,L.concat(I),c,!1,f)))}matchSegmentAgainstRoute(n,t,r,i,a,c){let f=Xp(t,r,i,n,this.urlSerializer);return r.path==="**"&&(t.children={}),f.pipe(Ke(d=>d.matched?(n=r._injector??n,this.getChildConfig(n,r,i).pipe(Ke(({routes:m})=>{let w=r._loadedInjector??n,{parameters:C,consumedSegments:I,remainingSegments:M}=d,k=new rn(I,C,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,zc(r),We(r),r.component??r._loadedComponent??null,r,$c(r)),j=ss(k,c,this.paramsInheritanceStrategy);k.params=Object.freeze(j.params),k.data=Object.freeze(j.data);let{segmentGroup:L,slicedSegments:W}=Bc(t,I,M,m);if(W.length===0&&L.hasChildren())return this.processChildren(w,m,L,k).pipe(de(re=>new Fe(k,re)));if(m.length===0&&W.length===0)return ee(new Fe(k,[]));let Q=We(r)===a;return this.processSegment(w,m,L,W,Q?ne:a,!0,k).pipe(de(re=>new Fe(k,re instanceof Fe?[re]:[])))}))):Dn(t)))}getChildConfig(n,t,r){return t.children?ee({routes:t.children,injector:n}):t.loadChildren?t._loadedRoutes!==void 0?ee({routes:t._loadedRoutes,injector:t._loadedInjector}):Gp(n,t,r,this.urlSerializer).pipe(Le(i=>i?this.configLoader.loadChildren(n,t).pipe(Ce(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):qp(t))):ee({routes:[],injector:n})}};function ig(e){e.sort((n,t)=>n.value.outlet===ne?-1:t.value.outlet===ne?1:n.value.outlet.localeCompare(t.value.outlet))}function sg(e){let n=e.value.routeConfig;return n&&n.path===""}function gl(e){let n=[],t=new Set;for(let r of e){if(!sg(r)){n.push(r);continue}let i=n.find(a=>r.value.routeConfig===a.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):n.push(r)}for(let r of t){let i=gl(r.children);n.push(new Fe(r.value,i))}return n.filter(r=>!t.has(r))}function zc(e){return e.data||{}}function $c(e){return e.resolve||{}}function og(e,n,t,r,i,a){return Le(c=>ng(e,n,t,r,c.extractedUrl,i,a).pipe(de(({state:f,tree:d})=>Ie(V({},c),{targetSnapshot:f,urlAfterRedirects:d}))))}function ag(e,n){return Le(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ee(t);let a=new Set(i.map(d=>d.route)),c=new Set;for(let d of a)if(!c.has(d))for(let m of ml(d))c.add(m);let f=0;return Me(c).pipe(_t(d=>a.has(d)?ug(d,r,e,n):(d.data=ss(d,d.parent,e).resolve,ee(void 0))),Ce(()=>f++),Eo(1),Le(d=>f===c.size?ee(t):ft))})}function ml(e){let n=e.children.map(t=>ml(t)).flat();return[e,...n]}function ug(e,n,t,r){let i=e.routeConfig,a=e._resolve;return i?.title!==void 0&&!al(i)&&(a[Mr]=i.title),Ri(()=>(e.data=ss(e,e.parent,t).resolve,cg(a,e,n,r).pipe(de(c=>(e._resolvedData=c,e.data=V(V({},e.data),c),null)))))}function cg(e,n,t,r){let i=Qo(e);if(i.length===0)return ee({});let a={};return Me(i).pipe(Le(c=>lg(e[c],n,t,r).pipe(It(),Ce(f=>{if(f instanceof Un)throw os(new on,f);a[c]=f}))),Eo(1),de(()=>a),Wt(c=>fl(c)?ft:sr(c)))}function lg(e,n,t,r){let i=Nr(n)??r,a=Bn(e,i),c=a.resolve?a.resolve(n,t):Ge(i,()=>a(n,t));return Pt(c)}function Jo(e){return Ke(n=>{let t=e(n);return t?Me(t).pipe(de(()=>n)):ee(n)})}var da=(()=>{class e{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===ne);return r}getResolvedTitleForRoute(t){return t.data[Mr]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ue({token:e,factory:()=>q(vl),providedIn:"root"})}return e})(),vl=(()=>{class e extends da{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(se(kc))};static \u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ur=new ge("",{providedIn:"root",factory:()=>({})}),pa=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Xu({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Qu(0,"router-outlet")},dependencies:[fa],encapsulation:2})}return e})();function ga(e){let n=e.children&&e.children.map(ga),t=n?Ie(V({},e),{children:n}):V({},e);return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==ne&&(t.component=pa),t}var Lr=new ge(""),yl=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=q(Po);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ee(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Pt(t.loadComponent()).pipe(de(bl),Ce(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Sn(()=>{this.componentLoaders.delete(t)})),i=new yo(r,()=>new ht).pipe(vo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let a=wl(r,this.compiler,t,this.onLoadEndListener).pipe(Sn(()=>{this.childrenLoaders.delete(r)})),c=new yo(a,()=>new ht).pipe(vo());return this.childrenLoaders.set(r,c),c}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function wl(e,n,t,r){return Pt(e.loadChildren()).pipe(de(bl),Le(i=>i instanceof qu||Array.isArray(i)?ee(i):Me(n.compileModuleAsync(i))),de(i=>{r&&r(e);let a,c,f=!1;return Array.isArray(i)?(c=i,f=!0):(a=i.create(t).injector,c=a.get(Lr,[],{optional:!0,self:!0}).flat()),{routes:c.map(ga),injector:a}}))}function hg(e){return e&&typeof e=="object"&&"default"in e}function bl(e){return hg(e)?e.default:e}var hs=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=ue({token:e,factory:()=>q(fg),providedIn:"root"})}return e})(),fg=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Rl=new ge("");var El=new ge(""),Sl=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ht;transitionAbortWithErrorSubject=new ht;configLoader=q(yl);environmentInjector=q(xt);destroyRef=q(Ou);urlSerializer=q(kr);rootContexts=q(Fn);location=q(Ii);inputBindingEnabled=q(cs,{optional:!0})!==null;titleStrategy=q(da);options=q(Ur,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=q(hs);createViewTransition=q(Rl,{optional:!0});navigationErrorHandler=q(El,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ee(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Yi(i)),r=i=>this.events.next(new Qi(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ie(V({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new $e(null),this.transitions.pipe(nt(r=>r!==null),Ke(r=>{let i=!1;return ee(r).pipe(Ke(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ke.SupersededByNewNavigation),ft;this.currentTransition=r,this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Ie(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>a.abortController.abort()};let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=a.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&f!=="reload"){let d="";return this.events.next(new gt(a.id,this.urlSerializer.serialize(a.rawUrl),d,Cr.IgnoredSameUrlNavigation)),a.resolve(!1),ft}if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return ee(a).pipe(Ke(d=>(this.events.next(new an(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?ft:Promise.resolve(d))),og(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ce(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=Ie(V({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let m=new _r(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(m)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:d,extractedUrl:m,source:w,restoredState:C,extras:I}=a,M=new an(d,this.urlSerializer.serialize(m),w,C);this.events.next(M);let k=sl(this.rootComponentType).snapshot;return this.currentTransition=r=Ie(V({},a),{targetSnapshot:k,urlAfterRedirects:m,extras:Ie(V({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ee(r)}else{let d="";return this.events.next(new gt(a.id,this.urlSerializer.serialize(a.extractedUrl),d,Cr.IgnoredByUrlHandlingStrategy)),a.resolve(!1),ft}}),Ce(a=>{let c=new Wi(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),de(a=>(this.currentTransition=r=Ie(V({},a),{guards:_p(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r)),Up(this.environmentInjector,a=>this.events.next(a)),Ce(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw os(this.urlSerializer,a.guardsResult);let c=new qi(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),nt(a=>a.guardsResult?!0:(this.cancelNavigationTransition(a,"",ke.GuardRejected),!1)),Jo(a=>{if(a.guards.canActivateChecks.length!==0)return ee(a).pipe(Ce(c=>{let f=new Xi(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),Ke(c=>{let f=!1;return ee(c).pipe(ag(this.paramsInheritanceStrategy,this.environmentInjector),Ce({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(c,"",ke.NoDataFromResolver)}}))}),Ce(c=>{let f=new Ji(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}))}),Jo(a=>{let c=f=>{let d=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(f.routeConfig).pipe(Ce(m=>{f.component=m}),de(()=>{})));for(let m of f.children)d.push(...c(m));return d};return wo(c(a.targetSnapshot.root)).pipe(Ro(null),En(1))}),Jo(()=>this.afterPreactivation()),Ke(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,f=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return f?Me(f).pipe(de(()=>r)):ee(r)}),de(a=>{let c=Rp(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=r=Ie(V({},a),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,r}),Ce(()=>{this.events.next(new Ir)}),Cp(this.rootContexts,t.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),En(1),So(new bi(a=>{let c=r.abortController.signal,f=()=>a.next();return c.addEventListener("abort",f),()=>c.removeEventListener("abort",f)}).pipe(nt(()=>!i&&!r.targetRouterState),Ce(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",ke.Aborted)}))),Ce({next:a=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qe(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),So(this.transitionAbortWithErrorSubject.pipe(Ce(a=>{throw a}))),Sn(()=>{i||this.cancelNavigationTransition(r,"",ke.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Wt(a=>{if(this.destroyed)return r.resolve(!1),ft;if(i=!0,hl(a))this.events.next(new it(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),Tp(a)?this.events.next(new jn(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Nn(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let f=Ge(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(f instanceof Un){let{message:d,cancellationCode:m}=os(this.urlSerializer,f);this.events.next(new it(r.id,this.urlSerializer.serialize(r.extractedUrl),d,m)),this.events.next(new jn(f.redirectTo,f.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(f){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(f)}}return ft}))}))}cancelNavigationTransition(t,r,i){let a=new it(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function dg(e){return e!==Vi}var Tl=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=ue({token:e,factory:()=>q(pg),providedIn:"root"})}return e})(),us=class{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}},pg=(()=>{class e extends us{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Co(e)))(i||e)}})();static \u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Cl=(()=>{class e{urlSerializer=q(kr);options=q(Ur,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=q(Ii);urlHandlingStrategy=q(hs);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new st;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let a=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,c=i??a;return c instanceof st?this.urlSerializer.serialize(c):c}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=sl(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ue({token:e,factory:()=>q(gg),providedIn:"root"})}return e})(),gg=(()=>{class e extends Cl{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof an?this.updateStateMemento():t instanceof gt?this.commitTransition(r):t instanceof _r?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ir?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof it&&t.code!==ke.SupersededByNewNavigation&&t.code!==ke.Redirect?this.restoreHistory(r):t instanceof Nn?this.restoreHistory(r,!0):t instanceof qe&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:a,state:c}=r;if(this.location.isCurrentPathEqualTo(t)||a){let f=this.browserPageId,d=V(V({},c),this.generateNgRouterState(i,f));this.location.replaceState(t,"",d)}else{let f=V(V({},c),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",f)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,a=this.currentPageId-i;a!==0?this.location.historyGo(a):this.getCurrentUrlTree()===t.finalUrl&&a===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Co(e)))(i||e)}})();static \u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ma(e,n){e.events.pipe(nt(t=>t instanceof qe||t instanceof it||t instanceof Nn||t instanceof gt),de(t=>t instanceof qe||t instanceof gt?0:(t instanceof it?t.code===ke.Redirect||t.code===ke.SupersededByNewNavigation:!1)?2:1),nt(t=>t!==2),En(1)).subscribe(()=>{n()})}var mg={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},zn=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=q(Do);stateManager=q(Cl);options=q(Ur,{optional:!0})||{};pendingTasks=q(Si);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=q(Sl);urlSerializer=q(kr);location=q(Ii);urlHandlingStrategy=q(hs);injector=q(xt);_events=new ht;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=q(Tl);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=q(Lr,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!q(cs,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new bu;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(i!==null&&a!==null){if(this.stateManager.handleRouterEvent(r,a),r instanceof it&&r.code!==ke.Redirect&&r.code!==ke.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof qe)this.navigated=!0;else if(r instanceof jn){let c=r.navigationBehaviorOptions,f=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),d=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||dg(i.source)},c);this.scheduleNavigation(f,Vi,null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}wg(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Vi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){let d=V({},i);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(a.state=d)}let f=this.parseUrl(t);this.scheduleNavigation(f,r,c,a).catch(d=>{this.injector.get(Ei)(d)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ga),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:d}=r,m=d?this.currentUrlTree.fragment:c,w=null;switch(f??this.options.defaultQueryParamsHandling){case"merge":w=V(V({},this.currentUrlTree.queryParams),a);break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=a||null}w!==null&&(w=this.removeEmptyProps(w));let C;try{let I=i?i.snapshot:this.routerState.snapshot.root;C=tl(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),C=this.currentUrlTree.root}return nl(C,t,w,m??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Dt(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,Vi,null,r)}navigate(t,r={skipLocationChange:!1}){return yg(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},mg):r===!1?i=V({},vg):i=r,Dt(t))return jc(this.currentUrlTree,t,i);let a=this.parseUrl(t);return jc(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,a])=>(a!=null&&(r[i]=a),r),{})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let f,d,m;c?(f=c.resolve,d=c.reject,m=c.promise):m=new Promise((C,I)=>{f=C,d=I});let w=this.pendingTasks.add();return ma(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(w))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:d,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(C=>Promise.reject(C))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function yg(e){for(let n=0;n<e.length;n++)if(e[n]==null)throw new he(4008,!1)}function wg(e){return!(e instanceof Ir)&&!(e instanceof jn)}var fs=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ht;applicationErrorHandler=q(Ei);constructor(t,r,i,a,c,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.locationStrategy=f;let d=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area"||!!(typeof customElements=="object"&&customElements.get(d)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.subscription=t.events.subscribe(m=>{m instanceof qe&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Dt(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,a,c){let f=this.urlTree;if(f===null||this.isAnchorElement&&(t!==0||r||i||a||c||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(f,d)?.catch(m=>{this.applicationErrorHandler(m)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:Gu(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,a=this.el.nativeElement;r!==null?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return this.routerLinkInput===null?null:Dt(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(He(zn),He(mt),Pu("tabindex"),He(Ao),He(_o),He(cc))};static \u0275dir=hr({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Zu("click",function(c){return i.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),r&2&&Yu("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",_i],skipLocationChange:[2,"skipLocationChange","skipLocationChange",_i],replaceUrl:[2,"replaceUrl","replaceUrl",_i],routerLink:"routerLink"},features:[ar]})}return e})(),Rg=(()=>{class e{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Jt;constructor(t,r,i,a,c){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=c,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof qe&&this.update()})}ngAfterContentInit(){ee(this.links.changes,ee(null)).pipe(bo()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Me(t).pipe(bo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=Eg(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let a=i.urlTree;return a?t.isActive(a,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||e)(He(zn),He(_o),He(Ao),He(Ci),He(fs,8))};static \u0275dir=hr({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,a){if(r&1&&ec(a,fs,5),r&2){let c;tc(c=nc())&&(i.links=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ar]})}return e})();function Eg(e){return!!e.paths}var Sg=new ge("");function Tg(e,...n){return Tn([{provide:Lr,multi:!0,useValue:e},[],{provide:mt,useFactory:Cg,deps:[zn]},{provide:Ti,multi:!0,useFactory:_g},n.map(t=>t.\u0275providers)])}function Cg(e){return e.routerState.root}function _g(){let e=q(qt);return n=>{let t=e.get(fr);if(n!==t.components[0])return;let r=e.get(zn),i=e.get(Ig);e.get(xg)===1&&r.initialNavigation(),e.get(Ag,null,{optional:!0})?.setUpPreloading(),e.get(Sg,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Ig=new ge("",{factory:()=>new ht}),xg=new ge("",{providedIn:"root",factory:()=>1});var Ag=new ge("");var ds=(d=>(d.PRODUCTS="productsStore",d.RECIPES="recipesStore",d.CATEGORIES="categoryStore",d.PRODUCTS_CATEGORIES="categoryProductsStore",d.RECIPES_CATEGORIES="categoryRecipesStore",d.INDICES="indicesStore",d.DOCUMENTATION="documentation",d.TAGS="tags",d))(ds||{});var ps=Lf(_l(),1),Il=Symbol.for("Dexie"),gs=globalThis[Il]||(globalThis[Il]=ps.default);if(ps.default.semVer!==gs.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ps.default.semVer} and ${gs.semVer}`);var{liveQuery:jy,mergeRanges:Uy,rangesOverlap:Ly,RangeSet:Fy,cmp:By,Entity:zy,PropModification:$y,replacePrefix:Ky,add:Vy,remove:Gy}=gs;var xl=gs;var Al=[{version:1,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryStore:"++uuid,name"}},{version:2,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryStore:"++uuid,name",categoryProductsStore:"++uuid,name"},update:e=>new Promise(n=>ae(void 0,null,function*(){let t=yield e.table("categoryStore").toArray(),r=e.table("categoryProductsStore");yield Promise.all(t.map(i=>r.add(i))),yield e.table("categoryStore").clear()}))},{version:3,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:4,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:5,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"},update:e=>new Promise(n=>ae(void 0,null,function*(){let t=[{uuid:"\u0423\u043A\u0441\u0443\u0441\u044B",name:"\u0423\u043A\u0441\u0443\u0441\u044B"}],r=["\u0421\u0438\u0440\u043E\u043F\u044B \u0438 \u043F\u0440\u043E\u043F\u0438\u0442\u043A\u0438"],i=[{old:"\u0420\u0430\u0437\u0440\u044B\u0445\u043B\u0438\u0442\u0435\u043B\u0438 \u0438 \u0441\u0442\u0430\u0431\u0438\u043B\u0438\u0437\u0430\u0442\u043E\u0440\u044B",new:"\u0420\u0430\u0437\u0440\u044B\u0445\u043B\u0438\u0442\u0435\u043B\u0438 \u0438 \u0441\u043E\u0434\u044B"}],a=e.table("categoryProductsStore"),c=yield a.toArray(),f=c.filter(m=>r.includes(m.name)).map(m=>m.uuid),d=c.filter(m=>i.map(w=>w.old).includes(m.name));yield Promise.all(d.map(m=>{let w=i.find(C=>C.old===m.name)?.new;return a.update(m.uuid,{name:w})})),yield Promise.all(f.map(m=>a.delete(m))),yield Promise.all(t.map(m=>a.add(m)))}))},{version:6,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name,source",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:7,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:8,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"},update:e=>{let n=["productsStore","recipesStore","categoryProductsStore","categoryRecipesStore"];return Promise.all([new Promise(t=>ae(void 0,null,function*(){let r=e.table("categoryProductsStore"),i=yield r.toArray(),a=e.table("productsStore"),c=yield a.toArray();yield Promise.all(c.map(f=>{let d=i.find(m=>m.uuid===f.category_id);return d?a.update(f.uuid,{category_id:d.name}):Promise.resolve()})),yield Promise.all(i.map(f=>r.update(f.uuid,{uuid:f.name}))),t()})),new Promise(t=>ae(void 0,null,function*(){let r=e.table("categoryRecipesStore"),i=yield r.toArray(),a=e.table("recipesStore"),c=yield a.toArray();yield Promise.all(c.map(f=>{let d=i.find(m=>m.uuid===f.category_id);return d?a.update(f.uuid,{category_id:d.name}):Promise.resolve()})),yield Promise.all(i.map(f=>r.update(f.uuid,{uuid:f.name}))),t()}))]).then(()=>{})}},{version:9,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid"}},{version:10,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key"}},{version:11,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name"}}];var Ol=()=>Math.random().toString(36).substring(2)+Date.now().toString(36);var H;function Oe(e,n,t){let r=typeof t,i=typeof e;if(r!=="undefined"){if(i!=="undefined"){if(t){if(i==="function"&&r===i)return function(f){return e(t(f))};if(n=e.constructor,n===t.constructor){if(n===Array)return t.concat(e);if(n===Map){var a=new Map(t);for(var c of e)a.set(c[0],c[1]);return a}if(n===Set){c=new Set(t);for(a of e.values())c.add(a);return c}}}return e}return t}return i==="undefined"?n:e}function Ee(){return Object.create(null)}function Xe(e){return typeof e=="string"}function $r(e){return typeof e=="object"}function Og(e){let n=[];for(let t of e.keys())n.push(t);return n}function Kr(e,n){if(Xe(n))e=e[n];else for(let t=0;e&&t<n.length;t++)e=e[n[t]];return e}function Dg(e){let n=0;for(let t=0,r;t<e.length;t++)(r=e[t])&&n<r.length&&(n=r.length);return n}var Pg=/[^\p{L}\p{N}]+/u,Mg=/(\d{3})/g,kg=/(\D)(\d{3})/g,Ng=/(\d{3})(\D)/g,Dl=/[\u0300-\u036f]/g;function Vr(e={}){if(!this||this.constructor!==Vr)return new Vr(...arguments);if(arguments.length)for(e=0;e<arguments.length;e++)this.assign(arguments[e]);else this.assign(e)}H=Vr.prototype;H.assign=function(e){this.normalize=Oe(e.normalize,!0,this.normalize);let n=e.include,t=n||e.exclude||e.split,r;if(t||t===""){if(typeof t=="object"&&t.constructor!==RegExp){let i="";r=!n,n||(i+="\\p{Z}"),t.letter&&(i+="\\p{L}"),t.number&&(i+="\\p{N}",r=!!n),t.symbol&&(i+="\\p{S}"),t.punctuation&&(i+="\\p{P}"),t.control&&(i+="\\p{C}"),(t=t.char)&&(i+=typeof t=="object"?t.join(""):t);try{this.split=new RegExp("["+(n?"^":"")+i+"]+","u")}catch{this.split=/\s+/}}else this.split=t,r=t===!1||2>"a1a".split(t).length;this.numeric=Oe(e.numeric,r)}else{try{this.split=Oe(this.split,Pg)}catch{this.split=/\s+/}this.numeric=Oe(e.numeric,Oe(this.numeric,!0))}if(this.prepare=Oe(e.prepare,null,this.prepare),this.finalize=Oe(e.finalize,null,this.finalize),t=e.filter,this.filter=typeof t=="function"?t:Oe(t&&new Set(t),null,this.filter),this.dedupe=Oe(e.dedupe,!0,this.dedupe),this.matcher=Oe((t=e.matcher)&&new Map(t),null,this.matcher),this.mapper=Oe((t=e.mapper)&&new Map(t),null,this.mapper),this.stemmer=Oe((t=e.stemmer)&&new Map(t),null,this.stemmer),this.replacer=Oe(e.replacer,null,this.replacer),this.minlength=Oe(e.minlength,1,this.minlength),this.maxlength=Oe(e.maxlength,1024,this.maxlength),this.rtl=Oe(e.rtl,!1,this.rtl),(this.cache=t=Oe(e.cache,!0,this.cache))&&(this.H=null,this.S=typeof t=="number"?t:2e5,this.B=new Map,this.G=new Map,this.L=this.K=128),this.h="",this.M=null,this.A="",this.N=null,this.matcher)for(let i of this.matcher.keys())this.h+=(this.h?"|":"")+i;if(this.stemmer)for(let i of this.stemmer.keys())this.A+=(this.A?"|":"")+i;return this};H.addStemmer=function(e,n){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(e,n),this.A+=(this.A?"|":"")+e,this.N=null,this.cache&&cn(this),this};H.addFilter=function(e){return typeof e=="function"?this.filter=e:(this.filter||(this.filter=new Set),this.filter.add(e)),this.cache&&cn(this),this};H.addMapper=function(e,n){return typeof e=="object"?this.addReplacer(e,n):1<e.length?this.addMatcher(e,n):(this.mapper||(this.mapper=new Map),this.mapper.set(e,n),this.cache&&cn(this),this)};H.addMatcher=function(e,n){return typeof e=="object"?this.addReplacer(e,n):2>e.length&&(this.dedupe||this.mapper)?this.addMapper(e,n):(this.matcher||(this.matcher=new Map),this.matcher.set(e,n),this.h+=(this.h?"|":"")+e,this.M=null,this.cache&&cn(this),this)};H.addReplacer=function(e,n){return typeof e=="string"?this.addMatcher(e,n):(this.replacer||(this.replacer=[]),this.replacer.push(e,n),this.cache&&cn(this),this)};H.encode=function(e,n){if(this.cache&&e.length<=this.K)if(this.H){if(this.B.has(e))return this.B.get(e)}else this.H=setTimeout(cn,50,this);this.normalize&&(typeof this.normalize=="function"?e=this.normalize(e):e=Dl?e.normalize("NFKD").replace(Dl,"").toLowerCase():e.toLowerCase()),this.prepare&&(e=this.prepare(e)),this.numeric&&3<e.length&&(e=e.replace(kg,"$1 $2").replace(Ng,"$1 $2").replace(Mg,"$1 "));let t=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer),r=[],i=Ee(),a,c,f=this.split||this.split===""?e.split(this.split):[e];for(let m=0,w,C;m<f.length;m++)if((w=C=f[m])&&!(w.length<this.minlength||w.length>this.maxlength)){if(n){if(i[w])continue;i[w]=1}else{if(a===w)continue;a=w}if(t)r.push(w);else if(!this.filter||(typeof this.filter=="function"?this.filter(w):!this.filter.has(w))){if(this.cache&&w.length<=this.L)if(this.H){var d=this.G.get(w);if(d||d===""){d&&r.push(d);continue}}else this.H=setTimeout(cn,50,this);if(this.stemmer){this.N||(this.N=new RegExp("(?!^)("+this.A+")$"));let I;for(;I!==w&&2<w.length;)I=w,w=w.replace(this.N,M=>this.stemmer.get(M))}if(w&&(this.mapper||this.dedupe&&1<w.length)){d="";for(let I=0,M="",k,j;I<w.length;I++)k=w.charAt(I),k===M&&this.dedupe||((j=this.mapper&&this.mapper.get(k))||j===""?j===M&&this.dedupe||!(M=j)||(d+=j):d+=M=k);w=d}if(this.matcher&&1<w.length&&(this.M||(this.M=new RegExp("("+this.h+")","g")),w=w.replace(this.M,I=>this.matcher.get(I))),w&&this.replacer)for(d=0;w&&d<this.replacer.length;d+=2)w=w.replace(this.replacer[d],this.replacer[d+1]);if(this.cache&&C.length<=this.L&&(this.G.set(C,w),this.G.size>this.S&&(this.G.clear(),this.L=this.L/1.1|0)),w){if(w!==C)if(n){if(i[w])continue;i[w]=1}else{if(c===w)continue;c=w}r.push(w)}}}return this.finalize&&(r=this.finalize(r)||r),this.cache&&e.length<=this.K&&(this.B.set(e,r),this.B.size>this.S&&(this.B.clear(),this.K=this.K/1.1|0)),r};function cn(e){e.H=null,e.B.clear(),e.G.clear()}var $n,Fr;function jg(e){return ae(this,null,function*(){e=e.data;var n=e.task;let t=e.id,r=e.args;switch(n){case"init":Fr=e.options||{},(n=e.factory)?(Function("return "+n)()(self),$n=new self.FlexSearch.Index(Fr),delete self.FlexSearch):$n=new at(Fr),postMessage({id:t});break;default:let i;n==="export"&&(r[1]?(r[0]=Fr.export,r[2]=0,r[3]=1):r=null),n==="import"?r[0]&&(e=yield Fr.import.call($n,r[0]),$n.import(r[0],e)):(i=r&&$n[n].apply($n,r))&&i.then&&(i=yield i),postMessage(n==="search"?{id:t,msg:i}:{id:t})}})}function Ia(e){Br.call(e,"add"),Br.call(e,"append"),Br.call(e,"search"),Br.call(e,"update"),Br.call(e,"remove")}var Ea,Pl,ys;function Ug(){Ea=ys=0}function Br(e){this[e+"Async"]=function(){let n=arguments;var t=n[n.length-1];let r;if(typeof t=="function"&&(r=t,delete n[n.length-1]),Ea?ys||(ys=Date.now()-Pl>=this.priority*this.priority*3):(Ea=setTimeout(Ug,0),Pl=Date.now()),ys){let a=this;return new Promise(c=>{setTimeout(function(){c(a[e+"Async"].apply(a,n))},0)})}let i=this[e].apply(this,n);return t=i.then?i:new Promise(a=>a(i)),r&&t.then(r),t}}var Kn=0;function Gr(e={}){function n(c){function f(d){d=d.data||d;let m=d.id,w=m&&i.h[m];w&&(w(d.msg),delete i.h[m])}if(this.worker=c,this.h=Ee(),this.worker)return r?this.worker.on("message",f):this.worker.onmessage=f,e.config?new Promise(function(d){i.h[++Kn]=function(){d(i),1e9<Kn&&(Kn=0)},i.worker.postMessage({id:Kn,task:"init",factory:t,options:e})}):(this.worker.postMessage({task:"init",factory:t,options:e}),this.priority=e.priority||4,this)}if(!this||this.constructor!==Gr)return new Gr(e);let t=typeof self<"u"?self._factory:typeof window<"u"?window._factory:null;t&&(t=t.toString());let r=typeof window>"u",i=this,a=Lg(t,r,e.worker);return a.then?a.then(function(c){return n.call(i,c)}):n.call(this,a)}kt("add");kt("append");kt("search");kt("update");kt("remove");kt("clear");kt("export");kt("import");Ia(Gr.prototype);function kt(e){Gr.prototype[e]=function(){let n=this,t=[].slice.call(arguments);var r=t[t.length-1];let i;return typeof r=="function"&&(i=r,t.pop()),r=new Promise(function(a){e==="export"&&typeof t[0]=="function"&&(t[0]=null),n.h[++Kn]=a,n.worker.postMessage({task:e,id:Kn,args:t})}),i?(r.then(i),this):r}}function Lg(e,n,t){return n?typeof module<"u"?new(Ff()).Worker(__dirname+"/worker/node.js"):import("./chunk-55JXXOPV.js").then(function(r){return new r.Worker(import.meta.dirname+"/node/node.mjs")}):e?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+jg.toString()],{type:"text/javascript"}))):new window.Worker(typeof t=="string"?t:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js"),{type:"module"})}function xa(e,n=0){let t=[],r=[];n&&(n=25e4/n*5e3|0);for(let i of e.entries())r.push(i),r.length===n&&(t.push(r),r=[]);return r.length&&t.push(r),t}function Aa(e,n){n||(n=new Map);for(let t=0,r;t<e.length;t++)r=e[t],n.set(r[0],r[1]);return n}function Kl(e,n=0){let t=[],r=[];n&&(n=25e4/n*1e3|0);for(let i of e.entries())r.push([i[0],xa(i[1])[0]]),r.length===n&&(t.push(r),r=[]);return r.length&&t.push(r),t}function Vl(e,n){n||(n=new Map);for(let t=0,r,i;t<e.length;t++)r=e[t],i=n.get(r[0]),n.set(r[0],Aa(r[1],i));return n}function Gl(e){let n=[],t=[];for(let r of e.keys())t.push(r),t.length===25e4&&(n.push(t),t=[]);return t.length&&n.push(t),n}function Hl(e,n){n||(n=new Set);for(let t=0;t<e.length;t++)n.add(e[t]);return n}function ws(e,n,t,r,i,a,c=0){let f=r&&r.constructor===Array;var d=f?r.shift():r;if(!d)return this.export(e,n,i,a+1);if((d=e((n?n+".":"")+(c+1)+"."+t,JSON.stringify(d)))&&d.then){let m=this;return d.then(function(){return ws.call(m,e,n,t,f?r:null,i,a,c+1)})}return ws.call(this,e,n,t,f?r:null,i,a,c+1)}function Ml(e,n){let t="";for(let r of e.entries()){e=r[0];let i=r[1],a="";for(let c=0,f;c<i.length;c++){f=i[c]||[""];let d="";for(let m=0;m<f.length;m++)d+=(d?",":"")+(n==="string"?'"'+f[m]+'"':f[m]);d="["+d+"]",a+=(a?",":"")+d}a='["'+e+'",['+a+"]]",t+=(t?",":"")+a}return t}function kl(e,n,t,r){let i=[];for(let a=0,c;a<e.index.length;a++)if(c=e.index[a],n>=c.length)n-=c.length;else{n=c[r?"splice":"slice"](n,t);let f=n.length;if(f&&(i=i.length?i.concat(n):n,t-=f,r&&(e.length-=f),!t))break;n=0}return i}function ln(e){if(!this||this.constructor!==ln)return new ln(e);this.index=e?[e]:[],this.length=e?e.length:0;let n=this;return new Proxy([],{get(t,r){if(r==="length")return n.length;if(r==="push")return function(i){n.index[n.index.length-1].push(i),n.length++};if(r==="pop")return function(){if(n.length)return n.length--,n.index[n.index.length-1].pop()};if(r==="indexOf")return function(i){let a=0;for(let c=0,f,d;c<n.index.length;c++){if(f=n.index[c],d=f.indexOf(i),0<=d)return a+d;a+=f.length}return-1};if(r==="includes")return function(i){for(let a=0;a<n.index.length;a++)if(n.index[a].includes(i))return!0;return!1};if(r==="slice")return function(i,a){return kl(n,i||0,a||n.length,!1)};if(r==="splice")return function(i,a){return kl(n,i||0,a||n.length,!0)};if(r==="constructor")return Array;if(typeof r!="symbol")return(t=n.index[r/2**31|0])&&t[r]},set(t,r,i){return t=r/2**31|0,(n.index[t]||(n.index[t]=[]))[r]=i,n.length++,!0}})}ln.prototype.clear=function(){this.index.length=0};ln.prototype.destroy=function(){this.proxy=this.index=null};ln.prototype.push=function(){};function ot(e=8){if(!this||this.constructor!==ot)return new ot(e);this.index=Ee(),this.h=[],this.size=0,32<e?(this.B=ql,this.A=BigInt(e)):(this.B=Wl,this.A=e)}ot.prototype.get=function(e){let n=this.index[this.B(e)];return n&&n.get(e)};ot.prototype.set=function(e,n){var t=this.B(e);let r=this.index[t];r?(t=r.size,r.set(e,n),(t-=r.size)&&this.size++):(this.index[t]=r=new Map([[e,n]]),this.h.push(r),this.size++)};function Je(e=8){if(!this||this.constructor!==Je)return new Je(e);this.index=Ee(),this.h=[],this.size=0,32<e?(this.B=ql,this.A=BigInt(e)):(this.B=Wl,this.A=e)}Je.prototype.add=function(e){var n=this.B(e);let t=this.index[n];t?(n=t.size,t.add(e),(n-=t.size)&&this.size++):(this.index[n]=t=new Set([e]),this.h.push(t),this.size++)};H=ot.prototype;H.has=Je.prototype.has=function(e){let n=this.index[this.B(e)];return n&&n.has(e)};H.delete=Je.prototype.delete=function(e){let n=this.index[this.B(e)];n&&n.delete(e)&&this.size--};H.clear=Je.prototype.clear=function(){this.index=Ee(),this.h=[],this.size=0};H.values=Je.prototype.values=function*(){for(let e=0;e<this.h.length;e++)for(let n of this.h[e].values())yield n};H.keys=Je.prototype.keys=function*(){for(let e=0;e<this.h.length;e++)for(let n of this.h[e].keys())yield n};H.entries=Je.prototype.entries=function*(){for(let e=0;e<this.h.length;e++)for(let n of this.h[e].entries())yield n};function Wl(e){let n=2**this.A-1;if(typeof e=="number")return e&n;let t=0,r=this.A+1;for(let i=0;i<e.length;i++)t=(t*r^e.charCodeAt(i))&n;return this.A===32?t+2**31:t}function ql(e){let n=BigInt(2)**this.A-BigInt(1);var t=typeof e;if(t==="bigint")return e&n;if(t==="number")return BigInt(e)&n;t=BigInt(0);let r=this.A+BigInt(1);for(let i=0;i<e.length;i++)t=(t*r^BigInt(e.charCodeAt(i)))&n;return t}hn.prototype.add=function(e,n,t){if($r(e)&&(n=e,e=Kr(n,this.key)),n&&(e||e===0)){if(!t&&this.reg.has(e))return this.update(e,n);for(let f=0,d;f<this.field.length;f++){d=this.F[f];var r=this.index.get(this.field[f]);if(typeof d=="function"){var i=d(n);i&&r.add(e,i,!1,!0)}else i=d.I,(!i||i(n))&&(d.constructor===String?d=[""+d]:Xe(d)&&(d=[d]),Ta(n,d,this.J,0,r,e,d[0],t))}if(this.tag)for(r=0;r<this.D.length;r++){var a=this.D[r];i=this.tag.get(this.R[r]);let f=Ee();if(typeof a=="function"){if(a=a(n),!a)continue}else{var c=a.I;if(c&&!c(n))continue;a.constructor===String&&(a=""+a),a=Kr(n,a)}if(i&&a){Xe(a)&&(a=[a]);for(let d=0,m,w;d<a.length;d++)if(m=a[d],!f[m]&&(f[m]=1,(c=i.get(m))?w=c:i.set(m,w=[]),!t||!w.includes(e))){if(w.length===2**31-1){if(c=new ln(w),this.fastupdate)for(let C of this.reg.values())C.includes(w)&&(C[C.indexOf(w)]=c);i.set(m,w=c)}w.push(e),this.fastupdate&&((c=this.reg.get(e))?c.push(w):this.reg.set(e,[w]))}}}if(this.store&&(!t||!this.store.has(e))){let f;if(this.C){f=Ee();for(let d=0,m;d<this.C.length;d++){if(m=this.C[d],(t=m.I)&&!t(n))continue;let w;if(typeof m=="function"){if(w=m(n),!w)continue;m=[m.V]}else if(Xe(m)||m.constructor===String){f[m]=n[m];continue}Sa(n,f,m,0,m[0],w)}}this.store.set(e,f||n)}this.worker&&(this.fastupdate||this.reg.add(e))}return this};function Sa(e,n,t,r,i,a){if(e=e[i],r===t.length-1)n[i]=a||e;else if(e)if(e.constructor===Array)for(n=n[i]=Array(e.length),i=0;i<e.length;i++)Sa(e,n,t,r,i);else n=n[i]||(n[i]=Ee()),i=t[++r],Sa(e,n,t,r,i)}function Ta(e,n,t,r,i,a,c,f){if(e=e[c])if(r===n.length-1){if(e.constructor===Array){if(t[r]){for(n=0;n<e.length;n++)i.add(a,e[n],!0,!0);return}e=e.join(" ")}i.add(a,e,f,!0)}else if(e.constructor===Array)for(c=0;c<e.length;c++)Ta(e,n,t,r,i,a,c,f);else c=n[++r],Ta(e,n,t,r,i,a,c,f);else i.db&&i.remove(a)}function Xl(e,n,t,r,i,a,c){let f=e.length,d=[],m,w;m=Ee();for(let C=0,I,M,k,j;C<n;C++)for(let L=0;L<f;L++)if(k=e[L],C<k.length&&(I=k[C]))for(let W=0;W<I.length;W++){if(M=I[W],(w=m[M])?m[M]++:(w=0,m[M]=1),j=d[w]||(d[w]=[]),!c){let Q=C+(L||!i?0:a||0);j=j[Q]||(j[Q]=[])}if(j.push(M),c&&t&&w===f-1&&j.length-r===t)return r?j.slice(r):j}if(e=d.length)if(i)d=1<d.length?Jl(d,t,r,c,a):(d=d[0]).length>t||r?d.slice(r,t+r):d;else{if(e<f)return[];if(d=d[e-1],t||r)if(c)(d.length>t||r)&&(d=d.slice(r,t+r));else{i=[];for(let C=0,I;C<d.length;C++)if(I=d[C],I.length>r)r-=I.length;else if((I.length>t||r)&&(I=I.slice(r,t+r),t-=I.length,r&&(r-=I.length)),i.push(I),!t)break;d=1<i.length?[].concat.apply([],i):i[0]}}return d}function Jl(e,n,t,r,i){let a=[],c=Ee(),f;var d=e.length;let m;if(r){for(i=d-1;0<=i;i--)if(m=(r=e[i])&&r.length){for(d=0;d<m;d++)if(f=r[d],!c[f]){if(c[f]=1,t)t--;else if(a.push(f),a.length===n)return a}}}else for(let w=d-1,C,I=0;0<=w;w--){C=e[w];for(let M=0;M<C.length;M++)if(m=(r=C[M])&&r.length){for(let k=0;k<m;k++)if(f=r[k],!c[f])if(c[f]=1,t)t--;else{let j=(M+(w<d-1&&i||0))/(w+1)|0;if((a[j]||(a[j]=[])).push(f),++I===n)return a}}}return a}function Fg(e,n,t){let r=Ee(),i=[];for(let a=0,c;a<n.length;a++){c=n[a];for(let f=0;f<c.length;f++)r[c[f]]=1}if(t)for(let a=0,c;a<e.length;a++)c=e[a],r[c]&&(i.push(c),r[c]=0);else for(let a=0,c,f;a<e.result.length;a++)for(c=e.result[a],n=0;n<c.length;n++)f=c[n],r[f]&&((i[a]||(i[a]=[])).push(f),r[f]=0);return i}function Oa(e,n,t,r){if(!e.length)return e;if(e.length===1)return e=e[0],e=t||e.length>n?n?e.slice(t,t+n):e.slice(t):e,r?Mt.call(this,e):e;let i=[];for(let a=0,c,f;a<e.length;a++)if((c=e[a])&&(f=c.length)){if(t){if(t>=f){t-=f;continue}t<f&&(c=n?c.slice(t,t+n):c.slice(t),f=c.length,t=0)}if(f>n&&(c=c.slice(0,n),f=n),!i.length&&f>=n)return r?Mt.call(this,c):c;if(i.push(c),n-=f,!n)break}return i=1<i.length?[].concat.apply([],i):i[0],r?Mt.call(this,i):i}function Es(e,n,t){var r=t[0];if(r.then)return Promise.all(t).then(function(w){return e[n].apply(e,w)});if(r[0]&&r[0].index)return e[n].apply(e,r);r=[];let i=[],a=0,c=0,f,d,m;for(let w=0,C;w<t.length;w++)if(C=t[w]){let I;if(C.constructor===be)I=C.result;else if(C.constructor===Array)I=C;else if(a=C.limit||0,c=C.offset||0,m=C.suggest,d=C.resolve,f=C.enrich&&d,C.index)C.resolve=!1,I=C.index.search(C).result,C.resolve=d;else if(C.and)I=e.and(C.and);else if(C.or)I=e.or(C.or);else if(C.xor)I=e.xor(C.xor);else if(C.not)I=e.not(C.not);else continue;if(I.then)i.push(I);else if(I.length)r[w]=I;else if(!m&&(n==="and"||n==="xor")){r=[];break}}return{O:r,P:i,limit:a,offset:c,enrich:f,resolve:d,suggest:m}}be.prototype.or=function(){let{O:e,P:n,limit:t,offset:r,enrich:i,resolve:a}=Es(this,"or",arguments);return Yl.call(this,e,n,t,r,i,a)};function Yl(e,n,t,r,i,a){if(n.length){let c=this;return Promise.all(n).then(function(f){e=[];for(let d=0,m;d<f.length;d++)(m=f[d]).length&&(e[d]=m);return Yl.call(c,e,[],t,r,i,a)})}return e.length&&(this.result.length&&e.push(this.result),2>e.length?this.result=e[0]:(this.result=Jl(e,t,r,!1,this.h),r=0)),a?this.resolve(t,r,i):this}be.prototype.and=function(){let e=this.result.length,n,t,r,i;if(!e){let a=arguments[0];a&&(e=!!a.suggest,i=a.resolve,n=a.limit,t=a.offset,r=a.enrich&&i)}if(e){let{O:a,P:c,limit:f,offset:d,enrich:m,resolve:w,suggest:C}=Es(this,"and",arguments);return Ql.call(this,a,c,f,d,m,w,C)}return i?this.resolve(n,t,r):this};function Ql(e,n,t,r,i,a,c){if(n.length){let f=this;return Promise.all(n).then(function(d){e=[];for(let m=0,w;m<d.length;m++)(w=d[m]).length&&(e[m]=w);return Ql.call(f,e,[],t,r,i,a,c)})}if(e.length)if(this.result.length&&e.unshift(this.result),2>e.length)this.result=e[0];else{if(n=Dg(e))return this.result=Xl(e,n,t,r,c,this.h,a),a?i?Mt.call(this.index,this.result):this.result:this;this.result=[]}else c||(this.result=e);return a?this.resolve(t,r,i):this}be.prototype.xor=function(){let{O:e,P:n,limit:t,offset:r,enrich:i,resolve:a,suggest:c}=Es(this,"xor",arguments);return Zl.call(this,e,n,t,r,i,a,c)};function Zl(e,n,t,r,i,a,c){if(n.length){let f=this;return Promise.all(n).then(function(d){e=[];for(let m=0,w;m<d.length;m++)(w=d[m]).length&&(e[m]=w);return Zl.call(f,e,[],t,r,i,a,c)})}if(e.length)if(this.result.length&&e.unshift(this.result),2>e.length)this.result=e[0];else return this.result=Bg.call(this,e,t,r,a,this.h),a?i?Mt.call(this.index,this.result):this.result:this;else c||(this.result=e);return a?this.resolve(t,r,i):this}function Bg(e,n,t,r,i){let a=[],c=Ee(),f=0;for(let d=0,m;d<e.length;d++)if(m=e[d]){f<m.length&&(f=m.length);for(let w=0,C;w<m.length;w++)if(C=m[w])for(let I=0,M;I<C.length;I++)M=C[I],c[M]=c[M]?2:1}for(let d=0,m,w=0;d<f;d++)for(let C=0,I;C<e.length;C++)if((I=e[C])&&(m=I[d])){for(let M=0,k;M<m.length;M++)if(k=m[M],c[k]===1)if(t)t--;else if(r){if(a.push(k),a.length===n)return a}else{let j=d+(C?i:0);if(a[j]||(a[j]=[]),a[j].push(k),++w===n)return a}}return a}be.prototype.not=function(){let{O:e,P:n,limit:t,offset:r,enrich:i,resolve:a,suggest:c}=Es(this,"not",arguments);return eh.call(this,e,n,t,r,i,a,c)};function eh(e,n,t,r,i,a,c){if(n.length){let f=this;return Promise.all(n).then(function(d){e=[];for(let m=0,w;m<d.length;m++)(w=d[m]).length&&(e[m]=w);return eh.call(f,e,[],t,r,i,a,c)})}if(e.length&&this.result.length)this.result=zg.call(this,e,t,r,a);else if(a)return this.resolve(t,r,i);return a?i?Mt.call(this.index,this.result):this.result:this}function zg(e,n,t,r){let i=[];e=new Set(e.flat().flat());for(let a=0,c,f=0;a<this.result.length;a++)if(c=this.result[a]){for(let d=0,m;d<c.length;d++)if(m=c[d],!e.has(m)){if(t)t--;else if(r){if(i.push(m),i.length===n)return i}else if(i[a]||(i[a]=[]),i[a].push(m),++f===n)return i}}return i}function be(e){if(!this||this.constructor!==be)return new be(e);if(e&&e.index)return e.resolve=!1,this.index=e.index,this.h=e.boost||0,this.result=e.index.search(e).result,this;this.index=null,this.result=e||[],this.h=0}be.prototype.limit=function(e){if(this.result.length){let n=[];for(let t=0,r;t<this.result.length;t++)if(r=this.result[t])if(r.length<=e){if(n[t]=r,e-=r.length,!e)break}else{n[t]=r.slice(0,e);break}this.result=n}return this};be.prototype.offset=function(e){if(this.result.length){let n=[];for(let t=0,r;t<this.result.length;t++)(r=this.result[t])&&(r.length<=e?e-=r.length:(n[t]=r.slice(e),e=0));this.result=n}return this};be.prototype.boost=function(e){return this.h+=e,this};be.prototype.resolve=function(e,n,t){let r=this.result,i=this.index;return this.result=this.index=null,r.length?(typeof e=="object"&&(t=e.enrich,n=e.offset,e=e.limit),Oa.call(i,r,e||100,n,t)):r};Ee();hn.prototype.search=function(e,n,t,r){t||(!n&&$r(e)?(t=e,e=""):$r(n)&&(t=n,n=0));let i=[];var a=[];let c;var f;let d,m,w,C=0;var I=!0;let M;if(t){t.constructor===Array&&(t={index:t}),e=t.query||e,c=t.pluck,d=t.merge,m=c||t.field||(m=t.index)&&(m.index?null:m),w=this.tag&&t.tag;var k=t.suggest;I=t.resolve!==!1,I||c||!(m=m||this.field)||(Xe(m)?c=m:(m.constructor===Array&&m.length===1&&(m=m[0]),c=m.field||m.index)),M=(f=this.store&&t.enrich&&I)&&t.highlight,n=t.limit||n;var j=t.offset||0;if(n||(n=100),w&&(!this.db||!r)){w.constructor!==Array&&(w=[w]);var L=[];for(let fe=0,te;fe<w.length;fe++)if(te=w[fe],te.field&&te.tag){var W=te.tag;if(W.constructor===Array)for(var Q=0;Q<W.length;Q++)L.push(te.field,W[Q]);else L.push(te.field,W)}else{W=Object.keys(te);for(let ye=0,Te,me;ye<W.length;ye++)if(Te=W[ye],me=te[Te],me.constructor===Array)for(Q=0;Q<me.length;Q++)L.push(Te,me[Q]);else L.push(Te,me)}if(w=L,!e){if(I=[],L.length)for(a=0;a<L.length;a+=2){if(this.db){if(k=this.index.get(L[a]),!k)continue;I.push(k=k.db.tag(L[a+1],n,j,f))}else k=$g.call(this,L[a],L[a+1],n,j,f);i.push({field:L[a],tag:L[a+1],result:k})}return I.length?Promise.all(I).then(function(fe){for(let te=0;te<fe.length;te++)i[te].result=fe[te];return i}):i}}m&&m.constructor!==Array&&(m=[m])}m||(m=this.field),L=!r&&(this.worker||this.db)&&[];let re;for(let fe=0,te,ye,Te;fe<m.length;fe++){if(ye=m[fe],this.db&&this.tag&&!this.F[fe])continue;let me;if(Xe(ye)||(me=ye,ye=me.field,e=me.query||e,n=me.limit||n,j=me.offset||j,k=me.suggest||k,f=this.store&&(me.enrich||f)),r)te=r[fe];else if(W=me||t,Q=this.index.get(ye),w&&(this.db&&(W.tag=w,re=Q.db.support_tag_search,W.field=m),re||(W.enrich=!1)),L){L[fe]=Q.search(e,n,W),W&&f&&(W.enrich=f);continue}else te=Q.search(e,n,W),W&&f&&(W.enrich=f);if(Te=te&&(I?te.length:te.result.length),w&&Te){if(W=[],Q=0,this.db&&r){if(!re)for(let Ye=m.length;Ye<r.length;Ye++){let Ne=r[Ye];if(Ne&&Ne.length)Q++,W.push(Ne);else if(!k)return I?i:new be(i)}}else for(let Ye=0,Ne,Ts;Ye<w.length;Ye+=2){if(Ne=this.tag.get(w[Ye]),!Ne){if(k)continue;return I?i:new be(i)}if(Ts=(Ne=Ne&&Ne.get(w[Ye+1]))&&Ne.length)Q++,W.push(Ne);else if(!k)return I?i:new be(i)}if(Q){if(te=Fg(te,W,I),Te=te.length,!Te&&!k)return I?te:new be(te);Q--}}if(Te)a[C]=ye,i.push(te),C++;else if(m.length===1)return I?i:new be(i)}if(L){if(this.db&&w&&w.length&&!re)for(f=0;f<w.length;f+=2){if(a=this.index.get(w[f]),!a){if(k)continue;return I?i:new be(i)}L.push(a.db.tag(w[f+1],n,j,!1))}let fe=this;return Promise.all(L).then(function(te){return te.length?fe.search(e,n,t,te):te})}if(!C)return I?i:new be(i);if(c&&(!f||!this.store))return i[0];for(L=[],j=0;j<a.length;j++){if(k=i[j],f&&k.length&&typeof k[0].doc>"u"&&(this.db?L.push(k=this.index.get(this.field[0]).db.enrich(k)):k=Mt.call(this,k)),c)return I?M?wa(e,k,this.index,c,M):k:new be(k);i[j]={field:a[j],result:k}}if(f&&this.db&&L.length){let fe=this;return Promise.all(L).then(function(te){for(let ye=0;ye<te.length;ye++)i[ye].result=te[ye];return d?Nl(i):M?wa(e,i,fe.index,c,M):i})}return d?Nl(i):M?wa(e,i,this.index,c,M):i};function wa(e,n,t,r,i){let a,c;for(let d=0,m,w,C;d<n.length;d++){let I;if(r)I=n,C=r;else{var f=n[d];if(C=f.field,!C)continue;I=f.result}w=t.get(C),m=w.encoder,f=w.tokenize,m!==a&&(a=m,c=a.encode(e));for(let M=0;M<I.length;M++){let k="",j=Kr(I[M].doc,C).split(/\s+/);for(let L=0,W,Q;L<j.length;L++){W=j[L],Q=m.encode(W),Q=1<Q.length?Q.join(" "):Q[0];let re;if(Q&&W)for(let fe=0,te;fe<c.length;fe++)if(te=c[fe],f==="strict"){if(Q===te){k+=(k?" ":"")+i.replace("$1",W),re=!0;break}}else{let ye=Q.indexOf(te);if(-1<ye){k+=(k?" ":"")+W.substring(0,ye)+i.replace("$1",W.substring(ye,ye+te.length))+W.substring(ye+te.length),re=!0;break}}re||(k+=(k?" ":"")+j[L])}I[M].highlight=k}if(r)break}return n}function Nl(e){let n=[],t=Ee();for(let r=0,i,a;r<e.length;r++){i=e[r],a=i.result;for(let c=0,f,d,m;c<a.length;c++)d=a[c],typeof d!="object"&&(d={id:d}),f=d.id,(m=t[f])?m.push(i.field):(d.field=t[f]=[i.field],n.push(d))}return n}function $g(e,n,t,r,i){if(e=this.tag.get(e),!e)return[];if((n=(e=e&&e.get(n))&&e.length-r)&&0<n)return(n>t||r)&&(e=e.slice(r,r+t)),i&&(e=Mt.call(this,e)),e}function Mt(e){if(!this||!this.store)return e;let n=Array(e.length);for(let t=0,r;t<e.length;t++)r=e[t],n[t]={id:r,doc:this.store.get(r)};return n}function hn(e){if(!this||this.constructor!==hn)return new hn(e);let n=e.document||e.doc||e,t,r;if(this.F=[],this.field=[],this.J=[],this.key=(t=n.key||n.id)&&bs(t,this.J)||"id",(r=e.keystore||0)&&(this.keystore=r),this.fastupdate=!!e.fastupdate,this.reg=!this.fastupdate||e.worker||e.db?r?new Je(r):new Set:r?new ot(r):new Map,this.C=(t=n.store||null)&&t&&t!==!0&&[],this.store=t&&(r?new ot(r):new Map),this.cache=(t=e.cache||null)&&new fn(t),e.cache=!1,this.worker=e.worker||!1,this.priority=e.priority||4,this.index=Kg.call(this,e,n),this.tag=null,(t=n.tag)&&(typeof t=="string"&&(t=[t]),t.length)){this.tag=new Map,this.D=[],this.R=[];for(let i=0,a,c;i<t.length;i++){if(a=t[i],c=a.field||a,!c)throw Error("The tag field from the document descriptor is undefined.");a.custom?this.D[i]=a.custom:(this.D[i]=bs(c,this.J),a.filter&&(typeof this.D[i]=="string"&&(this.D[i]=new String(this.D[i])),this.D[i].I=a.filter)),this.R[i]=c,this.tag.set(c,new Map)}}if(this.worker){this.fastupdate=!1;let i=[];for(let a of this.index.values())a.then&&i.push(a);if(i.length){let a=this;return Promise.all(i).then(function(c){let f=new Map,d=0;for(let w of a.index.entries()){let C=w[0];var m=w[1];if(m.then){m=i[d].encoder||{};let I=f.get(m);I||(I=m.encode?m:new Vr(m),f.set(m,I)),m=c[d],m.encoder=I,a.index.set(C,m),d++}}return a})}}else e.db&&(this.fastupdate=!1,this.mount(e.db))}H=hn.prototype;H.mount=function(e){let n=this.field;if(this.tag)for(let a=0,c;a<this.R.length;a++){c=this.R[a];var t=void 0;this.index.set(c,t=new at({},this.reg)),n===this.field&&(n=n.slice(0)),n.push(c),t.tag=this.tag.get(c)}t=[];let r={db:e.db,type:e.type,fastupdate:e.fastupdate};for(let a=0,c,f;a<n.length;a++){r.field=f=n[a],c=this.index.get(f);let d=new e.constructor(e.id,r);d.id=e.id,t[a]=d.mount(c),c.document=!0,a?c.bypass=!0:c.store=this.store}let i=this;return this.db=Promise.all(t).then(function(){i.db=!0})};H.commit=function(e,n){return ae(this,null,function*(){let t=[];for(let r of this.index.values())t.push(r.commit(e,n));yield Promise.all(t),this.reg.clear()})};H.destroy=function(){let e=[];for(let n of this.index.values())e.push(n.destroy());return Promise.all(e)};function Kg(e,n){let t=new Map,r=n.index||n.field||n;Xe(r)&&(r=[r]);for(let i=0,a,c;i<r.length;i++){if(a=r[i],Xe(a)||(c=a,a=a.field),c=$r(c)?Object.assign({},e,c):e,this.worker){let f=new Gr(c);f.encoder=c.encoder,t.set(a,f)}this.worker||t.set(a,new at(c,this.reg)),c.custom?this.F[i]=c.custom:(this.F[i]=bs(a,this.J),c.filter&&(typeof this.F[i]=="string"&&(this.F[i]=new String(this.F[i])),this.F[i].I=c.filter)),this.field[i]=a}if(this.C){e=n.store,Xe(e)&&(e=[e]);for(let i=0,a,c;i<e.length;i++)a=e[i],c=a.field||a,a.custom?(this.C[i]=a.custom,a.custom.V=c):(this.C[i]=bs(c,this.J),a.filter&&(typeof this.C[i]=="string"&&(this.C[i]=new String(this.C[i])),this.C[i].I=a.filter))}return t}function bs(e,n){let t=e.split(":"),r=0;for(let i=0;i<t.length;i++)e=t[i],e[e.length-1]==="]"&&(e=e.substring(0,e.length-2))&&(n[r]=!0),e&&(t[r++]=e);return r<t.length&&(t.length=r),1<r?t:t[0]}H.append=function(e,n){return this.add(e,n,!0)};H.update=function(e,n){return this.remove(e).add(e,n)};H.remove=function(e){$r(e)&&(e=Kr(e,this.key));for(var n of this.index.values())n.remove(e,!0);if(this.reg.has(e)){if(this.tag&&!this.fastupdate)for(let t of this.tag.values())for(let r of t){n=r[0];let i=r[1],a=i.indexOf(e);-1<a&&(1<i.length?i.splice(a,1):t.delete(n))}this.store&&this.store.delete(e),this.reg.delete(e)}return this.cache&&this.cache.remove(e),this};H.clear=function(){let e=[];for(let n of this.index.values()){let t=n.clear();t.then&&e.push(t)}if(this.tag)for(let n of this.tag.values())n.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),e.length?Promise.all(e):this};H.contain=function(e){return this.db?this.index.get(this.field[0]).db.has(e):this.reg.has(e)};H.cleanup=function(){for(let e of this.index.values())e.cleanup();return this};H.get=function(e){return this.db?this.index.get(this.field[0]).db.enrich(e).then(function(n){return n[0]&&n[0].doc||null}):this.store.get(e)||null};H.set=function(e,n){return typeof e=="object"&&(n=e,e=Kr(n,this.key)),this.store.set(e,n),this};H.searchCache=th;H.export=function(e,n,t=0,r=0){if(t<this.field.length){let c=this.field[t];if((n=this.index.get(c).export(e,c,t,r=1))&&n.then){let f=this;return n.then(function(){return f.export(e,c,t+1)})}return this.export(e,c,t+1)}let i,a;switch(r){case 0:i="reg",a=Gl(this.reg),n=null;break;case 1:i="tag",a=this.tag&&Kl(this.tag,this.reg.size),n=null;break;case 2:i="doc",a=this.store&&xa(this.store),n=null;break;default:return}return ws.call(this,e,n,i,a,t,r)};H.import=function(e,n){var t=e.split(".");t[t.length-1]==="json"&&t.pop();let r=2<t.length?t[0]:"";if(t=2<t.length?t[2]:t[1],this.worker&&r)return this.index.get(r).import(e);if(n){if(typeof n=="string"&&(n=JSON.parse(n)),r)return this.index.get(r).import(t,n);switch(t){case"reg":this.fastupdate=!1,this.reg=Hl(n,this.reg);for(let i=0,a;i<this.field.length;i++)a=this.index.get(this.field[i]),a.fastupdate=!1,a.reg=this.reg;if(this.worker){n=[];for(let i of this.index.values())n.push(i.import(e));return Promise.all(n)}break;case"tag":this.tag=Vl(n,this.tag);break;case"doc":this.store=Aa(n,this.store)}}};Ia(hn.prototype);function th(e,n,t){let r=(typeof e=="object"?""+e.query:e).toLowerCase();this.cache||(this.cache=new fn);let i=this.cache.get(r);if(!i){if(i=this.search(e,n,t),i.then){let a=this;i.then(function(c){return a.cache.set(r,c),c})}this.cache.set(r,i)}return i}function fn(e){this.limit=e&&e!==!0?e:1e3,this.cache=new Map,this.h=""}fn.prototype.set=function(e,n){this.cache.set(this.h=e,n),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)};fn.prototype.get=function(e){let n=this.cache.get(e);return n&&this.h!==e&&(this.cache.delete(e),this.cache.set(this.h=e,n)),n};fn.prototype.remove=function(e){for(let n of this.cache){let t=n[0];n[1].includes(e)&&this.cache.delete(t)}};fn.prototype.clear=function(){this.cache.clear(),this.h=""};var jl={normalize:!1,numeric:!1,dedupe:!1},ms={},ba=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),Ul=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),Ll=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],Fl={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,\u00DF:2,d:3,t:3,l:4,m:5,n:5,r:6},Vg={Exact:jl,Default:ms,Normalize:ms,LatinBalance:{mapper:ba},LatinAdvanced:{mapper:ba,matcher:Ul,replacer:Ll},LatinExtra:{mapper:ba,replacer:Ll.concat([/(?!^)[aeo]/g,""]),matcher:Ul},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(e){for(let t=0;t<e.length;t++){var n=e[t];let r=n.charAt(0),i=Fl[r];for(let a=1,c;a<n.length&&(c=n.charAt(a),c==="h"||c==="w"||!(c=Fl[c])||c===i||(r+=c,i=c,r.length!==4));a++);e[t]=r}}},CJK:{split:""},LatinExact:jl,LatinDefault:ms,LatinSimple:ms};at.prototype.remove=function(e,n){let t=this.reg.size&&(this.fastupdate?this.reg.get(e):this.reg.has(e));if(t){if(this.fastupdate){for(let r=0,i;r<t.length;r++)if(i=t[r])if(2>i.length)i.pop();else{let a=i.indexOf(e);a===t.length-1?i.pop():i.splice(a,1)}}else Hr(this.map,e),this.depth&&Hr(this.ctx,e);n||this.reg.delete(e)}return this.db&&(this.commit_task.push({del:e}),this.T&&nh(this)),this.cache&&this.cache.remove(e),this};function Hr(e,n){let t=0;var r=typeof n>"u";if(e.constructor===Array){for(let i=0,a,c;i<e.length;i++)if((a=e[i])&&a.length)if(r)t++;else if(c=a.indexOf(n),0<=c){1<a.length?(a.splice(c,1),t++):delete e[i];break}else t++}else for(let i of e.entries()){r=i[0];let a=Hr(i[1],n);a?t+=a:e.delete(r)}return t}var Gg={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};at.prototype.add=function(e,n,t,r){if(n&&(e||e===0)){if(!r&&!t&&this.reg.has(e))return this.update(e,n);r=this.depth,n=this.encoder.encode(n,!r);let m=n.length;if(m){let w=Ee(),C=Ee(),I=this.resolution;for(let M=0;M<m;M++){let k=n[this.rtl?m-1-M:M];var i=k.length;if(i&&(r||!C[k])){var a=this.score?this.score(n,k,M,null,0):vs(I,m,M),c="";switch(this.tokenize){case"full":if(2<i){for(let j=0,L;j<i;j++)for(a=i;a>j;a--){c=k.substring(j,a),L=this.rtl?i-1-j:j;var f=this.score?this.score(n,k,M,c,L):vs(I,m,M,i,L);zr(this,C,c,f,e,t)}break}case"bidirectional":case"reverse":if(1<i){for(f=i-1;0<f;f--){c=k[this.rtl?i-1-f:f]+c;var d=this.score?this.score(n,k,M,c,f):vs(I,m,M,i,f);zr(this,C,c,d,e,t)}c=""}case"forward":if(1<i){for(f=0;f<i;f++)c+=k[this.rtl?i-1-f:f],zr(this,C,c,a,e,t);break}default:if(zr(this,C,k,a,e,t),r&&1<m&&M<m-1){for(i=Ee(),c=this.U,a=k,f=Math.min(r+1,this.rtl?M+1:m-M),i[a]=1,d=1;d<f;d++)if((k=n[this.rtl?m-1-M-d:M+d])&&!i[k]){i[k]=1;let j=this.score?this.score(n,a,M,k,d-1):vs(c+(m/2>c?0:1),m,M,f-1,d-1),L=this.bidirectional&&k>a;zr(this,w,L?a:k,j,e,t,L?k:a)}}}}}this.fastupdate||this.reg.add(e)}else n=""}return this.db&&(n||this.commit_task.push({del:e}),this.T&&nh(this)),this};function zr(e,n,t,r,i,a,c){let f=c?e.ctx:e.map,d;if((!n[t]||c&&!(d=n[t])[c])&&(c?(n=d||(n[t]=Ee()),n[c]=1,(d=f.get(c))?f=d:f.set(c,f=new Map)):n[t]=1,(d=f.get(t))?f=d:f.set(t,f=d=[]),f=f[r]||(f[r]=[]),!a||!f.includes(i))){if(f.length===2**31-1){if(n=new ln(f),e.fastupdate)for(let m of e.reg.values())m.includes(f)&&(m[m.indexOf(f)]=n);d[r]=f=n}f.push(i),e.fastupdate&&((r=e.reg.get(i))?r.push(f):e.reg.set(i,[f]))}}function vs(e,n,t,r,i){return t&&1<e?n+(r||0)<=e?t+(i||0):(e-1)/(n+(r||0))*(t+(i||0))+1|0:0}at.prototype.search=function(e,n,t){t||(n||typeof e!="object"?typeof n=="object"&&(t=n,n=0):(t=e,e=""));let r=[],i,a,c,f=0,d,m,w,C,I;t?(e=t.query||e,n=t.limit||n,f=t.offset||0,a=t.context,c=t.suggest,I=(d=t.resolve!==!1)&&t.enrich,w=t.boost,C=t.resolution,m=this.db&&t.tag):d=this.resolve,a=this.depth&&a!==!1;let M=this.encoder.encode(e,!a);if(i=M.length,n=n||(d?100:0),i===1)return zl.call(this,M[0],"",n,f,d,I,m);if(i===2&&a&&!c)return zl.call(this,M[1],M[0],n,f,d,I,m);let k=Ee(),j=0,L;if(a&&(L=M[0],j=1),C||C===0||(C=L?this.U:this.resolution),this.db){if(this.db.search&&(e=this.db.search(this,M,n,f,c,d,I,m),e!==!1))return e;let W=this;return function(){return ae(this,null,function*(){for(let Q,re;j<i;j++){if((re=M[j])&&!k[re]){if(k[re]=1,Q=yield Ca(W,re,L,0,0,!1,!1),Q=$l(Q,r,c,C)){r=Q;break}L&&(c&&Q&&r.length||(L=re))}c&&L&&j===i-1&&!r.length&&(C=W.resolution,L="",j=-1,k=Ee())}return Bl(r,C,n,f,c,w,d)})}()}for(let W,Q;j<i;j++){if((Q=M[j])&&!k[Q]){if(k[Q]=1,W=Ca(this,Q,L,0,0,!1,!1),W=$l(W,r,c,C)){r=W;break}L&&(c&&W&&r.length||(L=Q))}c&&L&&j===i-1&&!r.length&&(C=this.resolution,L="",j=-1,k=Ee())}return Bl(r,C,n,f,c,w,d)};function Bl(e,n,t,r,i,a,c){let f=e.length,d=e;if(1<f)d=Xl(e,n,t,r,i,a,c);else if(f===1)return c?Oa.call(null,e[0],t,r):new be(e[0]);return c?d:new be(d)}function zl(e,n,t,r,i,a,c){return e=Ca(this,e,n,t,r,i,a,c),this.db?e.then(function(f){return i?f||[]:new be(f)}):e&&e.length?i?Oa.call(this,e,t,r):new be(e):i?[]:new be}function $l(e,n,t,r){let i=[];if(e&&e.length){if(e.length<=r){n.push(e);return}for(let a=0,c;a<r;a++)(c=e[a])&&(i[a]=c);if(i.length){n.push(i);return}}if(!t)return i}function Ca(e,n,t,r,i,a,c,f){let d;return t&&(d=e.bidirectional&&n>t)&&(d=t,t=n,n=d),e.db?e.db.get(n,t,r,i,a,c,f):(e=t?(e=e.ctx.get(t))&&e.get(n):e.map.get(n),e)}function at(e,n){if(!this||this.constructor!==at)return new at(e);if(e){var t=Xe(e)?e:e.preset;t&&(e=Object.assign({},Gg[t],e))}else e={};t=e.context;let r=t===!0?{depth:1}:t||{},i=Xe(e.encoder)?Vg[e.encoder]:e.encode||e.encoder||{};this.encoder=i.encode?i:typeof i=="object"?new Vr(i):{encode:i},this.resolution=e.resolution||9,this.tokenize=t=(t=e.tokenize)&&t!=="default"&&t!=="exact"&&t||"strict",this.depth=t==="strict"&&r.depth||0,this.bidirectional=r.bidirectional!==!1,this.fastupdate=!!e.fastupdate,this.score=e.score||null,(t=e.keystore||0)&&(this.keystore=t),this.map=t?new ot(t):new Map,this.ctx=t?new ot(t):new Map,this.reg=n||(this.fastupdate?t?new ot(t):new Map:t?new Je(t):new Set),this.U=r.resolution||3,this.rtl=i.rtl||e.rtl||!1,this.cache=(t=e.cache||null)&&new fn(t),this.resolve=e.resolve!==!1,(t=e.db)&&(this.db=this.mount(t)),this.T=e.commit!==!1,this.commit_task=[],this.commit_timer=null,this.priority=e.priority||4}H=at.prototype;H.mount=function(e){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),e.mount(this)};H.commit=function(e,n){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this,e,n)};H.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()};function nh(e){e.commit_timer||(e.commit_timer=setTimeout(function(){e.commit_timer=null,e.db.commit(e,void 0,void 0)},1))}H.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db&&(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[{clear:!0}]),this};H.append=function(e,n){return this.add(e,n,!0)};H.contain=function(e){return this.db?this.db.has(e):this.reg.has(e)};H.update=function(e,n){let t=this,r=this.remove(e);return r&&r.then?r.then(()=>t.add(e,n)):this.add(e,n)};H.cleanup=function(){return this.fastupdate?(Hr(this.map),this.depth&&Hr(this.ctx),this):this};H.searchCache=th;H.export=function(e,n,t=0,r=0){let i,a;switch(r){case 0:i="reg",a=Gl(this.reg);break;case 1:i="cfg",a=null;break;case 2:i="map",a=xa(this.map,this.reg.size);break;case 3:i="ctx",a=Kl(this.ctx,this.reg.size);break;default:return}return ws.call(this,e,n,i,a,t,r)};H.import=function(e,n){if(n)switch(typeof n=="string"&&(n=JSON.parse(n)),e=e.split("."),e[e.length-1]==="json"&&e.pop(),e.length===3&&e.shift(),e=1<e.length?e[1]:e[0],e){case"reg":this.fastupdate=!1,this.reg=Hl(n,this.reg);break;case"map":this.map=Aa(n,this.map);break;case"ctx":this.ctx=Vl(n,this.ctx)}};H.serialize=function(e=!0){let n="",t="",r="";if(this.reg.size){let a;for(var i of this.reg.keys())a||(a=typeof i),n+=(n?",":"")+(a==="string"?'"'+i+'"':i);n="index.reg=new Set(["+n+"]);",t=Ml(this.map,a),t="index.map=new Map(["+t+"]);";for(let c of this.ctx.entries()){i=c[0];let f=Ml(c[1],a);f="new Map(["+f+"])",f='["'+i+'",'+f+"]",r+=(r?",":"")+f}r="index.ctx=new Map(["+r+"]);"}return e?"function inject(index){"+n+t+r+"}":n+t+r};Ia(at.prototype);var rh=typeof window<"u"&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),Rs=["map","ctx","tag","reg","cfg"],un=Ee();function _a(e,n={}){if(!this||this.constructor!==_a)return new _a(e,n);typeof e=="object"&&(n=e,e=e.name),e||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(e?":"+e.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=n.field?n.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=n.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}H=_a.prototype;H.mount=function(e){return e.index?e.mount(this):(e.db=this,this.open())};H.open=function(){if(this.db)return this.db;let e=this;navigator.storage&&navigator.storage.persist(),un[e.id]||(un[e.id]=[]),un[e.id].push(e.field);let n=rh.open(e.id,1);return n.onupgradeneeded=function(){let t=e.db=this.result;for(let r=0,i;r<Rs.length;r++){i=Rs[r];for(let a=0,c;a<un[e.id].length;a++)c=un[e.id][a],t.objectStoreNames.contains(i+(i!=="reg"&&c?":"+c:""))||t.createObjectStore(i+(i!=="reg"&&c?":"+c:""))}},e.db=Nt(n,function(t){e.db=t,e.db.onversionchange=function(){e.close()}})};H.close=function(){this.db&&this.db.close(),this.db=null};H.destroy=function(){let e=rh.deleteDatabase(this.id);return Nt(e)};H.clear=function(){let e=[];for(let t=0,r;t<Rs.length;t++){r=Rs[t];for(let i=0,a;i<un[this.id].length;i++)a=un[this.id][i],e.push(r+(r!=="reg"&&a?":"+a:""))}let n=this.db.transaction(e,"readwrite");for(let t=0;t<e.length;t++)n.objectStore(e[t]).clear();return Nt(n)};H.get=function(e,n,t=0,r=0,i=!0,a=!1){e=this.db.transaction((n?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((n?"ctx":"map")+(this.field?":"+this.field:"")).get(n?n+":"+e:e);let c=this;return Nt(e).then(function(f){let d=[];if(!f||!f.length)return d;if(i){if(!t&&!r&&f.length===1)return f[0];for(let m=0,w;m<f.length;m++)if((w=f[m])&&w.length){if(r>=w.length){r-=w.length;continue}let C=t?r+Math.min(w.length-r,t):w.length;for(let I=r;I<C;I++)d.push(w[I]);if(r=0,d.length===t)break}return a?c.enrich(d):d}return f})};H.tag=function(e,n=0,t=0,r=!1){e=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(e);let i=this;return Nt(e).then(function(a){return!a||!a.length||t>=a.length?[]:!n&&!t?a:(a=a.slice(t,t+n),r?i.enrich(a):a)})};H.enrich=function(e){typeof e!="object"&&(e=[e]);let n=this.db.transaction("reg","readonly").objectStore("reg"),t=[];for(let r=0;r<e.length;r++)t[r]=Nt(n.get(e[r]));return Promise.all(t).then(function(r){for(let i=0;i<r.length;i++)r[i]={id:e[i],doc:r[i]?JSON.parse(r[i]):null};return r})};H.has=function(e){return e=this.db.transaction("reg","readonly").objectStore("reg").getKey(e),Nt(e).then(function(n){return!!n})};H.search=null;H.info=function(){};H.transaction=function(e,n,t){e+=e!=="reg"&&this.field?":"+this.field:"";let r=this.h[e+":"+n];if(r)return t.call(this,r);let i=this.db.transaction(e,n);this.h[e+":"+n]=r=i.objectStore(e);let a=t.call(this,r);return this.h[e+":"+n]=null,Nt(i).finally(function(){return i=r=null,a})};H.commit=function(e,n,t){return ae(this,null,function*(){if(n)yield this.clear(),e.commit_task=[];else{let r=e.commit_task;e.commit_task=[];for(let i=0,a;i<r.length;i++)if(a=r[i],a.clear){yield this.clear(),n=!0;break}else r[i]=a.del;n||(t||(r=r.concat(Og(e.reg))),r.length&&(yield this.remove(r)))}e.reg.size&&(yield this.transaction("map","readwrite",function(r){for(let i of e.map){let a=i[0],c=i[1];c.length&&(n?r.put(c,a):r.get(a).onsuccess=function(){let f=this.result;var d;if(f&&f.length){let m=Math.max(f.length,c.length);for(let w=0,C,I;w<m;w++)if((I=c[w])&&I.length){if((C=f[w])&&C.length)for(d=0;d<I.length;d++)C.push(I[d]);else f[w]=I;d=1}}else f=c,d=1;d&&r.put(f,a)})}}),yield this.transaction("ctx","readwrite",function(r){for(let i of e.ctx){let a=i[0],c=i[1];for(let f of c){let d=f[0],m=f[1];m.length&&(n?r.put(m,a+":"+d):r.get(a+":"+d).onsuccess=function(){let w=this.result;var C;if(w&&w.length){let I=Math.max(w.length,m.length);for(let M=0,k,j;M<I;M++)if((j=m[M])&&j.length){if((k=w[M])&&k.length)for(C=0;C<j.length;C++)k.push(j[C]);else w[M]=j;C=1}}else w=m,C=1;C&&r.put(w,a+":"+d)})}}}),e.store?yield this.transaction("reg","readwrite",function(r){for(let i of e.store){let a=i[0],c=i[1];r.put(typeof c=="object"?JSON.stringify(c):1,a)}}):e.bypass||(yield this.transaction("reg","readwrite",function(r){for(let i of e.reg.keys())r.put(1,i)})),e.tag&&(yield this.transaction("tag","readwrite",function(r){for(let i of e.tag){let a=i[0],c=i[1];c.length&&(r.get(a).onsuccess=function(){let f=this.result;f=f&&f.length?f.concat(c):c,r.put(f,a)})}})),e.map.clear(),e.ctx.clear(),e.tag&&e.tag.clear(),e.store&&e.store.clear(),e.document||e.reg.clear())})};function Ra(e,n,t){let r=e.value,i,a=0;for(let c=0,f;c<r.length;c++){if(f=t?r:r[c]){for(let d=0,m,w;d<n.length;d++)if(w=n[d],m=f.indexOf(w),0<=m)if(i=1,1<f.length)f.splice(m,1);else{r[c]=[];break}a+=f.length}if(t)break}a?i&&e.update(r):e.delete(),e.continue()}H.remove=function(e){return typeof e!="object"&&(e=[e]),Promise.all([this.transaction("map","readwrite",function(n){n.openCursor().onsuccess=function(){let t=this.result;t&&Ra(t,e)}}),this.transaction("ctx","readwrite",function(n){n.openCursor().onsuccess=function(){let t=this.result;t&&Ra(t,e)}}),this.transaction("tag","readwrite",function(n){n.openCursor().onsuccess=function(){let t=this.result;t&&Ra(t,e,!0)}}),this.transaction("reg","readwrite",function(n){for(let t=0;t<e.length;t++)n.delete(e[t])})])};function Nt(e,n){return new Promise((t,r)=>{e.onsuccess=e.oncomplete=function(){n&&n(this.result),n=null,t(this.result)},e.onerror=e.onblocked=r,e=null})}var ih=hn;var Ss=class e{constructor(){}indices={};initIndex(n,t,r){return ae(this,null,function*(){this.indices[t]=this.createIndex(r)})}search(n,t){return ae(this,null,function*(){let r=this.indices[n];return r?yield r.searchAsync(t,{limit:10,enrich:!0}):[]})}getIndex(n){return this.indices[n]}addToIndex(n,t){return ae(this,null,function*(){let r=this.indices[n];r&&r.add(t)})}importIndex(n,t){return ae(this,null,function*(){try{let r=this.indices[n],i=JSON.parse(t);if(r&&i)for(let a of i)yield r.import(a.key,a.data)}catch(r){throw new Error(`Error importing index for table ${n}: ${r}`)}})}exportIndex(n){return ae(this,null,function*(){let t=this.indices[n];if(!t)throw new Error(`No index found for table ${n}`);let r=[];return yield t.export((i,a)=>{r.push({key:i.toString(),data:a})}),JSON.stringify(r)})}removeFromIndex(n,t){return ae(this,null,function*(){let r=this.indices[n];r&&r.remove(t)})}clearIndex(n){return ae(this,null,function*(){this.indices[n]=this.createIndex(["name"])})}createIndex(n){return new ih({tokenize:"forward",cache:!0,document:{id:"uuid",index:n}})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})};var sh=class e extends xl{constructor(t){super("lasagna-db");this.flexsearchIndexService=t;let r=new Set;for(let i of Al){if(r.has(i.version))throw new Error(`Duplicate migration version: ${i.version}`);r.add(i.version);let a=this.version(i.version).stores(i.schema);i.update&&a.upgrade(i.update),console.log(`Migration ${i.version} applied`)}setTimeout(()=>{this.initIndexes()})}productsStore;recipesStore;categoryStore;initIndexes(){return Promise.all([this.initIndex("productsStore"),this.initIndex("recipesStore"),this.initIndex("categoryProductsStore"),this.initIndex("categoryRecipesStore"),this.initIndex("tags")]).then(()=>{})}initIndex(t){return ae(this,null,function*(){yield this.flexsearchIndexService.initIndex(this.getStore(t),t,["name"]);let r=yield this.getOne("indicesStore",t);r?yield this.flexsearchIndexService.importIndex(t,r.indexData):(yield this.getAll(t).then(i=>ae(this,null,function*(){for(let a of i)yield this.flexsearchIndexService.addToIndex(t,a)})),yield this.saveIndex(t))})}saveIndex(t){return ae(this,null,function*(){try{if(this.flexsearchIndexService.getIndex(t)){let i=yield this.flexsearchIndexService.exportIndex(t);yield this.replaceData("indicesStore",t,{table:t,indexData:i})}else{console.error("No index data found for table:",t);return}}catch(r){throw console.error("Error saving index:",r),r}})}loadIndex(t){return ae(this,null,function*(){let r=yield this.filter("indicesStore","table",t,!0);return r?.[0]?r[0].indexData:null})}addData(t,r,i){return ae(this,null,function*(){try{let a=i||this.generateUuid(),c=Ie(V({},r),{uuid:a});return yield this[t].put(c),t==="indicesStore"||(yield this.flexsearchIndexService.addToIndex(t,c),yield this.saveIndex(t)),a}catch(a){throw a}})}replaceData(t,r,i){return ae(this,null,function*(){let a=Ie(V({},i),{uuid:r});yield this[t].put(a),t!=="indicesStore"&&(yield this.flexsearchIndexService.addToIndex(t,a),yield this.saveIndex(t))})}search(t,r,i){return ae(this,null,function*(){return this[t].where(r).equals(i).toArray()})}filter(t,r,i,a=!1){return ae(this,null,function*(){return this[t].filter(c=>a?c[r]===i:c[r]?.toLowerCase().includes(i.toLowerCase())).toArray()})}getStore(t){return this[t]}getOne(t,r){return ae(this,null,function*(){return this[t].get(r)})}getAll(t){return ae(this,null,function*(){return this[t].toArray()})}getFirst(t){return ae(this,null,function*(){return this[t].toCollection().first()})}getMany(t,r){return ae(this,null,function*(){return this[t].where("uuid").anyOf(r).toArray()})}remove(t,r){return ae(this,null,function*(){debugger;yield this[t].delete(r),t!=="indicesStore"&&(yield this.flexsearchIndexService.removeFromIndex(t,r),yield this.saveIndex(t))})}clear(t){return ae(this,null,function*(){yield this[t].clear(),yield this.flexsearchIndexService.clearIndex(t),yield this.saveIndex(t)})}generateUuid(){return Ol()}balkAdd(t,r,i=!0){return ae(this,null,function*(){yield this[t].bulkPut(r.map(a=>Ie(V({},a),{uuid:i?this.generateUuid():a.uuid})))})}uniqueKeys(t,r){return ae(this,null,function*(){return this[t].orderBy(r).uniqueKeys()})}getVersion(t){return ae(this,null,function*(){return this.idbdb.version})}restoreAllData(t){return ae(this,null,function*(){let r=Object.values(ds).filter(i=>i!=="indicesStore");for(let i of r){let a=t.find(c=>c.store===i);if(a)yield this.clear(i),yield this.balkAdd(i,a.data,!1);else throw new Error(`Store ${i} not found in backup data`)}})}static \u0275fac=function(r){return new(r||e)(se(Ss))};static \u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})};export{Bo as a,Zf as b,yr as c,xc as d,_d as e,Cv as f,Vd as g,_v as h,Iv as i,an as j,qe as k,it as l,Nn as m,Ji as n,mt as o,fa as p,Un as q,zn as r,fs as s,Rg as t,Tg as u,ds as v,jy as w,Ol as x,Ss as y,sh as z};
