{
  "version": 3,
  "sources": ["src/app/features/products/view/list/draft-products-list.compoent.ts"],
  "sourcesContent": ["import {Component, HostBinding, OnInit, signal} from '@angular/core';\nimport {FlexRowComponent} from '../../../../shared/view/layout/flex-row.component';\nimport {ButtonComponent} from '../../../../shared/view/ui/button/button.component';\nimport {CardListComponent} from '../../../../shared/view/ui/card/card-list.component';\nimport {CardListItemDirective} from '../../../../shared/view/ui/card/card-list-item.directive';\nimport {RouterLink} from '@angular/router';\nimport {TimeAgoPipe} from '../../../../shared/view/pipes/time-ago.pipe';\nimport {ExpandDirective} from '../../../../shared/view/directives/expand.directive';\nimport {PullDirective} from '../../../../shared/view/directives/pull.directive';\nimport {TranslatePipe} from '@ngx-translate/core';\nimport {ExpanderComponent} from '../../../../shared/view/ui/expander.component';\nimport {DraftForm, NotificationsService, SelectionZoneService} from '../../../../shared/service/services';\nimport {ProductsRepository} from '../../../../shared/service/repositories';\nimport {ProductDTO, ProductScheme} from '../../service/Product.scheme';\nimport {\n  InlineSeparatedGroupComponent,\n  InlineSeparatedGroupDirective\n} from '../../../../shared/view/ui/inline-separated-group.component';\n\n@Component({\n  selector: 'lg-draft-products-list',\n  standalone: true,\n  template: `\n    @if (drafts()?.length) {\n      <lg-expander [closeLabel]=\"'drafts-close-label'|translate\"\n                   [openLabel]=\"'drafts-label'|translate:{length:drafts()?.length}\">\n\n        <lg-inline-separated-group>\n          <ng-template lgInlineSeparatedGroup>\n            <lg-button (click)=\"selectionZoneService.onSelection()\"\n                       [flat]=\"true\"\n                       [size]=\"'small'\"\n                       [style]=\"'success'\">\n              {{ 'select-many-label'|translate }}\n            </lg-button>\n          </ng-template>\n\n          <ng-template lgInlineSeparatedGroup>\n            <lg-button [flat]=\"true\"\n                       [size]=\"'small'\"\n                       [style]=\"'danger'\"\n                       (click)=\"deleteAllDrafts()\">\n              {{ 'delete-all-label' | translate }}\n            </lg-button>\n          </ng-template>\n\n          @if (selectionZoneService.selected(); as selected) {\n            <ng-template lgInlineSeparatedGroup>\n              <lg-button [flat]=\"true\"\n                         [disabled]=\"!selected?.size\"\n                         [size]=\"'small'\"\n                         [style]=\"'danger'\"\n                         (click)=\"deletedSelectedDrafts()\">\n                {{ 'delete-selected-label' | translate }}\n              </lg-button>\n            </ng-template>\n          }\n        </lg-inline-separated-group>\n\n        <lg-card-list [mode]=\"selectionZoneService.selectionMode()\"\n                      (onSelected)=\"selectionZoneService.putSelected($event)\"\n                      (onDeleteOne)=\"deleteDraft($event?.uuid)\"\n                      [selectAll]=\"selectionZoneService.selectAll()\"\n                      [deselectAll]=\"selectionZoneService.deselectAll()\"\n                      style=\"--card-bg: var(--card-bg-draft)\">\n          @for (item of drafts(); track item.uuid) {\n            <ng-template lgCardListItem [uuid]=\"item.uuid\" type=\"draft\">\n              <lg-flex-row [center]=\"true\">\n                <a [routerLink]=\"'/products/draft/' + item?.uuid\" lgExpand>\n                  @if (item?.meta?.['uuid']) {\n                    {{ 'draft.list-prefix.existing'|translate }}\n                  } @else {\n                    {{ 'draft.list-prefix.new'|translate }}\n                  }\n                  {{ item?.data?.name || 'Unknown' }}\n                </a>\n\n                <small class=\"text-muted text-cursive\" lgPull>\n                  {{ 'edited-at-label'|translate }} {{ (item?.updatedAt || item?.createdAt) | timeAgo }}\n                </small>\n              </lg-flex-row>\n            </ng-template>\n          }\n        </lg-card-list>\n      </lg-expander>\n    }\n  `,\n  imports: [\n    FlexRowComponent,\n    ButtonComponent,\n    CardListComponent,\n    CardListItemDirective,\n    RouterLink,\n    TimeAgoPipe,\n    ExpandDirective,\n    PullDirective,\n    TranslatePipe,\n    ExpanderComponent,\n    InlineSeparatedGroupComponent,\n    InlineSeparatedGroupDirective\n  ],\n  providers: [\n    SelectionZoneService,\n  ],\n  styles: [\n    ``\n  ]\n})\nexport class DraftProductsListCompoent\n  implements OnInit {\n  constructor(\n    public _productsRepository: ProductsRepository,\n    private _notificationsService: NotificationsService,\n    public selectionZoneService: SelectionZoneService,\n  ) {\n  }\n\n  drafts = signal<(DraftForm<ProductDTO>)[]>([]);\n  protected readonly ProductDbInputScheme = ProductScheme;\n\n  @HostBinding('attr.hidden') get hidden() {\n    return this.drafts()?.length === 0 ? true : null;\n  }\n\n  deleteDraft(\n    draftUUID?: string\n  ) {\n    if (!draftUUID) {\n      return;\n    }\n    this._productsRepository.removeDraftProduct(draftUUID);\n    this.drafts.update((drafts) => {\n      return drafts.filter((item) => item?.uuid !== draftUUID);\n    });\n  }\n\n\n  deleteAllDrafts() {\n    this._productsRepository.removeDraftMany(this.drafts().map((item) => item.uuid)).then(() => {\n      this.drafts.set([]);\n      this._notificationsService.success('notifications.drafts.deleted');\n    })\n  }\n\n  deletedSelectedDrafts() {\n    const selected = this.selectionZoneService.selected();\n    if (!selected) return;\n    this._productsRepository.removeDraftMany(Array.from(selected)).then(() => {\n      this.drafts.update((drafts) => {\n        return drafts.filter((item) => !selected.has(item.uuid));\n      });\n      this._notificationsService.success('notifications.drafts.deleted');\n    })\n  }\n\n\n  ngOnInit() {\n    const draft = this._productsRepository.getDraftProducts();\n    if (draft) {\n      this.drafts.set(draft);\n    }\n  }\n\n}\n"],
  "mappings": "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",
  "names": []
}
