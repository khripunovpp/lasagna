import{a as fc}from"./chunk-EMIJRNYJ.js";import{a as pr,b as ac,c as uc,d as Ds,e as gr,p as Ii,q as _i,r as cc,t as lc,u as hc}from"./chunk-ZA7VU5CB.js";import{$ as oe,$b as Zu,$c as sc,Ab as Os,B as tt,Ba as cr,Bb as Xu,Ca as Rs,Da as Ou,E as qt,Ea as Ss,Fa as Du,G as Ct,Ga as Ts,Ha as Pu,Hc as tc,I as vs,Ia as lr,J as yn,Ka as Cs,L as wn,La as Is,Lc as nc,M as It,Ma as En,N as ys,Na as Rn,Nb as Yu,O as Eu,Oa as Mu,Pa as ku,Pc as rc,Q as Ru,Qa as Nu,Ra as Lu,Rc as ic,Sa as ju,Ta as Uu,U as Su,Ua as Bu,V as Ue,Va as Xt,Vb as Ju,W as ws,X as _e,Y as fe,Ya as Fu,Yc as oc,Zb as Qu,Zc as Ti,a as mu,aa as ar,ab as hr,ac as ec,ad as Ci,b as vu,ba as Tu,c as Ei,ca as le,cb as zu,d as ds,da as te,db as _s,e as ps,ea as H,eb as He,f as ht,fa as ur,fb as $u,g as $e,gb as Ku,ha as Cu,ia as _t,ja as Ve,jb as Gu,k as ft,kb as As,l as Pe,lb as Vu,m as ee,mb as fr,n as sr,nb as dr,o as yu,p as wu,pa as bn,qa as Ae,r as he,ra as bs,rb as Hu,s as gs,sa as Es,sb as Yt,t as je,ta as Si,tb as At,u as ms,v as bu,va as Iu,vb as xs,w as Ri,wb as Wu,xa as _u,ya as Au,za as xu,zb as qu}from"./chunk-X5WXA3YI.js";import{a as $f}from"./chunk-2RGDSI3Q.js";import{a as G,b as Ie,d as Ff,e as zf}from"./chunk-C6Q5SG76.js";var Ol=Ff((da,pa)=>{"use strict";(function(t,n){typeof da=="object"&&typeof pa<"u"?pa.exports=n():typeof define=="function"&&define.amd?define(n):(t=typeof globalThis<"u"?globalThis:t||self,t.Dexie=n())})(da,function(){"use strict";var t=function(o,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(u[h]=l[h])},t(o,s)};function n(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(o,s);function u(){this.constructor=o}o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}var e=function(){return e=Object.assign||function(s){for(var u,l=1,h=arguments.length;l<h;l++){u=arguments[l];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(s[p]=u[p])}return s},e.apply(this,arguments)};function r(o,s,u){if(u||arguments.length===2)for(var l=0,h=s.length,p;l<h;l++)(p||!(l in s))&&(p||(p=Array.prototype.slice.call(s,0,l)),p[l]=s[l]);return o.concat(p||Array.prototype.slice.call(s))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,a=Object.keys,c=Array.isArray;typeof Promise<"u"&&!i.Promise&&(i.Promise=Promise);function f(o,s){return typeof s!="object"||a(s).forEach(function(u){o[u]=s[u]}),o}var d=Object.getPrototypeOf,v={}.hasOwnProperty;function w(o,s){return v.call(o,s)}function C(o,s){typeof s=="function"&&(s=s(d(o))),(typeof Reflect>"u"?a:Reflect.ownKeys)(s).forEach(function(u){N(o,u,s[u])})}var I=Object.defineProperty;function N(o,s,u,l){I(o,s,f(u&&w(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},l))}function M(o){return{from:function(s){return o.prototype=Object.create(s.prototype),N(o.prototype,"constructor",o),{extend:C.bind(null,o.prototype)}}}}var j=Object.getOwnPropertyDescriptor;function U(o,s){var u=j(o,s),l;return u||(l=d(o))&&U(l,s)}var q=[].slice;function Z(o,s,u){return q.call(o,s,u)}function ae(o,s){return s(o)}function de(o){if(!o)throw new Error("Assertion Failed")}function ne(o){i.setImmediate?setImmediate(o):setTimeout(o,0)}function ve(o,s){return o.reduce(function(u,l,h){var p=s(l,h);return p&&(u[p[0]]=p[1]),u},{})}function Se(o,s){if(typeof s=="string"&&w(o,s))return o[s];if(!s)return o;if(typeof s!="string"){for(var u=[],l=0,h=s.length;l<h;++l){var p=Se(o,s[l]);u.push(p)}return u}var g=s.indexOf(".");if(g!==-1){var m=o[s.substr(0,g)];return m==null?void 0:Se(m,s.substr(g+1))}}function ge(o,s,u){if(!(!o||s===void 0)&&!("isFrozen"in Object&&Object.isFrozen(o)))if(typeof s!="string"&&"length"in s){de(typeof u!="string"&&"length"in u);for(var l=0,h=s.length;l<h;++l)ge(o,s[l],u[l])}else{var p=s.indexOf(".");if(p!==-1){var g=s.substr(0,p),m=s.substr(p+1);if(m==="")u===void 0?c(o)&&!isNaN(parseInt(g))?o.splice(g,1):delete o[g]:o[g]=u;else{var y=o[g];(!y||!w(o,g))&&(y=o[g]={}),ge(y,m,u)}}else u===void 0?c(o)&&!isNaN(parseInt(s))?o.splice(s,1):delete o[s]:o[s]=u}}function Ye(o,s){typeof s=="string"?ge(o,s,void 0):"length"in s&&[].map.call(s,function(u){ge(o,u,void 0)})}function ke(o){var s={};for(var u in o)w(o,u)&&(s[u]=o[u]);return s}var Eo=[].concat;function Aa(o){return Eo.apply([],o)}var ch="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Aa([8,16,32,64].map(function(o){return["Int","Uint","Float"].map(function(s){return s+o+"Array"})}))).filter(function(o){return i[o]}),xa=new Set(ch.map(function(o){return i[o]}));function Oa(o){var s={};for(var u in o)if(w(o,u)){var l=o[u];s[u]=!l||typeof l!="object"||xa.has(l.constructor)?l:Oa(l)}return s}function lh(o){for(var s in o)if(w(o,s))return!1;return!0}var Vn=null;function jt(o){Vn=new WeakMap;var s=Ro(o);return Vn=null,s}function Ro(o){if(!o||typeof o!="object")return o;var s=Vn.get(o);if(s)return s;if(c(o)){s=[],Vn.set(o,s);for(var u=0,l=o.length;u<l;++u)s.push(Ro(o[u]))}else if(xa.has(o.constructor))s=o;else{var h=d(o);s=h===Object.prototype?{}:Object.create(h),Vn.set(o,s);for(var p in o)w(o,p)&&(s[p]=Ro(o[p]))}return s}var hh={}.toString;function So(o){return hh.call(o).slice(8,-1)}var To=typeof Symbol<"u"?Symbol.iterator:"@@iterator",fh=typeof To=="symbol"?function(o){var s;return o!=null&&(s=o[To])&&s.apply(o)}:function(){return null};function Ut(o,s){var u=o.indexOf(s);return u>=0&&o.splice(u,1),u>=0}var cn={};function ut(o){var s,u,l,h;if(arguments.length===1){if(c(o))return o.slice();if(this===cn&&typeof o=="string")return[o];if(h=fh(o)){for(u=[];l=h.next(),!l.done;)u.push(l.value);return u}if(o==null)return[o];if(s=o.length,typeof s=="number"){for(u=new Array(s);s--;)u[s]=o[s];return u}return[o]}for(s=arguments.length,u=new Array(s);s--;)u[s]=arguments[s];return u}var Co=typeof Symbol<"u"?function(o){return o[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},dh=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Da=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Io=dh.concat(Da),ph={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ln(o,s){this.name=o,this.message=s}M(ln).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Pa(o,s){return o+". Errors: "+Object.keys(s).map(function(u){return s[u].toString()}).filter(function(u,l,h){return h.indexOf(u)===l}).join(`
`)}function qr(o,s,u,l){this.failures=s,this.failedKeys=l,this.successCount=u,this.message=Pa(o,s)}M(qr).from(ln);function hn(o,s){this.name="BulkError",this.failures=Object.keys(s).map(function(u){return s[u]}),this.failuresByPos=s,this.message=Pa(o,this.failures)}M(hn).from(ln);var _o=Io.reduce(function(o,s){return o[s]=s+"Error",o},{}),gh=ln,Y=Io.reduce(function(o,s){var u=s+"Error";function l(h,p){this.name=u,h?typeof h=="string"?(this.message="".concat(h).concat(p?`
 `+p:""),this.inner=p||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=ph[s]||u,this.inner=null)}return M(l).from(gh),o[s]=l,o},{});Y.Syntax=SyntaxError,Y.Type=TypeError,Y.Range=RangeError;var Ma=Da.reduce(function(o,s){return o[s+"Error"]=Y[s],o},{});function mh(o,s){if(!o||o instanceof ln||o instanceof TypeError||o instanceof SyntaxError||!o.name||!Ma[o.name])return o;var u=new Ma[o.name](s||o.message,o);return"stack"in o&&N(u,"stack",{get:function(){return this.inner.stack}}),u}var Xr=Io.reduce(function(o,s){return["Syntax","Type","Range"].indexOf(s)===-1&&(o[s+"Error"]=Y[s]),o},{});Xr.ModifyError=qr,Xr.DexieError=ln,Xr.BulkError=hn;function me(){}function Hn(o){return o}function vh(o,s){return o==null||o===Hn?s:function(u){return s(o(u))}}function Bt(o,s){return function(){o.apply(this,arguments),s.apply(this,arguments)}}function yh(o,s){return o===me?s:function(){var u=o.apply(this,arguments);u!==void 0&&(arguments[0]=u);var l=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var p=s.apply(this,arguments);return l&&(this.onsuccess=this.onsuccess?Bt(l,this.onsuccess):l),h&&(this.onerror=this.onerror?Bt(h,this.onerror):h),p!==void 0?p:u}}function wh(o,s){return o===me?s:function(){o.apply(this,arguments);var u=this.onsuccess,l=this.onerror;this.onsuccess=this.onerror=null,s.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?Bt(u,this.onsuccess):u),l&&(this.onerror=this.onerror?Bt(l,this.onerror):l)}}function bh(o,s){return o===me?s:function(u){var l=o.apply(this,arguments);f(u,l);var h=this.onsuccess,p=this.onerror;this.onsuccess=null,this.onerror=null;var g=s.apply(this,arguments);return h&&(this.onsuccess=this.onsuccess?Bt(h,this.onsuccess):h),p&&(this.onerror=this.onerror?Bt(p,this.onerror):p),l===void 0?g===void 0?void 0:g:f(l,g)}}function Eh(o,s){return o===me?s:function(){return s.apply(this,arguments)===!1?!1:o.apply(this,arguments)}}function Ao(o,s){return o===me?s:function(){var u=o.apply(this,arguments);if(u&&typeof u.then=="function"){for(var l=this,h=arguments.length,p=new Array(h);h--;)p[h]=arguments[h];return u.then(function(){return s.apply(l,p)})}return s.apply(this,arguments)}}var Je=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ka(o,s){Je=o}var Wn={},Na=100,xo=typeof Promise>"u"?[]:function(){var o=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[o,d(o),o];var s=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[s,d(s),o]}(),La=xo[0],ja=xo[1],Rh=xo[2],Sh=ja&&ja.then,Ft=La&&La.constructor,Oo=!!Rh;function Th(){queueMicrotask(Ih)}var qn=function(o,s){Xn.push([o,s]),Yr&&(Th(),Yr=!1)},Do=!0,Yr=!0,zt=[],Jr=[],Po=Hn,mt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:me,pgp:!1,env:{},finalize:me},V=mt,Xn=[],$t=0,Qr=[];function z(o){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var s=this._PSD=V;if(typeof o!="function"){if(o!==Wn)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ko(this,this._value);return}this._state=null,this._value=null,++s.ref,Ba(this,o)}var Mo={get:function(){var o=V,s=ni;function u(l,h){var p=this,g=!o.global&&(o!==V||s!==ni),m=g&&!yt(),y=new z(function(b,S){No(p,new Ua($a(l,o,g,m),$a(h,o,g,m),b,S,o))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return u.prototype=Wn,u},set:function(o){N(this,"then",o&&o.prototype===Wn?Mo:{get:function(){return o},set:Mo.set})}};C(z.prototype,{then:Mo,_then:function(o,s){No(this,new Ua(null,null,o,s,V))},catch:function(o){if(arguments.length===1)return this.then(null,o);var s=arguments[0],u=arguments[1];return typeof s=="function"?this.then(null,function(l){return l instanceof s?u(l):Zr(l)}):this.then(null,function(l){return l&&l.name===s?u(l):Zr(l)})},finally:function(o){return this.then(function(s){return z.resolve(o()).then(function(){return s})},function(s){return z.resolve(o()).then(function(){return Zr(s)})})},timeout:function(o,s){var u=this;return o<1/0?new z(function(l,h){var p=setTimeout(function(){return h(new Y.Timeout(s))},o);u.then(l,h).finally(clearTimeout.bind(null,p))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&N(z.prototype,Symbol.toStringTag,"Dexie.Promise"),mt.env=za();function Ua(o,s,u,l,h){this.onFulfilled=typeof o=="function"?o:null,this.onRejected=typeof s=="function"?s:null,this.resolve=u,this.reject=l,this.psd=h}C(z,{all:function(){var o=ut.apply(null,arguments).map(ri);return new z(function(s,u){o.length===0&&s([]);var l=o.length;o.forEach(function(h,p){return z.resolve(h).then(function(g){o[p]=g,--l||s(o)},u)})})},resolve:function(o){if(o instanceof z)return o;if(o&&typeof o.then=="function")return new z(function(u,l){o.then(u,l)});var s=new z(Wn,!0,o);return s},reject:Zr,race:function(){var o=ut.apply(null,arguments).map(ri);return new z(function(s,u){o.map(function(l){return z.resolve(l).then(s,u)})})},PSD:{get:function(){return V},set:function(o){return V=o}},totalEchoes:{get:function(){return ni}},newPSD:vt,usePSD:Kt,scheduler:{get:function(){return qn},set:function(o){qn=o}},rejectionMapper:{get:function(){return Po},set:function(o){Po=o}},follow:function(o,s){return new z(function(u,l){return vt(function(h,p){var g=V;g.unhandleds=[],g.onunhandled=p,g.finalize=Bt(function(){var m=this;_h(function(){m.unhandleds.length===0?h():p(m.unhandleds[0])})},g.finalize),o()},s,u,l)})}}),Ft&&(Ft.allSettled&&N(z,"allSettled",function(){var o=ut.apply(null,arguments).map(ri);return new z(function(s){o.length===0&&s([]);var u=o.length,l=new Array(u);o.forEach(function(h,p){return z.resolve(h).then(function(g){return l[p]={status:"fulfilled",value:g}},function(g){return l[p]={status:"rejected",reason:g}}).then(function(){return--u||s(l)})})})}),Ft.any&&typeof AggregateError<"u"&&N(z,"any",function(){var o=ut.apply(null,arguments).map(ri);return new z(function(s,u){o.length===0&&u(new AggregateError([]));var l=o.length,h=new Array(l);o.forEach(function(p,g){return z.resolve(p).then(function(m){return s(m)},function(m){h[g]=m,--l||u(new AggregateError(h))})})})}),Ft.withResolvers&&(z.withResolvers=Ft.withResolvers));function Ba(o,s){try{s(function(u){if(o._state===null){if(u===o)throw new TypeError("A promise cannot be resolved with itself.");var l=o._lib&&fn();u&&typeof u.then=="function"?Ba(o,function(h,p){u instanceof z?u._then(h,p):u.then(h,p)}):(o._state=!0,o._value=u,Fa(o)),l&&dn()}},ko.bind(null,o))}catch(u){ko(o,u)}}function ko(o,s){if(Jr.push(s),o._state===null){var u=o._lib&&fn();s=Po(s),o._state=!1,o._value=s,Ah(o),Fa(o),u&&dn()}}function Fa(o){var s=o._listeners;o._listeners=[];for(var u=0,l=s.length;u<l;++u)No(o,s[u]);var h=o._PSD;--h.ref||h.finalize(),$t===0&&(++$t,qn(function(){--$t===0&&Lo()},[]))}function No(o,s){if(o._state===null){o._listeners.push(s);return}var u=o._state?s.onFulfilled:s.onRejected;if(u===null)return(o._state?s.resolve:s.reject)(o._value);++s.psd.ref,++$t,qn(Ch,[u,o,s])}function Ch(o,s,u){try{var l,h=s._value;!s._state&&Jr.length&&(Jr=[]),l=Je&&s._consoleTask?s._consoleTask.run(function(){return o(h)}):o(h),!s._state&&Jr.indexOf(h)===-1&&xh(s),u.resolve(l)}catch(p){u.reject(p)}finally{--$t===0&&Lo(),--u.psd.ref||u.psd.finalize()}}function Ih(){Kt(mt,function(){fn()&&dn()})}function fn(){var o=Do;return Do=!1,Yr=!1,o}function dn(){var o,s,u;do for(;Xn.length>0;)for(o=Xn,Xn=[],u=o.length,s=0;s<u;++s){var l=o[s];l[0].apply(null,l[1])}while(Xn.length>0);Do=!0,Yr=!0}function Lo(){var o=zt;zt=[],o.forEach(function(l){l._PSD.onunhandled.call(null,l._value,l)});for(var s=Qr.slice(0),u=s.length;u;)s[--u]()}function _h(o){function s(){o(),Qr.splice(Qr.indexOf(s),1)}Qr.push(s),++$t,qn(function(){--$t===0&&Lo()},[])}function Ah(o){zt.some(function(s){return s._value===o._value})||zt.push(o)}function xh(o){for(var s=zt.length;s;)if(zt[--s]._value===o._value){zt.splice(s,1);return}}function Zr(o){return new z(Wn,!1,o)}function ye(o,s){var u=V;return function(){var l=fn(),h=V;try{return wt(u,!0),o.apply(this,arguments)}catch(p){s&&s(p)}finally{wt(h,!1),l&&dn()}}}var Ce={awaits:0,echoes:0,id:0},Oh=0,ei=[],ti=0,ni=0,Dh=0;function vt(o,s,u,l){var h=V,p=Object.create(h);p.parent=h,p.ref=0,p.global=!1,p.id=++Dh,mt.env,p.env=Oo?{Promise:z,PromiseProp:{value:z,configurable:!0,writable:!0},all:z.all,race:z.race,allSettled:z.allSettled,any:z.any,resolve:z.resolve,reject:z.reject}:{},s&&f(p,s),++h.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()};var g=Kt(p,o,u,l);return p.ref===0&&p.finalize(),g}function pn(){return Ce.id||(Ce.id=++Oh),++Ce.awaits,Ce.echoes+=Na,Ce.id}function yt(){return Ce.awaits?(--Ce.awaits===0&&(Ce.id=0),Ce.echoes=Ce.awaits*Na,!0):!1}(""+Sh).indexOf("[native code]")===-1&&(pn=yt=me);function ri(o){return Ce.echoes&&o&&o.constructor===Ft?(pn(),o.then(function(s){return yt(),s},function(s){return yt(),Re(s)})):o}function Ph(o){++ni,(!Ce.echoes||--Ce.echoes===0)&&(Ce.echoes=Ce.awaits=Ce.id=0),ei.push(V),wt(o,!0)}function Mh(){var o=ei[ei.length-1];ei.pop(),wt(o,!1)}function wt(o,s){var u=V;if((s?Ce.echoes&&(!ti++||o!==V):ti&&(!--ti||o!==V))&&queueMicrotask(s?Ph.bind(null,o):Mh),o!==V&&(V=o,u===mt&&(mt.env=za()),Oo)){var l=mt.env.Promise,h=o.env;(u.global||o.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),l.all=h.all,l.race=h.race,l.resolve=h.resolve,l.reject=h.reject,h.allSettled&&(l.allSettled=h.allSettled),h.any&&(l.any=h.any))}}function za(){var o=i.Promise;return Oo?{Promise:o,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:o.all,race:o.race,allSettled:o.allSettled,any:o.any,resolve:o.resolve,reject:o.reject}:{}}function Kt(o,s,u,l,h){var p=V;try{return wt(o,!0),s(u,l,h)}finally{wt(p,!1)}}function $a(o,s,u,l){return typeof o!="function"?o:function(){var h=V;u&&pn(),wt(s,!0);try{return o.apply(this,arguments)}finally{wt(h,!1),l&&queueMicrotask(yt)}}}function jo(o){Promise===Ft&&Ce.echoes===0?ti===0?o():enqueueNativeMicroTask(o):setTimeout(o,0)}var Re=z.reject;function Uo(o,s,u,l){if(!o.idbdb||!o._state.openComplete&&!V.letThrough&&!o._vip){if(o._state.openComplete)return Re(new Y.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return Re(new Y.DatabaseClosed);o.open().catch(me)}return o._state.dbReadyPromise.then(function(){return Uo(o,s,u,l)})}else{var h=o._createTransaction(s,u,o._dbSchema);try{h.create(),o._state.PR1398_maxLoop=3}catch(p){return p.name===_o.InvalidState&&o.isOpen()&&--o._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),o.close({disableAutoOpen:!1}),o.open().then(function(){return Uo(o,s,u,l)})):Re(p)}return h._promise(s,function(p,g){return vt(function(){return V.trans=h,l(p,g,h)})}).then(function(p){if(s==="readwrite")try{h.idbtrans.commit()}catch{}return s==="readonly"?p:h._completion.then(function(){return p})})}}var Ka="4.0.11",Gt="\uFFFF",Bo=-1/0,ct="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ga="String expected.",gn=[],ii="__dbnames",Fo="readonly",zo="readwrite";function Vt(o,s){return o?s?function(){return o.apply(this,arguments)&&s.apply(this,arguments)}:o:s}var Va={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function oi(o){return typeof o=="string"&&!/\./.test(o)?function(s){return s[o]===void 0&&o in s&&(s=jt(s),delete s[o]),s}:function(s){return s}}function Ha(){throw Y.Type()}function ue(o,s){try{var u=Wa(o),l=Wa(s);if(u!==l)return u==="Array"?1:l==="Array"?-1:u==="binary"?1:l==="binary"?-1:u==="string"?1:l==="string"?-1:u==="Date"?1:l!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return o>s?1:o<s?-1:0;case"binary":return Nh(qa(o),qa(s));case"Array":return kh(o,s)}}catch{}return NaN}function kh(o,s){for(var u=o.length,l=s.length,h=u<l?u:l,p=0;p<h;++p){var g=ue(o[p],s[p]);if(g!==0)return g}return u===l?0:u<l?-1:1}function Nh(o,s){for(var u=o.length,l=s.length,h=u<l?u:l,p=0;p<h;++p)if(o[p]!==s[p])return o[p]<s[p]?-1:1;return u===l?0:u<l?-1:1}function Wa(o){var s=typeof o;if(s!=="object")return s;if(ArrayBuffer.isView(o))return"binary";var u=So(o);return u==="ArrayBuffer"?"binary":u}function qa(o){return o instanceof Uint8Array?o:ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o)}var Xa=function(){function o(){}return o.prototype._trans=function(s,u,l){var h=this._tx||V.trans,p=this.name,g=Je&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function m(S,E,A){if(!A.schema[p])throw new Y.NotFound("Table "+p+" not part of transaction");return u(A.idbtrans,A)}var y=fn();try{var b=h&&h.db._novip===this.db._novip?h===V.trans?h._promise(s,m,l):vt(function(){return h._promise(s,m,l)},{trans:h,transless:V.transless||V}):Uo(this.db,s,[this.name],m);return g&&(b._consoleTask=g,b=b.catch(function(S){return console.trace(S),Re(S)})),b}finally{y&&dn()}},o.prototype.get=function(s,u){var l=this;return s&&s.constructor===Object?this.where(s).first(u):s==null?Re(new Y.Type("Invalid argument to Table.get()")):this._trans("readonly",function(h){return l.core.get({trans:h,key:s}).then(function(p){return l.hook.reading.fire(p)})}).then(u)},o.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(c(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var u=a(s);if(u.length===1)return this.where(u[0]).equals(s[u[0]]);var l=this.schema.indexes.concat(this.schema.primKey).filter(function(S){if(S.compound&&u.every(function(A){return S.keyPath.indexOf(A)>=0})){for(var E=0;E<u.length;++E)if(u.indexOf(S.keyPath[E])===-1)return!1;return!0}return!1}).sort(function(S,E){return S.keyPath.length-E.keyPath.length})[0];if(l&&this.db._maxKey!==Gt){var h=l.keyPath.slice(0,u.length);return this.where(h).equals(h.map(function(S){return s[S]}))}!l&&Je&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(u.join("+"),"]"));var p=this.schema.idxByName;function g(S,E){return ue(S,E)===0}var m=u.reduce(function(S,E){var A=S[0],L=S[1],R=p[E],T=s[E];return[A||R,A||!R?Vt(L,R&&R.multi?function(_){var P=Se(_,E);return c(P)&&P.some(function(O){return g(T,O)})}:function(_){return g(T,Se(_,E))}):L]},[null,null]),y=m[0],b=m[1];return y?this.where(y.name).equals(s[y.keyPath]).filter(b):l?this.filter(b):this.where(u).equals("")},o.prototype.filter=function(s){return this.toCollection().and(s)},o.prototype.count=function(s){return this.toCollection().count(s)},o.prototype.offset=function(s){return this.toCollection().offset(s)},o.prototype.limit=function(s){return this.toCollection().limit(s)},o.prototype.each=function(s){return this.toCollection().each(s)},o.prototype.toArray=function(s){return this.toCollection().toArray(s)},o.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},o.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,c(s)?"[".concat(s.join("+"),"]"):s))},o.prototype.reverse=function(){return this.toCollection().reverse()},o.prototype.mapToClass=function(s){var u=this,l=u.db,h=u.name;this.schema.mappedClass=s,s.prototype instanceof Ha&&(s=function(y){n(b,y);function b(){return y!==null&&y.apply(this,arguments)||this}return Object.defineProperty(b.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),b.prototype.table=function(){return h},b}(s));for(var p=new Set,g=s.prototype;g;g=d(g))Object.getOwnPropertyNames(g).forEach(function(y){return p.add(y)});var m=function(y){if(!y)return y;var b=Object.create(s.prototype);for(var S in y)if(!p.has(S))try{b[S]=y[S]}catch{}return b};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=m,this.hook("reading",m),s},o.prototype.defineClass=function(){function s(u){f(this,u)}return this.mapToClass(s)},o.prototype.add=function(s,u){var l=this,h=this.schema.primKey,p=h.auto,g=h.keyPath,m=s;return g&&p&&(m=oi(g)(s)),this._trans("readwrite",function(y){return l.core.mutate({trans:y,type:"add",keys:u!=null?[u]:null,values:[m]})}).then(function(y){return y.numFailures?z.reject(y.failures[0]):y.lastResult}).then(function(y){if(g)try{ge(s,g,y)}catch{}return y})},o.prototype.update=function(s,u){if(typeof s=="object"&&!c(s)){var l=Se(s,this.schema.primKey.keyPath);return l===void 0?Re(new Y.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(l).modify(u)}else return this.where(":id").equals(s).modify(u)},o.prototype.put=function(s,u){var l=this,h=this.schema.primKey,p=h.auto,g=h.keyPath,m=s;return g&&p&&(m=oi(g)(s)),this._trans("readwrite",function(y){return l.core.mutate({trans:y,type:"put",values:[m],keys:u!=null?[u]:null})}).then(function(y){return y.numFailures?z.reject(y.failures[0]):y.lastResult}).then(function(y){if(g)try{ge(s,g,y)}catch{}return y})},o.prototype.delete=function(s){var u=this;return this._trans("readwrite",function(l){return u.core.mutate({trans:l,type:"delete",keys:[s]})}).then(function(l){return l.numFailures?z.reject(l.failures[0]):void 0})},o.prototype.clear=function(){var s=this;return this._trans("readwrite",function(u){return s.core.mutate({trans:u,type:"deleteRange",range:Va})}).then(function(u){return u.numFailures?z.reject(u.failures[0]):void 0})},o.prototype.bulkGet=function(s){var u=this;return this._trans("readonly",function(l){return u.core.getMany({keys:s,trans:l}).then(function(h){return h.map(function(p){return u.hook.reading.fire(p)})})})},o.prototype.bulkAdd=function(s,u,l){var h=this,p=Array.isArray(u)?u:void 0;l=l||(p?void 0:u);var g=l?l.allKeys:void 0;return this._trans("readwrite",function(m){var y=h.schema.primKey,b=y.auto,S=y.keyPath;if(S&&p)throw new Y.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(p&&p.length!==s.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");var E=s.length,A=S&&b?s.map(oi(S)):s;return h.core.mutate({trans:m,type:"add",keys:p,values:A,wantResults:g}).then(function(L){var R=L.numFailures,T=L.results,_=L.lastResult,P=L.failures,O=g?T:_;if(R===0)return O;throw new hn("".concat(h.name,".bulkAdd(): ").concat(R," of ").concat(E," operations failed"),P)})})},o.prototype.bulkPut=function(s,u,l){var h=this,p=Array.isArray(u)?u:void 0;l=l||(p?void 0:u);var g=l?l.allKeys:void 0;return this._trans("readwrite",function(m){var y=h.schema.primKey,b=y.auto,S=y.keyPath;if(S&&p)throw new Y.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(p&&p.length!==s.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");var E=s.length,A=S&&b?s.map(oi(S)):s;return h.core.mutate({trans:m,type:"put",keys:p,values:A,wantResults:g}).then(function(L){var R=L.numFailures,T=L.results,_=L.lastResult,P=L.failures,O=g?T:_;if(R===0)return O;throw new hn("".concat(h.name,".bulkPut(): ").concat(R," of ").concat(E," operations failed"),P)})})},o.prototype.bulkUpdate=function(s){var u=this,l=this.core,h=s.map(function(m){return m.key}),p=s.map(function(m){return m.changes}),g=[];return this._trans("readwrite",function(m){return l.getMany({trans:m,keys:h,cache:"clone"}).then(function(y){var b=[],S=[];s.forEach(function(A,L){var R=A.key,T=A.changes,_=y[L];if(_){for(var P=0,O=Object.keys(T);P<O.length;P++){var D=O[P],k=T[D];if(D===u.schema.primKey.keyPath){if(ue(k,R)!==0)throw new Y.Constraint("Cannot update primary key in bulkUpdate()")}else ge(_,D,k)}g.push(L),b.push(R),S.push(_)}});var E=b.length;return l.mutate({trans:m,type:"put",keys:b,values:S,updates:{keys:h,changeSpecs:p}}).then(function(A){var L=A.numFailures,R=A.failures;if(L===0)return E;for(var T=0,_=Object.keys(R);T<_.length;T++){var P=_[T],O=g[Number(P)];if(O!=null){var D=R[P];delete R[P],R[O]=D}}throw new hn("".concat(u.name,".bulkUpdate(): ").concat(L," of ").concat(E," operations failed"),R)})})})},o.prototype.bulkDelete=function(s){var u=this,l=s.length;return this._trans("readwrite",function(h){return u.core.mutate({trans:h,type:"delete",keys:s})}).then(function(h){var p=h.numFailures,g=h.lastResult,m=h.failures;if(p===0)return g;throw new hn("".concat(u.name,".bulkDelete(): ").concat(p," of ").concat(l," operations failed"),m)})},o}();function Yn(o){var s={},u=function(m,y){if(y){for(var b=arguments.length,S=new Array(b-1);--b;)S[b-1]=arguments[b];return s[m].subscribe.apply(null,S),o}else if(typeof m=="string")return s[m]};u.addEventType=p;for(var l=1,h=arguments.length;l<h;++l)p(arguments[l]);return u;function p(m,y,b){if(typeof m=="object")return g(m);y||(y=Eh),b||(b=me);var S={subscribers:[],fire:b,subscribe:function(E){S.subscribers.indexOf(E)===-1&&(S.subscribers.push(E),S.fire=y(S.fire,E))},unsubscribe:function(E){S.subscribers=S.subscribers.filter(function(A){return A!==E}),S.fire=S.subscribers.reduce(y,b)}};return s[m]=u[m]=S,S}function g(m){a(m).forEach(function(y){var b=m[y];if(c(b))p(y,m[y][0],m[y][1]);else if(b==="asap")var S=p(y,Hn,function(){for(var A=arguments.length,L=new Array(A);A--;)L[A]=arguments[A];S.subscribers.forEach(function(R){ne(function(){R.apply(null,L)})})});else throw new Y.InvalidArgument("Invalid event config")})}}function Jn(o,s){return M(s).from({prototype:o}),s}function Lh(o){return Jn(Xa.prototype,function(u,l,h){this.db=o,this._tx=h,this.name=u,this.schema=l,this.hook=o._allTables[u]?o._allTables[u].hook:Yn(null,{creating:[yh,me],reading:[vh,Hn],updating:[bh,me],deleting:[wh,me]})})}function mn(o,s){return!(o.filter||o.algorithm||o.or)&&(s?o.justLimit:!o.replayFilter)}function $o(o,s){o.filter=Vt(o.filter,s)}function Ko(o,s,u){var l=o.replayFilter;o.replayFilter=l?function(){return Vt(l(),s())}:s,o.justLimit=u&&!l}function jh(o,s){o.isMatch=Vt(o.isMatch,s)}function si(o,s){if(o.isPrimKey)return s.primaryKey;var u=s.getIndexByKeyPath(o.index);if(!u)throw new Y.Schema("KeyPath "+o.index+" on object store "+s.name+" is not indexed");return u}function Ya(o,s,u){var l=si(o,s.schema);return s.openCursor({trans:u,values:!o.keysOnly,reverse:o.dir==="prev",unique:!!o.unique,query:{index:l,range:o.range}})}function ai(o,s,u,l){var h=o.replayFilter?Vt(o.filter,o.replayFilter()):o.filter;if(o.or){var p={},g=function(m,y,b){if(!h||h(y,b,function(A){return y.stop(A)},function(A){return y.fail(A)})){var S=y.primaryKey,E=""+S;E==="[object ArrayBuffer]"&&(E=""+new Uint8Array(S)),w(p,E)||(p[E]=!0,s(m,y,b))}};return Promise.all([o.or._iterate(g,u),Ja(Ya(o,l,u),o.algorithm,g,!o.keysOnly&&o.valueMapper)])}else return Ja(Ya(o,l,u),Vt(o.algorithm,h),s,!o.keysOnly&&o.valueMapper)}function Ja(o,s,u,l){var h=l?function(g,m,y){return u(l(g),m,y)}:u,p=ye(h);return o.then(function(g){if(g)return g.start(function(){var m=function(){return g.continue()};(!s||s(g,function(y){return m=y},function(y){g.stop(y),m=me},function(y){g.fail(y),m=me}))&&p(g.value,g,function(y){return m=y}),m()})})}var Qn=function(){function o(s){this["@@propmod"]=s}return o.prototype.execute=function(s){var u,l=this["@@propmod"];if(l.add!==void 0){var h=l.add;if(c(h))return r(r([],c(s)?s:[],!0),h,!0).sort();if(typeof h=="number")return(Number(s)||0)+h;if(typeof h=="bigint")try{return BigInt(s)+h}catch{return BigInt(0)+h}throw new TypeError("Invalid term ".concat(h))}if(l.remove!==void 0){var p=l.remove;if(c(p))return c(s)?s.filter(function(m){return!p.includes(m)}).sort():[];if(typeof p=="number")return Number(s)-p;if(typeof p=="bigint")try{return BigInt(s)-p}catch{return BigInt(0)-p}throw new TypeError("Invalid subtrahend ".concat(p))}var g=(u=l.replacePrefix)===null||u===void 0?void 0:u[0];return g&&typeof s=="string"&&s.startsWith(g)?l.replacePrefix[1]+s.substring(g.length):s},o}(),Uh=function(){function o(){}return o.prototype._read=function(s,u){var l=this._ctx;return l.error?l.table._trans(null,Re.bind(null,l.error)):l.table._trans("readonly",s).then(u)},o.prototype._write=function(s){var u=this._ctx;return u.error?u.table._trans(null,Re.bind(null,u.error)):u.table._trans("readwrite",s,"locked")},o.prototype._addAlgorithm=function(s){var u=this._ctx;u.algorithm=Vt(u.algorithm,s)},o.prototype._iterate=function(s,u){return ai(this._ctx,s,u,this._ctx.table.core)},o.prototype.clone=function(s){var u=Object.create(this.constructor.prototype),l=Object.create(this._ctx);return s&&f(l,s),u._ctx=l,u},o.prototype.raw=function(){return this._ctx.valueMapper=null,this},o.prototype.each=function(s){var u=this._ctx;return this._read(function(l){return ai(u,s,l,u.table.core)})},o.prototype.count=function(s){var u=this;return this._read(function(l){var h=u._ctx,p=h.table.core;if(mn(h,!0))return p.count({trans:l,query:{index:si(h,p.schema),range:h.range}}).then(function(m){return Math.min(m,h.limit)});var g=0;return ai(h,function(){return++g,!1},l,p).then(function(){return g})}).then(s)},o.prototype.sortBy=function(s,u){var l=s.split(".").reverse(),h=l[0],p=l.length-1;function g(b,S){return S?g(b[l[S]],S-1):b[h]}var m=this._ctx.dir==="next"?1:-1;function y(b,S){var E=g(b,p),A=g(S,p);return ue(E,A)*m}return this.toArray(function(b){return b.sort(y)}).then(u)},o.prototype.toArray=function(s){var u=this;return this._read(function(l){var h=u._ctx;if(h.dir==="next"&&mn(h,!0)&&h.limit>0){var p=h.valueMapper,g=si(h,h.table.core.schema);return h.table.core.query({trans:l,limit:h.limit,values:!0,query:{index:g,range:h.range}}).then(function(y){var b=y.result;return p?b.map(p):b})}else{var m=[];return ai(h,function(y){return m.push(y)},l,h.table.core).then(function(){return m})}},s)},o.prototype.offset=function(s){var u=this._ctx;return s<=0?this:(u.offset+=s,mn(u)?Ko(u,function(){var l=s;return function(h,p){return l===0?!0:l===1?(--l,!1):(p(function(){h.advance(l),l=0}),!1)}}):Ko(u,function(){var l=s;return function(){return--l<0}}),this)},o.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),Ko(this._ctx,function(){var u=s;return function(l,h,p){return--u<=0&&h(p),u>=0}},!0),this},o.prototype.until=function(s,u){return $o(this._ctx,function(l,h,p){return s(l.value)?(h(p),u):!0}),this},o.prototype.first=function(s){return this.limit(1).toArray(function(u){return u[0]}).then(s)},o.prototype.last=function(s){return this.reverse().first(s)},o.prototype.filter=function(s){return $o(this._ctx,function(u){return s(u.value)}),jh(this._ctx,s),this},o.prototype.and=function(s){return this.filter(s)},o.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},o.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},o.prototype.desc=function(){return this.reverse()},o.prototype.eachKey=function(s){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(l,h){s(h.key,h)})},o.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},o.prototype.eachPrimaryKey=function(s){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(l,h){s(h.primaryKey,h)})},o.prototype.keys=function(s){var u=this._ctx;u.keysOnly=!u.isMatch;var l=[];return this.each(function(h,p){l.push(p.key)}).then(function(){return l}).then(s)},o.prototype.primaryKeys=function(s){var u=this._ctx;if(u.dir==="next"&&mn(u,!0)&&u.limit>0)return this._read(function(h){var p=si(u,u.table.core.schema);return u.table.core.query({trans:h,values:!1,limit:u.limit,query:{index:p,range:u.range}})}).then(function(h){var p=h.result;return p}).then(s);u.keysOnly=!u.isMatch;var l=[];return this.each(function(h,p){l.push(p.primaryKey)}).then(function(){return l}).then(s)},o.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},o.prototype.firstKey=function(s){return this.limit(1).keys(function(u){return u[0]}).then(s)},o.prototype.lastKey=function(s){return this.reverse().firstKey(s)},o.prototype.distinct=function(){var s=this._ctx,u=s.index&&s.table.schema.idxByName[s.index];if(!u||!u.multi)return this;var l={};return $o(this._ctx,function(h){var p=h.primaryKey.toString(),g=w(l,p);return l[p]=!0,!g}),this},o.prototype.modify=function(s){var u=this,l=this._ctx;return this._write(function(h){var p;if(typeof s=="function")p=s;else{var g=a(s),m=g.length;p=function(O){for(var D=!1,k=0;k<m;++k){var x=g[k],B=s[x],$=Se(O,x);B instanceof Qn?(ge(O,x,B.execute($)),D=!0):$!==B&&(ge(O,x,B),D=!0)}return D}}var y=l.table.core,b=y.schema.primaryKey,S=b.outbound,E=b.extractKey,A=200,L=u.db._options.modifyChunkSize;L&&(typeof L=="object"?A=L[y.name]||L["*"]||200:A=L);var R=[],T=0,_=[],P=function(O,D){var k=D.failures,x=D.numFailures;T+=O-x;for(var B=0,$=a(k);B<$.length;B++){var F=$[B];R.push(k[F])}};return u.clone().primaryKeys().then(function(O){var D=mn(l)&&l.limit===1/0&&(typeof s!="function"||s===Go)&&{index:l.index,range:l.range},k=function(x){var B=Math.min(A,O.length-x);return y.getMany({trans:h,keys:O.slice(x,x+B),cache:"immutable"}).then(function($){for(var F=[],J=[],se=S?[]:null,K=[],ie=0;ie<B;++ie){var Q=$[ie],ce={value:jt(Q),primKey:O[x+ie]};p.call(ce,ce.value,ce)!==!1&&(ce.value==null?K.push(O[x+ie]):!S&&ue(E(Q),E(ce.value))!==0?(K.push(O[x+ie]),F.push(ce.value)):(J.push(ce.value),S&&se.push(O[x+ie])))}return Promise.resolve(F.length>0&&y.mutate({trans:h,type:"add",values:F}).then(function(X){for(var be in X.failures)K.splice(parseInt(be),1);P(F.length,X)})).then(function(){return(J.length>0||D&&typeof s=="object")&&y.mutate({trans:h,type:"put",keys:se,values:J,criteria:D,changeSpec:typeof s!="function"&&s,isAdditionalChunk:x>0}).then(function(X){return P(J.length,X)})}).then(function(){return(K.length>0||D&&s===Go)&&y.mutate({trans:h,type:"delete",keys:K,criteria:D,isAdditionalChunk:x>0}).then(function(X){return P(K.length,X)})}).then(function(){return O.length>x+B&&k(x+A)})})};return k(0).then(function(){if(R.length>0)throw new qr("Error modifying one or more objects",R,T,_);return O.length})})})},o.prototype.delete=function(){var s=this._ctx,u=s.range;return mn(s)&&(s.isPrimKey||u.type===3)?this._write(function(l){var h=s.table.core.schema.primaryKey,p=u;return s.table.core.count({trans:l,query:{index:h,range:p}}).then(function(g){return s.table.core.mutate({trans:l,type:"deleteRange",range:p}).then(function(m){var y=m.failures;m.lastResult,m.results;var b=m.numFailures;if(b)throw new qr("Could not delete some values",Object.keys(y).map(function(S){return y[S]}),g-b);return g-b})})}):this.modify(Go)},o}(),Go=function(o,s){return s.value=null};function Bh(o){return Jn(Uh.prototype,function(u,l){this.db=o;var h=Va,p=null;if(l)try{h=l()}catch(b){p=b}var g=u._ctx,m=g.table,y=m.hook.reading.fire;this._ctx={table:m,index:g.index,isPrimKey:!g.index||m.schema.primKey.keyPath&&g.index===m.schema.primKey.name,range:h,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:p,or:g.or,valueMapper:y!==Hn?y:null}})}function Fh(o,s){return o<s?-1:o===s?0:1}function zh(o,s){return o>s?-1:o===s?0:1}function Le(o,s,u){var l=o instanceof Za?new o.Collection(o):o;return l._ctx.error=u?new u(s):new TypeError(s),l}function vn(o){return new o.Collection(o,function(){return Qa("")}).limit(0)}function $h(o){return o==="next"?function(s){return s.toUpperCase()}:function(s){return s.toLowerCase()}}function Kh(o){return o==="next"?function(s){return s.toLowerCase()}:function(s){return s.toUpperCase()}}function Gh(o,s,u,l,h,p){for(var g=Math.min(o.length,l.length),m=-1,y=0;y<g;++y){var b=s[y];if(b!==l[y])return h(o[y],u[y])<0?o.substr(0,y)+u[y]+u.substr(y+1):h(o[y],l[y])<0?o.substr(0,y)+l[y]+u.substr(y+1):m>=0?o.substr(0,m)+s[m]+u.substr(m+1):null;h(o[y],b)<0&&(m=y)}return g<l.length&&p==="next"?o+u.substr(o.length):g<o.length&&p==="prev"?o.substr(0,u.length):m<0?null:o.substr(0,m)+l[m]+u.substr(m+1)}function ui(o,s,u,l){var h,p,g,m,y,b,S,E=u.length;if(!u.every(function(T){return typeof T=="string"}))return Le(o,Ga);function A(T){h=$h(T),p=Kh(T),g=T==="next"?Fh:zh;var _=u.map(function(P){return{lower:p(P),upper:h(P)}}).sort(function(P,O){return g(P.lower,O.lower)});m=_.map(function(P){return P.upper}),y=_.map(function(P){return P.lower}),b=T,S=T==="next"?"":l}A("next");var L=new o.Collection(o,function(){return bt(m[0],y[E-1]+l)});L._ondirectionchange=function(T){A(T)};var R=0;return L._addAlgorithm(function(T,_,P){var O=T.key;if(typeof O!="string")return!1;var D=p(O);if(s(D,y,R))return!0;for(var k=null,x=R;x<E;++x){var B=Gh(O,D,m[x],y[x],g,b);B===null&&k===null?R=x+1:(k===null||g(k,B)>0)&&(k=B)}return _(k!==null?function(){T.continue(k+S)}:P),!1}),L}function bt(o,s,u,l){return{type:2,lower:o,upper:s,lowerOpen:u,upperOpen:l}}function Qa(o){return{type:1,lower:o,upper:o}}var Za=function(){function o(){}return Object.defineProperty(o.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),o.prototype.between=function(s,u,l,h){l=l!==!1,h=h===!0;try{return this._cmp(s,u)>0||this._cmp(s,u)===0&&(l||h)&&!(l&&h)?vn(this):new this.Collection(this,function(){return bt(s,u,!l,!h)})}catch{return Le(this,ct)}},o.prototype.equals=function(s){return s==null?Le(this,ct):new this.Collection(this,function(){return Qa(s)})},o.prototype.above=function(s){return s==null?Le(this,ct):new this.Collection(this,function(){return bt(s,void 0,!0)})},o.prototype.aboveOrEqual=function(s){return s==null?Le(this,ct):new this.Collection(this,function(){return bt(s,void 0,!1)})},o.prototype.below=function(s){return s==null?Le(this,ct):new this.Collection(this,function(){return bt(void 0,s,!1,!0)})},o.prototype.belowOrEqual=function(s){return s==null?Le(this,ct):new this.Collection(this,function(){return bt(void 0,s)})},o.prototype.startsWith=function(s){return typeof s!="string"?Le(this,Ga):this.between(s,s+Gt,!0,!0)},o.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):ui(this,function(u,l){return u.indexOf(l[0])===0},[s],Gt)},o.prototype.equalsIgnoreCase=function(s){return ui(this,function(u,l){return u===l[0]},[s],"")},o.prototype.anyOfIgnoreCase=function(){var s=ut.apply(cn,arguments);return s.length===0?vn(this):ui(this,function(u,l){return l.indexOf(u)!==-1},s,"")},o.prototype.startsWithAnyOfIgnoreCase=function(){var s=ut.apply(cn,arguments);return s.length===0?vn(this):ui(this,function(u,l){return l.some(function(h){return u.indexOf(h)===0})},s,Gt)},o.prototype.anyOf=function(){var s=this,u=ut.apply(cn,arguments),l=this._cmp;try{u.sort(l)}catch{return Le(this,ct)}if(u.length===0)return vn(this);var h=new this.Collection(this,function(){return bt(u[0],u[u.length-1])});h._ondirectionchange=function(g){l=g==="next"?s._ascending:s._descending,u.sort(l)};var p=0;return h._addAlgorithm(function(g,m,y){for(var b=g.key;l(b,u[p])>0;)if(++p,p===u.length)return m(y),!1;return l(b,u[p])===0?!0:(m(function(){g.continue(u[p])}),!1)}),h},o.prototype.notEqual=function(s){return this.inAnyRange([[Bo,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},o.prototype.noneOf=function(){var s=ut.apply(cn,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return Le(this,ct)}var u=s.reduce(function(l,h){return l?l.concat([[l[l.length-1][1],h]]):[[Bo,h]]},null);return u.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(u,{includeLowers:!1,includeUppers:!1})},o.prototype.inAnyRange=function(s,u){var l=this,h=this._cmp,p=this._ascending,g=this._descending,m=this._min,y=this._max;if(s.length===0)return vn(this);if(!s.every(function(x){return x[0]!==void 0&&x[1]!==void 0&&p(x[0],x[1])<=0}))return Le(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Y.InvalidArgument);var b=!u||u.includeLowers!==!1,S=u&&u.includeUppers===!0;function E(x,B){for(var $=0,F=x.length;$<F;++$){var J=x[$];if(h(B[0],J[1])<0&&h(B[1],J[0])>0){J[0]=m(J[0],B[0]),J[1]=y(J[1],B[1]);break}}return $===F&&x.push(B),x}var A=p;function L(x,B){return A(x[0],B[0])}var R;try{R=s.reduce(E,[]),R.sort(L)}catch{return Le(this,ct)}var T=0,_=S?function(x){return p(x,R[T][1])>0}:function(x){return p(x,R[T][1])>=0},P=b?function(x){return g(x,R[T][0])>0}:function(x){return g(x,R[T][0])>=0};function O(x){return!_(x)&&!P(x)}var D=_,k=new this.Collection(this,function(){return bt(R[0][0],R[R.length-1][1],!b,!S)});return k._ondirectionchange=function(x){x==="next"?(D=_,A=p):(D=P,A=g),R.sort(L)},k._addAlgorithm(function(x,B,$){for(var F=x.key;D(F);)if(++T,T===R.length)return B($),!1;return O(F)?!0:(l._cmp(F,R[T][1])===0||l._cmp(F,R[T][0])===0||B(function(){A===p?x.continue(R[T][0]):x.continue(R[T][1])}),!1)}),k},o.prototype.startsWithAnyOf=function(){var s=ut.apply(cn,arguments);return s.every(function(u){return typeof u=="string"})?s.length===0?vn(this):this.inAnyRange(s.map(function(u){return[u,u+Gt]})):Le(this,"startsWithAnyOf() only works with strings")},o}();function Vh(o){return Jn(Za.prototype,function(u,l,h){if(this.db=o,this._ctx={table:u,index:l===":id"?null:l,or:h},this._cmp=this._ascending=ue,this._descending=function(p,g){return ue(g,p)},this._max=function(p,g){return ue(p,g)>0?p:g},this._min=function(p,g){return ue(p,g)<0?p:g},this._IDBKeyRange=o._deps.IDBKeyRange,!this._IDBKeyRange)throw new Y.MissingAPI})}function Qe(o){return ye(function(s){return Zn(s),o(s.target.error),!1})}function Zn(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault()}var er="storagemutated",Vo="x-storagemutated-1",Et=Yn(null,er),Hh=function(){function o(){}return o.prototype._lock=function(){return de(!V.global),++this._reculock,this._reculock===1&&!V.global&&(V.lockOwnerFor=this),this},o.prototype._unlock=function(){if(de(!V.global),--this._reculock===0)for(V.global||(V.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var s=this._blockedFuncs.shift();try{Kt(s[1],s[0])}catch{}}return this},o.prototype._locked=function(){return this._reculock&&V.lockOwnerFor!==this},o.prototype.create=function(s){var u=this;if(!this.mode)return this;var l=this.db.idbdb,h=this.db._state.dbOpenError;if(de(!this.idbtrans),!s&&!l)switch(h&&h.name){case"DatabaseClosedError":throw new Y.DatabaseClosed(h);case"MissingAPIError":throw new Y.MissingAPI(h.message,h);default:throw new Y.OpenFailed(h)}if(!this.active)throw new Y.TransactionInactive;return de(this._completion._state===null),s=this.idbtrans=s||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):l.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),s.onerror=ye(function(p){Zn(p),u._reject(s.error)}),s.onabort=ye(function(p){Zn(p),u.active&&u._reject(new Y.Abort(s.error)),u.active=!1,u.on("abort").fire(p)}),s.oncomplete=ye(function(){u.active=!1,u._resolve(),"mutatedParts"in s&&Et.storagemutated.fire(s.mutatedParts)}),this},o.prototype._promise=function(s,u,l){var h=this;if(s==="readwrite"&&this.mode!=="readwrite")return Re(new Y.ReadOnly("Transaction is readonly"));if(!this.active)return Re(new Y.TransactionInactive);if(this._locked())return new z(function(g,m){h._blockedFuncs.push([function(){h._promise(s,u,l).then(g,m)},V])});if(l)return vt(function(){var g=new z(function(m,y){h._lock();var b=u(m,y,h);b&&b.then&&b.then(m,y)});return g.finally(function(){return h._unlock()}),g._lib=!0,g});var p=new z(function(g,m){var y=u(g,m,h);y&&y.then&&y.then(g,m)});return p._lib=!0,p},o.prototype._root=function(){return this.parent?this.parent._root():this},o.prototype.waitFor=function(s){var u=this._root(),l=z.resolve(s);if(u._waitingFor)u._waitingFor=u._waitingFor.then(function(){return l});else{u._waitingFor=l,u._waitingQueue=[];var h=u.idbtrans.objectStore(u.storeNames[0]);(function g(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(h.get(-1/0).onsuccess=g)})()}var p=u._waitingFor;return new z(function(g,m){l.then(function(y){return u._waitingQueue.push(ye(g.bind(null,y)))},function(y){return u._waitingQueue.push(ye(m.bind(null,y)))}).finally(function(){u._waitingFor===p&&(u._waitingFor=null)})})},o.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Y.Abort))},o.prototype.table=function(s){var u=this._memoizedTables||(this._memoizedTables={});if(w(u,s))return u[s];var l=this.schema[s];if(!l)throw new Y.NotFound("Table "+s+" not part of transaction");var h=new this.db.Table(s,l,this);return h.core=this.db.core.table(s),u[s]=h,h},o}();function Wh(o){return Jn(Hh.prototype,function(u,l,h,p,g){var m=this;this.db=o,this.mode=u,this.storeNames=l,this.schema=h,this.chromeTransactionDurability=p,this.idbtrans=null,this.on=Yn(this,"complete","error","abort"),this.parent=g||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new z(function(y,b){m._resolve=y,m._reject=b}),this._completion.then(function(){m.active=!1,m.on.complete.fire()},function(y){var b=m.active;return m.active=!1,m.on.error.fire(y),m.parent?m.parent._reject(y):b&&m.idbtrans&&m.idbtrans.abort(),Re(y)})})}function Ho(o,s,u,l,h,p,g){return{name:o,keyPath:s,unique:u,multi:l,auto:h,compound:p,src:(u&&!g?"&":"")+(l?"*":"")+(h?"++":"")+eu(s)}}function eu(o){return typeof o=="string"?o:o?"["+[].join.call(o,"+")+"]":""}function Wo(o,s,u){return{name:o,primKey:s,indexes:u,mappedClass:null,idxByName:ve(u,function(l){return[l.name,l]})}}function qh(o){return o.length===1?o[0]:o}var tr=function(o){try{return o.only([[]]),tr=function(){return[[]]},[[]]}catch{return tr=function(){return Gt},Gt}};function qo(o){return o==null?function(){}:typeof o=="string"?Xh(o):function(s){return Se(s,o)}}function Xh(o){var s=o.split(".");return s.length===1?function(u){return u[o]}:function(u){return Se(u,o)}}function tu(o){return[].slice.call(o)}var Yh=0;function nr(o){return o==null?":id":typeof o=="string"?o:"[".concat(o.join("+"),"]")}function Jh(o,s,u){function l(E,A){var L=tu(E.objectStoreNames);return{schema:{name:E.name,tables:L.map(function(R){return A.objectStore(R)}).map(function(R){var T=R.keyPath,_=R.autoIncrement,P=c(T),O=T==null,D={},k={name:R.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:O,compound:P,keyPath:T,autoIncrement:_,unique:!0,extractKey:qo(T)},indexes:tu(R.indexNames).map(function(x){return R.index(x)}).map(function(x){var B=x.name,$=x.unique,F=x.multiEntry,J=x.keyPath,se=c(J),K={name:B,compound:se,keyPath:J,unique:$,multiEntry:F,extractKey:qo(J)};return D[nr(J)]=K,K}),getIndexByKeyPath:function(x){return D[nr(x)]}};return D[":id"]=k.primaryKey,T!=null&&(D[nr(T)]=k.primaryKey),k})},hasGetAll:L.length>0&&"getAll"in A.objectStore(L[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function h(E){if(E.type===3)return null;if(E.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var A=E.lower,L=E.upper,R=E.lowerOpen,T=E.upperOpen,_=A===void 0?L===void 0?null:s.upperBound(L,!!T):L===void 0?s.lowerBound(A,!!R):s.bound(A,L,!!R,!!T);return _}function p(E){var A=E.name;function L(_){var P=_.trans,O=_.type,D=_.keys,k=_.values,x=_.range;return new Promise(function(B,$){B=ye(B);var F=P.objectStore(A),J=F.keyPath==null,se=O==="put"||O==="add";if(!se&&O!=="delete"&&O!=="deleteRange")throw new Error("Invalid operation type: "+O);var K=(D||k||{length:1}).length;if(D&&k&&D.length!==k.length)throw new Error("Given keys array must have same length as given values array.");if(K===0)return B({numFailures:0,failures:{},results:[],lastResult:void 0});var ie,Q=[],ce=[],X=0,be=function(et){++X,Zn(et)};if(O==="deleteRange"){if(x.type===4)return B({numFailures:X,failures:ce,results:[],lastResult:void 0});x.type===3?Q.push(ie=F.clear()):Q.push(ie=F.delete(h(x)))}else{var De=se?J?[k,D]:[k,null]:[D,null],Ze=De[0],Ne=De[1];if(se)for(var ze=0;ze<K;++ze)Q.push(ie=Ne&&Ne[ze]!==void 0?F[O](Ze[ze],Ne[ze]):F[O](Ze[ze])),ie.onerror=be;else for(var ze=0;ze<K;++ze)Q.push(ie=F[O](Ze[ze])),ie.onerror=be}var Tt=function(et){var or=et.target.result;Q.forEach(function(Ge,bi){return Ge.error!=null&&(ce[bi]=Ge.error)}),B({numFailures:X,failures:ce,results:O==="delete"?D:Q.map(function(Ge){return Ge.result}),lastResult:or})};ie.onerror=function(et){be(et),Tt(et)},ie.onsuccess=Tt})}function R(_){var P=_.trans,O=_.values,D=_.query,k=_.reverse,x=_.unique;return new Promise(function(B,$){B=ye(B);var F=D.index,J=D.range,se=P.objectStore(A),K=F.isPrimaryKey?se:se.index(F.name),ie=k?x?"prevunique":"prev":x?"nextunique":"next",Q=O||!("openKeyCursor"in K)?K.openCursor(h(J),ie):K.openKeyCursor(h(J),ie);Q.onerror=Qe($),Q.onsuccess=ye(function(ce){var X=Q.result;if(!X){B(null);return}X.___id=++Yh,X.done=!1;var be=X.continue.bind(X),De=X.continuePrimaryKey;De&&(De=De.bind(X));var Ze=X.advance.bind(X),Ne=function(){throw new Error("Cursor not started")},ze=function(){throw new Error("Cursor not stopped")};X.trans=P,X.stop=X.continue=X.continuePrimaryKey=X.advance=Ne,X.fail=ye($),X.next=function(){var Tt=this,et=1;return this.start(function(){return et--?Tt.continue():Tt.stop()}).then(function(){return Tt})},X.start=function(Tt){var et=new Promise(function(Ge,bi){Ge=ye(Ge),Q.onerror=Qe(bi),X.fail=bi,X.stop=function(Bf){X.stop=X.continue=X.continuePrimaryKey=X.advance=ze,Ge(Bf)}}),or=function(){if(Q.result)try{Tt()}catch(Ge){X.fail(Ge)}else X.done=!0,X.start=function(){throw new Error("Cursor behind last entry")},X.stop()};return Q.onsuccess=ye(function(Ge){Q.onsuccess=or,or()}),X.continue=be,X.continuePrimaryKey=De,X.advance=Ze,or(),et},B(X)},$)})}function T(_){return function(P){return new Promise(function(O,D){O=ye(O);var k=P.trans,x=P.values,B=P.limit,$=P.query,F=B===1/0?void 0:B,J=$.index,se=$.range,K=k.objectStore(A),ie=J.isPrimaryKey?K:K.index(J.name),Q=h(se);if(B===0)return O({result:[]});if(_){var ce=x?ie.getAll(Q,F):ie.getAllKeys(Q,F);ce.onsuccess=function(Ze){return O({result:Ze.target.result})},ce.onerror=Qe(D)}else{var X=0,be=x||!("openKeyCursor"in ie)?ie.openCursor(Q):ie.openKeyCursor(Q),De=[];be.onsuccess=function(Ze){var Ne=be.result;if(!Ne)return O({result:De});if(De.push(x?Ne.value:Ne.primaryKey),++X===B)return O({result:De});Ne.continue()},be.onerror=Qe(D)}})}}return{name:A,schema:E,mutate:L,getMany:function(_){var P=_.trans,O=_.keys;return new Promise(function(D,k){D=ye(D);for(var x=P.objectStore(A),B=O.length,$=new Array(B),F=0,J=0,se,K=function(X){var be=X.target;($[be._pos]=be.result)!=null,++J===F&&D($)},ie=Qe(k),Q=0;Q<B;++Q){var ce=O[Q];ce!=null&&(se=x.get(O[Q]),se._pos=Q,se.onsuccess=K,se.onerror=ie,++F)}F===0&&D($)})},get:function(_){var P=_.trans,O=_.key;return new Promise(function(D,k){D=ye(D);var x=P.objectStore(A),B=x.get(O);B.onsuccess=function($){return D($.target.result)},B.onerror=Qe(k)})},query:T(y),openCursor:R,count:function(_){var P=_.query,O=_.trans,D=P.index,k=P.range;return new Promise(function(x,B){var $=O.objectStore(A),F=D.isPrimaryKey?$:$.index(D.name),J=h(k),se=J?F.count(J):F.count();se.onsuccess=ye(function(K){return x(K.target.result)}),se.onerror=Qe(B)})}}}var g=l(o,u),m=g.schema,y=g.hasGetAll,b=m.tables.map(function(E){return p(E)}),S={};return b.forEach(function(E){return S[E.name]=E}),{stack:"dbcore",transaction:o.transaction.bind(o),table:function(E){var A=S[E];if(!A)throw new Error("Table '".concat(E,"' not found"));return S[E]},MIN_KEY:-1/0,MAX_KEY:tr(s),schema:m}}function Qh(o,s){return s.reduce(function(u,l){var h=l.create;return e(e({},u),h(u))},o)}function Zh(o,s,u,l){var h=u.IDBKeyRange;u.indexedDB;var p=Qh(Jh(s,h,l),o.dbcore);return{dbcore:p}}function ci(o,s){var u=s.db,l=Zh(o._middlewares,u,o._deps,s);o.core=l.dbcore,o.tables.forEach(function(h){var p=h.name;o.core.schema.tables.some(function(g){return g.name===p})&&(h.core=o.core.table(p),o[p]instanceof o.Table&&(o[p].core=h.core))})}function li(o,s,u,l){u.forEach(function(h){var p=l[h];s.forEach(function(g){var m=U(g,h);(!m||"value"in m&&m.value===void 0)&&(g===o.Transaction.prototype||g instanceof o.Transaction?N(g,h,{get:function(){return this.table(h)},set:function(y){I(this,h,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):g[h]=new o.Table(h,p))})})}function Xo(o,s){s.forEach(function(u){for(var l in u)u[l]instanceof o.Table&&delete u[l]})}function ef(o,s){return o._cfg.version-s._cfg.version}function tf(o,s,u,l){var h=o._dbSchema;u.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=Wo("$meta",ru("")[0],[]),o._storeNames.push("$meta"));var p=o._createTransaction("readwrite",o._storeNames,h);p.create(u),p._completion.catch(l);var g=p._reject.bind(p),m=V.transless||V;vt(function(){if(V.trans=p,V.transless=m,s===0)a(h).forEach(function(y){Jo(u,y,h[y].primKey,h[y].indexes)}),ci(o,u),z.follow(function(){return o.on.populate.fire(p)}).catch(g);else return ci(o,u),rf(o,p,s).then(function(y){return of(o,y,p,u)}).catch(g)})}function nf(o,s){nu(o._dbSchema,s),s.db.version%10===0&&!s.objectStoreNames.contains("$meta")&&s.db.createObjectStore("$meta").add(Math.ceil(s.db.version/10-1),"version");var u=fi(o,o.idbdb,s);di(o,o._dbSchema,s);for(var l=Yo(u,o._dbSchema),h=function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var S=s.objectStore(b.name);b.add.forEach(function(E){Je&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(E.src)),hi(S,E)})},p=0,g=l.change;p<g.length;p++){var m=g[p],y=h(m);if(typeof y=="object")return y.value}}function rf(o,s,u){return s.storeNames.includes("$meta")?s.table("$meta").get("version").then(function(l){return l??u}):z.resolve(u)}function of(o,s,u,l){var h=[],p=o._versions,g=o._dbSchema=fi(o,o.idbdb,l),m=p.filter(function(b){return b._cfg.version>=s});if(m.length===0)return z.resolve();m.forEach(function(b){h.push(function(){var S=g,E=b._cfg.dbschema;di(o,S,l),di(o,E,l),g=o._dbSchema=E;var A=Yo(S,E);A.add.forEach(function(O){Jo(l,O[0],O[1].primKey,O[1].indexes)}),A.change.forEach(function(O){if(O.recreate)throw new Y.Upgrade("Not yet support for changing primary key");var D=l.objectStore(O.name);O.add.forEach(function(k){return hi(D,k)}),O.change.forEach(function(k){D.deleteIndex(k.name),hi(D,k)}),O.del.forEach(function(k){return D.deleteIndex(k)})});var L=b._cfg.contentUpgrade;if(L&&b._cfg.version>s){ci(o,l),u._memoizedTables={};var R=ke(E);A.del.forEach(function(O){R[O]=S[O]}),Xo(o,[o.Transaction.prototype]),li(o,[o.Transaction.prototype],a(R),R),u.schema=R;var T=Co(L);T&&pn();var _,P=z.follow(function(){if(_=L(u),_&&T){var O=yt.bind(null,null);_.then(O,O)}});return _&&typeof _.then=="function"?z.resolve(_):P.then(function(){return _})}}),h.push(function(S){var E=b._cfg.dbschema;sf(E,S),Xo(o,[o.Transaction.prototype]),li(o,[o.Transaction.prototype],o._storeNames,o._dbSchema),u.schema=o._dbSchema}),h.push(function(S){o.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(o.idbdb.version/10)===b._cfg.version?(o.idbdb.deleteObjectStore("$meta"),delete o._dbSchema.$meta,o._storeNames=o._storeNames.filter(function(E){return E!=="$meta"})):S.objectStore("$meta").put(b._cfg.version,"version"))})});function y(){return h.length?z.resolve(h.shift()(u.idbtrans)).then(y):z.resolve()}return y().then(function(){nu(g,l)})}function Yo(o,s){var u={del:[],add:[],change:[]},l;for(l in o)s[l]||u.del.push(l);for(l in s){var h=o[l],p=s[l];if(!h)u.add.push([l,p]);else{var g={name:l,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||h.primKey.auto!==p.primKey.auto)g.recreate=!0,u.change.push(g);else{var m=h.idxByName,y=p.idxByName,b=void 0;for(b in m)y[b]||g.del.push(b);for(b in y){var S=m[b],E=y[b];S?S.src!==E.src&&g.change.push(E):g.add.push(E)}(g.del.length>0||g.add.length>0||g.change.length>0)&&u.change.push(g)}}}return u}function Jo(o,s,u,l){var h=o.db.createObjectStore(s,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return l.forEach(function(p){return hi(h,p)}),h}function nu(o,s){a(o).forEach(function(u){s.db.objectStoreNames.contains(u)||(Je&&console.debug("Dexie: Creating missing table",u),Jo(s,u,o[u].primKey,o[u].indexes))})}function sf(o,s){[].slice.call(s.db.objectStoreNames).forEach(function(u){return o[u]==null&&s.db.deleteObjectStore(u)})}function hi(o,s){o.createIndex(s.name,s.keyPath,{unique:s.unique,multiEntry:s.multi})}function fi(o,s,u){var l={},h=Z(s.objectStoreNames,0);return h.forEach(function(p){for(var g=u.objectStore(p),m=g.keyPath,y=Ho(eu(m),m||"",!0,!1,!!g.autoIncrement,m&&typeof m!="string",!0),b=[],S=0;S<g.indexNames.length;++S){var E=g.index(g.indexNames[S]);m=E.keyPath;var A=Ho(E.name,m,!!E.unique,!!E.multiEntry,!1,m&&typeof m!="string",!1);b.push(A)}l[p]=Wo(p,y,b)}),l}function af(o,s,u){o.verno=s.version/10;var l=o._dbSchema=fi(o,s,u);o._storeNames=Z(s.objectStoreNames,0),li(o,[o._allTables],a(l),l)}function uf(o,s){var u=fi(o,o.idbdb,s),l=Yo(u,o._dbSchema);return!(l.add.length||l.change.some(function(h){return h.add.length||h.change.length}))}function di(o,s,u){for(var l=u.db.objectStoreNames,h=0;h<l.length;++h){var p=l[h],g=u.objectStore(p);o._hasGetAll="getAll"in g;for(var m=0;m<g.indexNames.length;++m){var y=g.indexNames[m],b=g.index(y).keyPath,S=typeof b=="string"?b:"["+Z(b).join("+")+"]";if(s[p]){var E=s[p].idxByName[S];E&&(E.name=y,delete s[p].idxByName[S],s[p].idxByName[y]=E)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(o._hasGetAll=!1)}function ru(o){return o.split(",").map(function(s,u){s=s.trim();var l=s.replace(/([&*]|\+\+)/g,""),h=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Ho(l,h||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),c(h),u===0)})}var cf=function(){function o(){}return o.prototype._parseStoresSpec=function(s,u){a(s).forEach(function(l){if(s[l]!==null){var h=ru(s[l]),p=h.shift();if(p.unique=!0,p.multi)throw new Y.Schema("Primary key cannot be multi-valued");h.forEach(function(g){if(g.auto)throw new Y.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new Y.Schema("Index must have a name and cannot be an empty string")}),u[l]=Wo(l,p,h)}})},o.prototype.stores=function(s){var u=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,s):s;var l=u._versions,h={},p={};return l.forEach(function(g){f(h,g._cfg.storesSource),p=g._cfg.dbschema={},g._parseStoresSpec(h,p)}),u._dbSchema=p,Xo(u,[u._allTables,u,u.Transaction.prototype]),li(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],a(p),p),u._storeNames=a(p),this},o.prototype.upgrade=function(s){return this._cfg.contentUpgrade=Ao(this._cfg.contentUpgrade||me,s),this},o}();function lf(o){return Jn(cf.prototype,function(u){this.db=o,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Qo(o,s){var u=o._dbNamesDB;return u||(u=o._dbNamesDB=new lt(ii,{addons:[],indexedDB:o,IDBKeyRange:s}),u.version(1).stores({dbnames:"name"})),u.table("dbnames")}function Zo(o){return o&&typeof o.databases=="function"}function hf(o){var s=o.indexedDB,u=o.IDBKeyRange;return Zo(s)?Promise.resolve(s.databases()).then(function(l){return l.map(function(h){return h.name}).filter(function(h){return h!==ii})}):Qo(s,u).toCollection().primaryKeys()}function ff(o,s){var u=o.indexedDB,l=o.IDBKeyRange;!Zo(u)&&s!==ii&&Qo(u,l).put({name:s}).catch(me)}function df(o,s){var u=o.indexedDB,l=o.IDBKeyRange;!Zo(u)&&s!==ii&&Qo(u,l).delete(s).catch(me)}function es(o){return vt(function(){return V.letThrough=!0,o()})}function pf(){var o=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!o||!indexedDB.databases)return Promise.resolve();var s;return new Promise(function(u){var l=function(){return indexedDB.databases().finally(u)};s=setInterval(l,100),l()}).finally(function(){return clearInterval(s)})}var ts;function ns(o){return!("from"in o)}var Oe=function(o,s){if(this)f(this,arguments.length?{d:1,from:o,to:arguments.length>1?s:o}:{d:0});else{var u=new Oe;return o&&"d"in o&&f(u,o),u}};C(Oe.prototype,(ts={add:function(o){return ir(this,o),this},addKey:function(o){return rr(this,o,o),this},addKeys:function(o){var s=this;return o.forEach(function(u){return rr(s,u,u)}),this},hasKey:function(o){var s=pi(this).next(o).value;return s&&ue(s.from,o)<=0&&ue(s.to,o)>=0}},ts[To]=function(){return pi(this)},ts));function rr(o,s,u){var l=ue(s,u);if(!isNaN(l)){if(l>0)throw RangeError();if(ns(o))return f(o,{from:s,to:u,d:1});var h=o.l,p=o.r;if(ue(u,o.from)<0)return h?rr(h,s,u):o.l={from:s,to:u,d:1,l:null,r:null},ou(o);if(ue(s,o.to)>0)return p?rr(p,s,u):o.r={from:s,to:u,d:1,l:null,r:null},ou(o);ue(s,o.from)<0&&(o.from=s,o.l=null,o.d=p?p.d+1:1),ue(u,o.to)>0&&(o.to=u,o.r=null,o.d=o.l?o.l.d+1:1);var g=!o.r;h&&!o.l&&ir(o,h),p&&g&&ir(o,p)}}function ir(o,s){function u(l,h){var p=h.from,g=h.to,m=h.l,y=h.r;rr(l,p,g),m&&u(l,m),y&&u(l,y)}ns(s)||u(o,s)}function iu(o,s){var u=pi(s),l=u.next();if(l.done)return!1;for(var h=l.value,p=pi(o),g=p.next(h.from),m=g.value;!l.done&&!g.done;){if(ue(m.from,h.to)<=0&&ue(m.to,h.from)>=0)return!0;ue(h.from,m.from)<0?h=(l=u.next(m.from)).value:m=(g=p.next(h.from)).value}return!1}function pi(o){var s=ns(o)?null:{s:0,n:o};return{next:function(u){for(var l=arguments.length>0;s;)switch(s.s){case 0:if(s.s=1,l)for(;s.n.l&&ue(u,s.n.from)<0;)s={up:s,n:s.n.l,s:1};else for(;s.n.l;)s={up:s,n:s.n.l,s:1};case 1:if(s.s=2,!l||ue(u,s.n.to)<=0)return{value:s.n,done:!1};case 2:if(s.n.r){s.s=3,s={up:s,n:s.n.r,s:0};continue}case 3:s=s.up}return{done:!0}}}}function ou(o){var s,u,l=(((s=o.r)===null||s===void 0?void 0:s.d)||0)-(((u=o.l)===null||u===void 0?void 0:u.d)||0),h=l>1?"r":l<-1?"l":"";if(h){var p=h==="r"?"l":"r",g=e({},o),m=o[h];o.from=m.from,o.to=m.to,o[h]=m[h],g[h]=m[p],o[p]=g,g.d=su(g)}o.d=su(o)}function su(o){var s=o.r,u=o.l;return(s?u?Math.max(s.d,u.d):s.d:u?u.d:0)+1}function gi(o,s){return a(s).forEach(function(u){o[u]?ir(o[u],s[u]):o[u]=Oa(s[u])}),o}function rs(o,s){return o.all||s.all||Object.keys(o).some(function(u){return s[u]&&iu(s[u],o[u])})}var Ht={},is={},os=!1;function mi(o,s){gi(is,o),os||(os=!0,setTimeout(function(){os=!1;var u=is;is={},ss(u,!1)},0))}function ss(o,s){s===void 0&&(s=!1);var u=new Set;if(o.all)for(var l=0,h=Object.values(Ht);l<h.length;l++){var p=h[l];au(p,o,u,s)}else for(var g in o){var m=/^idb\:\/\/(.*)\/(.*)\//.exec(g);if(m){var y=m[1],b=m[2],p=Ht["idb://".concat(y,"/").concat(b)];p&&au(p,o,u,s)}}u.forEach(function(S){return S()})}function au(o,s,u,l){for(var h=[],p=0,g=Object.entries(o.queries.query);p<g.length;p++){for(var m=g[p],y=m[0],b=m[1],S=[],E=0,A=b;E<A.length;E++){var L=A[E];rs(s,L.obsSet)?L.subscribers.forEach(function(P){return u.add(P)}):l&&S.push(L)}l&&h.push([y,S])}if(l)for(var R=0,T=h;R<T.length;R++){var _=T[R],y=_[0],S=_[1];o.queries.query[y]=S}}function gf(o){var s=o._state,u=o._deps.indexedDB;if(s.isBeingOpened||o.idbdb)return s.dbReadyPromise.then(function(){return s.dbOpenError?Re(s.dbOpenError):o});s.isBeingOpened=!0,s.dbOpenError=null,s.openComplete=!1;var l=s.openCanceller,h=Math.round(o.verno*10),p=!1;function g(){if(s.openCanceller!==l)throw new Y.DatabaseClosed("db.open() was cancelled")}var m=s.dbReadyResolve,y=null,b=!1,S=function(){return new z(function(E,A){if(g(),!u)throw new Y.MissingAPI;var L=o.name,R=s.autoSchema||!h?u.open(L):u.open(L,h);if(!R)throw new Y.MissingAPI;R.onerror=Qe(A),R.onblocked=ye(o._fireOnBlocked),R.onupgradeneeded=ye(function(T){if(y=R.transaction,s.autoSchema&&!o._options.allowEmptyDB){R.onerror=Zn,y.abort(),R.result.close();var _=u.deleteDatabase(L);_.onsuccess=_.onerror=ye(function(){A(new Y.NoSuchDatabase("Database ".concat(L," doesnt exist")))})}else{y.onerror=Qe(A);var P=T.oldVersion>Math.pow(2,62)?0:T.oldVersion;b=P<1,o.idbdb=R.result,p&&nf(o,y),tf(o,P/10,y,A)}},A),R.onsuccess=ye(function(){y=null;var T=o.idbdb=R.result,_=Z(T.objectStoreNames);if(_.length>0)try{var P=T.transaction(qh(_),"readonly");if(s.autoSchema)af(o,T,P);else if(di(o,o._dbSchema,P),!uf(o,P)&&!p)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),T.close(),h=T.version+1,p=!0,E(S());ci(o,P)}catch{}gn.push(o),T.onversionchange=ye(function(O){s.vcFired=!0,o.on("versionchange").fire(O)}),T.onclose=ye(function(O){o.on("close").fire(O)}),b&&ff(o._deps,L),E()},A)}).catch(function(E){switch(E?.name){case"UnknownError":if(s.PR1398_maxLoop>0)return s.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),S();break;case"VersionError":if(h>0)return h=0,S();break}return z.reject(E)})};return z.race([l,(typeof navigator>"u"?z.resolve():pf()).then(S)]).then(function(){return g(),s.onReadyBeingFired=[],z.resolve(es(function(){return o.on.ready.fire(o.vip)})).then(function E(){if(s.onReadyBeingFired.length>0){var A=s.onReadyBeingFired.reduce(Ao,me);return s.onReadyBeingFired=[],z.resolve(es(function(){return A(o.vip)})).then(E)}})}).finally(function(){s.openCanceller===l&&(s.onReadyBeingFired=null,s.isBeingOpened=!1)}).catch(function(E){s.dbOpenError=E;try{y&&y.abort()}catch{}return l===s.openCanceller&&o._close(),Re(E)}).finally(function(){s.openComplete=!0,m()}).then(function(){if(b){var E={};o.tables.forEach(function(A){A.schema.indexes.forEach(function(L){L.name&&(E["idb://".concat(o.name,"/").concat(A.name,"/").concat(L.name)]=new Oe(-1/0,[[[]]]))}),E["idb://".concat(o.name,"/").concat(A.name,"/")]=E["idb://".concat(o.name,"/").concat(A.name,"/:dels")]=new Oe(-1/0,[[[]]])}),Et(er).fire(E),ss(E,!0)}return o})}function as(o){var s=function(g){return o.next(g)},u=function(g){return o.throw(g)},l=p(s),h=p(u);function p(g){return function(m){var y=g(m),b=y.value;return y.done?b:!b||typeof b.then!="function"?c(b)?Promise.all(b).then(l,h):l(b):b.then(l,h)}}return p(s)()}function mf(o,s,u){var l=arguments.length;if(l<2)throw new Y.InvalidArgument("Too few arguments");for(var h=new Array(l-1);--l;)h[l-1]=arguments[l];u=h.pop();var p=Aa(h);return[o,p,u]}function uu(o,s,u,l,h){return z.resolve().then(function(){var p=V.transless||V,g=o._createTransaction(s,u,o._dbSchema,l);g.explicit=!0;var m={trans:g,transless:p};if(l)g.idbtrans=l.idbtrans;else try{g.create(),g.idbtrans._explicit=!0,o._state.PR1398_maxLoop=3}catch(E){return E.name===_o.InvalidState&&o.isOpen()&&--o._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),o.close({disableAutoOpen:!1}),o.open().then(function(){return uu(o,s,u,null,h)})):Re(E)}var y=Co(h);y&&pn();var b,S=z.follow(function(){if(b=h.call(g,g),b)if(y){var E=yt.bind(null,null);b.then(E,E)}else typeof b.next=="function"&&typeof b.throw=="function"&&(b=as(b))},m);return(b&&typeof b.then=="function"?z.resolve(b).then(function(E){return g.active?E:Re(new Y.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):S.then(function(){return b})).then(function(E){return l&&g._resolve(),g._completion.then(function(){return E})}).catch(function(E){return g._reject(E),Re(E)})})}function vi(o,s,u){for(var l=c(o)?o.slice():[o],h=0;h<u;++h)l.push(s);return l}function vf(o){return e(e({},o),{table:function(s){var u=o.table(s),l=u.schema,h={},p=[];function g(T,_,P){var O=nr(T),D=h[O]=h[O]||[],k=T==null?0:typeof T=="string"?1:T.length,x=_>0,B=e(e({},P),{name:x?"".concat(O,"(virtual-from:").concat(P.name,")"):P.name,lowLevelIndex:P,isVirtual:x,keyTail:_,keyLength:k,extractKey:qo(T),unique:!x&&P.unique});if(D.push(B),B.isPrimaryKey||p.push(B),k>1){var $=k===2?T[0]:T.slice(0,k-1);g($,_+1,P)}return D.sort(function(F,J){return F.keyTail-J.keyTail}),B}var m=g(l.primaryKey.keyPath,0,l.primaryKey);h[":id"]=[m];for(var y=0,b=l.indexes;y<b.length;y++){var S=b[y];g(S.keyPath,0,S)}function E(T){var _=h[nr(T)];return _&&_[0]}function A(T,_){return{type:T.type===1?2:T.type,lower:vi(T.lower,T.lowerOpen?o.MAX_KEY:o.MIN_KEY,_),lowerOpen:!0,upper:vi(T.upper,T.upperOpen?o.MIN_KEY:o.MAX_KEY,_),upperOpen:!0}}function L(T){var _=T.query.index;return _.isVirtual?e(e({},T),{query:{index:_.lowLevelIndex,range:A(T.query.range,_.keyTail)}}):T}var R=e(e({},u),{schema:e(e({},l),{primaryKey:m,indexes:p,getIndexByKeyPath:E}),count:function(T){return u.count(L(T))},query:function(T){return u.query(L(T))},openCursor:function(T){var _=T.query.index,P=_.keyTail,O=_.isVirtual,D=_.keyLength;if(!O)return u.openCursor(T);function k(x){function B(F){F!=null?x.continue(vi(F,T.reverse?o.MAX_KEY:o.MIN_KEY,P)):T.unique?x.continue(x.key.slice(0,D).concat(T.reverse?o.MIN_KEY:o.MAX_KEY,P)):x.continue()}var $=Object.create(x,{continue:{value:B},continuePrimaryKey:{value:function(F,J){x.continuePrimaryKey(vi(F,o.MAX_KEY,P),J)}},primaryKey:{get:function(){return x.primaryKey}},key:{get:function(){var F=x.key;return D===1?F[0]:F.slice(0,D)}},value:{get:function(){return x.value}}});return $}return u.openCursor(L(T)).then(function(x){return x&&k(x)})}});return R}})}var yf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:vf};function us(o,s,u,l){return u=u||{},l=l||"",a(o).forEach(function(h){if(!w(s,h))u[l+h]=void 0;else{var p=o[h],g=s[h];if(typeof p=="object"&&typeof g=="object"&&p&&g){var m=So(p),y=So(g);m!==y?u[l+h]=s[h]:m==="Object"?us(p,g,u,l+h+"."):p!==g&&(u[l+h]=s[h])}else p!==g&&(u[l+h]=s[h])}}),a(s).forEach(function(h){w(o,h)||(u[l+h]=s[h])}),u}function cs(o,s){return s.type==="delete"?s.keys:s.keys||s.values.map(o.extractKey)}var wf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(o){return e(e({},o),{table:function(s){var u=o.table(s),l=u.schema.primaryKey,h=e(e({},u),{mutate:function(p){var g=V.trans,m=g.table(s).hook,y=m.deleting,b=m.creating,S=m.updating;switch(p.type){case"add":if(b.fire===me)break;return g._promise("readwrite",function(){return E(p)},!0);case"put":if(b.fire===me&&S.fire===me)break;return g._promise("readwrite",function(){return E(p)},!0);case"delete":if(y.fire===me)break;return g._promise("readwrite",function(){return E(p)},!0);case"deleteRange":if(y.fire===me)break;return g._promise("readwrite",function(){return A(p)},!0)}return u.mutate(p);function E(R){var T=V.trans,_=R.keys||cs(l,R);if(!_)throw new Error("Keys missing");return R=R.type==="add"||R.type==="put"?e(e({},R),{keys:_}):e({},R),R.type!=="delete"&&(R.values=r([],R.values,!0)),R.keys&&(R.keys=r([],R.keys,!0)),bf(u,R,_).then(function(P){var O=_.map(function(D,k){var x=P[k],B={onerror:null,onsuccess:null};if(R.type==="delete")y.fire.call(B,D,x,T);else if(R.type==="add"||x===void 0){var $=b.fire.call(B,D,R.values[k],T);D==null&&$!=null&&(D=$,R.keys[k]=D,l.outbound||ge(R.values[k],l.keyPath,D))}else{var F=us(x,R.values[k]),J=S.fire.call(B,F,D,x,T);if(J){var se=R.values[k];Object.keys(J).forEach(function(K){w(se,K)?se[K]=J[K]:ge(se,K,J[K])})}}return B});return u.mutate(R).then(function(D){for(var k=D.failures,x=D.results,B=D.numFailures,$=D.lastResult,F=0;F<_.length;++F){var J=x?x[F]:_[F],se=O[F];J==null?se.onerror&&se.onerror(k[F]):se.onsuccess&&se.onsuccess(R.type==="put"&&P[F]?R.values[F]:J)}return{failures:k,results:x,numFailures:B,lastResult:$}}).catch(function(D){return O.forEach(function(k){return k.onerror&&k.onerror(D)}),Promise.reject(D)})})}function A(R){return L(R.trans,R.range,1e4)}function L(R,T,_){return u.query({trans:R,values:!1,query:{index:l,range:T},limit:_}).then(function(P){var O=P.result;return E({type:"delete",keys:O,trans:R}).then(function(D){return D.numFailures>0?Promise.reject(D.failures[0]):O.length<_?{failures:[],numFailures:0,lastResult:void 0}:L(R,e(e({},T),{lower:O[O.length-1],lowerOpen:!0}),_)})})}}});return h}})}};function bf(o,s,u){return s.type==="add"?Promise.resolve([]):o.getMany({trans:s.trans,keys:u,cache:"immutable"})}function cu(o,s,u){try{if(!s||s.keys.length<o.length)return null;for(var l=[],h=0,p=0;h<s.keys.length&&p<o.length;++h)ue(s.keys[h],o[p])===0&&(l.push(u?jt(s.values[h]):s.values[h]),++p);return l.length===o.length?l:null}catch{return null}}var Ef={stack:"dbcore",level:-1,create:function(o){return{table:function(s){var u=o.table(s);return e(e({},u),{getMany:function(l){if(!l.cache)return u.getMany(l);var h=cu(l.keys,l.trans._cache,l.cache==="clone");return h?z.resolve(h):u.getMany(l).then(function(p){return l.trans._cache={keys:l.keys,values:l.cache==="clone"?jt(p):p},p})},mutate:function(l){return l.type!=="add"&&(l.trans._cache=null),u.mutate(l)}})}}}};function lu(o,s){return o.trans.mode==="readonly"&&!!o.subscr&&!o.trans.explicit&&o.trans.db._options.cache!=="disabled"&&!s.schema.primaryKey.outbound}function hu(o,s){switch(o){case"query":return s.values&&!s.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Rf={stack:"dbcore",level:0,name:"Observability",create:function(o){var s=o.schema.name,u=new Oe(o.MIN_KEY,o.MAX_KEY);return e(e({},o),{transaction:function(l,h,p){if(V.subscr&&h!=="readonly")throw new Y.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(V.querier));return o.transaction(l,h,p)},table:function(l){var h=o.table(l),p=h.schema,g=p.primaryKey,m=p.indexes,y=g.extractKey,b=g.outbound,S=g.autoIncrement&&m.filter(function(R){return R.compound&&R.keyPath.includes(g.keyPath)}),E=e(e({},h),{mutate:function(R){var T,_,P=R.trans,O=R.mutatedParts||(R.mutatedParts={}),D=function(Q){var ce="idb://".concat(s,"/").concat(l,"/").concat(Q);return O[ce]||(O[ce]=new Oe)},k=D(""),x=D(":dels"),B=R.type,$=R.type==="deleteRange"?[R.range]:R.type==="delete"?[R.keys]:R.values.length<50?[cs(g,R).filter(function(Q){return Q}),R.values]:[],F=$[0],J=$[1],se=R.trans._cache;if(c(F)){k.addKeys(F);var K=B==="delete"||F.length===J.length?cu(F,se):null;K||x.addKeys(F),(K||J)&&Sf(D,p,K,J)}else if(F){var ie={from:(T=F.lower)!==null&&T!==void 0?T:o.MIN_KEY,to:(_=F.upper)!==null&&_!==void 0?_:o.MAX_KEY};x.add(ie),k.add(ie)}else k.add(u),x.add(u),p.indexes.forEach(function(Q){return D(Q.name).add(u)});return h.mutate(R).then(function(Q){return F&&(R.type==="add"||R.type==="put")&&(k.addKeys(Q.results),S&&S.forEach(function(ce){for(var X=R.values.map(function(Ne){return ce.extractKey(Ne)}),be=ce.keyPath.findIndex(function(Ne){return Ne===g.keyPath}),De=0,Ze=Q.results.length;De<Ze;++De)X[De][be]=Q.results[De];D(ce.name).addKeys(X)})),P.mutatedParts=gi(P.mutatedParts||{},O),Q})}}),A=function(R){var T,_,P=R.query,O=P.index,D=P.range;return[O,new Oe((T=D.lower)!==null&&T!==void 0?T:o.MIN_KEY,(_=D.upper)!==null&&_!==void 0?_:o.MAX_KEY)]},L={get:function(R){return[g,new Oe(R.key)]},getMany:function(R){return[g,new Oe().addKeys(R.keys)]},count:A,query:A,openCursor:A};return a(L).forEach(function(R){E[R]=function(T){var _=V.subscr,P=!!_,O=lu(V,h)&&hu(R,T),D=O?T.obsSet={}:_;if(P){var k=function(K){var ie="idb://".concat(s,"/").concat(l,"/").concat(K);return D[ie]||(D[ie]=new Oe)},x=k(""),B=k(":dels"),$=L[R](T),F=$[0],J=$[1];if(R==="query"&&F.isPrimaryKey&&!T.values?B.add(J):k(F.name||"").add(J),!F.isPrimaryKey)if(R==="count")B.add(u);else{var se=R==="query"&&b&&T.values&&h.query(e(e({},T),{values:!1}));return h[R].apply(this,arguments).then(function(K){if(R==="query"){if(b&&T.values)return se.then(function(X){var be=X.result;return x.addKeys(be),K});var ie=T.values?K.result.map(y):K.result;T.values?x.addKeys(ie):B.addKeys(ie)}else if(R==="openCursor"){var Q=K,ce=T.values;return Q&&Object.create(Q,{key:{get:function(){return B.addKey(Q.primaryKey),Q.key}},primaryKey:{get:function(){var X=Q.primaryKey;return B.addKey(X),X}},value:{get:function(){return ce&&x.addKey(Q.primaryKey),Q.value}}})}return K})}}return h[R].apply(this,arguments)}}),E}})}};function Sf(o,s,u,l){function h(p){var g=o(p.name||"");function m(b){return b!=null?p.extractKey(b):null}var y=function(b){return p.multiEntry&&c(b)?b.forEach(function(S){return g.addKey(S)}):g.addKey(b)};(u||l).forEach(function(b,S){var E=u&&m(u[S]),A=l&&m(l[S]);ue(E,A)!==0&&(E!=null&&y(E),A!=null&&y(A))})}s.indexes.forEach(h)}function fu(o,s,u){if(u.numFailures===0)return s;if(s.type==="deleteRange")return null;var l=s.keys?s.keys.length:"values"in s&&s.values?s.values.length:1;if(u.numFailures===l)return null;var h=e({},s);return c(h.keys)&&(h.keys=h.keys.filter(function(p,g){return!(g in u.failures)})),"values"in h&&c(h.values)&&(h.values=h.values.filter(function(p,g){return!(g in u.failures)})),h}function Tf(o,s){return s.lower===void 0?!0:s.lowerOpen?ue(o,s.lower)>0:ue(o,s.lower)>=0}function Cf(o,s){return s.upper===void 0?!0:s.upperOpen?ue(o,s.upper)<0:ue(o,s.upper)<=0}function ls(o,s){return Tf(o,s)&&Cf(o,s)}function du(o,s,u,l,h,p){if(!u||u.length===0)return o;var g=s.query.index,m=g.multiEntry,y=s.query.range,b=l.schema.primaryKey,S=b.extractKey,E=g.extractKey,A=(g.lowLevelIndex||g).extractKey,L=u.reduce(function(R,T){var _=R,P=[];if(T.type==="add"||T.type==="put")for(var O=new Oe,D=T.values.length-1;D>=0;--D){var k=T.values[D],x=S(k);if(!O.hasKey(x)){var B=E(k);(m&&c(B)?B.some(function(K){return ls(K,y)}):ls(B,y))&&(O.addKey(x),P.push(k))}}switch(T.type){case"add":{var $=new Oe().addKeys(s.values?R.map(function(K){return S(K)}):R);_=R.concat(s.values?P.filter(function(K){var ie=S(K);return $.hasKey(ie)?!1:($.addKey(ie),!0)}):P.map(function(K){return S(K)}).filter(function(K){return $.hasKey(K)?!1:($.addKey(K),!0)}));break}case"put":{var F=new Oe().addKeys(T.values.map(function(K){return S(K)}));_=R.filter(function(K){return!F.hasKey(s.values?S(K):K)}).concat(s.values?P:P.map(function(K){return S(K)}));break}case"delete":var J=new Oe().addKeys(T.keys);_=R.filter(function(K){return!J.hasKey(s.values?S(K):K)});break;case"deleteRange":var se=T.range;_=R.filter(function(K){return!ls(S(K),se)});break}return _},o);return L===o?o:(L.sort(function(R,T){return ue(A(R),A(T))||ue(S(R),S(T))}),s.limit&&s.limit<1/0&&(L.length>s.limit?L.length=s.limit:o.length===s.limit&&L.length<s.limit&&(h.dirty=!0)),p?Object.freeze(L):L)}function pu(o,s){return ue(o.lower,s.lower)===0&&ue(o.upper,s.upper)===0&&!!o.lowerOpen==!!s.lowerOpen&&!!o.upperOpen==!!s.upperOpen}function If(o,s,u,l){if(o===void 0)return s!==void 0?-1:0;if(s===void 0)return 1;var h=ue(o,s);if(h===0){if(u&&l)return 0;if(u)return 1;if(l)return-1}return h}function _f(o,s,u,l){if(o===void 0)return s!==void 0?1:0;if(s===void 0)return-1;var h=ue(o,s);if(h===0){if(u&&l)return 0;if(u)return-1;if(l)return 1}return h}function Af(o,s){return If(o.lower,s.lower,o.lowerOpen,s.lowerOpen)<=0&&_f(o.upper,s.upper,o.upperOpen,s.upperOpen)>=0}function xf(o,s,u,l){var h=Ht["idb://".concat(o,"/").concat(s)];if(!h)return[];var p=h.queries[u];if(!p)return[null,!1,h,null];var g=l.query?l.query.index.name:null,m=p[g||""];if(!m)return[null,!1,h,null];switch(u){case"query":var y=m.find(function(E){return E.req.limit===l.limit&&E.req.values===l.values&&pu(E.req.query.range,l.query.range)});if(y)return[y,!0,h,m];var b=m.find(function(E){var A="limit"in E.req?E.req.limit:1/0;return A>=l.limit&&(l.values?E.req.values:!0)&&Af(E.req.query.range,l.query.range)});return[b,!1,h,m];case"count":var S=m.find(function(E){return pu(E.req.query.range,l.query.range)});return[S,!!S,h,m]}}function Of(o,s,u,l){o.subscribers.add(u),l.addEventListener("abort",function(){o.subscribers.delete(u),o.subscribers.size===0&&Df(o,s)})}function Df(o,s){setTimeout(function(){o.subscribers.size===0&&Ut(s,o)},3e3)}var Pf={stack:"dbcore",level:0,name:"Cache",create:function(o){var s=o.schema.name,u=e(e({},o),{transaction:function(l,h,p){var g=o.transaction(l,h,p);if(h==="readwrite"){var m=new AbortController,y=m.signal,b=function(S){return function(){if(m.abort(),h==="readwrite"){for(var E=new Set,A=0,L=l;A<L.length;A++){var R=L[A],T=Ht["idb://".concat(s,"/").concat(R)];if(T){var _=o.table(R),P=T.optimisticOps.filter(function(ce){return ce.trans===g});if(g._explicit&&S&&g.mutatedParts)for(var O=0,D=Object.values(T.queries.query);O<D.length;O++)for(var k=D[O],x=0,B=k.slice();x<B.length;x++){var $=B[x];rs($.obsSet,g.mutatedParts)&&(Ut(k,$),$.subscribers.forEach(function(ce){return E.add(ce)}))}else if(P.length>0){T.optimisticOps=T.optimisticOps.filter(function(ce){return ce.trans!==g});for(var F=0,J=Object.values(T.queries.query);F<J.length;F++)for(var k=J[F],se=0,K=k.slice();se<K.length;se++){var $=K[se];if($.res!=null&&g.mutatedParts)if(S&&!$.dirty){var ie=Object.isFrozen($.res),Q=du($.res,$.req,P,_,$,ie);$.dirty?(Ut(k,$),$.subscribers.forEach(function(be){return E.add(be)})):Q!==$.res&&($.res=Q,$.promise=z.resolve({result:Q}))}else $.dirty&&Ut(k,$),$.subscribers.forEach(function(be){return E.add(be)})}}}}E.forEach(function(ce){return ce()})}}};g.addEventListener("abort",b(!1),{signal:y}),g.addEventListener("error",b(!1),{signal:y}),g.addEventListener("complete",b(!0),{signal:y})}return g},table:function(l){var h=o.table(l),p=h.schema.primaryKey,g=e(e({},h),{mutate:function(m){var y=V.trans;if(p.outbound||y.db._options.cache==="disabled"||y.explicit||y.idbtrans.mode!=="readwrite")return h.mutate(m);var b=Ht["idb://".concat(s,"/").concat(l)];if(!b)return h.mutate(m);var S=h.mutate(m);return(m.type==="add"||m.type==="put")&&(m.values.length>=50||cs(p,m).some(function(E){return E==null}))?S.then(function(E){var A=e(e({},m),{values:m.values.map(function(R,T){var _;if(E.failures[T])return R;var P=!((_=p.keyPath)===null||_===void 0)&&_.includes(".")?jt(R):e({},R);return ge(P,p.keyPath,E.results[T]),P})}),L=fu(b,A,E);b.optimisticOps.push(L),queueMicrotask(function(){return m.mutatedParts&&mi(m.mutatedParts)})}):(b.optimisticOps.push(m),m.mutatedParts&&mi(m.mutatedParts),S.then(function(E){if(E.numFailures>0){Ut(b.optimisticOps,m);var A=fu(b,m,E);A&&b.optimisticOps.push(A),m.mutatedParts&&mi(m.mutatedParts)}}),S.catch(function(){Ut(b.optimisticOps,m),m.mutatedParts&&mi(m.mutatedParts)})),S},query:function(m){var y;if(!lu(V,h)||!hu("query",m))return h.query(m);var b=((y=V.trans)===null||y===void 0?void 0:y.db._options.cache)==="immutable",S=V,E=S.requery,A=S.signal,L=xf(s,l,"query",m),R=L[0],T=L[1],_=L[2],P=L[3];if(R&&T)R.obsSet=m.obsSet;else{var O=h.query(m).then(function(D){var k=D.result;if(R&&(R.res=k),b){for(var x=0,B=k.length;x<B;++x)Object.freeze(k[x]);Object.freeze(k)}else D.result=jt(k);return D}).catch(function(D){return P&&R&&Ut(P,R),Promise.reject(D)});R={obsSet:m.obsSet,promise:O,subscribers:new Set,type:"query",req:m,dirty:!1},P?P.push(R):(P=[R],_||(_=Ht["idb://".concat(s,"/").concat(l)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),_.queries.query[m.query.index.name||""]=P)}return Of(R,P,E,A),R.promise.then(function(D){return{result:du(D.result,m,_?.optimisticOps,h,R,b)}})}});return g}});return u}};function yi(o,s){return new Proxy(o,{get:function(u,l,h){return l==="db"?s:Reflect.get(u,l,h)}})}var lt=function(){function o(s,u){var l=this;this._middlewares={},this.verno=0;var h=o.dependencies;this._options=u=e({addons:o.addons,autoOpen:!0,indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange,cache:"cloned"},u),this._deps={indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange};var p=u.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:me,dbReadyPromise:null,cancelOpen:me,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:u.autoOpen};g.dbReadyPromise=new z(function(y){g.dbReadyResolve=y}),g.openCanceller=new z(function(y,b){g.cancelOpen=b}),this._state=g,this.name=s,this.on=Yn(this,"populate","blocked","versionchange","close",{ready:[Ao,me]}),this.on.ready.subscribe=ae(this.on.ready.subscribe,function(y){return function(b,S){o.vip(function(){var E=l._state;if(E.openComplete)E.dbOpenError||z.resolve().then(b),S&&y(b);else if(E.onReadyBeingFired)E.onReadyBeingFired.push(b),S&&y(b);else{y(b);var A=l;S||y(function L(){A.on.ready.unsubscribe(b),A.on.ready.unsubscribe(L)})}})}}),this.Collection=Bh(this),this.Table=Lh(this),this.Transaction=Wh(this),this.Version=lf(this),this.WhereClause=Vh(this),this.on("versionchange",function(y){y.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(l.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(l.name,"'. Closing db now to resume the delete request.")),l.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(l.name,"') was blocked")):console.warn("Upgrade '".concat(l.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=tr(u.IDBKeyRange),this._createTransaction=function(y,b,S,E){return new l.Transaction(y,b,S,l._options.chromeTransactionDurability,E)},this._fireOnBlocked=function(y){l.on("blocked").fire(y),gn.filter(function(b){return b.name===l.name&&b!==l&&!b._state.vcFired}).map(function(b){return b.on("versionchange").fire(y)})},this.use(Ef),this.use(Pf),this.use(Rf),this.use(yf),this.use(wf);var m=new Proxy(this,{get:function(y,b,S){if(b==="_vip")return!0;if(b==="table")return function(A){return yi(l.table(A),m)};var E=Reflect.get(y,b,S);return E instanceof Xa?yi(E,m):b==="tables"?E.map(function(A){return yi(A,m)}):b==="_createTransaction"?function(){var A=E.apply(this,arguments);return yi(A,m)}:E}});this.vip=m,p.forEach(function(y){return y(l)})}return o.prototype.version=function(s){if(isNaN(s)||s<.1)throw new Y.Type("Given version is not a positive number");if(s=Math.round(s*10)/10,this.idbdb||this._state.isBeingOpened)throw new Y.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var u=this._versions,l=u.filter(function(h){return h._cfg.version===s})[0];return l||(l=new this.Version(s),u.push(l),u.sort(ef),l.stores({}),this._state.autoSchema=!1,l)},o.prototype._whenReady=function(s){var u=this;return this.idbdb&&(this._state.openComplete||V.letThrough||this._vip)?s():new z(function(l,h){if(u._state.openComplete)return h(new Y.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen){h(new Y.DatabaseClosed);return}u.open().catch(me)}u._state.dbReadyPromise.then(l,h)}).then(s)},o.prototype.use=function(s){var u=s.stack,l=s.create,h=s.level,p=s.name;p&&this.unuse({stack:u,name:p});var g=this._middlewares[u]||(this._middlewares[u]=[]);return g.push({stack:u,create:l,level:h??10,name:p}),g.sort(function(m,y){return m.level-y.level}),this},o.prototype.unuse=function(s){var u=s.stack,l=s.name,h=s.create;return u&&this._middlewares[u]&&(this._middlewares[u]=this._middlewares[u].filter(function(p){return h?p.create!==h:l?p.name!==l:!1})),this},o.prototype.open=function(){var s=this;return Kt(mt,function(){return gf(s)})},o.prototype._close=function(){var s=this._state,u=gn.indexOf(this);if(u>=0&&gn.splice(u,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new z(function(l){s.dbReadyResolve=l}),s.openCanceller=new z(function(l,h){s.cancelOpen=h}))},o.prototype.close=function(s){var u=s===void 0?{disableAutoOpen:!0}:s,l=u.disableAutoOpen,h=this._state;l?(h.isBeingOpened&&h.cancelOpen(new Y.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new Y.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},o.prototype.delete=function(s){var u=this;s===void 0&&(s={disableAutoOpen:!0});var l=arguments.length>0&&typeof arguments[0]!="object",h=this._state;return new z(function(p,g){var m=function(){u.close(s);var y=u._deps.indexedDB.deleteDatabase(u.name);y.onsuccess=ye(function(){df(u._deps,u.name),p()}),y.onerror=Qe(g),y.onblocked=u._fireOnBlocked};if(l)throw new Y.InvalidArgument("Invalid closeOptions argument to db.delete()");h.isBeingOpened?h.dbReadyPromise.then(m):m()})},o.prototype.backendDB=function(){return this.idbdb},o.prototype.isOpen=function(){return this.idbdb!==null},o.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},o.prototype.hasFailed=function(){return this._state.dbOpenError!==null},o.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(o.prototype,"tables",{get:function(){var s=this;return a(this._allTables).map(function(u){return s._allTables[u]})},enumerable:!1,configurable:!0}),o.prototype.transaction=function(){var s=mf.apply(this,arguments);return this._transaction.apply(this,s)},o.prototype._transaction=function(s,u,l){var h=this,p=V.trans;(!p||p.db!==this||s.indexOf("!")!==-1)&&(p=null);var g=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");var m,y;try{if(y=u.map(function(S){var E=S instanceof h.Table?S.name:S;if(typeof E!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return E}),s=="r"||s===Fo)m=Fo;else if(s=="rw"||s==zo)m=zo;else throw new Y.InvalidArgument("Invalid transaction mode: "+s);if(p){if(p.mode===Fo&&m===zo)if(g)p=null;else throw new Y.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");p&&y.forEach(function(S){if(p&&p.storeNames.indexOf(S)===-1)if(g)p=null;else throw new Y.SubTransaction("Table "+S+" not included in parent transaction.")}),g&&p&&!p.active&&(p=null)}}catch(S){return p?p._promise(null,function(E,A){A(S)}):Re(S)}var b=uu.bind(null,this,m,y,p,l);return p?p._promise(m,b,"lock"):V.trans?Kt(V.transless,function(){return h._whenReady(b)}):this._whenReady(b)},o.prototype.table=function(s){if(!w(this._allTables,s))throw new Y.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},o}(),Mf=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",kf=function(){function o(s){this._subscribe=s}return o.prototype.subscribe=function(s,u,l){return this._subscribe(!s||typeof s=="function"?{next:s,error:u,complete:l}:s)},o.prototype[Mf]=function(){return this},o}(),wi;try{wi={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{wi={indexedDB:null,IDBKeyRange:null}}function gu(o){var s=!1,u,l=new kf(function(h){var p=Co(o);function g(P){var O=fn();try{p&&pn();var D=vt(o,P);return p&&(D=D.finally(yt)),D}finally{O&&dn()}}var m=!1,y,b={},S={},E={get closed(){return m},unsubscribe:function(){m||(m=!0,y&&y.abort(),A&&Et.storagemutated.unsubscribe(T))}};h.start&&h.start(E);var A=!1,L=function(){return jo(_)};function R(){return rs(S,b)}var T=function(P){gi(b,P),R()&&L()},_=function(){if(!(m||!wi.indexedDB)){b={};var P={};y&&y.abort(),y=new AbortController;var O={subscr:P,signal:y.signal,requery:L,querier:o,trans:null},D=g(O);Promise.resolve(D).then(function(k){s=!0,u=k,!(m||O.signal.aborted)&&(b={},S=P,!lh(S)&&!A&&(Et(er,T),A=!0),jo(function(){return!m&&h.next&&h.next(k)}))},function(k){s=!1,["DatabaseClosedError","AbortError"].includes(k?.name)||m||jo(function(){m||h.error&&h.error(k)})})}};return setTimeout(L,0),E});return l.hasValue=function(){return s},l.getValue=function(){return u},l}var Wt=lt;C(Wt,e(e({},Xr),{delete:function(o){var s=new Wt(o,{addons:[]});return s.delete()},exists:function(o){return new Wt(o,{addons:[]}).open().then(function(s){return s.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(o){try{return hf(Wt.dependencies).then(o)}catch{return Re(new Y.MissingAPI)}},defineClass:function(){function o(s){f(this,s)}return o},ignoreTransaction:function(o){return V.trans?Kt(V.transless,o):o()},vip:es,async:function(o){return function(){try{var s=as(o.apply(this,arguments));return!s||typeof s.then!="function"?z.resolve(s):s}catch(u){return Re(u)}}},spawn:function(o,s,u){try{var l=as(o.apply(u,s||[]));return!l||typeof l.then!="function"?z.resolve(l):l}catch(h){return Re(h)}},currentTransaction:{get:function(){return V.trans||null}},waitFor:function(o,s){var u=z.resolve(typeof o=="function"?Wt.ignoreTransaction(o):o).timeout(s||6e4);return V.trans?V.trans.waitFor(u):u},Promise:z,debug:{get:function(){return Je},set:function(o){ka(o)}},derive:M,extend:f,props:C,override:ae,Events:Yn,on:Et,liveQuery:gu,extendObservabilitySet:gi,getByKeyPath:Se,setByKeyPath:ge,delByKeyPath:Ye,shallowClone:ke,deepClone:jt,getObjectDiff:us,cmp:ue,asap:ne,minKey:Bo,addons:[],connections:gn,errnames:_o,dependencies:wi,cache:Ht,semVer:Ka,version:Ka.split(".").map(function(o){return parseInt(o)}).reduce(function(o,s,u){return o+s/Math.pow(10,u*2)})})),Wt.maxKey=tr(Wt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Et(er,function(o){if(!Rt){var s;s=new CustomEvent(Vo,{detail:o}),Rt=!0,dispatchEvent(s),Rt=!1}}),addEventListener(Vo,function(o){var s=o.detail;Rt||hs(s)}));function hs(o){var s=Rt;try{Rt=!0,Et.storagemutated.fire(o),ss(o,!0)}finally{Rt=s}}var Rt=!1,St,fs=function(){};typeof BroadcastChannel<"u"&&(fs=function(){St=new BroadcastChannel(Vo),St.onmessage=function(o){return o.data&&hs(o.data)}},fs(),typeof St.unref=="function"&&St.unref(),Et(er,function(o){Rt||St.postMessage(o)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(o){if(!lt.disableBfCache&&o.persisted){Je&&console.debug("Dexie: handling persisted pagehide"),St?.close();for(var s=0,u=gn;s<u.length;s++){var l=u[s];l.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(o){!lt.disableBfCache&&o.persisted&&(Je&&console.debug("Dexie: handling persisted pageshow"),fs(),hs({all:new Oe(-1/0,[[]])}))}));function Nf(o){return new Qn({add:o})}function Lf(o){return new Qn({remove:o})}function jf(o,s){return new Qn({replacePrefix:[o,s]})}z.rejectionMapper=mh,ka(Je);var Uf=Object.freeze({__proto__:null,Dexie:lt,liveQuery:gu,Entity:Ha,cmp:ue,PropModification:Qn,replacePrefix:jf,add:Nf,remove:Lf,default:lt,RangeSet:Oe,mergeRanges:ir,rangesOverlap:iu});return e(lt,Uf,{default:lt}),lt})});var Sn=new le(""),Ns=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i,a){return this._findPluginFor(r).addEventListener(e,r,i,a)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(a=>a.supports(e)),!r)throw new fe(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||t)(te(Sn),te(At))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})(),Jt=class{_doc;constructor(n){this._doc=n}manager},Ai="ng-app-id";function dc(t){for(let n of t)n.remove()}function pc(t,n){let e=n.createElement("style");return e.textContent=t,e}function Kf(t,n,e,r){let i=t.head?.querySelectorAll(`style[${Ai}="${n}"],link[${Ai}="${n}"]`);if(i)for(let a of i)a.removeAttribute(Ai),a instanceof HTMLLinkElement?r.set(a.href.slice(a.href.lastIndexOf("/")+1),{usage:0,elements:[a]}):a.textContent&&e.set(a.textContent,{usage:0,elements:[a]})}function Ms(t,n){let e=n.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e}var Ls=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,i,a={}){this.doc=e,this.appId=r,this.nonce=i,this.isServer=lc(a),Kf(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,pc);r?.forEach(i=>this.addUsage(i,this.external,Ms))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let a=r.get(e);a?a.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(c=>this.addElement(c,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(dc(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])dc(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,pc(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,Ms(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Ai,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||t)(te(Ae),te(Ts),te(Cs,8),te(lr))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})(),Ps={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},js=/%COMP%/g;var mc="%COMP%",Gf=`_nghost-${mc}`,Vf=`_ngcontent-${mc}`,Hf=!0,Wf=new le("",{providedIn:"root",factory:()=>Hf});function qf(t){return Vf.replace(js,t)}function Xf(t){return Gf.replace(js,t)}function vc(t,n){return n.map(e=>e.replace(js,t))}var Us=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,a,c,f,d,v=null,w=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=f,this.ngZone=d,this.nonce=v,this.tracingService=w,this.platformIsServer=!1,this.defaultRenderer=new mr(e,c,d,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(e,r);return i instanceof xi?i.applyToHost(e):i instanceof vr&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,a=i.get(r.id);if(!a){let c=this.doc,f=this.ngZone,d=this.eventManager,v=this.sharedStylesHost,w=this.removeStylesOnCompDestroy,C=this.platformIsServer,I=this.tracingService;switch(r.encapsulation){case Is.Emulated:a=new xi(d,v,r,this.appId,w,c,f,C,I);break;case Is.ShadowDom:return new ks(d,v,e,r,c,f,this.nonce,C,I);default:a=new vr(d,v,r,w,c,f,C,I);break}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||t)(te(Ns),te(Ls),te(Ts),te(Wf),te(Ae),te(lr),te(At),te(Cs),te(Hu,8))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})(),mr=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,e,r,i,a){this.eventManager=n,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=a}destroy(){}destroyNode=null;createElement(n,e){return e?this.doc.createElementNS(Ps[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(gc(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(gc(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){e.remove()}selectRootElement(n,e){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new fe(-5104,!1);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,i){if(i){e=i+":"+e;let a=Ps[i];a?n.setAttributeNS(a,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){let i=Ps[r];i?n.removeAttributeNS(i,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,i){i&(hr.DashCase|hr.Important)?n.style.setProperty(e,r,i&hr.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&hr.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){n!=null&&(n[e]=r)}setValue(n,e){n.nodeValue=e}listen(n,e,r,i){if(typeof n=="string"&&(n=pr().getGlobalEventTarget(this.doc,n),!n))throw new fe(5102,!1);let a=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(a=this.tracingService.wrapEventListener(n,e,a)),this.eventManager.addEventListener(n,e,a,i)}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;n(e)===!1&&e.preventDefault()}}};function gc(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ks=class extends mr{sharedStylesHost;hostEl;shadowRoot;constructor(n,e,r,i,a,c,f,d,v){super(n,a,c,d,v),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let w=i.styles;w=vc(i.id,w);for(let I of w){let N=document.createElement("style");f&&N.setAttribute("nonce",f),N.textContent=I,this.shadowRoot.appendChild(N)}let C=i.getExternalStyles?.();if(C)for(let I of C){let N=Ms(I,a);f&&N.setAttribute("nonce",f),this.shadowRoot.appendChild(N)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},vr=class extends mr{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,e,r,i,a,c,f,d,v){super(n,a,c,f,d),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let w=r.styles;this.styles=v?vc(v,w):w,this.styleUrls=r.getExternalStyles?.(v)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},xi=class extends vr{contentAttr;hostAttr;constructor(n,e,r,i,a,c,f,d,v){let w=i+"-"+r.id;super(n,e,r,a,c,f,d,v,w),this.contentAttr=qf(w),this.hostAttr=Xf(w)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}};var Oi=class t extends uc{supportsDOMEvents=!0;static makeCurrent(){ac(new t)}onAndCancel(n,e,r,i){return n.addEventListener(e,r,i),()=>{n.removeEventListener(e,r,i)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=Jf();return e==null?null:Qf(e)}resetBaseElement(){yr=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Ii(document.cookie,n)}},yr=null;function Jf(){return yr=yr||document.head.querySelector("base"),yr?yr.getAttribute("href"):null}function Qf(t){return new URL(t,document.baseURI).pathname}var Zf=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})(),wc=(()=>{class t extends Jt{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,a){return e.addEventListener(r,i,a),()=>this.removeEventListener(e,r,i,a)}removeEventListener(e,r,i,a){return e.removeEventListener(r,i,a)}static \u0275fac=function(r){return new(r||t)(te(Ae))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})(),yc=["alt","control","meta","shift"],ed={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},td={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},bc=(()=>{class t extends Jt{constructor(e){super(e)}supports(e){return t.parseEventName(e)!=null}addEventListener(e,r,i,a){let c=t.parseEventName(r),f=t.eventCallback(c.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pr().onAndCancel(e,c.domEventName,f,a))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let a=t._normalizeKey(r.pop()),c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),yc.forEach(v=>{let w=r.indexOf(v);w>-1&&(r.splice(w,1),c+=v+".")}),c+=a,r.length!=0||a.length===0)return null;let d={};return d.domEventName=i,d.fullKey=c,d}static matchEventFullKeyCode(e,r){let i=ed[e.key]||e.key,a="";return r.indexOf("code.")>-1&&(i=e.code,a="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),yc.forEach(c=>{if(c!==i){let f=td[c];f(e)&&(a+=c+".")}}),a+=i,a===r)}static eventCallback(e,r,i){return a=>{t.matchEventFullKeyCode(a,e)&&i.runGuarded(()=>r(a))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||t)(te(Ae))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})();function nd(t,n){return sc(G({rootComponent:t},rd(n)))}function rd(t){return{appProviders:[...ud,...t?.providers??[]],platformProviders:ad}}function id(){Oi.makeCurrent()}function od(){return new Es}function sd(){return Du(document),document}var ad=[{provide:lr,useValue:cc},{provide:Pu,useValue:id,multi:!0},{provide:Ae,useFactory:sd}];var ud=[{provide:Cu,useValue:"root"},{provide:Es,useFactory:od},{provide:Sn,useClass:wc,multi:!0,deps:[Ae]},{provide:Sn,useClass:bc,multi:!0,deps:[Ae]},Us,Ls,Ns,{provide:zu,useExisting:Us},{provide:_i,useClass:Zf},[]];var Cn=class{},wr=class{},Ot=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),a=e.slice(r+1).trim();this.addHeaderEntry(i,a)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new t;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,e);let i=(n.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let a=n.value;if(!a)this.headers.delete(e),this.normalizedNames.delete(e);else{let c=this.headers.get(e);if(!c)return;c=c.filter(f=>a.indexOf(f)===-1),c.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}break}}addHeaderEntry(n,e){let r=n.toLowerCase();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(n,e){let r=(Array.isArray(e)?e:[e]).map(a=>a.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var Pi=class{encodeKey(n){return Ec(n)}encodeValue(n){return Ec(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function cd(t,n){let e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let a=i.indexOf("="),[c,f]=a==-1?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,a)),n.decodeValue(i.slice(a+1))],d=e.get(c)||[];d.push(f),e.set(c,d)}),e}var ld=/%(\d[a-f0-9])/gi,hd={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ec(t){return encodeURIComponent(t).replace(ld,(n,e)=>hd[e]??n)}function Di(t){return`${t}`}var dt=class t{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new Pi,n.fromString){if(n.fromObject)throw new fe(2805,!1);this.map=cd(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let r=n.fromObject[e],i=Array.isArray(r)?r.map(Di):[Di(r)];this.map.set(e,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(r=>{let i=n[r];Array.isArray(i)?i.forEach(a=>{e.push({param:r,value:a,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new t({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(Di(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let r=this.map.get(n.param)||[],i=r.indexOf(Di(n.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var Mi=class{map=new Map;set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function fd(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Rc(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Sc(t){return typeof Blob<"u"&&t instanceof Blob}function Tc(t){return typeof FormData<"u"&&t instanceof FormData}function dd(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Cc="Content-Type",Ic="Accept",_c="X-Request-URL",Ac="text/plain",xc="application/json",pd=`${xc}, ${Ac}, */*`,Tn=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(n,e,r,i){this.url=e,this.method=n.toUpperCase();let a;if(fd(this.method)||i?(this.body=r!==void 0?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,this.keepalive=!!a.keepalive,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params),this.transferCache=a.transferCache),this.headers??=new Ot,this.context??=new Mi,!this.params)this.params=new dt,this.urlWithParams=e;else{let c=this.params.toString();if(c.length===0)this.urlWithParams=e;else{let f=e.indexOf("?"),d=f===-1?"?":f<e.length-1?"&":"";this.urlWithParams=e+d+c}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Rc(this.body)||Sc(this.body)||Tc(this.body)||dd(this.body)?this.body:this.body instanceof dt?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Tc(this.body)?null:Sc(this.body)?this.body.type||null:Rc(this.body)?null:typeof this.body=="string"?Ac:this.body instanceof dt?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?xc:null}clone(n={}){let e=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,a=n.keepalive??this.keepalive,c=n.transferCache??this.transferCache,f=n.body!==void 0?n.body:this.body,d=n.withCredentials??this.withCredentials,v=n.reportProgress??this.reportProgress,w=n.headers||this.headers,C=n.params||this.params,I=n.context??this.context;return n.setHeaders!==void 0&&(w=Object.keys(n.setHeaders).reduce((N,M)=>N.set(M,n.setHeaders[M]),w)),n.setParams&&(C=Object.keys(n.setParams).reduce((N,M)=>N.set(M,n.setParams[M]),C)),new t(e,r,f,{params:C,headers:w,context:I,reportProgress:v,responseType:i,withCredentials:d,transferCache:c,keepalive:a})}},Qt=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Qt||{}),In=class{headers;status;statusText;url;ok;type;constructor(n,e=200,r="OK"){this.headers=n.headers||new Ot,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},ki=class t extends In{constructor(n={}){super(n)}type=Qt.ResponseHeader;clone(n={}){return new t({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},br=class t extends In{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=Qt.Response;clone(n={}){return new t({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Er=class extends In{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},gd=200,md=204;function Bs(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache,keepalive:t.keepalive}}var Oc=(()=>{class t{handler;constructor(e){this.handler=e}request(e,r,i={}){let a;if(e instanceof Tn)a=e;else{let d;i.headers instanceof Ot?d=i.headers:d=new Ot(i.headers);let v;i.params&&(i.params instanceof dt?v=i.params:v=new dt({fromObject:i.params})),a=new Tn(e,r,i.body!==void 0?i.body:null,{headers:d,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive})}let c=ee(a).pipe(Ct(d=>this.handler.handle(d)));if(e instanceof Tn||i.observe==="events")return c;let f=c.pipe(tt(d=>d instanceof br));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe(he(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new fe(2806,!1);return d.body}));case"blob":return f.pipe(he(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new fe(2807,!1);return d.body}));case"text":return f.pipe(he(d=>{if(d.body!==null&&typeof d.body!="string")throw new fe(2808,!1);return d.body}));case"json":default:return f.pipe(he(d=>d.body))}case"response":return f;default:throw new fe(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new dt().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,Bs(i,r))}post(e,r,i={}){return this.request("POST",e,Bs(i,r))}put(e,r,i={}){return this.request("PUT",e,Bs(i,r))}static \u0275fac=function(r){return new(r||t)(te(Cn))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})();var vd=new le("");function yd(t,n){return n(t)}function wd(t,n,e){return(r,i)=>Ve(e,()=>n(r,a=>t(a,i)))}var Dc=new le(""),Pc=new le(""),Mc=new le("",{providedIn:"root",factory:()=>!0});var Ni=(()=>{class t extends Cn{backend;injector;chain=null;pendingTasks=H(Au);contributeToStability=H(Mc);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Dc),...this.injector.get(Pc,[])]));this.chain=r.reduceRight((i,a)=>wd(i,a,this.injector),yd)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(wn(r))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(te(wr),te(_t))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})();var bd=/^\)\]\}',?\n/,Ed=RegExp(`^${_c}:`,"m");function Rd(t){return"responseURL"in t&&t.responseURL?t.responseURL:Ed.test(t.getAllResponseHeaders())?t.getResponseHeader(_c):null}var Fs=(()=>{class t{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new fe(-2800,!1);e.keepalive;let r=this.xhrFactory;return(r.\u0275loadImpl?Pe(r.\u0275loadImpl()):ee(null)).pipe(Ue(()=>new Ei(a=>{let c=r.build();if(c.open(e.method,e.urlWithParams),e.withCredentials&&(c.withCredentials=!0),e.headers.forEach((j,U)=>c.setRequestHeader(j,U.join(","))),e.headers.has(Ic)||c.setRequestHeader(Ic,pd),!e.headers.has(Cc)){let j=e.detectContentTypeHeader();j!==null&&c.setRequestHeader(Cc,j)}if(e.responseType){let j=e.responseType.toLowerCase();c.responseType=j!=="json"?j:"text"}let f=e.serializeBody(),d=null,v=()=>{if(d!==null)return d;let j=c.statusText||"OK",U=new Ot(c.getAllResponseHeaders()),q=Rd(c)||e.url;return d=new ki({headers:U,status:c.status,statusText:j,url:q}),d},w=()=>{let{headers:j,status:U,statusText:q,url:Z}=v(),ae=null;U!==md&&(ae=typeof c.response>"u"?c.responseText:c.response),U===0&&(U=ae?gd:0);let de=U>=200&&U<300;if(e.responseType==="json"&&typeof ae=="string"){let ne=ae;ae=ae.replace(bd,"");try{ae=ae!==""?JSON.parse(ae):null}catch(ve){ae=ne,de&&(de=!1,ae={error:ve,text:ae})}}de?(a.next(new br({body:ae,headers:j,status:U,statusText:q,url:Z||void 0})),a.complete()):a.error(new Er({error:ae,headers:j,status:U,statusText:q,url:Z||void 0}))},C=j=>{let{url:U}=v(),q=new Er({error:j,status:c.status||0,statusText:c.statusText||"Unknown Error",url:U||void 0});a.error(q)},I=!1,N=j=>{I||(a.next(v()),I=!0);let U={type:Qt.DownloadProgress,loaded:j.loaded};j.lengthComputable&&(U.total=j.total),e.responseType==="text"&&c.responseText&&(U.partialText=c.responseText),a.next(U)},M=j=>{let U={type:Qt.UploadProgress,loaded:j.loaded};j.lengthComputable&&(U.total=j.total),a.next(U)};return c.addEventListener("load",w),c.addEventListener("error",C),c.addEventListener("timeout",C),c.addEventListener("abort",C),e.reportProgress&&(c.addEventListener("progress",N),f!==null&&c.upload&&c.upload.addEventListener("progress",M)),c.send(f),a.next({type:Qt.Sent}),()=>{c.removeEventListener("error",C),c.removeEventListener("abort",C),c.removeEventListener("load",w),c.removeEventListener("timeout",C),e.reportProgress&&(c.removeEventListener("progress",N),f!==null&&c.upload&&c.upload.removeEventListener("progress",M)),c.readyState!==c.DONE&&c.abort()}})))}static \u0275fac=function(r){return new(r||t)(te(_i))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})(),kc=new le(""),Sd="XSRF-TOKEN",Td=new le("",{providedIn:"root",factory:()=>Sd}),Cd="X-XSRF-TOKEN",Id=new le("",{providedIn:"root",factory:()=>Cd}),Rr=class{},_d=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r){this.doc=e,this.cookieName=r}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ii(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||t)(te(Ae),te(Td))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})();function Ad(t,n){let e=t.url.toLowerCase();if(!H(kc)||t.method==="GET"||t.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(t);let r=H(Rr).getToken(),i=H(Id);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),n(t)}function xd(...t){let n=[Oc,Fs,Ni,{provide:Cn,useExisting:Ni},{provide:wr,useFactory:()=>H(vd,{optional:!0})??H(Fs)},{provide:Dc,useValue:Ad,multi:!0},{provide:kc,useValue:!0},{provide:Rr,useClass:_d}];for(let e of t)n.push(...e.\u0275providers);return ur(n)}var Nc=(()=>{class t{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||t)(te(Ae))};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Dd={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},zs=new le(""),Lc=new le(""),Pd=(()=>{class t{events=[];overrides={};options;buildHammer(e){let r=new Hammer(e,this.options);r.get("pinch").set({enable:!0}),r.get("rotate").set({enable:!0});for(let i in this.overrides)r.get(i).set(this.overrides[i]);return r}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})(),Md=(()=>{class t extends Jt{_config;_injector;loader;_loaderPromise=null;constructor(e,r,i,a){super(e),this._config=r,this._injector=i,this.loader=a}supports(e){return!(!Dd.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader)}addEventListener(e,r,i){let a=this.manager.getZone();if(r=r.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||a.runOutsideAngular(()=>this.loader());let c=!1,f=()=>{c=!0};return a.runOutsideAngular(()=>this._loaderPromise.then(()=>{if(!window.Hammer){f=()=>{};return}c||(f=this.addEventListener(e,r,i))}).catch(()=>{f=()=>{}})),()=>{f()}}return a.runOutsideAngular(()=>{let c=this._config.buildHammer(e),f=function(d){a.runGuarded(function(){i(d)})};return c.on(r,f),()=>{c.off(r,f),typeof c.destroy=="function"&&c.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}static \u0275fac=function(r){return new(r||t)(te(Ae),te(zs),te(bn),te(Lc,8))};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})(),av=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=fr({type:t});static \u0275inj=ar({providers:[{provide:Sn,useClass:Md,multi:!0,deps:[Ae,zs,bn,[new xu,Lc]]},{provide:zs,useClass:Pd}]})}return t})(),kd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=te(Nd),i},providedIn:"root"})}return t})(),Nd=(()=>{class t extends kd{_doc;constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case Xt.NONE:return r;case Xt.HTML:return Rn(r,"HTML")?En(r):Bu(this._doc,String(r)).toString();case Xt.STYLE:return Rn(r,"Style")?En(r):r;case Xt.SCRIPT:if(Rn(r,"Script"))return En(r);throw new fe(5200,!1);case Xt.URL:return Rn(r,"URL")?En(r):Uu(String(r));case Xt.RESOURCE_URL:if(Rn(r,"ResourceURL"))return En(r);throw new fe(5201,!1);default:throw new fe(5202,!1)}}bypassSecurityTrustHtml(e){return Mu(e)}bypassSecurityTrustStyle(e){return ku(e)}bypassSecurityTrustScript(e){return Nu(e)}bypassSecurityTrustUrl(e){return Lu(e)}bypassSecurityTrustResourceUrl(e){return ju(e)}static \u0275fac=function(r){return new(r||t)(te(Ae))};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var re="primary",Nr=Symbol("RouteTitle"),Hs=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function tn(t){return new Hs(t)}function Gc(t,n,e){let r=e.path.split("/");if(r.length>t.length||e.pathMatch==="full"&&(n.hasChildren()||r.length<t.length))return null;let i={};for(let a=0;a<r.length;a++){let c=r[a],f=t[a];if(c[0]===":")i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function jd(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!nt(t[e],n[e]))return!1;return!0}function nt(t,n){let e=t?Ws(t):void 0,r=n?Ws(n):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let a=0;a<e.length;a++)if(i=e[a],!Vc(t[i],n[i]))return!1;return!0}function Ws(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Vc(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let e=[...t].sort(),r=[...n].sort();return e.every((i,a)=>r[a]===i)}else return t===n}function Hc(t){return t.length>0?t[t.length-1]:null}function gt(t){return yu(t)?t:Wu(t)?Pe(Promise.resolve(t)):ee(t)}var Ud={exact:qc,subset:Xc},Wc={exact:Bd,subset:Fd,ignored:()=>!0};function jc(t,n,e){return Ud[e.paths](t.root,n.root,e.matrixParams)&&Wc[e.queryParams](t.queryParams,n.queryParams)&&!(e.fragment==="exact"&&t.fragment!==n.fragment)}function Bd(t,n){return nt(t,n)}function qc(t,n,e){if(!Zt(t.segments,n.segments)||!Ui(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!t.children[r]||!qc(t.children[r],n.children[r],e))return!1;return!0}function Fd(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>Vc(t[e],n[e]))}function Xc(t,n,e){return Yc(t,n,n.segments,e)}function Yc(t,n,e,r){if(t.segments.length>e.length){let i=t.segments.slice(0,e.length);return!(!Zt(i,e)||n.hasChildren()||!Ui(i,e,r))}else if(t.segments.length===e.length){if(!Zt(t.segments,e)||!Ui(t.segments,e,r))return!1;for(let i in n.children)if(!t.children[i]||!Xc(t.children[i],n.children[i],r))return!1;return!0}else{let i=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!Zt(t.segments,i)||!Ui(t.segments,i,r)||!t.children[re]?!1:Yc(t.children[re],n,a,r)}}function Ui(t,n,e){return n.every((r,i)=>Wc[e](t[i].parameters,r.parameters))}var it=class{root;queryParams;fragment;_queryParamMap;constructor(n=new pe([],{}),e={},r=null){this.root=n,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=tn(this.queryParams),this._queryParamMap}toString(){return Kd.serialize(this)}},pe=class{segments;children;parent=null;constructor(n,e){this.segments=n,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bi(this)}},Dt=class{path;parameters;_parameterMap;constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=tn(this.parameters),this._parameterMap}toString(){return Qc(this)}};function zd(t,n){return Zt(t,n)&&t.every((e,r)=>nt(e.parameters,n[r].parameters))}function Zt(t,n){return t.length!==n.length?!1:t.every((e,r)=>e.path===n[r].path)}function $d(t,n){let e=[];return Object.entries(t.children).forEach(([r,i])=>{r===re&&(e=e.concat(n(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==re&&(e=e.concat(n(i,r)))}),e}var Un=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:()=>new nn,providedIn:"root"})}return t})(),nn=class{parse(n){let e=new Xs(n);return new it(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${Sr(n.root,!0)}`,r=Hd(n.queryParams),i=typeof n.fragment=="string"?`#${Gd(n.fragment)}`:"";return`${e}${r}${i}`}},Kd=new nn;function Bi(t){return t.segments.map(n=>Qc(n)).join("/")}function Sr(t,n){if(!t.hasChildren())return Bi(t);if(n){let e=t.children[re]?Sr(t.children[re],!1):"",r=[];return Object.entries(t.children).forEach(([i,a])=>{i!==re&&r.push(`${i}:${Sr(a,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=$d(t,(r,i)=>i===re?[Sr(t.children[re],!1)]:[`${i}:${Sr(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[re]!=null?`${Bi(t)}/${e[0]}`:`${Bi(t)}/(${e.join("//")})`}}function Jc(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Li(t){return Jc(t).replace(/%3B/gi,";")}function Gd(t){return encodeURI(t)}function qs(t){return Jc(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fi(t){return decodeURIComponent(t)}function Uc(t){return Fi(t.replace(/\+/g,"%20"))}function Qc(t){return`${qs(t.path)}${Vd(t.parameters)}`}function Vd(t){return Object.entries(t).map(([n,e])=>`;${qs(n)}=${qs(e)}`).join("")}function Hd(t){let n=Object.entries(t).map(([e,r])=>Array.isArray(r)?r.map(i=>`${Li(e)}=${Li(i)}`).join("&"):`${Li(e)}=${Li(r)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var Wd=/^[^\/()?;#]+/;function $s(t){let n=t.match(Wd);return n?n[0]:""}var qd=/^[^\/()?;=#]+/;function Xd(t){let n=t.match(qd);return n?n[0]:""}var Yd=/^[^=?&#]+/;function Jd(t){let n=t.match(Yd);return n?n[0]:""}var Qd=/^[^&#]+/;function Zd(t){let n=t.match(Qd);return n?n[0]:""}var Xs=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(r[re]=new pe(n,e)),r}parseSegment(){let n=$s(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new fe(4009,!1);return this.capture(n),new Dt(Fi(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=Xd(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=$s(this.remaining);i&&(r=i,this.capture(r))}n[Fi(e)]=Fi(r)}parseQueryParam(n){let e=Jd(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let c=Zd(this.remaining);c&&(r=c,this.capture(r))}let i=Uc(e),a=Uc(r);if(n.hasOwnProperty(i)){let c=n[i];Array.isArray(c)||(c=[c],n[i]=c),c.push(a)}else n[i]=a}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=$s(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new fe(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):n&&(a=re);let c=this.parseChildren();e[a]=Object.keys(c).length===1?c[re]:new pe([],c),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new fe(4011,!1)}};function Zc(t){return t.segments.length>0?new pe([],{[re]:t}):t}function el(t){let n={};for(let[r,i]of Object.entries(t.children)){let a=el(i);if(r===re&&a.segments.length===0&&a.hasChildren())for(let[c,f]of Object.entries(a.children))n[c]=f;else(a.segments.length>0||a.hasChildren())&&(n[r]=a)}let e=new pe(t.segments,n);return ep(e)}function ep(t){if(t.numberOfChildren===1&&t.children[re]){let n=t.children[re];return new pe(t.segments.concat(n.segments),n.children)}return t}function Pt(t){return t instanceof it}function tl(t,n,e=null,r=null){let i=nl(t);return rl(i,n,e,r)}function nl(t){let n;function e(a){let c={};for(let d of a.children){let v=e(d);c[d.outlet]=v}let f=new pe(a.url,c);return a===t&&(n=f),f}let r=e(t.root),i=Zc(r);return n??i}function rl(t,n,e,r){let i=t;for(;i.parent;)i=i.parent;if(n.length===0)return Ks(i,i,i,e,r);let a=tp(n);if(a.toRoot())return Ks(i,i,new pe([],{}),e,r);let c=np(a,i,t),f=c.processChildren?Cr(c.segmentGroup,c.index,a.commands):ol(c.segmentGroup,c.index,a.commands);return Ks(i,c.segmentGroup,f,e,r)}function zi(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function _r(t){return typeof t=="object"&&t!=null&&t.outlets}function Ks(t,n,e,r,i){let a={};r&&Object.entries(r).forEach(([d,v])=>{a[d]=Array.isArray(v)?v.map(w=>`${w}`):`${v}`});let c;t===n?c=e:c=il(t,n,e);let f=Zc(el(c));return new it(f,a,i)}function il(t,n,e){let r={};return Object.entries(t.children).forEach(([i,a])=>{a===n?r[i]=e:r[i]=il(a,n,e)}),new pe(t.segments,r)}var $i=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,e,r){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&zi(r[0]))throw new fe(4003,!1);let i=r.find(_r);if(i&&i!==Hc(r))throw new fe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function tp(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new $i(!0,0,t);let n=0,e=!1,r=t.reduce((i,a,c)=>{if(typeof a=="object"&&a!=null){if(a.outlets){let f={};return Object.entries(a.outlets).forEach(([d,v])=>{f[d]=typeof v=="string"?v.split("/"):v}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return typeof a!="string"?[...i,a]:c===0?(a.split("/").forEach((f,d)=>{d==0&&f==="."||(d==0&&f===""?e=!0:f===".."?n++:f!=""&&i.push(f))}),i):[...i,a]},[]);return new $i(e,n,r)}var xn=class{segmentGroup;processChildren;index;constructor(n,e,r){this.segmentGroup=n,this.processChildren=e,this.index=r}};function np(t,n,e){if(t.isAbsolute)return new xn(n,!0,0);if(!e)return new xn(n,!1,NaN);if(e.parent===null)return new xn(e,!0,0);let r=zi(t.commands[0])?0:1,i=e.segments.length-1+r;return rp(e,i,t.numberOfDoubleDots)}function rp(t,n,e){let r=t,i=n,a=e;for(;a>i;){if(a-=i,r=r.parent,!r)throw new fe(4005,!1);i=r.segments.length}return new xn(r,!1,i-a)}function ip(t){return _r(t[0])?t[0].outlets:{[re]:t}}function ol(t,n,e){if(t??=new pe([],{}),t.segments.length===0&&t.hasChildren())return Cr(t,n,e);let r=op(t,n,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let a=new pe(t.segments.slice(0,r.pathIndex),{});return a.children[re]=new pe(t.segments.slice(r.pathIndex),t.children),Cr(a,0,i)}else return r.match&&i.length===0?new pe(t.segments,{}):r.match&&!t.hasChildren()?Ys(t,n,e):r.match?Cr(t,0,i):Ys(t,n,e)}function Cr(t,n,e){if(e.length===0)return new pe(t.segments,{});{let r=ip(e),i={};if(Object.keys(r).some(a=>a!==re)&&t.children[re]&&t.numberOfChildren===1&&t.children[re].segments.length===0){let a=Cr(t.children[re],n,e);return new pe(t.segments,a.children)}return Object.entries(r).forEach(([a,c])=>{typeof c=="string"&&(c=[c]),c!==null&&(i[a]=ol(t.children[a],n,c))}),Object.entries(t.children).forEach(([a,c])=>{r[a]===void 0&&(i[a]=c)}),new pe(t.segments,i)}}function op(t,n,e){let r=0,i=n,a={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=e.length)return a;let c=t.segments[i],f=e[r];if(_r(f))break;let d=`${f}`,v=r<e.length-1?e[r+1]:null;if(i>0&&d===void 0)break;if(d&&v&&typeof v=="object"&&v.outlets===void 0){if(!Fc(d,v,c))return a;r+=2}else{if(!Fc(d,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ys(t,n,e){let r=t.segments.slice(0,n),i=0;for(;i<e.length;){let a=e[i];if(_r(a)){let d=sp(a.outlets);return new pe(r,d)}if(i===0&&zi(e[0])){let d=t.segments[n];r.push(new Dt(d.path,Bc(e[0]))),i++;continue}let c=_r(a)?a.outlets[re]:`${a}`,f=i<e.length-1?e[i+1]:null;c&&f&&zi(f)?(r.push(new Dt(c,Bc(f))),i+=2):(r.push(new Dt(c,{})),i++)}return new pe(r,{})}function sp(t){let n={};return Object.entries(t).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[e]=Ys(new pe([],{}),0,r))}),n}function Bc(t){let n={};return Object.entries(t).forEach(([e,r])=>n[e]=`${r}`),n}function Fc(t,n,e){return t==e.path&&nt(n,e.parameters)}var On="imperative",Te=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Te||{}),Fe=class{id;url;constructor(n,e){this.id=n,this.url=e}},Mt=class extends Fe{type=Te.NavigationStart;navigationTrigger;restoredState;constructor(n,e,r="imperative",i=null){super(n,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ke=class extends Fe{urlAfterRedirects;type=Te.NavigationEnd;constructor(n,e,r){super(n,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Me=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(Me||{}),Pn=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Pn||{}),rt=class extends Fe{reason;code;type=Te.NavigationCancel;constructor(n,e,r,i){super(n,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ot=class extends Fe{reason;code;type=Te.NavigationSkipped;constructor(n,e,r,i){super(n,e),this.reason=r,this.code=i}},Mn=class extends Fe{error;target;type=Te.NavigationError;constructor(n,e,r,i){super(n,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ar=class extends Fe{urlAfterRedirects;state;type=Te.RoutesRecognized;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ki=class extends Fe{urlAfterRedirects;state;type=Te.GuardsCheckStart;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gi=class extends Fe{urlAfterRedirects;state;shouldActivate;type=Te.GuardsCheckEnd;constructor(n,e,r,i,a){super(n,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vi=class extends Fe{urlAfterRedirects;state;type=Te.ResolveStart;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hi=class extends Fe{urlAfterRedirects;state;type=Te.ResolveEnd;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wi=class{route;type=Te.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},qi=class{route;type=Te.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xi=class{snapshot;type=Te.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yi=class{snapshot;type=Te.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ji=class{snapshot;type=Te.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qi=class{snapshot;type=Te.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kn=class{routerEvent;position;anchor;type=Te.Scroll;constructor(n,e,r){this.routerEvent=n,this.position=e,this.anchor=r}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},xr=class{},Nn=class{url;navigationBehaviorOptions;constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function ap(t){return!(t instanceof xr)&&!(t instanceof Nn)}function up(t,n){return t.providers&&!t._injector&&(t._injector=As(t.providers,n,`Route: ${t.path}`)),t._injector??n}function We(t){return t.outlet||re}function cp(t,n){let e=t.filter(r=>We(r)===n);return e.push(...t.filter(r=>We(r)!==n)),e}function Lr(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Zi=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Lr(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Bn(this.rootInjector)}},Bn=(()=>{class t{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new Zi(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||t)(te(_t))};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eo=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=Js(n,this._root);return e?e.children.map(r=>r.value):[]}firstChild(n){let e=Js(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=Qs(n,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return Qs(n,this._root).map(e=>e.value)}};function Js(t,n){if(t===n.value)return n;for(let e of n.children){let r=Js(t,e);if(r)return r}return null}function Qs(t,n){if(t===n.value)return[n];for(let e of n.children){let r=Qs(t,e);if(r.length)return r.unshift(n),r}return[]}var Be=class{value;children;constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function An(t){let n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}var Or=class extends eo{snapshot;constructor(n,e){super(n),this.snapshot=e,sa(this,n)}toString(){return this.snapshot.toString()}};function sl(t){let n=lp(t),e=new $e([new Dt("",{})]),r=new $e({}),i=new $e({}),a=new $e({}),c=new $e(""),f=new pt(e,r,a,c,i,re,t,n.root);return f.snapshot=n.root,new Or(new Be(f,[]),n)}function lp(t){let n={},e={},r={},i="",a=new en([],n,r,i,e,re,t,null,{});return new Dr("",new Be(a,[]))}var pt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,e,r,i,a,c,f,d){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=c,this.component=f,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(he(v=>v[Nr]))??ee(void 0),this.url=n,this.params=e,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(he(n=>tn(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(he(n=>tn(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function to(t,n,e="emptyOnly"){let r,{routeConfig:i}=t;return n!==null&&(e==="always"||i?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:G(G({},n.params),t.params),data:G(G({},n.data),t.data),resolve:G(G(G(G({},t.data),n.data),i?.data),t._resolvedData)}:r={params:G({},t.params),data:G({},t.data),resolve:G(G({},t.data),t._resolvedData??{})},i&&ul(i)&&(r.resolve[Nr]=i.title),r}var en=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Nr]}constructor(n,e,r,i,a,c,f,d,v){this.url=n,this.params=e,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.routeConfig=d,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=tn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=tn(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},Dr=class extends eo{url;constructor(n,e){super(e),this.url=n,sa(this,e)}toString(){return al(this._root)}};function sa(t,n){n.value._routerState=t,n.children.forEach(e=>sa(t,e))}function al(t){let n=t.children.length>0?` { ${t.children.map(al).join(", ")} } `:"";return`${t.value}${n}`}function Gs(t){if(t.snapshot){let n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,nt(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),nt(n.params,e.params)||t.paramsSubject.next(e.params),jd(n.url,e.url)||t.urlSubject.next(e.url),nt(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Zs(t,n){let e=nt(t.params,n.params)&&zd(t.url,n.url),r=!t.parent!=!n.parent;return e&&!r&&(!t.parent||Zs(t.parent,n.parent))}function ul(t){return typeof t.title=="string"||t.title===null}var cl=new le(""),aa=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new Yt;deactivateEvents=new Yt;attachEvents=new Yt;detachEvents=new Yt;routerOutletData=ic(void 0);parentContexts=H(Bn);location=H(Ku);changeDetector=H(Ti);inputBinder=H(oo,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new fe(4013,!1);this._activatedRoute=e;let i=this.location,c=e.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,d=new ea(e,f,i.injector,this.routerOutletData);this.activated=i.createComponent(c,{index:i.length,injector:d,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=dr({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[cr]})}return t})(),ea=class{route;childContexts;parent;outletData;constructor(n,e,r,i){this.route=n,this.childContexts=e,this.parent=r,this.outletData=i}get(n,e){return n===pt?this.route:n===Bn?this.childContexts:n===cl?this.outletData:this.parent.get(n,e)}},oo=new le("");var ua=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Vu({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Yu(0,"router-outlet")},dependencies:[aa],encapsulation:2})}return t})();function ca(t){let n=t.children&&t.children.map(ca),e=n?Ie(G({},t),{children:n}):G({},t);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==re&&(e.component=ua),e}function hp(t,n,e){let r=Pr(t,n._root,e?e._root:void 0);return new Or(r,n)}function Pr(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=n.value;let i=fp(t,n,e);return new Be(r,i)}else{if(t.shouldAttach(n.value)){let a=t.retrieve(n.value);if(a!==null){let c=a.route;return c.value._futureSnapshot=n.value,c.children=n.children.map(f=>Pr(t,f)),c}}let r=dp(n.value),i=n.children.map(a=>Pr(t,a));return new Be(r,i)}}function fp(t,n,e){return n.children.map(r=>{for(let i of e.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Pr(t,r,i);return Pr(t,r)})}function dp(t){return new pt(new $e(t.url),new $e(t.params),new $e(t.queryParams),new $e(t.fragment),new $e(t.data),t.outlet,t.component,t)}var Ln=class{redirectTo;navigationBehaviorOptions;constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},ll="ngNavigationCancelingError";function no(t,n){let{redirectTo:e,navigationBehaviorOptions:r}=Pt(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=hl(!1,Me.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function hl(t,n){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[ll]=!0,e.cancellationCode=n,e}function pp(t){return fl(t)&&Pt(t.url)}function fl(t){return!!t&&t[ll]}var gp=(t,n,e,r)=>he(i=>(new ta(n,i.targetRouterState,i.currentRouterState,e,r).activate(t),i)),ta=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,e,r,i,a){this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(n){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,n),Gs(this.futureState.root),this.activateChildRoutes(e,r,n)}deactivateChildRoutes(n,e,r){let i=An(e);n.children.forEach(a=>{let c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(n,e,r){let i=n.value,a=e?e.value:null;if(i===a)if(i.component){let c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(n,e,c.children)}else this.deactivateChildRoutes(n,e,r);else a&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let r=e.getContext(n.value.outlet),i=r&&n.value.component?r.children:e,a=An(n);for(let c of Object.values(a))this.deactivateRouteAndItsChildren(c,i);if(r&&r.outlet){let c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:c,route:n,contexts:f})}}deactivateRouteAndOutlet(n,e){let r=e.getContext(n.value.outlet),i=r&&n.value.component?r.children:e,a=An(n);for(let c of Object.values(a))this.deactivateRouteAndItsChildren(c,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,e,r){let i=An(e);n.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Qi(a.value.snapshot))}),n.children.length&&this.forwardEvent(new Yi(n.value.snapshot))}activateRoutes(n,e,r){let i=n.value,a=e?e.value:null;if(Gs(i),i===a)if(i.component){let c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,e,c.children)}else this.activateChildRoutes(n,e,r);else if(i.component){let c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),Gs(f.route.value),this.activateChildRoutes(n,null,c.children)}else c.attachRef=null,c.route=i,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(n,null,c.children)}else this.activateChildRoutes(n,null,r)}},ro=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},Dn=class{component;route;constructor(n,e){this.component=n,this.route=e}};function mp(t,n,e){let r=t._root,i=n?n._root:null;return Tr(r,i,e,[r.value])}function vp(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function Fn(t,n){let e=Symbol(),r=n.get(t,e);return r===e?typeof t=="function"&&!Tu(t)?t:n.get(t):r}function Tr(t,n,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let a=An(n);return t.children.forEach(c=>{yp(c,a[c.value.outlet],e,r.concat([c.value]),i),delete a[c.value.outlet]}),Object.entries(a).forEach(([c,f])=>Ir(f,e.getContext(c),i)),i}function yp(t,n,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let a=t.value,c=n?n.value:null,f=e?e.getContext(t.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){let d=wp(c,a,a.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new ro(r)):(a.data=c.data,a._resolvedData=c._resolvedData),a.component?Tr(t,n,f?f.children:null,r,i):Tr(t,n,e,r,i),d&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Dn(f.outlet.component,c))}else c&&Ir(n,f,i),i.canActivateChecks.push(new ro(r)),a.component?Tr(t,null,f?f.children:null,r,i):Tr(t,null,e,r,i);return i}function wp(t,n,e){if(typeof e=="function")return e(t,n);switch(e){case"pathParamsChange":return!Zt(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Zt(t.url,n.url)||!nt(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zs(t,n)||!nt(t.queryParams,n.queryParams);case"paramsChange":default:return!Zs(t,n)}}function Ir(t,n,e){let r=An(t),i=t.value;Object.entries(r).forEach(([a,c])=>{i.component?n?Ir(c,n.children.getContext(a),e):Ir(c,null,e):Ir(c,n,e)}),i.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new Dn(n.outlet.component,i)):e.canDeactivateChecks.push(new Dn(null,i)):e.canDeactivateChecks.push(new Dn(null,i))}function jr(t){return typeof t=="function"}function bp(t){return typeof t=="boolean"}function Ep(t){return t&&jr(t.canLoad)}function Rp(t){return t&&jr(t.canActivate)}function Sp(t){return t&&jr(t.canActivateChild)}function Tp(t){return t&&jr(t.canDeactivate)}function Cp(t){return t&&jr(t.canMatch)}function dl(t){return t instanceof wu||t?.name==="EmptyError"}var ji=Symbol("INITIAL_VALUE");function jn(){return Ue(t=>gs(t.map(n=>n.pipe(yn(1),Su(ji)))).pipe(he(n=>{for(let e of n)if(e!==!0){if(e===ji)return ji;if(e===!1||Ip(e))return e}return!0}),tt(n=>n!==ji),yn(1)))}function Ip(t){return Pt(t)||t instanceof Ln}function _p(t,n){return je(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=e;return c.length===0&&a.length===0?ee(Ie(G({},e),{guardsResult:!0})):Ap(c,r,i,t).pipe(je(f=>f&&bp(f)?xp(r,a,t,n):ee(f)),he(f=>Ie(G({},e),{guardsResult:f})))})}function Ap(t,n,e,r){return Pe(t).pipe(je(i=>kp(i.component,i.route,e,n,r)),It(i=>i!==!0,!0))}function xp(t,n,e,r){return Pe(n).pipe(Ct(i=>bu(Dp(i.route.parent,r),Op(i.route,r),Mp(t,i.path,e),Pp(t,i.route,e))),It(i=>i!==!0,!0))}function Op(t,n){return t!==null&&n&&n(new Ji(t)),ee(!0)}function Dp(t,n){return t!==null&&n&&n(new Xi(t)),ee(!0)}function Pp(t,n,e){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(a=>Ri(()=>{let c=Lr(n)??e,f=Fn(a,c),d=Rp(f)?f.canActivate(n,t):Ve(c,()=>f(n,t));return gt(d).pipe(It())}));return ee(i).pipe(jn())}function Mp(t,n,e){let r=n[n.length-1],a=n.slice(0,n.length-1).reverse().map(c=>vp(c)).filter(c=>c!==null).map(c=>Ri(()=>{let f=c.guards.map(d=>{let v=Lr(c.node)??e,w=Fn(d,v),C=Sp(w)?w.canActivateChild(r,t):Ve(v,()=>w(r,t));return gt(C).pipe(It())});return ee(f).pipe(jn())}));return ee(a).pipe(jn())}function kp(t,n,e,r,i){let a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!a||a.length===0)return ee(!0);let c=a.map(f=>{let d=Lr(n)??i,v=Fn(f,d),w=Tp(v)?v.canDeactivate(t,n,e,r):Ve(d,()=>v(t,n,e,r));return gt(w).pipe(It())});return ee(c).pipe(jn())}function Np(t,n,e,r){let i=n.canLoad;if(i===void 0||i.length===0)return ee(!0);let a=i.map(c=>{let f=Fn(c,t),d=Ep(f)?f.canLoad(n,e):Ve(t,()=>f(n,e));return gt(d)});return ee(a).pipe(jn(),pl(r))}function pl(t){return vu(_e(n=>{if(typeof n!="boolean")throw no(t,n)}),he(n=>n===!0))}function Lp(t,n,e,r){let i=n.canMatch;if(!i||i.length===0)return ee(!0);let a=i.map(c=>{let f=Fn(c,t),d=Cp(f)?f.canMatch(n,e):Ve(t,()=>f(n,e));return gt(d)});return ee(a).pipe(jn(),pl(r))}var Mr=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},kr=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function _n(t){return sr(new Mr(t))}function jp(t){return sr(new fe(4e3,!1))}function Up(t){return sr(hl(!1,Me.GuardRejected))}var na=class{urlSerializer;urlTree;constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[re])return jp(`${n.redirectTo}`);i=i.children[re]}}applyRedirectCommands(n,e,r,i,a){return Bp(e,i,a).pipe(he(c=>{if(c instanceof it)throw new kr(c);let f=this.applyRedirectCreateUrlTree(c,this.urlSerializer.parse(c),n,r);if(c[0]==="/")throw new kr(f);return f}))}applyRedirectCreateUrlTree(n,e,r,i){let a=this.createSegmentGroup(n,e.root,r,i);return new it(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let r={};return Object.entries(n).forEach(([i,a])=>{if(typeof a=="string"&&a[0]===":"){let f=a.substring(1);r[i]=e[f]}else r[i]=a}),r}createSegmentGroup(n,e,r,i){let a=this.createSegments(n,e.segments,r,i),c={};return Object.entries(e.children).forEach(([f,d])=>{c[f]=this.createSegmentGroup(n,d,r,i)}),new pe(a,c)}createSegments(n,e,r,i){return e.map(a=>a.path[0]===":"?this.findPosParam(n,a,i):this.findOrReturn(a,r))}findPosParam(n,e,r){let i=r[e.path.substring(1)];if(!i)throw new fe(4001,!1);return i}findOrReturn(n,e){let r=0;for(let i of e){if(i.path===n.path)return e.splice(r),i;r++}return n}};function Bp(t,n,e){if(typeof t=="string")return ee(t);let r=t,{queryParams:i,fragment:a,routeConfig:c,url:f,outlet:d,params:v,data:w,title:C}=n;return gt(Ve(e,()=>r({params:v,data:w,queryParams:i,fragment:a,routeConfig:c,url:f,outlet:d,title:C})))}var ra={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fp(t,n,e,r,i){let a=gl(t,n,e);return a.matched?(r=up(n,r),Lp(r,n,e,i).pipe(he(c=>c===!0?a:G({},ra)))):ee(a)}function gl(t,n,e){if(n.path==="**")return zp(e);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||e.length>0)?G({},ra):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(n.matcher||Gc)(e,t,n);if(!i)return G({},ra);let a={};Object.entries(i.posParams??{}).forEach(([f,d])=>{a[f]=d.path});let c=i.consumed.length>0?G(G({},a),i.consumed[i.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function zp(t){return{matched:!0,parameters:t.length>0?Hc(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function zc(t,n,e,r){return e.length>0&&Gp(t,e,r)?{segmentGroup:new pe(n,Kp(r,new pe(e,t.children))),slicedSegments:[]}:e.length===0&&Vp(t,e,r)?{segmentGroup:new pe(t.segments,$p(t,e,r,t.children)),slicedSegments:e}:{segmentGroup:new pe(t.segments,t.children),slicedSegments:e}}function $p(t,n,e,r){let i={};for(let a of e)if(so(t,n,a)&&!r[We(a)]){let c=new pe([],{});i[We(a)]=c}return G(G({},r),i)}function Kp(t,n){let e={};e[re]=n;for(let r of t)if(r.path===""&&We(r)!==re){let i=new pe([],{});e[We(r)]=i}return e}function Gp(t,n,e){return e.some(r=>so(t,n,r)&&We(r)!==re)}function Vp(t,n,e){return e.some(r=>so(t,n,r))}function so(t,n,e){return(t.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Hp(t,n,e){return n.length===0&&!t.children[e]}var ia=class{};function Wp(t,n,e,r,i,a,c="emptyOnly"){return new oa(t,n,e,r,i,c,a).recognize()}var qp=31,oa=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,e,r,i,a,c,f){this.injector=n,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=c,this.urlSerializer=f,this.applyRedirects=new na(this.urlSerializer,this.urlTree)}noMatchError(n){return new fe(4002,`'${n.segmentGroup}'`)}recognize(){let n=zc(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(he(({children:e,rootSnapshot:r})=>{let i=new Be(r,e),a=new Dr("",i),c=tl(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(c),{state:a,tree:c}}))}match(n){let e=new en([],Object.freeze({}),Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,re,e).pipe(he(r=>({children:r,rootSnapshot:e})),qt(r=>{if(r instanceof kr)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Mr?this.noMatchError(r):r}))}processSegmentGroup(n,e,r,i,a){return r.segments.length===0&&r.hasChildren()?this.processChildren(n,e,r,a):this.processSegment(n,e,r,r.segments,i,!0,a).pipe(he(c=>c instanceof Be?[c]:[]))}processChildren(n,e,r,i){let a=[];for(let c of Object.keys(r.children))c==="primary"?a.unshift(c):a.push(c);return Pe(a).pipe(Ct(c=>{let f=r.children[c],d=cp(e,c);return this.processSegmentGroup(n,d,f,c,i)}),Ru((c,f)=>(c.push(...f),c)),vs(null),Eu(),je(c=>{if(c===null)return _n(r);let f=ml(c);return Xp(f),ee(f)}))}processSegment(n,e,r,i,a,c,f){return Pe(e).pipe(Ct(d=>this.processSegmentAgainstRoute(d._injector??n,e,d,r,i,a,c,f).pipe(qt(v=>{if(v instanceof Mr)return ee(null);throw v}))),It(d=>!!d),qt(d=>{if(dl(d))return Hp(r,i,a)?ee(new ia):_n(r);throw d}))}processSegmentAgainstRoute(n,e,r,i,a,c,f,d){return We(r)!==c&&(c===re||!so(i,a,r))?_n(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(n,i,r,a,c,d):this.allowRedirects&&f?this.expandSegmentAgainstRouteUsingRedirect(n,i,e,r,a,c,d):_n(i)}expandSegmentAgainstRouteUsingRedirect(n,e,r,i,a,c,f){let{matched:d,parameters:v,consumedSegments:w,positionalParamSegments:C,remainingSegments:I}=gl(e,i,a);if(!d)return _n(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>qp&&(this.allowRedirects=!1));let N=new en(a,v,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,$c(i),We(i),i.component??i._loadedComponent??null,i,Kc(i)),M=to(N,f,this.paramsInheritanceStrategy);return N.params=Object.freeze(M.params),N.data=Object.freeze(M.data),this.applyRedirects.applyRedirectCommands(w,i.redirectTo,C,N,n).pipe(Ue(U=>this.applyRedirects.lineralizeSegments(i,U)),je(U=>this.processSegment(n,r,e,U.concat(I),c,!1,f)))}matchSegmentAgainstRoute(n,e,r,i,a,c){let f=Fp(e,r,i,n,this.urlSerializer);return r.path==="**"&&(e.children={}),f.pipe(Ue(d=>d.matched?(n=r._injector??n,this.getChildConfig(n,r,i).pipe(Ue(({routes:v})=>{let w=r._loadedInjector??n,{parameters:C,consumedSegments:I,remainingSegments:N}=d,M=new en(I,C,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,$c(r),We(r),r.component??r._loadedComponent??null,r,Kc(r)),j=to(M,c,this.paramsInheritanceStrategy);M.params=Object.freeze(j.params),M.data=Object.freeze(j.data);let{segmentGroup:U,slicedSegments:q}=zc(e,I,N,v);if(q.length===0&&U.hasChildren())return this.processChildren(w,v,U,M).pipe(he(ae=>new Be(M,ae)));if(v.length===0&&q.length===0)return ee(new Be(M,[]));let Z=We(r)===a;return this.processSegment(w,v,U,q,Z?re:a,!0,M).pipe(he(ae=>new Be(M,ae instanceof Be?[ae]:[])))}))):_n(e)))}getChildConfig(n,e,r){return e.children?ee({routes:e.children,injector:n}):e.loadChildren?e._loadedRoutes!==void 0?ee({routes:e._loadedRoutes,injector:e._loadedInjector}):Np(n,e,r,this.urlSerializer).pipe(je(i=>i?this.configLoader.loadChildren(n,e).pipe(_e(a=>{e._loadedRoutes=a.routes,e._loadedInjector=a.injector})):Up(e))):ee({routes:[],injector:n})}};function Xp(t){t.sort((n,e)=>n.value.outlet===re?-1:e.value.outlet===re?1:n.value.outlet.localeCompare(e.value.outlet))}function Yp(t){let n=t.value.routeConfig;return n&&n.path===""}function ml(t){let n=[],e=new Set;for(let r of t){if(!Yp(r)){n.push(r);continue}let i=n.find(a=>r.value.routeConfig===a.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):n.push(r)}for(let r of e){let i=ml(r.children);n.push(new Be(r.value,i))}return n.filter(r=>!e.has(r))}function $c(t){return t.data||{}}function Kc(t){return t.resolve||{}}function Jp(t,n,e,r,i,a){return je(c=>Wp(t,n,e,r,c.extractedUrl,i,a).pipe(he(({state:f,tree:d})=>Ie(G({},c),{targetSnapshot:f,urlAfterRedirects:d}))))}function Qp(t,n){return je(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return ee(e);let a=new Set(i.map(d=>d.route)),c=new Set;for(let d of a)if(!c.has(d))for(let v of vl(d))c.add(v);let f=0;return Pe(c).pipe(Ct(d=>a.has(d)?Zp(d,r,t,n):(d.data=to(d,d.parent,t).resolve,ee(void 0))),_e(()=>f++),ys(1),je(d=>f===c.size?ee(e):ft))})}function vl(t){let n=t.children.map(e=>vl(e)).flat();return[t,...n]}function Zp(t,n,e,r){let i=t.routeConfig,a=t._resolve;return i?.title!==void 0&&!ul(i)&&(a[Nr]=i.title),Ri(()=>(t.data=to(t,t.parent,e).resolve,eg(a,t,n,r).pipe(he(c=>(t._resolvedData=c,t.data=G(G({},t.data),c),null)))))}function eg(t,n,e,r){let i=Ws(t);if(i.length===0)return ee({});let a={};return Pe(i).pipe(je(c=>tg(t[c],n,e,r).pipe(It(),_e(f=>{if(f instanceof Ln)throw no(new nn,f);a[c]=f}))),ys(1),he(()=>a),qt(c=>dl(c)?ft:sr(c)))}function tg(t,n,e,r){let i=Lr(n)??r,a=Fn(t,i),c=a.resolve?a.resolve(n,e):Ve(i,()=>a(n,e));return gt(c)}function Vs(t){return Ue(n=>{let e=t(n);return e?Pe(e).pipe(he(()=>n)):ee(n)})}var la=(()=>{class t{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===re);return r}getResolvedTitleForRoute(e){return e.data[Nr]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:()=>H(yl),providedIn:"root"})}return t})(),yl=(()=>{class t extends la{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(te(Nc))};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),zn=new le("",{providedIn:"root",factory:()=>({})}),Ur=new le(""),wl=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=H(tc);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ee(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=gt(e.loadComponent()).pipe(he(El),_e(a=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=a}),wn(()=>{this.componentLoaders.delete(e)})),i=new ps(r,()=>new ht).pipe(ds());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let a=bl(r,this.compiler,e,this.onLoadEndListener).pipe(wn(()=>{this.childrenLoaders.delete(r)})),c=new ps(a,()=>new ht).pipe(ds());return this.childrenLoaders.set(r,c),c}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bl(t,n,e,r){return gt(t.loadChildren()).pipe(he(El),je(i=>i instanceof Gu||Array.isArray(i)?ee(i):Pe(n.compileModuleAsync(i))),he(i=>{r&&r(t);let a,c,f=!1;return Array.isArray(i)?(c=i,f=!0):(a=i.create(e).injector,c=a.get(Ur,[],{optional:!0,self:!0}).flat()),{routes:c.map(ca),injector:a}}))}function ng(t){return t&&typeof t=="object"&&"default"in t}function El(t){return ng(t)?t.default:t}var ao=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:()=>H(rg),providedIn:"root"})}return t})(),rg=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Rl=new le("");var Sl=new le(""),ha=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ht;transitionAbortWithErrorSubject=new ht;configLoader=H(wl);environmentInjector=H(_t);destroyRef=H(bs);urlSerializer=H(Un);rootContexts=H(Bn);location=H(gr);inputBindingEnabled=H(oo,{optional:!0})!==null;titleStrategy=H(la);options=H(zn,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=H(ao);createViewTransition=H(Rl,{optional:!0});navigationErrorHandler=H(Sl,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ee(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new Wi(i)),r=i=>this.events.next(new qi(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(Ie(G({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(e){return this.transitions=new $e(null),this.transitions.pipe(tt(r=>r!==null),Ue(r=>{let i=!1;return ee(r).pipe(Ue(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Me.SupersededByNewNavigation),ft;this.currentTransition=r,this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Ie(G({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>a.abortController.abort()};let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=a.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&f!=="reload"){let d="";return this.events.next(new ot(a.id,this.urlSerializer.serialize(a.rawUrl),d,Pn.IgnoredSameUrlNavigation)),a.resolve(!1),ft}if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return ee(a).pipe(Ue(d=>(this.events.next(new Mt(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?ft:Promise.resolve(d))),Jp(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),_e(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=Ie(G({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let v=new Ar(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(v)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:d,extractedUrl:v,source:w,restoredState:C,extras:I}=a,N=new Mt(d,this.urlSerializer.serialize(v),w,C);this.events.next(N);let M=sl(this.rootComponentType).snapshot;return this.currentTransition=r=Ie(G({},a),{targetSnapshot:M,urlAfterRedirects:v,extras:Ie(G({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,ee(r)}else{let d="";return this.events.next(new ot(a.id,this.urlSerializer.serialize(a.extractedUrl),d,Pn.IgnoredByUrlHandlingStrategy)),a.resolve(!1),ft}}),_e(a=>{let c=new Ki(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),he(a=>(this.currentTransition=r=Ie(G({},a),{guards:mp(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r)),_p(this.environmentInjector,a=>this.events.next(a)),_e(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw no(this.urlSerializer,a.guardsResult);let c=new Gi(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),tt(a=>a.guardsResult?!0:(this.cancelNavigationTransition(a,"",Me.GuardRejected),!1)),Vs(a=>{if(a.guards.canActivateChecks.length!==0)return ee(a).pipe(_e(c=>{let f=new Vi(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),Ue(c=>{let f=!1;return ee(c).pipe(Qp(this.paramsInheritanceStrategy,this.environmentInjector),_e({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(c,"",Me.NoDataFromResolver)}}))}),_e(c=>{let f=new Hi(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}))}),Vs(a=>{let c=f=>{let d=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(f.routeConfig).pipe(_e(v=>{f.component=v}),he(()=>{})));for(let v of f.children)d.push(...c(v));return d};return gs(c(a.targetSnapshot.root)).pipe(vs(null),yn(1))}),Vs(()=>this.afterPreactivation()),Ue(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,f=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return f?Pe(f).pipe(he(()=>r)):ee(r)}),he(a=>{let c=hp(e.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=r=Ie(G({},a),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,r}),_e(()=>{this.events.next(new xr)}),gp(this.rootContexts,e.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),yn(1),ws(new Ei(a=>{let c=r.abortController.signal,f=()=>a.next();return c.addEventListener("abort",f),()=>c.removeEventListener("abort",f)}).pipe(tt(()=>!i&&!r.targetRouterState),_e(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Me.Aborted)}))),_e({next:a=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ke(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),ws(this.transitionAbortWithErrorSubject.pipe(_e(a=>{throw a}))),wn(()=>{i||this.cancelNavigationTransition(r,"",Me.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),qt(a=>{if(this.destroyed)return r.resolve(!1),ft;if(i=!0,fl(a))this.events.next(new rt(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),pp(a)?this.events.next(new Nn(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Mn(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let f=Ve(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(f instanceof Ln){let{message:d,cancellationCode:v}=no(this.urlSerializer,f);this.events.next(new rt(r.id,this.urlSerializer.serialize(r.extractedUrl),d,v)),this.events.next(new Nn(f.redirectTo,f.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(f){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(f)}}return ft}))}))}cancelNavigationTransition(e,r,i){let a=new rt(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(a),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ig(t){return t!==On}var Tl=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:()=>H(og),providedIn:"root"})}return t})(),io=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},og=(()=>{class t extends io{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Rs(t)))(i||t)}})();static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Cl=(()=>{class t{urlSerializer=H(Un);options=H(zn,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=H(gr);urlHandlingStrategy=H(ao);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new it;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:i}){let a=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,c=i??a;return c instanceof it?this.urlSerializer.serialize(c):c}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:i}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=e):this.rawUrlTree=i}routerState=sl(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:()=>H(sg),providedIn:"root"})}return t})(),sg=(()=>{class t extends Cl{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof Mt?this.updateStateMemento():e instanceof ot?this.commitTransition(r):e instanceof Ar?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof xr?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof rt&&e.code!==Me.SupersededByNewNavigation&&e.code!==Me.Redirect?this.restoreHistory(r):e instanceof Mn?this.restoreHistory(r,!0):e instanceof Ke&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:i}){let{replaceUrl:a,state:c}=r;if(this.location.isCurrentPathEqualTo(e)||a){let f=this.browserPageId,d=G(G({},c),this.generateNgRouterState(i,f));this.location.replaceState(e,"",d)}else{let f=G(G({},c),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",f)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,a=this.currentPageId-i;a!==0?this.location.historyGo(a):this.getCurrentUrlTree()===e.finalUrl&&a===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Rs(t)))(i||t)}})();static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fa(t,n){t.events.pipe(tt(e=>e instanceof Ke||e instanceof rt||e instanceof Mn||e instanceof ot),he(e=>e instanceof Ke||e instanceof ot?0:(e instanceof rt?e.code===Me.Redirect||e.code===Me.SupersededByNewNavigation:!1)?2:1),tt(e=>e!==2),yn(1)).subscribe(()=>{n()})}var ag={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ug={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$n=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=H(xs);stateManager=H(Cl);options=H(zn,{optional:!0})||{};pendingTasks=H(_u);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=H(ha);urlSerializer=H(Un);location=H(gr);urlHandlingStrategy=H(ao);injector=H(_t);_events=new ht;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=H(Tl);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=H(Ur,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!H(oo,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new mu;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(i!==null&&a!==null){if(this.stateManager.handleRouterEvent(r,a),r instanceof rt&&r.code!==Me.Redirect&&r.code!==Me.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ke)this.navigated=!0;else if(r instanceof Nn){let c=r.navigationBehaviorOptions,f=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),d=G({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ig(i.source)},c);this.scheduleNavigation(f,On,null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}ap(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),On,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,i)=>{this.navigateToSyncWithBrowser(e,i,r)})}navigateToSyncWithBrowser(e,r,i){let a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){let d=G({},i);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(a.state=d)}let f=this.parseUrl(e);this.scheduleNavigation(f,r,c,a).catch(d=>{this.injector.get(Si)(d)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(ca),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:d}=r,v=d?this.currentUrlTree.fragment:c,w=null;switch(f??this.options.defaultQueryParamsHandling){case"merge":w=G(G({},this.currentUrlTree.queryParams),a);break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=a||null}w!==null&&(w=this.removeEmptyProps(w));let C;try{let I=i?i.snapshot:this.routerState.snapshot.root;C=nl(I)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),C=this.currentUrlTree.root}return rl(C,e,w,v??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=Pt(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,On,null,r)}navigate(e,r={skipLocationChange:!1}){return cg(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=G({},ag):r===!1?i=G({},ug):i=r,Pt(e))return jc(this.currentUrlTree,e,i);let a=this.parseUrl(e);return jc(this.currentUrlTree,a,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,a])=>(a!=null&&(r[i]=a),r),{})}scheduleNavigation(e,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let f,d,v;c?(f=c.resolve,d=c.reject,v=c.promise):v=new Promise((C,I)=>{f=C,d=I});let w=this.pendingTasks.add();return fa(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(w))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:a,resolve:f,reject:d,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(C=>Promise.reject(C))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cg(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new fe(4008,!1)}var uo=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Iu(null);get href(){return nc(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ht;applicationErrorHandler=H(Si);options=H(zn,{optional:!0});constructor(e,r,i,a,c,f){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.locationStrategy=f,this.reactiveHref.set(H(new rc("href"),{optional:!0}));let d=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area"||!!(typeof customElements=="object"&&customElements.get(d)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,r=i=>i==="merge"||i==="preserve";e||=r(this.queryParamsHandling),e||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Ke&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Pt(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,a,c){let f=this.urlTree;if(f===null||this.isAnchorElement&&(e!==0||r||i||a||c||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(f,d)?.catch(v=>{this.applicationErrorHandler(v)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,r){let i=this.renderer,a=this.el.nativeElement;r!==null?i.setAttribute(a,e,r):i.removeAttribute(a,e)}get urlTree(){return this.routerLinkInput===null?null:Pt(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(He($n),He(pt),Ou("tabindex"),He(_s),He(Ss),He(Ds))};static \u0275dir=dr({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Ju("click",function(c){return i.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),r&2&&Xu("href",i.reactiveHref(),Fu)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ci],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ci],replaceUrl:[2,"replaceUrl","replaceUrl",Ci],routerLink:"routerLink"},features:[cr]})}return t})(),lg=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Yt;constructor(e,r,i,a,c){this.router=e,this.element=r,this.renderer=i,this.cdr=a,this.link=c,this.routerEventsSubscription=e.events.subscribe(f=>{f instanceof Ke&&this.update()})}ngAfterContentInit(){ee(this.links.changes,ee(null)).pipe(ms()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Pe(e).pipe(ms()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){let r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let r=hg(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let a=i.urlTree;return a?e.isActive(a,r):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(r){return new(r||t)(He($n),He(Ss),He(_s),He(Ti),He(uo,8))};static \u0275dir=dr({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,a){if(r&1&&Qu(a,uo,5),r&2){let c;Zu(c=ec())&&(i.links=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[cr]})}return t})();function hg(t){return!!t.paths}var Il=new le(""),fg=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=On;restoredId=0;store={};constructor(e,r,i,a,c={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,c.scrollPositionRestoration||="disabled",c.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Mt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ke?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof ot&&e.code===Pn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof kn&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(async()=>{await new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new kn(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){$u()};static \u0275prov=oe({token:t,factory:t.\u0275fac})}return t})();function dg(t,...n){return ur([{provide:Ur,multi:!0,useValue:t},[],{provide:pt,useFactory:pg,deps:[$n]},{provide:qu,multi:!0,useFactory:vg},n.map(e=>e.\u0275providers)])}function pg(t){return t.routerState.root}function gg(t,n){return{\u0275kind:t,\u0275providers:n}}function mg(t={}){return gg(4,[{provide:Il,useFactory:()=>{let e=H(hc),r=H(At),i=H(ha),a=H(Un);return new fg(a,i,e,r,t)}}])}function vg(){let t=H(bn);return n=>{let e=t.get(Os);if(n!==e.components[0])return;let r=t.get($n),i=t.get(yg);t.get(wg)===1&&r.initialNavigation(),t.get(bg,null,{optional:!0})?.setUpPreloading(),t.get(Il,null,{optional:!0})?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var yg=new le("",{factory:()=>new ht}),wg=new le("",{providedIn:"root",factory:()=>1});var bg=new le("");var Br=(I=>(I.PRODUCTS="productsStore",I.RECIPES="recipesStore",I.CATEGORIES="categoryStore",I.PRODUCTS_CATEGORIES="categoryProductsStore",I.RECIPES_CATEGORIES="categoryRecipesStore",I.INDICES="indicesStore",I.DOCUMENTATION="documentation",I.TAGS="tags",I.TAXES="taxes",I.SETTINGS="settings",I.INVOICES="invoices",I.CREDENTIALS="credentials",I))(Br||{});var _l=new le("LOGGER_CONTEXT",{factory:()=>({label:"Logger",color:"#3498db"})}),Al=new le("DISABLE_LOGGER",{factory:()=>!0});var co=class t{constructor(n,e){this.disableLogger=n;this.context=e;this._enabled=this.disableLogger!==!0&&oc()&&this.context?.enabled!==!1}_enabled;log(n,...e){this._print("log",n,...e)}info(n,...e){this._print("info",n,...e)}warn(n,...e){this._print("warn",n,...e)}error(n,...e){this._print("error",n,...e)}withContext(n){let e=G(G({},this.context),n);return new t(this.disableLogger,e)}_print(n,e,...r){if(!this._enabled)return;let i=this.context?.label??"Logger",c=`color: ${this.context?.color??"#3498db"}; font-weight: bold;`;console[n](`%c[${i}]`,c,e,r.length?" - ":"",...r)}static \u0275fac=function(e){return new(e||t)(te(Al,8),te(_l,8))};static \u0275prov=oe({token:t,factory:t.\u0275fac})};var Dy=new le("UserLanguage");var xl=new le("DB_NAME");var lo=zf(Ol(),1),Dl=Symbol.for("Dexie"),ho=globalThis[Dl]||(globalThis[Dl]=lo.default);if(lo.default.semVer!==ho.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${lo.default.semVer} and ${ho.semVer}`);var{liveQuery:Ny,mergeRanges:Ly,rangesOverlap:jy,RangeSet:Uy,cmp:By,Entity:Fy,PropModification:zy,replacePrefix:$y,add:Ky,remove:Gy}=ho;var Pl=ho;var Ml=[{version:1,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryStore:"++uuid,name"}},{version:2,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryStore:"++uuid,name",categoryProductsStore:"++uuid,name"},update:t=>new Promise(async n=>{let e=await t.table("categoryStore").toArray(),r=t.table("categoryProductsStore");await Promise.all(e.map(i=>r.add(i))),await t.table("categoryStore").clear()})},{version:3,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:4,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:5,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"},update:t=>new Promise(async n=>{let e=[{uuid:"\u0423\u043A\u0441\u0443\u0441\u044B",name:"\u0423\u043A\u0441\u0443\u0441\u044B"}],r=["\u0421\u0438\u0440\u043E\u043F\u044B \u0438 \u043F\u0440\u043E\u043F\u0438\u0442\u043A\u0438"],i=[{old:"\u0420\u0430\u0437\u0440\u044B\u0445\u043B\u0438\u0442\u0435\u043B\u0438 \u0438 \u0441\u0442\u0430\u0431\u0438\u043B\u0438\u0437\u0430\u0442\u043E\u0440\u044B",new:"\u0420\u0430\u0437\u0440\u044B\u0445\u043B\u0438\u0442\u0435\u043B\u0438 \u0438 \u0441\u043E\u0434\u044B"}],a=t.table("categoryProductsStore"),c=await a.toArray(),f=c.filter(v=>r.includes(v.name)).map(v=>v.uuid),d=c.filter(v=>i.map(w=>w.old).includes(v.name));await Promise.all(d.map(v=>{let w=i.find(C=>C.old===v.name)?.new;return a.update(v.uuid,{name:w})})),await Promise.all(f.map(v=>a.delete(v))),await Promise.all(e.map(v=>a.add(v)))})},{version:6,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name,source",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:7,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name,source",categoryProductsStore:"++uuid,name,color,system",categoryRecipesStore:"++uuid,name,system"},update:t=>new Promise(async n=>{let e=t.table("categoryProductsStore"),r=await e.toArray();await Promise.all(r.map(c=>c.system===void 0?e.update(c.uuid,{system:!1}):Promise.resolve()));let i=t.table("categoryRecipesStore"),a=await i.toArray();await Promise.all(a.map(c=>c.system===void 0?i.update(c.uuid,{system:!1}):Promise.resolve())),n()})},{version:8,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name,color,system",categoryRecipesStore:"++uuid,name,system"},update:t=>{let n=["productsStore","recipesStore","categoryProductsStore","categoryRecipesStore"];return Promise.all([new Promise(async e=>{let r=t.table("categoryProductsStore"),i=await r.toArray(),a=t.table("productsStore"),c=await a.toArray();await Promise.all(c.map(f=>{let d=i.find(v=>v.uuid===f.category_id);return d?a.update(f.uuid,{category_id:d.name}):Promise.resolve()})),await Promise.all(i.map(f=>r.update(f.uuid,{uuid:f.name}))),e()}),new Promise(async e=>{let r=t.table("categoryRecipesStore"),i=await r.toArray(),a=t.table("recipesStore"),c=await a.toArray();await Promise.all(c.map(f=>{let d=i.find(v=>v.uuid===f.category_id);return d?a.update(f.uuid,{category_id:d.name}):Promise.resolve()})),await Promise.all(i.map(f=>r.update(f.uuid,{uuid:f.name}))),e()})]).then(()=>{})}},{version:9,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid"}},{version:10,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key"}},{version:11,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name"}},{version:12,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name",taxes:"++uuid"}},{version:13,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name",taxes:"++uuid",settings:"++key"}},{version:14,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name",taxes:"++uuid",settings:"++key",invoices:"++uuid"}},{version:15,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name",taxes:"++uuid",settings:"++key",invoices:"++uuid",credentials:"++uuid"}},{version:16,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name",taxes:"++uuid",settings:"++key",invoices:"++uuid",credentials:"++uuid,type"}}];var ga={product_id:"productsStore.uuid",recipe_id:"recipesStore.uuid",tags:"tags.uuid",invoice_id:"invoices.uuid",credential_id:"credentials.uuid"};var W;function xe(t,n,e){let r=typeof e,i=typeof t;if(r!=="undefined"){if(i!=="undefined"){if(e){if(i==="function"&&r===i)return function(f){return t(e(f))};if(n=t.constructor,n===e.constructor){if(n===Array)return e.concat(t);if(n===Map){var a=new Map(e);for(var c of t)a.set(c[0],c[1]);return a}if(n===Set){c=new Set(e);for(a of t.values())c.add(a);return c}}}return t}return e}return i==="undefined"?n:t}function Ee(){return Object.create(null)}function qe(t){return typeof t=="string"}function Kr(t){return typeof t=="object"}function Eg(t){let n=[];for(let e of t.keys())n.push(e);return n}function Gr(t,n){if(qe(n))t=t[n];else for(let e=0;t&&e<n.length;e++)t=t[n[e]];return t}function Rg(t){let n=0;for(let e=0,r;e<t.length;e++)(r=t[e])&&n<r.length&&(n=r.length);return n}var Sg=/[^\p{L}\p{N}]+/u,Tg=/(\d{3})/g,Cg=/(\D)(\d{3})/g,Ig=/(\d{3})(\D)/g,kl=/[\u0300-\u036f]/g;function Vr(t={}){if(!this||this.constructor!==Vr)return new Vr(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}W=Vr.prototype;W.assign=function(t){this.normalize=xe(t.normalize,!0,this.normalize);let n=t.include,e=n||t.exclude||t.split,r;if(e||e===""){if(typeof e=="object"&&e.constructor!==RegExp){let i="";r=!n,n||(i+="\\p{Z}"),e.letter&&(i+="\\p{L}"),e.number&&(i+="\\p{N}",r=!!n),e.symbol&&(i+="\\p{S}"),e.punctuation&&(i+="\\p{P}"),e.control&&(i+="\\p{C}"),(e=e.char)&&(i+=typeof e=="object"?e.join(""):e);try{this.split=new RegExp("["+(n?"^":"")+i+"]+","u")}catch{this.split=/\s+/}}else this.split=e,r=e===!1||2>"a1a".split(e).length;this.numeric=xe(t.numeric,r)}else{try{this.split=xe(this.split,Sg)}catch{this.split=/\s+/}this.numeric=xe(t.numeric,xe(this.numeric,!0))}if(this.prepare=xe(t.prepare,null,this.prepare),this.finalize=xe(t.finalize,null,this.finalize),e=t.filter,this.filter=typeof e=="function"?e:xe(e&&new Set(e),null,this.filter),this.dedupe=xe(t.dedupe,!0,this.dedupe),this.matcher=xe((e=t.matcher)&&new Map(e),null,this.matcher),this.mapper=xe((e=t.mapper)&&new Map(e),null,this.mapper),this.stemmer=xe((e=t.stemmer)&&new Map(e),null,this.stemmer),this.replacer=xe(t.replacer,null,this.replacer),this.minlength=xe(t.minlength,1,this.minlength),this.maxlength=xe(t.maxlength,1024,this.maxlength),this.rtl=xe(t.rtl,!1,this.rtl),(this.cache=e=xe(t.cache,!0,this.cache))&&(this.H=null,this.S=typeof e=="number"?e:2e5,this.B=new Map,this.G=new Map,this.L=this.K=128),this.h="",this.M=null,this.A="",this.N=null,this.matcher)for(let i of this.matcher.keys())this.h+=(this.h?"|":"")+i;if(this.stemmer)for(let i of this.stemmer.keys())this.A+=(this.A?"|":"")+i;return this};W.addStemmer=function(t,n){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,n),this.A+=(this.A?"|":"")+t,this.N=null,this.cache&&on(this),this};W.addFilter=function(t){return typeof t=="function"?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&on(this),this};W.addMapper=function(t,n){return typeof t=="object"?this.addReplacer(t,n):1<t.length?this.addMatcher(t,n):(this.mapper||(this.mapper=new Map),this.mapper.set(t,n),this.cache&&on(this),this)};W.addMatcher=function(t,n){return typeof t=="object"?this.addReplacer(t,n):2>t.length&&(this.dedupe||this.mapper)?this.addMapper(t,n):(this.matcher||(this.matcher=new Map),this.matcher.set(t,n),this.h+=(this.h?"|":"")+t,this.M=null,this.cache&&on(this),this)};W.addReplacer=function(t,n){return typeof t=="string"?this.addMatcher(t,n):(this.replacer||(this.replacer=[]),this.replacer.push(t,n),this.cache&&on(this),this)};W.encode=function(t,n){if(this.cache&&t.length<=this.K)if(this.H){if(this.B.has(t))return this.B.get(t)}else this.H=setTimeout(on,50,this);this.normalize&&(typeof this.normalize=="function"?t=this.normalize(t):t=kl?t.normalize("NFKD").replace(kl,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&3<t.length&&(t=t.replace(Cg,"$1 $2").replace(Ig,"$1 $2").replace(Tg,"$1 "));let e=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer),r=[],i=Ee(),a,c,f=this.split||this.split===""?t.split(this.split):[t];for(let v=0,w,C;v<f.length;v++)if((w=C=f[v])&&!(w.length<this.minlength||w.length>this.maxlength)){if(n){if(i[w])continue;i[w]=1}else{if(a===w)continue;a=w}if(e)r.push(w);else if(!this.filter||(typeof this.filter=="function"?this.filter(w):!this.filter.has(w))){if(this.cache&&w.length<=this.L)if(this.H){var d=this.G.get(w);if(d||d===""){d&&r.push(d);continue}}else this.H=setTimeout(on,50,this);if(this.stemmer){this.N||(this.N=new RegExp("(?!^)("+this.A+")$"));let I;for(;I!==w&&2<w.length;)I=w,w=w.replace(this.N,N=>this.stemmer.get(N))}if(w&&(this.mapper||this.dedupe&&1<w.length)){d="";for(let I=0,N="",M,j;I<w.length;I++)M=w.charAt(I),M===N&&this.dedupe||((j=this.mapper&&this.mapper.get(M))||j===""?j===N&&this.dedupe||!(N=j)||(d+=j):d+=N=M);w=d}if(this.matcher&&1<w.length&&(this.M||(this.M=new RegExp("("+this.h+")","g")),w=w.replace(this.M,I=>this.matcher.get(I))),w&&this.replacer)for(d=0;w&&d<this.replacer.length;d+=2)w=w.replace(this.replacer[d],this.replacer[d+1]);if(this.cache&&C.length<=this.L&&(this.G.set(C,w),this.G.size>this.S&&(this.G.clear(),this.L=this.L/1.1|0)),w){if(w!==C)if(n){if(i[w])continue;i[w]=1}else{if(c===w)continue;c=w}r.push(w)}}}return this.finalize&&(r=this.finalize(r)||r),this.cache&&t.length<=this.K&&(this.B.set(t,r),this.B.size>this.S&&(this.B.clear(),this.K=this.K/1.1|0)),r};function on(t){t.H=null,t.B.clear(),t.G.clear()}var Kn,Fr;async function _g(t){t=t.data;var n=t.task;let e=t.id,r=t.args;switch(n){case"init":Fr=t.options||{},(n=t.factory)?(Function("return "+n)()(self),Kn=new self.FlexSearch.Index(Fr),delete self.FlexSearch):Kn=new at(Fr),postMessage({id:e});break;default:let i;n==="export"&&(r[1]?(r[0]=Fr.export,r[2]=0,r[3]=1):r=null),n==="import"?r[0]&&(t=await Fr.import.call(Kn,r[0]),Kn.import(r[0],t)):(i=r&&Kn[n].apply(Kn,r))&&i.then&&(i=await i),postMessage(n==="search"?{id:e,msg:i}:{id:e})}}function Ta(t){zr.call(t,"add"),zr.call(t,"append"),zr.call(t,"search"),zr.call(t,"update"),zr.call(t,"remove")}var wa,Nl,go;function Ag(){wa=go=0}function zr(t){this[t+"Async"]=function(){let n=arguments;var e=n[n.length-1];let r;if(typeof e=="function"&&(r=e,delete n[n.length-1]),wa?go||(go=Date.now()-Nl>=this.priority*this.priority*3):(wa=setTimeout(Ag,0),Nl=Date.now()),go){let a=this;return new Promise(c=>{setTimeout(function(){c(a[t+"Async"].apply(a,n))},0)})}let i=this[t].apply(this,n);return e=i.then?i:new Promise(a=>a(i)),r&&e.then(r),e}}var Gn=0;function Hr(t={}){function n(c){function f(d){d=d.data||d;let v=d.id,w=v&&i.h[v];w&&(w(d.msg),delete i.h[v])}if(this.worker=c,this.h=Ee(),this.worker)return r?this.worker.on("message",f):this.worker.onmessage=f,t.config?new Promise(function(d){i.h[++Gn]=function(){d(i),1e9<Gn&&(Gn=0)},i.worker.postMessage({id:Gn,task:"init",factory:e,options:t})}):(this.worker.postMessage({task:"init",factory:e,options:t}),this.priority=t.priority||4,this)}if(!this||this.constructor!==Hr)return new Hr(t);let e=typeof self<"u"?self._factory:typeof window<"u"?window._factory:null;e&&(e=e.toString());let r=typeof window>"u",i=this,a=xg(e,r,t.worker);return a.then?a.then(function(c){return n.call(i,c)}):n.call(this,a)}Nt("add");Nt("append");Nt("search");Nt("update");Nt("remove");Nt("clear");Nt("export");Nt("import");Ta(Hr.prototype);function Nt(t){Hr.prototype[t]=function(){let n=this,e=[].slice.call(arguments);var r=e[e.length-1];let i;return typeof r=="function"&&(i=r,e.pop()),r=new Promise(function(a){t==="export"&&typeof e[0]=="function"&&(e[0]=null),n.h[++Gn]=a,n.worker.postMessage({task:t,id:Gn,args:e})}),i?(r.then(i),this):r}}function xg(t,n,e){return n?typeof module<"u"?new($f()).Worker(__dirname+"/worker/node.js"):import("./chunk-K7AAVQ3W.js").then(function(r){return new r.Worker(import.meta.dirname+"/node/node.mjs")}):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+_g.toString()],{type:"text/javascript"}))):new window.Worker(typeof e=="string"?e:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js"),{type:"module"})}function Ca(t,n=0){let e=[],r=[];n&&(n=25e4/n*5e3|0);for(let i of t.entries())r.push(i),r.length===n&&(e.push(r),r=[]);return r.length&&e.push(r),e}function Ia(t,n){n||(n=new Map);for(let e=0,r;e<t.length;e++)r=t[e],n.set(r[0],r[1]);return n}function Hl(t,n=0){let e=[],r=[];n&&(n=25e4/n*1e3|0);for(let i of t.entries())r.push([i[0],Ca(i[1])[0]]),r.length===n&&(e.push(r),r=[]);return r.length&&e.push(r),e}function Wl(t,n){n||(n=new Map);for(let e=0,r,i;e<t.length;e++)r=t[e],i=n.get(r[0]),n.set(r[0],Ia(r[1],i));return n}function ql(t){let n=[],e=[];for(let r of t.keys())e.push(r),e.length===25e4&&(n.push(e),e=[]);return e.length&&n.push(e),n}function Xl(t,n){n||(n=new Set);for(let e=0;e<t.length;e++)n.add(t[e]);return n}function mo(t,n,e,r,i,a,c=0){let f=r&&r.constructor===Array;var d=f?r.shift():r;if(!d)return this.export(t,n,i,a+1);if((d=t((n?n+".":"")+(c+1)+"."+e,JSON.stringify(d)))&&d.then){let v=this;return d.then(function(){return mo.call(v,t,n,e,f?r:null,i,a,c+1)})}return mo.call(this,t,n,e,f?r:null,i,a,c+1)}function Ll(t,n){let e="";for(let r of t.entries()){t=r[0];let i=r[1],a="";for(let c=0,f;c<i.length;c++){f=i[c]||[""];let d="";for(let v=0;v<f.length;v++)d+=(d?",":"")+(n==="string"?'"'+f[v]+'"':f[v]);d="["+d+"]",a+=(a?",":"")+d}a='["'+t+'",['+a+"]]",e+=(e?",":"")+a}return e}function jl(t,n,e,r){let i=[];for(let a=0,c;a<t.index.length;a++)if(c=t.index[a],n>=c.length)n-=c.length;else{n=c[r?"splice":"slice"](n,e);let f=n.length;if(f&&(i=i.length?i.concat(n):n,e-=f,r&&(t.length-=f),!e))break;n=0}return i}function sn(t){if(!this||this.constructor!==sn)return new sn(t);this.index=t?[t]:[],this.length=t?t.length:0;let n=this;return new Proxy([],{get(e,r){if(r==="length")return n.length;if(r==="push")return function(i){n.index[n.index.length-1].push(i),n.length++};if(r==="pop")return function(){if(n.length)return n.length--,n.index[n.index.length-1].pop()};if(r==="indexOf")return function(i){let a=0;for(let c=0,f,d;c<n.index.length;c++){if(f=n.index[c],d=f.indexOf(i),0<=d)return a+d;a+=f.length}return-1};if(r==="includes")return function(i){for(let a=0;a<n.index.length;a++)if(n.index[a].includes(i))return!0;return!1};if(r==="slice")return function(i,a){return jl(n,i||0,a||n.length,!1)};if(r==="splice")return function(i,a){return jl(n,i||0,a||n.length,!0)};if(r==="constructor")return Array;if(typeof r!="symbol")return(e=n.index[r/2**31|0])&&e[r]},set(e,r,i){return e=r/2**31|0,(n.index[e]||(n.index[e]=[]))[r]=i,n.length++,!0}})}sn.prototype.clear=function(){this.index.length=0};sn.prototype.destroy=function(){this.proxy=this.index=null};sn.prototype.push=function(){};function st(t=8){if(!this||this.constructor!==st)return new st(t);this.index=Ee(),this.h=[],this.size=0,32<t?(this.B=Jl,this.A=BigInt(t)):(this.B=Yl,this.A=t)}st.prototype.get=function(t){let n=this.index[this.B(t)];return n&&n.get(t)};st.prototype.set=function(t,n){var e=this.B(t);let r=this.index[e];r?(e=r.size,r.set(t,n),(e-=r.size)&&this.size++):(this.index[e]=r=new Map([[t,n]]),this.h.push(r),this.size++)};function Xe(t=8){if(!this||this.constructor!==Xe)return new Xe(t);this.index=Ee(),this.h=[],this.size=0,32<t?(this.B=Jl,this.A=BigInt(t)):(this.B=Yl,this.A=t)}Xe.prototype.add=function(t){var n=this.B(t);let e=this.index[n];e?(n=e.size,e.add(t),(n-=e.size)&&this.size++):(this.index[n]=e=new Set([t]),this.h.push(e),this.size++)};W=st.prototype;W.has=Xe.prototype.has=function(t){let n=this.index[this.B(t)];return n&&n.has(t)};W.delete=Xe.prototype.delete=function(t){let n=this.index[this.B(t)];n&&n.delete(t)&&this.size--};W.clear=Xe.prototype.clear=function(){this.index=Ee(),this.h=[],this.size=0};W.values=Xe.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let n of this.h[t].values())yield n};W.keys=Xe.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let n of this.h[t].keys())yield n};W.entries=Xe.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let n of this.h[t].entries())yield n};function Yl(t){let n=2**this.A-1;if(typeof t=="number")return t&n;let e=0,r=this.A+1;for(let i=0;i<t.length;i++)e=(e*r^t.charCodeAt(i))&n;return this.A===32?e+2**31:e}function Jl(t){let n=BigInt(2)**this.A-BigInt(1);var e=typeof t;if(e==="bigint")return t&n;if(e==="number")return BigInt(t)&n;e=BigInt(0);let r=this.A+BigInt(1);for(let i=0;i<t.length;i++)e=(e*r^BigInt(t.charCodeAt(i)))&n;return e}an.prototype.add=function(t,n,e){if(Kr(t)&&(n=t,t=Gr(n,this.key)),n&&(t||t===0)){if(!e&&this.reg.has(t))return this.update(t,n);for(let f=0,d;f<this.field.length;f++){d=this.F[f];var r=this.index.get(this.field[f]);if(typeof d=="function"){var i=d(n);i&&r.add(t,i,!1,!0)}else i=d.I,(!i||i(n))&&(d.constructor===String?d=[""+d]:qe(d)&&(d=[d]),Ea(n,d,this.J,0,r,t,d[0],e))}if(this.tag)for(r=0;r<this.D.length;r++){var a=this.D[r];i=this.tag.get(this.R[r]);let f=Ee();if(typeof a=="function"){if(a=a(n),!a)continue}else{var c=a.I;if(c&&!c(n))continue;a.constructor===String&&(a=""+a),a=Gr(n,a)}if(i&&a){qe(a)&&(a=[a]);for(let d=0,v,w;d<a.length;d++)if(v=a[d],!f[v]&&(f[v]=1,(c=i.get(v))?w=c:i.set(v,w=[]),!e||!w.includes(t))){if(w.length===2**31-1){if(c=new sn(w),this.fastupdate)for(let C of this.reg.values())C.includes(w)&&(C[C.indexOf(w)]=c);i.set(v,w=c)}w.push(t),this.fastupdate&&((c=this.reg.get(t))?c.push(w):this.reg.set(t,[w]))}}}if(this.store&&(!e||!this.store.has(t))){let f;if(this.C){f=Ee();for(let d=0,v;d<this.C.length;d++){if(v=this.C[d],(e=v.I)&&!e(n))continue;let w;if(typeof v=="function"){if(w=v(n),!w)continue;v=[v.V]}else if(qe(v)||v.constructor===String){f[v]=n[v];continue}ba(n,f,v,0,v[0],w)}}this.store.set(t,f||n)}this.worker&&(this.fastupdate||this.reg.add(t))}return this};function ba(t,n,e,r,i,a){if(t=t[i],r===e.length-1)n[i]=a||t;else if(t)if(t.constructor===Array)for(n=n[i]=Array(t.length),i=0;i<t.length;i++)ba(t,n,e,r,i);else n=n[i]||(n[i]=Ee()),i=e[++r],ba(t,n,e,r,i)}function Ea(t,n,e,r,i,a,c,f){if(t=t[c])if(r===n.length-1){if(t.constructor===Array){if(e[r]){for(n=0;n<t.length;n++)i.add(a,t[n],!0,!0);return}t=t.join(" ")}i.add(a,t,f,!0)}else if(t.constructor===Array)for(c=0;c<t.length;c++)Ea(t,n,e,r,i,a,c,f);else c=n[++r],Ea(t,n,e,r,i,a,c,f);else i.db&&i.remove(a)}function Ql(t,n,e,r,i,a,c){let f=t.length,d=[],v,w;v=Ee();for(let C=0,I,N,M,j;C<n;C++)for(let U=0;U<f;U++)if(M=t[U],C<M.length&&(I=M[C]))for(let q=0;q<I.length;q++){if(N=I[q],(w=v[N])?v[N]++:(w=0,v[N]=1),j=d[w]||(d[w]=[]),!c){let Z=C+(U||!i?0:a||0);j=j[Z]||(j[Z]=[])}if(j.push(N),c&&e&&w===f-1&&j.length-r===e)return r?j.slice(r):j}if(t=d.length)if(i)d=1<d.length?Zl(d,e,r,c,a):(d=d[0]).length>e||r?d.slice(r,e+r):d;else{if(t<f)return[];if(d=d[t-1],e||r)if(c)(d.length>e||r)&&(d=d.slice(r,e+r));else{i=[];for(let C=0,I;C<d.length;C++)if(I=d[C],I.length>r)r-=I.length;else if((I.length>e||r)&&(I=I.slice(r,e+r),e-=I.length,r&&(r-=I.length)),i.push(I),!e)break;d=1<i.length?[].concat.apply([],i):i[0]}}return d}function Zl(t,n,e,r,i){let a=[],c=Ee(),f;var d=t.length;let v;if(r){for(i=d-1;0<=i;i--)if(v=(r=t[i])&&r.length){for(d=0;d<v;d++)if(f=r[d],!c[f]){if(c[f]=1,e)e--;else if(a.push(f),a.length===n)return a}}}else for(let w=d-1,C,I=0;0<=w;w--){C=t[w];for(let N=0;N<C.length;N++)if(v=(r=C[N])&&r.length){for(let M=0;M<v;M++)if(f=r[M],!c[f])if(c[f]=1,e)e--;else{let j=(N+(w<d-1&&i||0))/(w+1)|0;if((a[j]||(a[j]=[])).push(f),++I===n)return a}}}return a}function Og(t,n,e){let r=Ee(),i=[];for(let a=0,c;a<n.length;a++){c=n[a];for(let f=0;f<c.length;f++)r[c[f]]=1}if(e)for(let a=0,c;a<t.length;a++)c=t[a],r[c]&&(i.push(c),r[c]=0);else for(let a=0,c,f;a<t.result.length;a++)for(c=t.result[a],n=0;n<c.length;n++)f=c[n],r[f]&&((i[a]||(i[a]=[])).push(f),r[f]=0);return i}function _a(t,n,e,r){if(!t.length)return t;if(t.length===1)return t=t[0],t=e||t.length>n?n?t.slice(e,e+n):t.slice(e):t,r?kt.call(this,t):t;let i=[];for(let a=0,c,f;a<t.length;a++)if((c=t[a])&&(f=c.length)){if(e){if(e>=f){e-=f;continue}e<f&&(c=n?c.slice(e,e+n):c.slice(e),f=c.length,e=0)}if(f>n&&(c=c.slice(0,n),f=n),!i.length&&f>=n)return r?kt.call(this,c):c;if(i.push(c),n-=f,!n)break}return i=1<i.length?[].concat.apply([],i):i[0],r?kt.call(this,i):i}function wo(t,n,e){var r=e[0];if(r.then)return Promise.all(e).then(function(w){return t[n].apply(t,w)});if(r[0]&&r[0].index)return t[n].apply(t,r);r=[];let i=[],a=0,c=0,f,d,v;for(let w=0,C;w<e.length;w++)if(C=e[w]){let I;if(C.constructor===we)I=C.result;else if(C.constructor===Array)I=C;else if(a=C.limit||0,c=C.offset||0,v=C.suggest,d=C.resolve,f=C.enrich&&d,C.index)C.resolve=!1,I=C.index.search(C).result,C.resolve=d;else if(C.and)I=t.and(C.and);else if(C.or)I=t.or(C.or);else if(C.xor)I=t.xor(C.xor);else if(C.not)I=t.not(C.not);else continue;if(I.then)i.push(I);else if(I.length)r[w]=I;else if(!v&&(n==="and"||n==="xor")){r=[];break}}return{O:r,P:i,limit:a,offset:c,enrich:f,resolve:d,suggest:v}}we.prototype.or=function(){let{O:t,P:n,limit:e,offset:r,enrich:i,resolve:a}=wo(this,"or",arguments);return eh.call(this,t,n,e,r,i,a)};function eh(t,n,e,r,i,a){if(n.length){let c=this;return Promise.all(n).then(function(f){t=[];for(let d=0,v;d<f.length;d++)(v=f[d]).length&&(t[d]=v);return eh.call(c,t,[],e,r,i,a)})}return t.length&&(this.result.length&&t.push(this.result),2>t.length?this.result=t[0]:(this.result=Zl(t,e,r,!1,this.h),r=0)),a?this.resolve(e,r,i):this}we.prototype.and=function(){let t=this.result.length,n,e,r,i;if(!t){let a=arguments[0];a&&(t=!!a.suggest,i=a.resolve,n=a.limit,e=a.offset,r=a.enrich&&i)}if(t){let{O:a,P:c,limit:f,offset:d,enrich:v,resolve:w,suggest:C}=wo(this,"and",arguments);return th.call(this,a,c,f,d,v,w,C)}return i?this.resolve(n,e,r):this};function th(t,n,e,r,i,a,c){if(n.length){let f=this;return Promise.all(n).then(function(d){t=[];for(let v=0,w;v<d.length;v++)(w=d[v]).length&&(t[v]=w);return th.call(f,t,[],e,r,i,a,c)})}if(t.length)if(this.result.length&&t.unshift(this.result),2>t.length)this.result=t[0];else{if(n=Rg(t))return this.result=Ql(t,n,e,r,c,this.h,a),a?i?kt.call(this.index,this.result):this.result:this;this.result=[]}else c||(this.result=t);return a?this.resolve(e,r,i):this}we.prototype.xor=function(){let{O:t,P:n,limit:e,offset:r,enrich:i,resolve:a,suggest:c}=wo(this,"xor",arguments);return nh.call(this,t,n,e,r,i,a,c)};function nh(t,n,e,r,i,a,c){if(n.length){let f=this;return Promise.all(n).then(function(d){t=[];for(let v=0,w;v<d.length;v++)(w=d[v]).length&&(t[v]=w);return nh.call(f,t,[],e,r,i,a,c)})}if(t.length)if(this.result.length&&t.unshift(this.result),2>t.length)this.result=t[0];else return this.result=Dg.call(this,t,e,r,a,this.h),a?i?kt.call(this.index,this.result):this.result:this;else c||(this.result=t);return a?this.resolve(e,r,i):this}function Dg(t,n,e,r,i){let a=[],c=Ee(),f=0;for(let d=0,v;d<t.length;d++)if(v=t[d]){f<v.length&&(f=v.length);for(let w=0,C;w<v.length;w++)if(C=v[w])for(let I=0,N;I<C.length;I++)N=C[I],c[N]=c[N]?2:1}for(let d=0,v,w=0;d<f;d++)for(let C=0,I;C<t.length;C++)if((I=t[C])&&(v=I[d])){for(let N=0,M;N<v.length;N++)if(M=v[N],c[M]===1)if(e)e--;else if(r){if(a.push(M),a.length===n)return a}else{let j=d+(C?i:0);if(a[j]||(a[j]=[]),a[j].push(M),++w===n)return a}}return a}we.prototype.not=function(){let{O:t,P:n,limit:e,offset:r,enrich:i,resolve:a,suggest:c}=wo(this,"not",arguments);return rh.call(this,t,n,e,r,i,a,c)};function rh(t,n,e,r,i,a,c){if(n.length){let f=this;return Promise.all(n).then(function(d){t=[];for(let v=0,w;v<d.length;v++)(w=d[v]).length&&(t[v]=w);return rh.call(f,t,[],e,r,i,a,c)})}if(t.length&&this.result.length)this.result=Pg.call(this,t,e,r,a);else if(a)return this.resolve(e,r,i);return a?i?kt.call(this.index,this.result):this.result:this}function Pg(t,n,e,r){let i=[];t=new Set(t.flat().flat());for(let a=0,c,f=0;a<this.result.length;a++)if(c=this.result[a]){for(let d=0,v;d<c.length;d++)if(v=c[d],!t.has(v)){if(e)e--;else if(r){if(i.push(v),i.length===n)return i}else if(i[a]||(i[a]=[]),i[a].push(v),++f===n)return i}}return i}function we(t){if(!this||this.constructor!==we)return new we(t);if(t&&t.index)return t.resolve=!1,this.index=t.index,this.h=t.boost||0,this.result=t.index.search(t).result,this;this.index=null,this.result=t||[],this.h=0}we.prototype.limit=function(t){if(this.result.length){let n=[];for(let e=0,r;e<this.result.length;e++)if(r=this.result[e])if(r.length<=t){if(n[e]=r,t-=r.length,!t)break}else{n[e]=r.slice(0,t);break}this.result=n}return this};we.prototype.offset=function(t){if(this.result.length){let n=[];for(let e=0,r;e<this.result.length;e++)(r=this.result[e])&&(r.length<=t?t-=r.length:(n[e]=r.slice(t),t=0));this.result=n}return this};we.prototype.boost=function(t){return this.h+=t,this};we.prototype.resolve=function(t,n,e){let r=this.result,i=this.index;return this.result=this.index=null,r.length?(typeof t=="object"&&(e=t.enrich,n=t.offset,t=t.limit),_a.call(i,r,t||100,n,e)):r};Ee();an.prototype.search=function(t,n,e,r){e||(!n&&Kr(t)?(e=t,t=""):Kr(n)&&(e=n,n=0));let i=[];var a=[];let c;var f;let d,v,w,C=0;var I=!0;let N;if(e){e.constructor===Array&&(e={index:e}),t=e.query||t,c=e.pluck,d=e.merge,v=c||e.field||(v=e.index)&&(v.index?null:v),w=this.tag&&e.tag;var M=e.suggest;I=e.resolve!==!1,I||c||!(v=v||this.field)||(qe(v)?c=v:(v.constructor===Array&&v.length===1&&(v=v[0]),c=v.field||v.index)),N=(f=this.store&&e.enrich&&I)&&e.highlight,n=e.limit||n;var j=e.offset||0;if(n||(n=100),w&&(!this.db||!r)){w.constructor!==Array&&(w=[w]);var U=[];for(let de=0,ne;de<w.length;de++)if(ne=w[de],ne.field&&ne.tag){var q=ne.tag;if(q.constructor===Array)for(var Z=0;Z<q.length;Z++)U.push(ne.field,q[Z]);else U.push(ne.field,q)}else{q=Object.keys(ne);for(let ve=0,Se,ge;ve<q.length;ve++)if(Se=q[ve],ge=ne[Se],ge.constructor===Array)for(Z=0;Z<ge.length;Z++)U.push(Se,ge[Z]);else U.push(Se,ge)}if(w=U,!t){if(I=[],U.length)for(a=0;a<U.length;a+=2){if(this.db){if(M=this.index.get(U[a]),!M)continue;I.push(M=M.db.tag(U[a+1],n,j,f))}else M=Mg.call(this,U[a],U[a+1],n,j,f);i.push({field:U[a],tag:U[a+1],result:M})}return I.length?Promise.all(I).then(function(de){for(let ne=0;ne<de.length;ne++)i[ne].result=de[ne];return i}):i}}v&&v.constructor!==Array&&(v=[v])}v||(v=this.field),U=!r&&(this.worker||this.db)&&[];let ae;for(let de=0,ne,ve,Se;de<v.length;de++){if(ve=v[de],this.db&&this.tag&&!this.F[de])continue;let ge;if(qe(ve)||(ge=ve,ve=ge.field,t=ge.query||t,n=ge.limit||n,j=ge.offset||j,M=ge.suggest||M,f=this.store&&(ge.enrich||f)),r)ne=r[de];else if(q=ge||e,Z=this.index.get(ve),w&&(this.db&&(q.tag=w,ae=Z.db.support_tag_search,q.field=v),ae||(q.enrich=!1)),U){U[de]=Z.search(t,n,q),q&&f&&(q.enrich=f);continue}else ne=Z.search(t,n,q),q&&f&&(q.enrich=f);if(Se=ne&&(I?ne.length:ne.result.length),w&&Se){if(q=[],Z=0,this.db&&r){if(!ae)for(let Ye=v.length;Ye<r.length;Ye++){let ke=r[Ye];if(ke&&ke.length)Z++,q.push(ke);else if(!M)return I?i:new we(i)}}else for(let Ye=0,ke,Eo;Ye<w.length;Ye+=2){if(ke=this.tag.get(w[Ye]),!ke){if(M)continue;return I?i:new we(i)}if(Eo=(ke=ke&&ke.get(w[Ye+1]))&&ke.length)Z++,q.push(ke);else if(!M)return I?i:new we(i)}if(Z){if(ne=Og(ne,q,I),Se=ne.length,!Se&&!M)return I?ne:new we(ne);Z--}}if(Se)a[C]=ve,i.push(ne),C++;else if(v.length===1)return I?i:new we(i)}if(U){if(this.db&&w&&w.length&&!ae)for(f=0;f<w.length;f+=2){if(a=this.index.get(w[f]),!a){if(M)continue;return I?i:new we(i)}U.push(a.db.tag(w[f+1],n,j,!1))}let de=this;return Promise.all(U).then(function(ne){return ne.length?de.search(t,n,e,ne):ne})}if(!C)return I?i:new we(i);if(c&&(!f||!this.store))return i[0];for(U=[],j=0;j<a.length;j++){if(M=i[j],f&&M.length&&typeof M[0].doc>"u"&&(this.db?U.push(M=this.index.get(this.field[0]).db.enrich(M)):M=kt.call(this,M)),c)return I?N?ma(t,M,this.index,c,N):M:new we(M);i[j]={field:a[j],result:M}}if(f&&this.db&&U.length){let de=this;return Promise.all(U).then(function(ne){for(let ve=0;ve<ne.length;ve++)i[ve].result=ne[ve];return d?Ul(i):N?ma(t,i,de.index,c,N):i})}return d?Ul(i):N?ma(t,i,this.index,c,N):i};function ma(t,n,e,r,i){let a,c;for(let d=0,v,w,C;d<n.length;d++){let I;if(r)I=n,C=r;else{var f=n[d];if(C=f.field,!C)continue;I=f.result}w=e.get(C),v=w.encoder,f=w.tokenize,v!==a&&(a=v,c=a.encode(t));for(let N=0;N<I.length;N++){let M="",j=Gr(I[N].doc,C).split(/\s+/);for(let U=0,q,Z;U<j.length;U++){q=j[U],Z=v.encode(q),Z=1<Z.length?Z.join(" "):Z[0];let ae;if(Z&&q)for(let de=0,ne;de<c.length;de++)if(ne=c[de],f==="strict"){if(Z===ne){M+=(M?" ":"")+i.replace("$1",q),ae=!0;break}}else{let ve=Z.indexOf(ne);if(-1<ve){M+=(M?" ":"")+q.substring(0,ve)+i.replace("$1",q.substring(ve,ve+ne.length))+q.substring(ve+ne.length),ae=!0;break}}ae||(M+=(M?" ":"")+j[U])}I[N].highlight=M}if(r)break}return n}function Ul(t){let n=[],e=Ee();for(let r=0,i,a;r<t.length;r++){i=t[r],a=i.result;for(let c=0,f,d,v;c<a.length;c++)d=a[c],typeof d!="object"&&(d={id:d}),f=d.id,(v=e[f])?v.push(i.field):(d.field=e[f]=[i.field],n.push(d))}return n}function Mg(t,n,e,r,i){if(t=this.tag.get(t),!t)return[];if((n=(t=t&&t.get(n))&&t.length-r)&&0<n)return(n>e||r)&&(t=t.slice(r,r+e)),i&&(t=kt.call(this,t)),t}function kt(t){if(!this||!this.store)return t;let n=Array(t.length);for(let e=0,r;e<t.length;e++)r=t[e],n[e]={id:r,doc:this.store.get(r)};return n}function an(t){if(!this||this.constructor!==an)return new an(t);let n=t.document||t.doc||t,e,r;if(this.F=[],this.field=[],this.J=[],this.key=(e=n.key||n.id)&&vo(e,this.J)||"id",(r=t.keystore||0)&&(this.keystore=r),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?r?new Xe(r):new Set:r?new st(r):new Map,this.C=(e=n.store||null)&&e&&e!==!0&&[],this.store=e&&(r?new st(r):new Map),this.cache=(e=t.cache||null)&&new un(e),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=kg.call(this,t,n),this.tag=null,(e=n.tag)&&(typeof e=="string"&&(e=[e]),e.length)){this.tag=new Map,this.D=[],this.R=[];for(let i=0,a,c;i<e.length;i++){if(a=e[i],c=a.field||a,!c)throw Error("The tag field from the document descriptor is undefined.");a.custom?this.D[i]=a.custom:(this.D[i]=vo(c,this.J),a.filter&&(typeof this.D[i]=="string"&&(this.D[i]=new String(this.D[i])),this.D[i].I=a.filter)),this.R[i]=c,this.tag.set(c,new Map)}}if(this.worker){this.fastupdate=!1;let i=[];for(let a of this.index.values())a.then&&i.push(a);if(i.length){let a=this;return Promise.all(i).then(function(c){let f=new Map,d=0;for(let w of a.index.entries()){let C=w[0];var v=w[1];if(v.then){v=i[d].encoder||{};let I=f.get(v);I||(I=v.encode?v:new Vr(v),f.set(v,I)),v=c[d],v.encoder=I,a.index.set(C,v),d++}}return a})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}W=an.prototype;W.mount=function(t){let n=this.field;if(this.tag)for(let a=0,c;a<this.R.length;a++){c=this.R[a];var e=void 0;this.index.set(c,e=new at({},this.reg)),n===this.field&&(n=n.slice(0)),n.push(c),e.tag=this.tag.get(c)}e=[];let r={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let a=0,c,f;a<n.length;a++){r.field=f=n[a],c=this.index.get(f);let d=new t.constructor(t.id,r);d.id=t.id,e[a]=d.mount(c),c.document=!0,a?c.bypass=!0:c.store=this.store}let i=this;return this.db=Promise.all(e).then(function(){i.db=!0})};W.commit=async function(t,n){let e=[];for(let r of this.index.values())e.push(r.commit(t,n));await Promise.all(e),this.reg.clear()};W.destroy=function(){let t=[];for(let n of this.index.values())t.push(n.destroy());return Promise.all(t)};function kg(t,n){let e=new Map,r=n.index||n.field||n;qe(r)&&(r=[r]);for(let i=0,a,c;i<r.length;i++){if(a=r[i],qe(a)||(c=a,a=a.field),c=Kr(c)?Object.assign({},t,c):t,this.worker){let f=new Hr(c);f.encoder=c.encoder,e.set(a,f)}this.worker||e.set(a,new at(c,this.reg)),c.custom?this.F[i]=c.custom:(this.F[i]=vo(a,this.J),c.filter&&(typeof this.F[i]=="string"&&(this.F[i]=new String(this.F[i])),this.F[i].I=c.filter)),this.field[i]=a}if(this.C){t=n.store,qe(t)&&(t=[t]);for(let i=0,a,c;i<t.length;i++)a=t[i],c=a.field||a,a.custom?(this.C[i]=a.custom,a.custom.V=c):(this.C[i]=vo(c,this.J),a.filter&&(typeof this.C[i]=="string"&&(this.C[i]=new String(this.C[i])),this.C[i].I=a.filter))}return e}function vo(t,n){let e=t.split(":"),r=0;for(let i=0;i<e.length;i++)t=e[i],t[t.length-1]==="]"&&(t=t.substring(0,t.length-2))&&(n[r]=!0),t&&(e[r++]=t);return r<e.length&&(e.length=r),1<r?e:e[0]}W.append=function(t,n){return this.add(t,n,!0)};W.update=function(t,n){return this.remove(t).add(t,n)};W.remove=function(t){Kr(t)&&(t=Gr(t,this.key));for(var n of this.index.values())n.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let e of this.tag.values())for(let r of e){n=r[0];let i=r[1],a=i.indexOf(t);-1<a&&(1<i.length?i.splice(a,1):e.delete(n))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this};W.clear=function(){let t=[];for(let n of this.index.values()){let e=n.clear();e.then&&t.push(e)}if(this.tag)for(let n of this.tag.values())n.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this};W.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)};W.cleanup=function(){for(let t of this.index.values())t.cleanup();return this};W.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(n){return n[0]&&n[0].doc||null}):this.store.get(t)||null};W.set=function(t,n){return typeof t=="object"&&(n=t,t=Gr(n,this.key)),this.store.set(t,n),this};W.searchCache=ih;W.export=function(t,n,e=0,r=0){if(e<this.field.length){let c=this.field[e];if((n=this.index.get(c).export(t,c,e,r=1))&&n.then){let f=this;return n.then(function(){return f.export(t,c,e+1)})}return this.export(t,c,e+1)}let i,a;switch(r){case 0:i="reg",a=ql(this.reg),n=null;break;case 1:i="tag",a=this.tag&&Hl(this.tag,this.reg.size),n=null;break;case 2:i="doc",a=this.store&&Ca(this.store),n=null;break;default:return}return mo.call(this,t,n,i,a,e,r)};W.import=function(t,n){var e=t.split(".");e[e.length-1]==="json"&&e.pop();let r=2<e.length?e[0]:"";if(e=2<e.length?e[2]:e[1],this.worker&&r)return this.index.get(r).import(t);if(n){if(typeof n=="string"&&(n=JSON.parse(n)),r)return this.index.get(r).import(e,n);switch(e){case"reg":this.fastupdate=!1,this.reg=Xl(n,this.reg);for(let i=0,a;i<this.field.length;i++)a=this.index.get(this.field[i]),a.fastupdate=!1,a.reg=this.reg;if(this.worker){n=[];for(let i of this.index.values())n.push(i.import(t));return Promise.all(n)}break;case"tag":this.tag=Wl(n,this.tag);break;case"doc":this.store=Ia(n,this.store)}}};Ta(an.prototype);function ih(t,n,e){let r=(typeof t=="object"?""+t.query:t).toLowerCase();this.cache||(this.cache=new un);let i=this.cache.get(r);if(!i){if(i=this.search(t,n,e),i.then){let a=this;i.then(function(c){return a.cache.set(r,c),c})}this.cache.set(r,i)}return i}function un(t){this.limit=t&&t!==!0?t:1e3,this.cache=new Map,this.h=""}un.prototype.set=function(t,n){this.cache.set(this.h=t,n),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)};un.prototype.get=function(t){let n=this.cache.get(t);return n&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,n)),n};un.prototype.remove=function(t){for(let n of this.cache){let e=n[0];n[1].includes(t)&&this.cache.delete(e)}};un.prototype.clear=function(){this.cache.clear(),this.h=""};var Bl={normalize:!1,numeric:!1,dedupe:!1},fo={},va=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),Fl=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),zl=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],$l={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,\u00DF:2,d:3,t:3,l:4,m:5,n:5,r:6},Ng={Exact:Bl,Default:fo,Normalize:fo,LatinBalance:{mapper:va},LatinAdvanced:{mapper:va,matcher:Fl,replacer:zl},LatinExtra:{mapper:va,replacer:zl.concat([/(?!^)[aeo]/g,""]),matcher:Fl},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let e=0;e<t.length;e++){var n=t[e];let r=n.charAt(0),i=$l[r];for(let a=1,c;a<n.length&&(c=n.charAt(a),c==="h"||c==="w"||!(c=$l[c])||c===i||(r+=c,i=c,r.length!==4));a++);t[e]=r}}},CJK:{split:""},LatinExact:Bl,LatinDefault:fo,LatinSimple:fo};at.prototype.remove=function(t,n){let e=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(e){if(this.fastupdate){for(let r=0,i;r<e.length;r++)if(i=e[r])if(2>i.length)i.pop();else{let a=i.indexOf(t);a===e.length-1?i.pop():i.splice(a,1)}}else Wr(this.map,t),this.depth&&Wr(this.ctx,t);n||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.T&&oh(this)),this.cache&&this.cache.remove(t),this};function Wr(t,n){let e=0;var r=typeof n>"u";if(t.constructor===Array){for(let i=0,a,c;i<t.length;i++)if((a=t[i])&&a.length)if(r)e++;else if(c=a.indexOf(n),0<=c){1<a.length?(a.splice(c,1),e++):delete t[i];break}else e++}else for(let i of t.entries()){r=i[0];let a=Wr(i[1],n);a?e+=a:t.delete(r)}return e}var Lg={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};at.prototype.add=function(t,n,e,r){if(n&&(t||t===0)){if(!r&&!e&&this.reg.has(t))return this.update(t,n);r=this.depth,n=this.encoder.encode(n,!r);let v=n.length;if(v){let w=Ee(),C=Ee(),I=this.resolution;for(let N=0;N<v;N++){let M=n[this.rtl?v-1-N:N];var i=M.length;if(i&&(r||!C[M])){var a=this.score?this.score(n,M,N,null,0):po(I,v,N),c="";switch(this.tokenize){case"full":if(2<i){for(let j=0,U;j<i;j++)for(a=i;a>j;a--){c=M.substring(j,a),U=this.rtl?i-1-j:j;var f=this.score?this.score(n,M,N,c,U):po(I,v,N,i,U);$r(this,C,c,f,t,e)}break}case"bidirectional":case"reverse":if(1<i){for(f=i-1;0<f;f--){c=M[this.rtl?i-1-f:f]+c;var d=this.score?this.score(n,M,N,c,f):po(I,v,N,i,f);$r(this,C,c,d,t,e)}c=""}case"forward":if(1<i){for(f=0;f<i;f++)c+=M[this.rtl?i-1-f:f],$r(this,C,c,a,t,e);break}default:if($r(this,C,M,a,t,e),r&&1<v&&N<v-1){for(i=Ee(),c=this.U,a=M,f=Math.min(r+1,this.rtl?N+1:v-N),i[a]=1,d=1;d<f;d++)if((M=n[this.rtl?v-1-N-d:N+d])&&!i[M]){i[M]=1;let j=this.score?this.score(n,a,N,M,d-1):po(c+(v/2>c?0:1),v,N,f-1,d-1),U=this.bidirectional&&M>a;$r(this,w,U?a:M,j,t,e,U?M:a)}}}}}this.fastupdate||this.reg.add(t)}else n=""}return this.db&&(n||this.commit_task.push({del:t}),this.T&&oh(this)),this};function $r(t,n,e,r,i,a,c){let f=c?t.ctx:t.map,d;if((!n[e]||c&&!(d=n[e])[c])&&(c?(n=d||(n[e]=Ee()),n[c]=1,(d=f.get(c))?f=d:f.set(c,f=new Map)):n[e]=1,(d=f.get(e))?f=d:f.set(e,f=d=[]),f=f[r]||(f[r]=[]),!a||!f.includes(i))){if(f.length===2**31-1){if(n=new sn(f),t.fastupdate)for(let v of t.reg.values())v.includes(f)&&(v[v.indexOf(f)]=n);d[r]=f=n}f.push(i),t.fastupdate&&((r=t.reg.get(i))?r.push(f):t.reg.set(i,[f]))}}function po(t,n,e,r,i){return e&&1<t?n+(r||0)<=t?e+(i||0):(t-1)/(n+(r||0))*(e+(i||0))+1|0:0}at.prototype.search=function(t,n,e){e||(n||typeof t!="object"?typeof n=="object"&&(e=n,n=0):(e=t,t=""));let r=[],i,a,c,f=0,d,v,w,C,I;e?(t=e.query||t,n=e.limit||n,f=e.offset||0,a=e.context,c=e.suggest,I=(d=e.resolve!==!1)&&e.enrich,w=e.boost,C=e.resolution,v=this.db&&e.tag):d=this.resolve,a=this.depth&&a!==!1;let N=this.encoder.encode(t,!a);if(i=N.length,n=n||(d?100:0),i===1)return Gl.call(this,N[0],"",n,f,d,I,v);if(i===2&&a&&!c)return Gl.call(this,N[1],N[0],n,f,d,I,v);let M=Ee(),j=0,U;if(a&&(U=N[0],j=1),C||C===0||(C=U?this.U:this.resolution),this.db){if(this.db.search&&(t=this.db.search(this,N,n,f,c,d,I,v),t!==!1))return t;let q=this;return async function(){for(let Z,ae;j<i;j++){if((ae=N[j])&&!M[ae]){if(M[ae]=1,Z=await Ra(q,ae,U,0,0,!1,!1),Z=Vl(Z,r,c,C)){r=Z;break}U&&(c&&Z&&r.length||(U=ae))}c&&U&&j===i-1&&!r.length&&(C=q.resolution,U="",j=-1,M=Ee())}return Kl(r,C,n,f,c,w,d)}()}for(let q,Z;j<i;j++){if((Z=N[j])&&!M[Z]){if(M[Z]=1,q=Ra(this,Z,U,0,0,!1,!1),q=Vl(q,r,c,C)){r=q;break}U&&(c&&q&&r.length||(U=Z))}c&&U&&j===i-1&&!r.length&&(C=this.resolution,U="",j=-1,M=Ee())}return Kl(r,C,n,f,c,w,d)};function Kl(t,n,e,r,i,a,c){let f=t.length,d=t;if(1<f)d=Ql(t,n,e,r,i,a,c);else if(f===1)return c?_a.call(null,t[0],e,r):new we(t[0]);return c?d:new we(d)}function Gl(t,n,e,r,i,a,c){return t=Ra(this,t,n,e,r,i,a,c),this.db?t.then(function(f){return i?f||[]:new we(f)}):t&&t.length?i?_a.call(this,t,e,r):new we(t):i?[]:new we}function Vl(t,n,e,r){let i=[];if(t&&t.length){if(t.length<=r){n.push(t);return}for(let a=0,c;a<r;a++)(c=t[a])&&(i[a]=c);if(i.length){n.push(i);return}}if(!e)return i}function Ra(t,n,e,r,i,a,c,f){let d;return e&&(d=t.bidirectional&&n>e)&&(d=e,e=n,n=d),t.db?t.db.get(n,e,r,i,a,c,f):(t=e?(t=t.ctx.get(e))&&t.get(n):t.map.get(n),t)}function at(t,n){if(!this||this.constructor!==at)return new at(t);if(t){var e=qe(t)?t:t.preset;e&&(t=Object.assign({},Lg[e],t))}else t={};e=t.context;let r=e===!0?{depth:1}:e||{},i=qe(t.encoder)?Ng[t.encoder]:t.encode||t.encoder||{};this.encoder=i.encode?i:typeof i=="object"?new Vr(i):{encode:i},this.resolution=t.resolution||9,this.tokenize=e=(e=t.tokenize)&&e!=="default"&&e!=="exact"&&e||"strict",this.depth=e==="strict"&&r.depth||0,this.bidirectional=r.bidirectional!==!1,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(e=t.keystore||0)&&(this.keystore=e),this.map=e?new st(e):new Map,this.ctx=e?new st(e):new Map,this.reg=n||(this.fastupdate?e?new st(e):new Map:e?new Xe(e):new Set),this.U=r.resolution||3,this.rtl=i.rtl||t.rtl||!1,this.cache=(e=t.cache||null)&&new un(e),this.resolve=t.resolve!==!1,(e=t.db)&&(this.db=this.mount(e)),this.T=t.commit!==!1,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}W=at.prototype;W.mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)};W.commit=function(t,n){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this,t,n)};W.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()};function oh(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t,void 0,void 0)},1))}W.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db&&(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[{clear:!0}]),this};W.append=function(t,n){return this.add(t,n,!0)};W.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)};W.update=function(t,n){let e=this,r=this.remove(t);return r&&r.then?r.then(()=>e.add(t,n)):this.add(t,n)};W.cleanup=function(){return this.fastupdate?(Wr(this.map),this.depth&&Wr(this.ctx),this):this};W.searchCache=ih;W.export=function(t,n,e=0,r=0){let i,a;switch(r){case 0:i="reg",a=ql(this.reg);break;case 1:i="cfg",a=null;break;case 2:i="map",a=Ca(this.map,this.reg.size);break;case 3:i="ctx",a=Hl(this.ctx,this.reg.size);break;default:return}return mo.call(this,t,n,i,a,e,r)};W.import=function(t,n){if(n)switch(typeof n=="string"&&(n=JSON.parse(n)),t=t.split("."),t[t.length-1]==="json"&&t.pop(),t.length===3&&t.shift(),t=1<t.length?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=Xl(n,this.reg);break;case"map":this.map=Ia(n,this.map);break;case"ctx":this.ctx=Wl(n,this.ctx)}};W.serialize=function(t=!0){let n="",e="",r="";if(this.reg.size){let a;for(var i of this.reg.keys())a||(a=typeof i),n+=(n?",":"")+(a==="string"?'"'+i+'"':i);n="index.reg=new Set(["+n+"]);",e=Ll(this.map,a),e="index.map=new Map(["+e+"]);";for(let c of this.ctx.entries()){i=c[0];let f=Ll(c[1],a);f="new Map(["+f+"])",f='["'+i+'",'+f+"]",r+=(r?",":"")+f}r="index.ctx=new Map(["+r+"]);"}return t?"function inject(index){"+n+e+r+"}":n+e+r};Ta(at.prototype);var sh=typeof window<"u"&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),yo=["map","ctx","tag","reg","cfg"],rn=Ee();function Sa(t,n={}){if(!this||this.constructor!==Sa)return new Sa(t,n);typeof t=="object"&&(n=t,t=t.name),t||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(t?":"+t.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=n.field?n.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=n.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}W=Sa.prototype;W.mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())};W.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist(),rn[t.id]||(rn[t.id]=[]),rn[t.id].push(t.field);let n=sh.open(t.id,1);return n.onupgradeneeded=function(){let e=t.db=this.result;for(let r=0,i;r<yo.length;r++){i=yo[r];for(let a=0,c;a<rn[t.id].length;a++)c=rn[t.id][a],e.objectStoreNames.contains(i+(i!=="reg"&&c?":"+c:""))||e.createObjectStore(i+(i!=="reg"&&c?":"+c:""))}},t.db=Lt(n,function(e){t.db=e,t.db.onversionchange=function(){t.close()}})};W.close=function(){this.db&&this.db.close(),this.db=null};W.destroy=function(){let t=sh.deleteDatabase(this.id);return Lt(t)};W.clear=function(){let t=[];for(let e=0,r;e<yo.length;e++){r=yo[e];for(let i=0,a;i<rn[this.id].length;i++)a=rn[this.id][i],t.push(r+(r!=="reg"&&a?":"+a:""))}let n=this.db.transaction(t,"readwrite");for(let e=0;e<t.length;e++)n.objectStore(t[e]).clear();return Lt(n)};W.get=function(t,n,e=0,r=0,i=!0,a=!1){t=this.db.transaction((n?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((n?"ctx":"map")+(this.field?":"+this.field:"")).get(n?n+":"+t:t);let c=this;return Lt(t).then(function(f){let d=[];if(!f||!f.length)return d;if(i){if(!e&&!r&&f.length===1)return f[0];for(let v=0,w;v<f.length;v++)if((w=f[v])&&w.length){if(r>=w.length){r-=w.length;continue}let C=e?r+Math.min(w.length-r,e):w.length;for(let I=r;I<C;I++)d.push(w[I]);if(r=0,d.length===e)break}return a?c.enrich(d):d}return f})};W.tag=function(t,n=0,e=0,r=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);let i=this;return Lt(t).then(function(a){return!a||!a.length||e>=a.length?[]:!n&&!e?a:(a=a.slice(e,e+n),r?i.enrich(a):a)})};W.enrich=function(t){typeof t!="object"&&(t=[t]);let n=this.db.transaction("reg","readonly").objectStore("reg"),e=[];for(let r=0;r<t.length;r++)e[r]=Lt(n.get(t[r]));return Promise.all(e).then(function(r){for(let i=0;i<r.length;i++)r[i]={id:t[i],doc:r[i]?JSON.parse(r[i]):null};return r})};W.has=function(t){return t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t),Lt(t).then(function(n){return!!n})};W.search=null;W.info=function(){};W.transaction=function(t,n,e){t+=t!=="reg"&&this.field?":"+this.field:"";let r=this.h[t+":"+n];if(r)return e.call(this,r);let i=this.db.transaction(t,n);this.h[t+":"+n]=r=i.objectStore(t);let a=e.call(this,r);return this.h[t+":"+n]=null,Lt(i).finally(function(){return i=r=null,a})};W.commit=async function(t,n,e){if(n)await this.clear(),t.commit_task=[];else{let r=t.commit_task;t.commit_task=[];for(let i=0,a;i<r.length;i++)if(a=r[i],a.clear){await this.clear(),n=!0;break}else r[i]=a.del;n||(e||(r=r.concat(Eg(t.reg))),r.length&&await this.remove(r))}t.reg.size&&(await this.transaction("map","readwrite",function(r){for(let i of t.map){let a=i[0],c=i[1];c.length&&(n?r.put(c,a):r.get(a).onsuccess=function(){let f=this.result;var d;if(f&&f.length){let v=Math.max(f.length,c.length);for(let w=0,C,I;w<v;w++)if((I=c[w])&&I.length){if((C=f[w])&&C.length)for(d=0;d<I.length;d++)C.push(I[d]);else f[w]=I;d=1}}else f=c,d=1;d&&r.put(f,a)})}}),await this.transaction("ctx","readwrite",function(r){for(let i of t.ctx){let a=i[0],c=i[1];for(let f of c){let d=f[0],v=f[1];v.length&&(n?r.put(v,a+":"+d):r.get(a+":"+d).onsuccess=function(){let w=this.result;var C;if(w&&w.length){let I=Math.max(w.length,v.length);for(let N=0,M,j;N<I;N++)if((j=v[N])&&j.length){if((M=w[N])&&M.length)for(C=0;C<j.length;C++)M.push(j[C]);else w[N]=j;C=1}}else w=v,C=1;C&&r.put(w,a+":"+d)})}}}),t.store?await this.transaction("reg","readwrite",function(r){for(let i of t.store){let a=i[0],c=i[1];r.put(typeof c=="object"?JSON.stringify(c):1,a)}}):t.bypass||await this.transaction("reg","readwrite",function(r){for(let i of t.reg.keys())r.put(1,i)}),t.tag&&await this.transaction("tag","readwrite",function(r){for(let i of t.tag){let a=i[0],c=i[1];c.length&&(r.get(a).onsuccess=function(){let f=this.result;f=f&&f.length?f.concat(c):c,r.put(f,a)})}}),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())};function ya(t,n,e){let r=t.value,i,a=0;for(let c=0,f;c<r.length;c++){if(f=e?r:r[c]){for(let d=0,v,w;d<n.length;d++)if(w=n[d],v=f.indexOf(w),0<=v)if(i=1,1<f.length)f.splice(v,1);else{r[c]=[];break}a+=f.length}if(e)break}a?i&&t.update(r):t.delete(),t.continue()}W.remove=function(t){return typeof t!="object"&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(n){n.openCursor().onsuccess=function(){let e=this.result;e&&ya(e,t)}}),this.transaction("ctx","readwrite",function(n){n.openCursor().onsuccess=function(){let e=this.result;e&&ya(e,t)}}),this.transaction("tag","readwrite",function(n){n.openCursor().onsuccess=function(){let e=this.result;e&&ya(e,t,!0)}}),this.transaction("reg","readwrite",function(n){for(let e=0;e<t.length;e++)n.delete(t[e])})])};function Lt(t,n){return new Promise((e,r)=>{t.onsuccess=t.oncomplete=function(){n&&n(this.result),n=null,e(this.result)},t.onerror=t.onblocked=r,t=null})}var ah=an;var bo=class t{constructor(){}indices={};async initIndex(n,e,r){this.indices[e]=this.createIndex(r)}async search(n,e,r){let i=this.indices[n];if(i){let a=await i.searchAsync(e,G({limit:10,enrich:!0},r));return console.log({results:a,index:i,table:n}),a.flatMap(c=>G({},c))}}getIndex(n){return this.indices[n]}async addToIndex(n,e){let r=this.indices[n];r&&r.add(e)}async importIndex(n,e){try{let r=this.indices[n],i=JSON.parse(e);if(r&&i)for(let a of i)await r.import(a.key,a.data)}catch(r){throw new Error(`Error importing index for table ${n}: ${r}`)}}async exportIndex(n){let e=this.indices[n];if(!e)throw new Error(`No index found for table ${n}`);let r=[];return await e.export((i,a)=>{r.push({key:i.toString(),data:a})}),JSON.stringify(r)}async removeFromIndex(n,e){let r=this.indices[n];r&&r.remove(e)}async clearIndex(n){this.indices[n]=this.createIndex(["name","uuid"])}async removeIndex(n){this.indices[n]&&delete this.indices[n]}createIndex(n){return new ah({tokenize:"forward",cache:!0,document:{id:"uuid",index:n}})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})};var uh=class t extends Pl{constructor(e,r){super(r);this.flexsearchIndexService=e;let i=new Set;for(let a of Ml){if(i.has(a.version))throw new Error(`Duplicate migration version: ${a.version}`);i.add(a.version);let c=this.version(a.version).stores(a.schema);a.update&&c.upgrade(a.update),this.logger.log(`Migration ${a.version} applied`)}setTimeout(()=>{this.initIndexes()})}_loggerClass=H(co);logger=this._loggerClass.withContext({color:"#7f81fb",label:"IndexDB"});cacheLogger=this._loggerClass.withContext({color:"#7fc3fb",label:"IndexDB:Cache"});indexLogger=this._loggerClass.withContext({color:"#7fdb7f",label:"IndexDB:Index"});_cache=new Map;#e={invoices:["uuid","name","prefix","invoice_number","credential_from_string","credential_to_string"]};async initIndexes(){await Promise.all([this.initIndex("productsStore"),this.initIndex("recipesStore"),this.initIndex("categoryProductsStore"),this.initIndex("categoryRecipesStore"),this.initIndex("tags"),this.initIndex("taxes"),this.initIndex("documentation"),this.initIndex("settings"),this.initIndex("invoices"),this.initIndex("credentials")]),this.logger.log("All indexes initialized successfully")}async initIndex(e){await this.flexsearchIndexService.initIndex(this.getStore(e),e,this.#e[e]||["name","uuid"]);let r=await this.getOne("indicesStore",e);r?await this.flexsearchIndexService.importIndex(e,r.indexData):(await this.getAll(e).then(async i=>{for(let a of i)await this.flexsearchIndexService.addToIndex(e,a)}),await this.saveIndex(e))}async saveIndex(e){try{if(this.flexsearchIndexService.getIndex(e)){let i=await this.flexsearchIndexService.exportIndex(e);this.indexLogger.log(e,"Saving index data:",{data:i}),await this.replaceData("indicesStore",e,{table:e,indexData:i})}else{this.indexLogger.error("No index data found for table:",e);return}}catch(r){throw console.error("Error saving index:",r),r}}async getOne(e,r,i=!0){if(i){let c=this._getCache(e,r);if(c)return this.cacheLogger.log(e,"Got one item from cache:",{uuid:r,cache:c}),c}let a=await this[e].get(r);return this.logger.log(e,"Got one item from store:",{response:a}),i&&this._putCache(e,r,a),a}async getOneWithRelations(e,r){let i=await this.getOne(e,r,!1);if(!i)return Promise.resolve({data:null,relations:{}});let a={},c=await this._collectRelations(i,a);return this._putRelationsInto(i,c),this.logger.log(e,"Got one item from store with all relations:",{item:i,relations:a}),{data:i,relations:a}}async getMany(e,r){let a=await this[e].where("uuid").anyOf(r).toArray();return this.logger.log(e,"Got many:",{result:a}),a}async getManyWithRelations(e,r){let a=await this[e].where("uuid").anyOf(r).toArray(),c={};for(let f of a){let d=await this._collectRelations(f,c);this._putRelationsInto(f,d)}return{data:a,relations:c}}async getAll(e){return this[e].toArray()}async getAllWithRelations(e){let r=await this.getAll(e),i={};for(let a of r){let c=await this._collectRelations(a,i);this._putRelationsInto(a,c)}return{data:r,relations:i}}async addData(e,r,i){try{let a=i||this._generateUuid(),c=Ie(G({},r),{uuid:a});return await this[e].put(c),e==="indicesStore"||(await this.flexsearchIndexService.addToIndex(e,c),await this.saveIndex(e),this._putCache(e,a,r)),a}catch(a){throw a}}async replaceData(e,r,i){let a=Ie(G({},i),{uuid:r}),c=this._getCache(e,r);c&&(this.cacheLogger.log(e,"Flushing cache for item:",{uuid:r,cache:c}),this._removeCache(e,r)),await this[e].put(a),e!=="indicesStore"&&(await this.flexsearchIndexService.addToIndex(e,a),await this.saveIndex(e),this._putCache(e,r,i))}async replaceManyData(e,r){let i=r.map(a=>Ie(G({},a),{uuid:a.uuid||this._generateUuid()}));if(await this[e].bulkPut(i),e!=="indicesStore"){for(let a of i)await this.flexsearchIndexService.addToIndex(e,a),this._putCache(e,a.uuid,a);await this.saveIndex(e)}}async search(e,r,i){let a=await this[e].where(r).equals(i).toArray();return this.logger.log(e,"Search result:",{indexField:r,value:i,result:a}),a}async filter(e,r,i,a=!1){return this[e].filter(c=>a?c[r]===i:c[r]?.toLowerCase().includes(i.toLowerCase())).toArray()}getStore(e){return this[e]}async getLength(e){return this[e].count()}async remove(e,r){let i=this._getCache(e,r);await this[e].delete(r),e!=="indicesStore"&&(i&&(this.cacheLogger.log(e,"Flushing cache for item:",{uuid:r,cache:i}),this._removeCache(e,r)),await this.flexsearchIndexService.removeFromIndex(e,r),await this.saveIndex(e))}async removeMany(e,r){if(await this[e].bulkDelete(r),e!=="indicesStore"){for(let i of r)this._removeCache(e,i);await this.flexsearchIndexService.removeFromIndex(e,r),await this.saveIndex(e)}}async clear(e){await this[e].clear(),this._dropCache(e),await this._resetIndex(e)}async balkAdd(e,r,i=!0){if(await this[e].bulkPut(r.map(a=>Ie(G({},a),{uuid:i?this._generateUuid():a.uuid||this._generateUuid()}))),e!=="indicesStore")for(let a of r)await this.flexsearchIndexService.addToIndex(e,a),this._putCache(e,a.uuid,a)}async uniqueKeys(e,r){return this[e].orderBy(r).uniqueKeys()}async getVersion(){return this.idbdb.version}async restoreAllData(e){let r=Object.values(Br).filter(i=>i!=="indicesStore");for(let i of r){let a=e.find(c=>c.store===i);a&&(await this.clear(i),await this.balkAdd(i,a.data,!1))}await this.flushCache()}async flushCache(){this._cache.clear(),await this.clear("indicesStore"),this.cacheLogger.log("Cache flushed")}async _collectRelations(e,r={}){let i=Object.entries(e??{});for(let[a,c]of i)if(Array.isArray(c))for(let f of e[a]){let d=await this._collectRelations(f,r)}else{let f=ga[a];if(f&&c){let{tableName:d,key:v}=this._parseRelations(f),w=await this.getOneWithRelations(d,c),C={[c]:w.data};r[a]=G(G({},r[a]||{}),C)}}return r}_putRelationsInto(e,r={}){let i=Object.entries(e??{});for(let[a,c]of i)if(Array.isArray(c))for(let f of e[a])this._putRelationsInto(f,r);else{let f=r[a];if(!ga[a])continue;e[a]=f?.[e[a]]}}_generateUuid(){return fc()}async _resetIndex(e){await this.flexsearchIndexService.clearIndex(e),await this.saveIndex(e)}_putCache(e,r,i){if(e==="indicesStore")return;this._cache.has(e)||this._cache.set(e,new Map);let a=this._cache.get(e);a?(a.set(r,i),this.cacheLogger.log(e,"Put item in cache:",{uuid:r,value:i})):this.cacheLogger.warn(e,"Cache not initialized for store:",e)}_getCache(e,r){let i=this._cache.get(e);if(i?.has(r))return this.cacheLogger.log(e,"Got item from cache:",{uuid:r}),i.get(r);this.cacheLogger.warn(e,"Item not found in cache:",{uuid:r})}_removeCache(e,r){let i=this._cache.get(e);i&&i.has(r)&&(i.delete(r),this.cacheLogger.log(e,"Removed item from cache:",{uuid:r}))}_dropCache(e){this._cache.has(e)?(this._cache.delete(e),this.cacheLogger.log(e,"Cache dropped for store:",e)):this.cacheLogger.warn(e,"Cache not found for store:",e)}_parseRelations(e){let[r,i]=e.split(".");return{tableName:r,key:i}}static \u0275fac=function(r){return new(r||t)(te(bo),te(xl))};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})};export{Us as a,nd as b,Er as c,Oc as d,xd as e,av as f,kd as g,Mt as h,Ke as i,rt as j,Mn as k,Hi as l,pt as m,aa as n,Ln as o,$n as p,uo as q,lg as r,dg as s,mg as t,Br as u,Ny as v,xl as w,_l as x,Al as y,co as z,bo as A,uh as B,Dy as C};
