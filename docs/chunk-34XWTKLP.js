import{a as X}from"./chunk-3U4MFII3.js";import{a as U}from"./chunk-S57SINLE.js";import{a as Q}from"./chunk-353DJIPG.js";import"./chunk-QM3SBOTO.js";import{a as L}from"./chunk-5ZBILTT3.js";import{a as z}from"./chunk-BB67CUFS.js";import{a as Y}from"./chunk-3I72BRDH.js";import{a as y}from"./chunk-H7PEEFRQ.js";import"./chunk-4U4Z3QUR.js";import{a as J}from"./chunk-HK2A7YRA.js";import"./chunk-MPFUNZLY.js";import{a as H}from"./chunk-SDVVFYH2.js";import{a as T,i as B}from"./chunk-2EIJGHZR.js";import"./chunk-RMBS2DSO.js";import{A as D,C as V,D as k,E as M,G as P,I as j,L as O,O as G,S as W,U as q,W as K,f as w,m as E,n as I}from"./chunk-SE5JQ57N.js";import{m as S,p as N}from"./chunk-DGKRNV7D.js";import"./chunk-CABIONZL.js";import"./chunk-EMIJRNYJ.js";import"./chunk-VKLQR74F.js";import{$a as i,Db as f,Fb as g,Kb as n,Lb as a,Mb as c,Nb as x,Nc as b,Rb as h,Rc as A,Vb as C,Wb as s,eb as m,jc as d,la as v,lb as u,lc as F,ma as R,va as l}from"./chunk-TMZLFVGH.js";import"./chunk-2RGDSI3Q.js";import"./chunk-C6Q5SG76.js";function oe(t,o){t&1&&d(0," Save category ")}function ie(t,o){t&1&&d(0," No changes ")}function re(t,o){if(t&1){let e=h();a(0,"lg-button",6),C("click",function(){v(e);let p=s();return R(p.editCategory())}),f(1,oe,1,0)(2,ie,1,0),c()}if(t&2){let e=s();n("disabled",!e.form.dirty),i(),g(e.form.dirty?1:2)}}function ne(t,o){t&1&&d(0," Add category ")}function ae(t,o){t&1&&d(0," Enter a name ")}function ce(t,o){if(t&1){let e=h();a(0,"lg-button",6),C("click",function(){v(e);let p=s();return R(p.addCategory())}),f(1,ne,1,0)(2,ae,1,0),c()}if(t&2){let e=s();n("disabled",!e.form.dirty),i(),g(e.form.dirty?1:2)}}var _=class t{constructor(o,e,r,p){this._categoryRepository=o;this._selectResourcesService=e;this._router=r;this._notificationsService=p}form=new M({name:new P("",D.required)});category=l(void 0);uuid=A("");uuidEffect=b(()=>{if(!this.uuid()){this.category.set(w.empty());return}this._categoryRepository.getOne(this.uuid()).then(o=>{this.form.reset(E(o)),this.category.set(o),this.form.markAsPristine()})});ngOnInit(){this.form.valueChanges.subscribe(o=>{this.category()?.update(I(o))})}addCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.addCategory(this.category()).then(()=>{this.form.reset({name:""}),this._notificationsService.success("Category added"),this.form.markAsPristine()})}editCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.editCategory(this.uuid(),this.category()).then(()=>{this._notificationsService.success("Category edited"),this.form.markAsPristine()})}onEnter(){this.uuid()?this.editCategory():this.addCategory()}static \u0275fac=function(e){return new(e||t)(m(T),m(B),m(N),m(q))};static \u0275cmp=u({type:t,selectors:[["lg-add-category-recipe-form"]],inputs:{uuid:[1,"uuid"]},decls:7,vars:5,consts:[[3,"formGroup"],[3,"bottom","mobileMode"],["label","Name","lgExpand",""],["formControlName","name",3,"onEnter","placeholder"],["lgNoWrap",""],[3,"disabled"],[3,"click","disabled"]],template:function(e,r){e&1&&(a(0,"form",0)(1,"lg-flex-row",1)(2,"lg-control",2)(3,"lg-input",3),C("onEnter",function(){return r.onEnter()}),c()(),a(4,"div",4),f(5,re,3,2,"lg-button",5)(6,ce,3,2,"lg-button",5),c()()()),e&2&&(n("formGroup",r.form),i(),n("bottom",!0)("mobileMode",!0),i(2),n("placeholder","Your category name"),i(2),g(r.uuid()?5:6))},dependencies:[W,j,V,k,O,G,Q,U,K,y,L,X],encapsulation:2})};var Z=class t{constructor(o){this._aRoute=o}uuid=l("");ngOnInit(){this._aRoute.params.subscribe(o=>{this.uuid.set(o.uuid)})}static \u0275fac=function(e){return new(e||t)(m(S))};static \u0275cmp=u({type:t,selectors:[["lg-add-category-recipe"]],decls:7,vars:3,consts:[[3,"center"],[3,"uuid"]],template:function(e,r){e&1&&(a(0,"lg-fade-in")(1,"lg-container")(2,"lg-flex-row",0)(3,"lg-title"),d(4),c()(),a(5,"lg-card"),x(6,"lg-add-category-recipe-form",1),c()()()),e&2&&(i(2),n("center",!0),i(2),F("",r.uuid()?"Edit":"Add"," recipe category"),i(2),n("uuid",r.uuid()))},dependencies:[J,Y,y,H,_,z],encapsulation:2})};export{Z as AddCategoryRecipeComponent};
