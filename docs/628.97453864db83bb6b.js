"use strict";(self.webpackChunklasagna=self.webpackChunklasagna||[]).push([[628],{628:(Y,g,i)=>{i.r(g),i.d(g,{AddProductComponent:()=>$});var t=i(1007),C=i(5642),v=i(553),_=i(1086),s=i(9417),b=i(3333),P=i(7504),y=i(7782),p=i(1119),c=i(416),R=i(8456),m=i(8536),j=i(9895);const k=["*",[["content"]]],A=["*","content"];function x(o,d){1&o&&(t.j41(0,"div",3),t.SdG(1,1),t.k0s())}let F=(()=>{class o{constructor(){}displayed=(0,t.vPA)(!1);onClick(e){e.target instanceof HTMLElement&&(e.target.closest(".tooltip")||this.displayed.set(!1))}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=t.VBU({type:o,selectors:[["lg-tooltip"]],hostBindings:function(r,n){1&r&&t.bIt("click",function(a){return n.onClick(a)},!1,t.EBC)},ngContentSelectors:A,decls:5,vars:1,consts:[[1,"tooltip"],[1,"tooltip__anchor"],[3,"click"],[1,"tooltip__content"]],template:function(r,n){1&r&&(t.NAR(k),t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.bIt("click",function(){return n.displayed.set(!n.displayed())}),t.SdG(3),t.k0s(),t.DNE(4,x,2,0,"div",3),t.k0s()()),2&r&&(t.R7$(4),t.vxM(n.displayed()?4:-1))},styles:[".tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip__anchor[_ngcontent-%COMP%]{position:relative}.tooltip__content[_ngcontent-%COMP%]{position:absolute;bottom:50%;right:calc(100% + 16px);transform:translateY(50%);background-color:#fff;border-radius:16px;padding:16px;box-shadow:0 4px 8px #0000001a;z-index:100}"]})}return o})();var T=i(8710);function G(o,d){if(1&o){const e=t.RV6();t.j41(0,"div",3)(1,"lg-eggs-widget",4),t.bIt("changed",function(n){t.eBV(e);const l=t.XpG();return t.Njj(l.onEggsChanged(n))}),t.k0s()()}}let I=(()=>{class o{constructor(){}eggsChanged=(0,t.CGW)();selectedWidget=(0,t.vPA)(null);onWidgetSelect(e){this.selectedWidget.set(e)}onEggsChanged(e){e&&this.eggsChanged.emit(e)}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=t.VBU({type:o,selectors:[["lg-amount-widgets"]],outputs:{eggsChanged:"eggsChanged"},decls:5,vars:3,consts:[[1,"amount-widgets"],[1,"amount-widgets__buttons"],[1,"amount-widgets__button",3,"click"],[1,"amount-widgets__wrapper"],[3,"changed"]],template:function(r,n){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"button",2),t.bIt("click",function(){return n.onWidgetSelect("eggs")}),t.EFF(3,"Eggs "),t.k0s()(),t.DNE(4,G,2,0,"div",3),t.k0s()),2&r&&(t.AVh("selected",null!=n.selectedWidget()),t.R7$(4),t.vxM("eggs"===n.selectedWidget()?4:-1))},dependencies:[T.e],styles:[".amount-widgets[_ngcontent-%COMP%]{display:flex;gap:16px;flex-direction:column}.amount-widgets__input[_ngcontent-%COMP%]{flex:1}.amount-widgets__buttons[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap;padding:16px;background-color:#fafafa;border-radius:12px;margin:-16px}.amount-widgets.selected[_ngcontent-%COMP%]   .amount-widgets__buttons[_ngcontent-%COMP%]{margin-bottom:0}.amount-widgets__button[_ngcontent-%COMP%]{display:flex;padding:8px 16px;border-radius:16px;background-color:#e5de38;appearance:none;border:none;font-family:inherit;font-size:inherit}"]})}return o})();var M=i(7480),f=i(7512),w=i(5130),E=i(9170),N=i(7201),h=i(1636);function B(o,d){if(1&o){const e=t.RV6();t.j41(0,"lg-button",17),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.editProduct(n.value))}),t.EFF(1," Edit Product "),t.k0s()}}function V(o,d){if(1&o){const e=t.RV6();t.j41(0,"lg-button",17),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.addProduct(n.value))}),t.EFF(1," Add Product "),t.k0s()}}let W=(()=>{class o{_productsRepository;_selectResourcesService;_router;constructor(e,r,n){this._productsRepository=e,this._selectResourcesService=r,this._router=n}form=new s.gE({name:new s.MJ("",s.k0.required),amount:new s.MJ(null,s.k0.required),price:new s.MJ(null,s.k0.required),unit:new s.MJ("gram"),source:new s.MJ(""),category_id:new s.MJ(null,s.k0.required)});buttons=[{label:"Grams",value:"gram",style:"secondary",onClick:()=>{console.log("Grams")}},{label:"Pieces",value:"piece",style:"secondary",onClick:()=>{console.log("Piece")}}];uuid=(0,t.hFB)("");uuidEffect=(0,t.QZP)(()=>{this.uuid()&&this._productsRepository.getOne(this.uuid()).then(e=>{this.form.reset(e)})});get value(){return this.form.value}eggsChanged(e){this.form.patchValue({amount:e})}ngOnInit(){this.form.valueChanges.subscribe(e=>{console.log(e)})}addProduct(e){this._productsRepository.addProduct((0,m.rh)(e)).then(()=>{this._router.navigate(["/products"])})}editProduct(e){this._productsRepository.editProduct(this.uuid(),(0,m.rh)(e)).then(()=>{this._router.navigate(["/products"])})}ngAfterViewInit(){this._selectResourcesService.load().then(e=>{})}static \u0275fac=function(r){return new(r||o)(t.rXU(N.d),t.rXU(c.n),t.rXU(h.Ix))};static \u0275cmp=t.VBU({type:o,selectors:[["lg-add-product-form"]],inputs:{uuid:[1,"uuid"]},features:[t.Jv_([{provide:c.n,useClass:c.n}])],decls:22,vars:9,consts:[["priceInput",""],[3,"formGroup"],["label","Name"],["formControlName","name",3,"placeholder"],[3,"bottom"],["label","Amount","lgExpand",""],["formControlName","amount","lsParseMath","",3,"onInputChange","placeholder"],["ngProjectAs","after",5,["after"]],["ngProjectAs","content",5,["content"]],[3,"eggsChanged"],["formControlName","unit",3,"items"],["label","Price"],["formControlName","price","lsParseMath","",3,"placeholder"],["label","Source"],["formControlName","source",3,"placeholder"],["label","Category"],["formControlName","category_id",3,"resource"],[3,"click"]],template:function(r,n){if(1&r){const l=t.RV6();t.j41(0,"form",1)(1,"lg-gap-column")(2,"lg-control",2),t.nrm(3,"lg-input",3),t.k0s(),t.j41(4,"lg-gap-row",4)(5,"lg-control",5)(6,"lg-number-input",6),t.bIt("onInputChange",function(){t.eBV(l);const u=t.sdS(15);return t.Njj(u.focus())}),t.j41(7,"div",7)(8,"lg-tooltip"),t.EFF(9," Widgets "),t.j41(10,"div",8)(11,"lg-amount-widgets",9),t.bIt("eggsChanged",function(u){return t.eBV(l),t.Njj(n.eggsChanged(u))}),t.k0s()()()()()(),t.nrm(12,"lg-buttons-group",10),t.k0s(),t.j41(13,"lg-control",11),t.nrm(14,"lg-number-input",12,0),t.k0s(),t.j41(16,"lg-control",13),t.nrm(17,"lg-input",14),t.k0s(),t.j41(18,"lg-control",15),t.nrm(19,"lg-multiselect",16),t.k0s(),t.DNE(20,B,2,0,"lg-button")(21,V,2,0,"lg-button"),t.k0s()()}2&r&&(t.Y8G("formGroup",n.form),t.R7$(3),t.Y8G("placeholder","Your product name"),t.R7$(),t.Y8G("bottom",!0),t.R7$(2),t.Y8G("placeholder","In grams"),t.R7$(6),t.Y8G("items",n.buttons),t.R7$(2),t.Y8G("placeholder","For the entire product in your currency"),t.R7$(3),t.Y8G("placeholder","Where do you buy it?"),t.R7$(2),t.Y8G("resource","categories"),t.R7$(),t.vxM(n.uuid()?20:21))},dependencies:[s.X1,s.qT,s.BC,s.cb,s.j4,s.JD,b.S,P.X,y.K,p.Q,R.$,j.N,F,I,M.t,f.I,w.i,E.A],styles:["lg-eggs-widget{min-width:300px}\n"],encapsulation:2})}return o})(),$=(()=>{class o{_aRoute;constructor(e){this._aRoute=e}uuid=(0,t.vPA)("");ngOnInit(){this._aRoute.params.subscribe(e=>{this.uuid.set(e.uuid)})}static \u0275fac=function(r){return new(r||o)(t.rXU(h.nX))};static \u0275cmp=t.VBU({type:o,selectors:[["app-add-recipe"]],decls:8,vars:8,consts:[[3,"center"],[3,"flat","link","size"],[3,"uuid"]],template:function(r,n){1&r&&(t.j41(0,"lg-container")(1,"lg-gap-row",0)(2,"lg-title"),t.EFF(3),t.k0s(),t.j41(4,"lg-button",1),t.EFF(5," Back to list "),t.k0s()(),t.j41(6,"lg-card"),t.nrm(7,"lg-add-product-form",2),t.k0s()()),2&r&&(t.R7$(),t.Y8G("center",!0),t.R7$(2),t.SpI("",n.uuid()?"Edit":"Add"," Product"),t.R7$(),t.Aen("warning"),t.Y8G("flat",!0)("link","/products")("size","small"),t.R7$(3),t.Y8G("uuid",n.uuid()))},dependencies:[C.H,v.i,_.W,W,p.Q,f.I],encapsulation:2})}return o})()}}]);