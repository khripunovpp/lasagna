import{a as He}from"./chunk-K5DQMW66.js";import{a as Je}from"./chunk-RD3LRVG7.js";import{a as Qe}from"./chunk-GGFJO4G3.js";import{a as Oe}from"./chunk-YHNTYZAE.js";import"./chunk-3IFB2OYN.js";import{a as je,b as ze,c as We,d as qe}from"./chunk-FCAKPWX4.js";import{a as Ke}from"./chunk-3FCDQS36.js";import{a as $e,b as Le,c as Ye}from"./chunk-4JTWFCUF.js";import{a as Ge}from"./chunk-MSELENGE.js";import{a as Pe}from"./chunk-O7EDKFI5.js";import{a as Me}from"./chunk-WOTYHX4G.js";import{a as Ue}from"./chunk-JXHZXNSN.js";import{a as Be}from"./chunk-ASUWO7DB.js";import{a as J}from"./chunk-BWGYIJEG.js";import{a as Y}from"./chunk-C737TW6Q.js";import{a as Ee}from"./chunk-7P2DAV6F.js";import{a as Ve,b as Ne}from"./chunk-CBPIWMMR.js";import{a as ke}from"./chunk-4EGTEAFI.js";import{a as De}from"./chunk-72REWZLE.js";import"./chunk-SNDQO5FA.js";import{b as he,c as W,j as q,q as K}from"./chunk-AGDD4VEX.js";import"./chunk-33U52G7J.js";import"./chunk-5KSZNU56.js";import{a as P}from"./chunk-KAGJE7I3.js";import"./chunk-XVI445TZ.js";import{d as Re,f as ve,g as xe,h as ee,i as b,k as ye,m as be,n as we,o as Se,p as Ie,q as Fe,r as Ae,s as Te,u as H}from"./chunk-XFMMXZ22.js";import"./chunk-LOPFG4AH.js";import{o as z,r as Q,s as Ce}from"./chunk-D66Q4FT5.js";import"./chunk-652DFWNF.js";import"./chunk-JDBIU23B.js";import{$b as f,Ab as ae,Ac as $,Bb as pe,Bc as L,Cb as l,Db as a,Eb as y,F as G,Fb as E,Gb as D,Ib as v,Lb as C,Mb as p,Nb as O,Ob as B,Pb as T,Qb as ce,Va as o,Wb as k,Xb as j,Yb as U,Zb as u,_a as x,_b as de,ac as se,db as A,ec as me,ga as _,gc as ue,ha as g,kc as s,lc as m,mc as fe,na as S,qb as c,r as re,sb as le,tb as V,uc as _e,vc as ge,wb as h,xb as R,zc as M}from"./chunk-CG2HRCOU.js";import"./chunk-DELOOZDJ.js";import{a as I,b as F,f as oe}from"./chunk-2WH2EVR6.js";var Ze=["*"];function et(n,t){if(n&1&&(l(0,"p",1),u(1),a()),n&2){let e=p();o(),f(" ",e.label()," ")}}var X=class n{constructor(){}label=M("");static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["lg-control-group"]],inputs:{label:[1,"label"]},ngContentSelectors:Ze,decls:4,vars:1,consts:[[1,"control-group"],[1,"control-group__label"],[1,"control-group__content"]],template:function(e,i){e&1&&(O(),l(0,"div",0),h(1,et,2,1,"p",1),l(2,"div",2),B(3),a()()),e&2&&(o(),R(i.label()?1:-1))},styles:["[_nghost-%COMP%]{display:flex;flex:1}.control-group[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:16px}.control-group__label[_ngcontent-%COMP%]{font-size:1.2rem;margin:0}.control-group__content[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:flex-end}.control-group__content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1}"]})};var tt=["*",[["rowActions"]]],it=["*","rowActions"],Z=class n{constructor(){}mobileMode=M(!1);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["lg-controls-row"]],inputs:{mobileMode:[1,"mobileMode"]},ngContentSelectors:it,decls:5,vars:2,consts:[[1,"controls-row"],[1,"controls-row__controls"],[1,"controls-row__actions"]],template:function(e,i){e&1&&(O(tt),l(0,"div",0)(1,"div",1),B(2),a(),l(3,"div",2),B(4,1),a()()),e&2&&le("controls-row__mobile",i.mobileMode())},styles:[`:host{display:flex;gap:16px}.controls-row{width:100%;display:flex;align-items:flex-end;gap:16px;flex:1}.controls-row__controls,.controls-row__actions{display:flex;align-items:flex-end;gap:16px}.controls-row__controls{flex:1}.controls-row__actions{flex:0;white-space:nowrap;align-self:center}.controls-row__controls>*,.controls-row__actions>*{flex:1}@media (max-width: 600px){.controls-row__mobile,.controls-row__mobile .controls-row__controls{flex-direction:column;align-items:stretch}.controls-row__mobile .controls-row__actions{align-self:flex-end}}
`],encapsulation:2})};var lt=["tooltipComponent"],at=["products"],pt=["productsSelector"],ct=["nameField"],dt=n=>({unit:n}),st=(n,t)=>t.value.amount+n+1;function mt(n,t){if(n&1){let e=v();l(0,"lg-gap-column",18)(1,"lg-control",19),s(2,"translate"),E(3,25),l(4,"span",26),C("click",function(){_(e);let r=p().$index,d=p();return g(d.closeTextField(r))}),u(5,"Hide"),a(),D(),l(6,"lg-input",27),s(7,"translate"),C("onInputChanged",function(){_(e);let r=p().$index,d=U(7),w=p();return g(w.onIngredientSelected(d,r,["product_id","recipe_id"]))}),a()()()}n&2&&(c("size","small"),o(),T("label",m(2,3,"recipe.form.ingredients.name.label")),o(5),c("placeholder",m(7,5,"recipe.form.ingredients.name.placeholder")))}function ut(n,t){if(n&1){let e=v();l(0,"lg-multiselect",33),C("onSelected",function(){_(e);let r=p(2).$index,d=U(7),w=p();return g(w.onIngredientSelected(d,r,["product_id","name"]))}),a()}n&2&&c("resource","recipes")("autoLoad",!0)}function ft(n,t){if(n&1){let e=v();l(0,"lg-multiselect",34,3),C("onSelected",function(){_(e);let r=p(2).$index,d=U(7),w=p();return g(w.onIngredientSelected(d,r,["recipe_id","name"]))}),a()}n&2&&c("resource","products")("autoLoad",!0)}function _t(n,t){if(n&1){let e=v();l(0,"lg-gap-column",18)(1,"lg-control"),E(2,28),l(3,"lg-button",29),C("click",function(){_(e);let r=p().$index,d=p();return g(d.closeRecipeField(r))}),u(4),s(5,"translate"),a(),D(),E(6,30),l(7,"lg-button",29),C("click",function(){_(e);let r=p().$index,d=p();return g(d.openRecipeField(r))}),u(8),s(9,"translate"),a(),D(),E(10,25),l(11,"span",26),C("click",function(){_(e);let r=p().$index,d=p();return g(d.openTextField(r))}),u(12),s(13,"translate"),a(),D(),h(14,ut,1,2,"lg-multiselect",31)(15,ft,2,2,"lg-multiselect",32),a()()}if(n&2){let e=p().$index,i=p();c("size","small"),o(3),c("flat",!0)("size","small")("active",!i.recipeFieldState()[e]),o(),f(" ",m(5,11,"recipe.form.ingredients.product_id.label")," "),o(3),c("flat",!0)("size","small")("active",i.recipeFieldState()[e]),o(),f(" ",m(9,13,"recipe.form.ingredients.recipe_id.label")," "),o(4),f(" ",m(13,15,"recipe.form.ingredients.name.switch-label")," "),o(2),R(i.recipeFieldState()[e]?14:15)}}function gt(n,t){if(n&1){let e=v();E(0,13),l(1,"lg-controls-row",17),h(2,mt,8,7,"lg-gap-column",18)(3,_t,16,17,"lg-gap-column",18),l(4,"lg-control",19),s(5,"translate"),l(6,"lg-number-input",20,1),s(8,"translate"),C("onKeydown",function(){_(e);let r=p();return g(r.addLast())}),a()(),y(9,"lg-buttons-group",21),E(10,22),l(11,"lg-button",23),C("click",function(){let r=_(e).$index,d=p();return g(d.deleteIngredient(r))}),y(12,"mat-icon",24),a(),D(),a(),D()}if(n&2){let e=t.$index,i=p();c("formGroupName",e),o(),c("mobileMode",!0),o(),R(i.textFieldState()[e]?2:3),o(2),T("label",m(5,10,"recipe.form.ingredients.amount.label")),o(2),c("placeholder",fe(8,12,"recipe.form.ingredients.amount.placeholder",ue(15,dt,(i.form.value.ingredients==null||i.form.value.ingredients[e]==null?null:i.form.value.ingredients[e].unit)||"gram"))),o(3),c("items",i.buttons),o(2),V("danger"),c("size","tiny")("icon",!0)}}function Ct(n,t){if(n&1&&y(0,"lg-chips-list",16),n&2){let e=p(),i=U(29);c("control",i)("items",e.topCategories())}}var N=class n{constructor(t,e,i,r,d){this._recipesRepository=t;this._selectResourcesService=e;this._router=i;this._aRoute=r;this._notificationsService=d}recipe=M(void 0);uuid=Qe("uuid");form=new ee({name:new b(null,Re.required),description:new b(""),outcome_amount:new b(null),outcome_unit:new b(""),ingredients:new Fe([this._getIngredientGroup()]),category_id:new b(null)},t=>W.fromRaw(t.value).outcomeAmountGreaterThanIngredients?{outcomeAmountGreaterThanIngredients:!0}:null);textFieldState=S({});recipeFieldState=S({});buttons=[{label:"gr",value:"gram",style:"secondary"},{label:"pc",value:"piece",style:"secondary"}];tooltipComponent=L("tooltipComponent");productsWidget=L("products");productsSelector=L("productsSelector");nameField=$("nameField");topCategories=S([]);recipeEffect=ge(()=>{this.recipe()&&this.fillForm(this.recipe())});get ingredients(){return this.form.get("ingredients")}get _formValid(){return this.form.valid&&!this.checkCycleRecipe(this.form.getRawValue().ingredients,this.uuid())}fillForm(t){this.form.reset({ingredients:[]}),this.ingredients.clear(),t&&(this.form.reset(F(I({},He(t)),{ingredients:[]})),t.ingredients.length?t.ingredients.forEach((e,i)=>{this.ingredients.push(this._getIngredientGroup(e)),e.recipe_id&&this.openRecipeField(i),e.name&&this.openTextField(i)}):this.ingredients.push(this._getIngredientGroup()),this.form.updateValueAndValidity(),this.form.markAsPristine())}resetForm(t){this.fillForm(t),this._loadUsingHistory(),this.form.markAsPristine()}validateForm(){return this._formValid?!0:(this._notificationsService.error(this._notificationsService.parseFormErrors(this.form).join(", ")),!1)}addLast(){let t=this.ingredients.at(this.ingredients.length-1);(t.value.name||t.value.amount||t.value.product_id)&&this.addIngredient()}ngOnInit(){this._loadUsingHistory(),this.form.valueChanges.pipe(G(100)).subscribe({next:t=>{if(!this.form.dirty)return;this.recipe()?.update(this.form.getRawValue()),this.checkCycleRecipe(this.form.getRawValue().ingredients,this.uuid())&&this._notificationsService.error("You cannot add a recipe to itself")}})}ngAfterViewInit(){this._selectResourcesService.load().then(t=>{}),this.recipe()?.uuid||this.nameField().focus()}addIngredient(){this.ingredients.push(this._getIngredientGroup()),this.form.markAsDirty()}deleteIngredient(t){this.ingredients.removeAt(t),this.form.markAsDirty()}onIngredientSelected(t,e,i){t.focus();let r=this.ingredients.at(e).value;this.ingredients.at(e).patchValue(F(I({},Array.isArray(i)?i.reduce((d,w)=>F(I({},d),{[w]:null}),{}):{[i]:null}),{unit:r.product_id?.unit||r.recipe_id?.unit||"gram"}))}openTextField(t){this.textFieldState.update(e=>F(I({},e),{[t]:!0}))}closeTextField(t){this.textFieldState.update(e=>F(I({},e),{[t]:!1}))}openRecipeField(t){this.recipeFieldState.update(e=>F(I({},e),{[t]:!0}))}closeRecipeField(t){this.recipeFieldState.update(e=>F(I({},e),{[t]:!1}))}checkCycleRecipe(t,e){let i=!1;for(let r of t){let d=r.recipe_id?.uuid;if(d&&d===e){i=!0;break}}return i}_loadUsingHistory(){this._recipesRepository.getTopCategories().then(t=>{this.topCategories.set(t.map(e=>({label:e.name,value:{uuid:e.uuid,name:e.name}})))})}_getIngredientGroup(t){return new ee({name:new b(t?.name),amount:new b(t?.amount?.toString()??null),product_id:new b(t?.product_id?t.product_id:null),recipe_id:new b(t?.recipe_id?t.recipe_id:null),unit:new b(t?.unit??"gram")},e=>{let i=he.fromRaw(e.value);if(i.allEmpty)return null;if(i.typeSelected&&!i.amountValid)return{ingredientAmountRequired:!0};if(!this.uuid)return null;let r=this.uuid();return this.checkCycleRecipe([e.value],r)?{cycleRecipe:!0}:i.typeSelected?null:{ingredientRequired:!0}})}static \u0275fac=function(e){return new(e||n)(x(K),x(P),x(Q),x(z),x(H))};static \u0275cmp=A({type:n,selectors:[["lg-add-recipe-form"]],viewQuery:function(e,i){e&1&&(k(i.tooltipComponent,lt,5),k(i.productsWidget,at,5),k(i.productsSelector,pt,5),k(i.nameField,ct,5)),e&2&&j(4)},inputs:{recipe:[1,"recipe"]},features:[me([{provide:P,useClass:P}])],decls:31,vars:36,consts:[["nameField",""],["amount",""],["categorySelect",""],["productsSelector",""],[3,"formGroup"],[3,"position"],["lgExpand","",3,"label"],["formControlName","name",3,"key","resource"],["formControlName","description",3,"placeholder"],["lgExpand","",3,"mobileMode"],["formControlName","outcome_amount","lgParseMath","",3,"placeholder"],["formControlName","outcome_unit","lgWidth","130px",3,"items"],["formArrayName","ingredients","lgExpand",""],[3,"formGroupName"],[3,"click","size"],["formControlName","category_id",3,"resource"],[3,"control","items"],[3,"mobileMode"],[3,"size"],[3,"label"],["lgParseMath","","formControlName","amount",3,"onKeydown","placeholder"],["lgWidth","130px","formControlName","unit",3,"items"],["ngProjectAs","rowActions",5,["rowActions"]],[3,"click","size","icon"],["aria-hidden","false","fontIcon","close"],["ngProjectAs","endLabelTpl",5,["endLabelTpl"]],[3,"click"],["formControlName","name",3,"onInputChanged","placeholder"],["ngProjectAs","labelTpl",5,["labelTpl"]],[3,"click","flat","size","active"],["ngProjectAs","afterLabelTpl",5,["afterLabelTpl"]],["formControlName","recipe_id",3,"resource","autoLoad"],["formControlName","product_id",3,"resource","autoLoad"],["formControlName","recipe_id",3,"onSelected","resource","autoLoad"],["formControlName","product_id",3,"onSelected","resource","autoLoad"]],template:function(e,i){if(e&1){let r=v();l(0,"form",4)(1,"lg-gap-column",5)(2,"lg-control",6),s(3,"translate"),y(4,"lg-autocomplete",7,0),a(),l(6,"lg-control",6),s(7,"translate"),y(8,"lg-textarea",8),s(9,"translate"),a(),l(10,"lg-controls-row",9)(11,"lg-control",6),s(12,"translate"),y(13,"lg-number-input",10,1),s(15,"translate"),a(),y(16,"lg-buttons-group",11),a(),l(17,"lg-control-group",6),s(18,"translate"),l(19,"lg-gap-column",5)(20,"lg-gap-column",12),ae(21,gt,13,17,"ng-container",13,st),a(),l(23,"lg-button",14),C("click",function(){return _(r),g(i.addIngredient())}),u(24),s(25,"translate"),a()()(),l(26,"lg-control",6),s(27,"translate"),y(28,"lg-multiselect",15,2),a(),h(30,Ct,1,2,"lg-chips-list",16),a()()}e&2&&(c("formGroup",i.form),o(),c("position","start"),o(),T("label",m(3,20,"recipe.form.name.label")),o(2),c("key","name")("resource","recipes-names"),o(2),T("label",m(7,22,"recipe.form.description.label")),o(2),c("placeholder",m(9,24,"recipe.form.description.placeholder")),o(2),c("mobileMode",!0),o(),T("label",m(12,26,"recipe.form.outcome_amount.label")),o(2),c("placeholder",m(15,28,"recipe.form.outcome_amount.placeholder")),o(3),c("items",i.buttons),o(),T("label",m(18,30,"recipe.form.ingredients.label")),o(2),c("position","start"),o(2),pe(i.ingredients.controls),o(2),V("success"),c("size","small"),o(),f(" ",m(25,32,"recipe.form.ingredients.add-btn")," "),o(2),T("label",m(27,34,"recipe.form.category_id.label")),o(2),c("resource","recipes-categories"),o(2),R(i.topCategories().length?30:-1))},dependencies:[Te,ye,ve,xe,be,Ie,we,Se,Pe,Ge,X,Y,J,Oe,je,$e,Z,Ue,Le,ze,We,qe,Ae,Be,q,Ke],encapsulation:2})};function ht(n,t){n&1&&(l(0,"p"),u(1,"You just added new recipe. "),l(2,"a",5),u(3,"Want to have a look?"),a()()),n&2&&(o(2),ce("routerLink","/recipes/edit/",t))}function Rt(n,t){if(n&1&&(u(0),s(1,"translate"),s(2,"timeAgo")),n&2){let e,i=p(2);se(" (",m(1,2,"edited-at-label")," ",m(2,4,(e=i.recipe())==null?null:e.updatedAt),") ")}}function vt(n,t){if(n&1&&(l(0,"lg-gap-row",6)(1,"lg-title"),u(2),s(3,"translate"),l(4,"span",7),u(5),a()(),l(6,"lg-button",8),u(7),s(8,"translate"),a()(),h(9,Rt,3,6)),n&2){let e,i,r,d=p();c("mobileMode",!0)("center",!0),o(2),f(" ",m(3,11,"edit-label")," "),o(3),de((e=d.recipe())==null?null:e.name),o(),V("primary"),c("flat",!0)("link","/recipes/calculate/"+((i=d.recipe())==null?null:i.uuid))("size","small"),o(),f(" ",m(8,13,"recipe.calculate-btn")," "),o(2),R((r=d.recipe())!=null&&r.updatedAt?9:-1)}}function xt(n,t){n&1&&(l(0,"lg-title"),u(1),s(2,"translate"),a()),n&2&&(o(),f(" ",m(2,1,"recipe.form.title")," "))}function yt(n,t){n&1&&(u(0),s(1,"translate")),n&2&&f(" ",m(1,1,"saved-draft-label")," ")}function bt(n,t){n&1&&(u(0),s(1,"translate")),n&2&&f(" ",m(1,1,"recipe.form.save-btn.edit.active")," ")}function wt(n,t){n&1&&(u(0),s(1,"translate")),n&2&&f(" ",m(1,1,"recipe.form.save-btn.edit.disabled")," ")}function St(n,t){if(n&1){let e=v();l(0,"lg-button",9),C("click",function(){_(e);let r=p();return g(r.onEditRecipe())}),h(1,bt,2,3)(2,wt,2,3),a()}if(n&2){let e,i,r=p();c("disabled",!(!((e=r.formComponent())==null||e.form==null)&&e.form.dirty)&&!r.draftRef()),o(),R(!((i=r.formComponent())==null||i.form==null)&&i.form.dirty||r.draftRef()?1:2)}}function It(n,t){n&1&&(u(0),s(1,"translate")),n&2&&f(" ",m(1,1,"recipe.form.save-btn.add.active")," ")}function Ft(n,t){n&1&&(u(0),s(1,"translate")),n&2&&f(" ",m(1,1,"recipe.form.save-btn.add.disabled")," ")}function At(n,t){if(n&1){let e=v();l(0,"lg-button",9),C("click",function(){_(e);let r=p();return g(r.onAddRecipe())}),h(1,It,2,3)(2,Ft,2,3),a()}if(n&2){let e,i,r=p();c("disabled",!(!((e=r.formComponent())==null||e.form==null)&&e.form.dirty)&&!r.draftRef()),o(),R(!((i=r.formComponent())==null||i.form==null)&&i.form.dirty||r.draftRef()?1:2)}}function Tt(n,t){if(n&1){let e=v();l(0,"lg-button",10),C("click",function(){_(e);let r=p();return g(r.onRemoveDraft())}),u(1),s(2,"translate"),a()}n&2&&(V("danger"),o(),f(" ",m(2,3,"recipe.form.delete-draft-btn")," "))}function Vt(n,t){if(n&1){let e=v();l(0,"lg-button",10),C("click",function(){_(e);let r=p();return g(r.onDeleteRecipe())}),u(1),s(2,"translate"),a()}n&2&&(V("danger"),o(),f(" ",m(2,3,"recipe.form.delete-btn")," "))}var Xe=class n{constructor(t,e,i,r){this._router=t;this._aRoute=e;this._recipesRepository=i;this._notificationsService=r}draftOrRecipeUUID=S(void 0);recipe=S(void 0);formComponent=$(N);draftRef=S(void 0);draftByExistingRecipe=_e(()=>this.draftRef().meta?.uuid);isDraftRoute=S(!1);draftRecipeModel;addedRecipeInformerUUID=S(null);ngOnInit(){re([this._aRoute.params,this._aRoute.data]).subscribe(([t,e])=>{let i=e.draft;this.draftOrRecipeUUID.set(t.uuid),i?(this.draftRef.set(i),this.recipe.set(i.data)):e.recipe?this.recipe.set(e.recipe):this.draftOrRecipeUUID()?this._loadRecipe(this.draftOrRecipeUUID()):this.recipe.set(W.empty()),this.isDraftRoute.set(!!e.draftRoute)})}ngAfterViewInit(){this.formComponent()?.form.valueChanges.pipe(G(500)).subscribe(t=>{this.formComponent().form.dirty&&(this.draftRef()?.uuid?this._recipesRepository.updateDraftRecipe(this.draftRef().uuid,this.recipe(),this.draftRef().meta?.uuid):this.recipe()&&(this.draftRef.set(this._recipesRepository.saveDraftRecipe(this.recipe(),this.draftOrRecipeUUID()??"")),this.isDraftRoute()||window.history.replaceState({},"",this._router.createUrlTree(["recipes/draft/"+this.draftRef().uuid]).toString())))})}onAddRecipe(){return oe(this,null,function*(){try{if(!this.formComponent()?.validateForm()||!this.recipe())return;let t=yield this._addRecipe(this.recipe());this.addedRecipeInformerUUID.set(t)}catch(t){this._notificationsService.error(Je(t))}})}onEditRecipe(){!this.formComponent()?.validateForm()||!this.formComponent()?.form.dirty||!this.recipe()||this._editRecipe(this.recipe())}onRemoveDraft(){this._removeDraft(),this._router.navigate(["recipes"])}onDeleteRecipe(){this.recipe()?.uuid&&this._recipesRepository.deleteOne(this.recipe().uuid).then(()=>{this._notificationsService.success("Recipe deleted"),this._router.navigate(["recipes"])})}_addRecipe(t){return this._recipesRepository.addRecipe(t).then(e=>(this.formComponent()?.resetForm(),this._notificationsService.success("Recipe added"),this.recipe.set(void 0),this.draftRef()&&this._removeDraft(),(this.draftRef()||this.recipe()?.uuid)&&this._router.navigate(["recipes"]),e))}_editRecipe(t){if(!this.draftOrRecipeUUID())return;let e=this.draftRef()?.meta?.uuid??this.draftOrRecipeUUID();this._recipesRepository.editRecipe(e,t).then(()=>{this.formComponent()?.resetForm(t),this._notificationsService.success("Recipe edited"),this.draftRef()&&this._removeDraft(),(this.draftRef()||this.recipe()?.uuid)&&this._router.navigate(["recipes","edit",e])})}_removeDraft(){this.draftRef()&&(this._recipesRepository.removeDraftRecipe(this.draftRef().uuid),this.draftRef.set(void 0))}_loadRecipe(t){t&&this._recipesRepository.getOne(t).then(e=>{e&&this.recipe.set(e)})}static \u0275fac=function(e){return new(e||n)(x(Q),x(z),x(K),x(H))};static \u0275cmp=A({type:n,selectors:[["app-add-recipe"]],viewQuery:function(e,i){e&1&&k(i.formComponent,N,5),e&2&&j()},decls:14,vars:8,consts:[["size","medium"],[3,"recipe"],[3,"mobileMode","relaxed"],["lgShrink","",3,"disabled"],["lgShrink","",3,"style"],[3,"routerLink"],[3,"mobileMode","center"],[1,"text-active"],[3,"flat","link","size"],["lgShrink","",3,"click","disabled"],["lgShrink","",3,"click"]],template:function(e,i){if(e&1&&(l(0,"lg-fade-in")(1,"lg-container")(2,"lg-gap-column",0),h(3,ht,4,2,"p"),h(4,vt,10,15)(5,xt,3,3,"lg-title"),h(6,yt,2,3),a(),l(7,"lg-card"),y(8,"lg-add-recipe-form",1),a(),l(9,"lg-gap-row",2),h(10,St,3,2,"lg-button",3)(11,At,3,2,"lg-button",3),h(12,Tt,3,5,"lg-button",4)(13,Vt,3,5,"lg-button",4),a()()()),e&2){let r,d,w,ne;o(3),R((r=i.addedRecipeInformerUUID())?3:-1,r),o(),R((d=i.recipe())!=null&&d.uuid&&!i.draftRef()||i.draftRef()&&i.draftByExistingRecipe()?4:5),o(2),R(i.draftRef()?6:-1),o(2),c("recipe",i.recipe()),o(),c("mobileMode",!0)("relaxed",!0),o(),R((w=i.recipe())!=null&&w.uuid&&!i.draftRef()||i.draftRef()&&i.draftByExistingRecipe()?10:11),o(2),R(i.isDraftRoute()?12:(ne=i.recipe())!=null&&ne.uuid?13:-1)}},dependencies:[Ve,Ee,De,N,J,Ne,ke,Ye,Me,Y,q,Ce],encapsulation:2})};export{Xe as AddRecipeComponent};
