import{a as Xe,b as Ze}from"./chunk-MMARXXBE.js";import{c as Ye}from"./chunk-SBJPLVXL.js";import{a as Je}from"./chunk-WJVQNXF5.js";import{a as Ue}from"./chunk-LYK3TVFL.js";import{a as Pe,b as ze,c as Le}from"./chunk-P5B2PAQA.js";import{a as U}from"./chunk-E4DOWUUR.js";import{f as He}from"./chunk-PL75XHEN.js";import{a as Qe,b as qe,c as Ke}from"./chunk-AT4M6DLN.js";import{a as We}from"./chunk-AX7OPYRI.js";import{a as $e}from"./chunk-27EDASFX.js";import{a as je}from"./chunk-UCD3FRBR.js";import{a as Oe}from"./chunk-XQWFJXAQ.js";import{a as W}from"./chunk-GD35DILB.js";import{a as j}from"./chunk-2CMRCJH6.js";import{a as z}from"./chunk-EIHALQTV.js";import{a as Be,b as $}from"./chunk-C3TWNGHF.js";import{a as Ge}from"./chunk-NBI3H4TU.js";import{a as L}from"./chunk-PUFYVR3X.js";import"./chunk-SNDQO5FA.js";import{f as ye,h as Se}from"./chunk-E7PMWA7O.js";import"./chunk-TZ6AACHZ.js";import{a as be}from"./chunk-5KSZNU56.js";import{a as Me}from"./chunk-WLVDGM7I.js";import"./chunk-UTON52JF.js";import{f as P,g as Re,h as ee,i as I,j as Ee,m as Fe,n as Ae,o as Ie,p as De,q as ke,r as Ve,s as Ne}from"./chunk-BVNLWVVY.js";import"./chunk-GEHL2P5P.js";import{o as Te,r as ve,s as we}from"./chunk-HDKQOM4M.js";import"./chunk-652DFWNF.js";import{f as fe,h as he,k as O}from"./chunk-RUQPARWX.js";import{$b as se,Ab as N,Bb as M,Bc as Z,Cb as o,Db as l,Eb as b,Fb as re,Gb as pe,Hb as q,Ib as E,Lb as v,Mb as m,Nb as B,Ob as G,Va as a,Vb as ce,Wb as me,Xb as k,Yb as p,Zb as y,_a as F,_b as g,ac as ue,bc as de,cc as _e,db as S,dc as xe,ga as f,gc as Ce,ha as h,ib as A,ja as ie,jc as d,lc as _,mc as V,na as T,pb as ae,qb as r,sb as oe,sc as J,tb as R,tc as K,wb as x,wc as X,xb as C,xc as Y,yb as le,yc as ge}from"./chunk-FSGSBBFI.js";import"./chunk-DELOOZDJ.js";import"./chunk-2WH2EVR6.js";var nt=["*"],H=class n{constructor(){}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=S({type:n,selectors:[["lg-table-card"]],ngContentSelectors:nt,decls:4,vars:1,consts:[[3,"flat"],[1,"table"],[1,"table__scroll"]],template:function(e,i){e&1&&(B(),o(0,"lg-card",0)(1,"div",1)(2,"div",2),G(3),l()()()),e&2&&r("flat",!0)},dependencies:[z],styles:[`:host{display:flex;width:100%}.table__scroll{overflow-x:auto}table{width:100%;border-collapse:collapse;--border-color: #efefef}table thead tr{border-bottom:1px solid var(--border-color)}table thead th{text-align:left;padding:16px 24px;opacity:.4;font-size:.8em}table tbody tr{border-bottom:1px solid var(--border-color)}table tbody tr:last-child{border-bottom:none}td{padding:16px 24px}
`],encapsulation:2})};var at=(n,t)=>t.value.name&&t.value.amount;function ot(n,t){if(n&1){let e=E();o(0,"section",6)(1,"div",7)(2,"lg-gap-row",8)(3,"small"),p(4,"Apply for all"),l(),o(5,"lg-control",9),b(6,"lg-input",10),l(),o(7,"lg-control",9),b(8,"lg-textarea",11),l(),o(9,"lg-control",9)(10,"lg-number-input",12),v("onInputChange",function(){f(e);let c=m().$index,u=m();return h(u.onTaxValueChange(c))}),l()(),o(11,"lg-control",9)(12,"lg-checkbox",13),v("onCheckboxChanged",function(){f(e);let c=m().$index,u=m();return h(u.onTaxValueChange(c))}),l()(),o(13,"lg-control",9),b(14,"lg-number-input",14),l(),o(15,"lg-button",15),v("click",function(){f(e);let c=m().$index,u=m();return h(u.deleteTxRow(c))}),b(16,"mat-icon",16),l()()()()}if(n&2){let e=m().$index;r("formGroupName",e),a(),oe("taxes__row--odd",e%2!==0),a(),r("bottom",!0)("fit",!0),a(3),r("label","Name"),a(),r("placeholder","Name"),a(),r("label","Description"),a(),r("rows",3)("placeholder","Description"),a(),r("label","Value"),a(),r("placeholder","Value"),a(),r("label","Use percentage"),a(),r("customMark","%"),a(),r("label","Amount"),a(),r("disable",!0)("placeholder","Amount"),a(),R("danger"),r("size","tiny")("icon",!0)}}function lt(n,t){n&1&&A(0,ot,17,21,"ng-template",2)}var D=class n{constructor(){}totalTaxesChanged=X();taxesChanged=X();rows=Y([]);total=Y(0);taxesForm=new ee({rows:new ke([this._getRowGroup()])});rowsEffect=K(()=>{this._rowsFormArray.clear(),this.rows().forEach((t,e)=>{this._rowsFormArray.push(this._getRowGroup(t))}),this.taxesForm.updateValueAndValidity(),this._recalculateTaxes()});totalTaxes=T(0);totalEffect=K(()=>{this._recalculateTaxes()});formValues=this.taxesForm.valueChanges.pipe(U());get _rowsFormArray(){return this.taxesForm.get("rows")}ngOnInit(){this.formValues.subscribe(t=>{this.totalTaxes.set(this._getTotalTaxes()),this.totalTaxesChanged.emit(this.totalTaxes()),this.taxesChanged.emit(this.taxesForm.value.rows)})}onTaxValueChange(t){let e=this._rowsFormArray.at(t),i=this._getAmount(e.value.value,e.value.percentage);e.get("amount")?.patchValue(i.toFixed(2))}deleteTxRow(t){this._rowsFormArray.removeAt(t)}addTxRow(){this._rowsFormArray.push(this._getRowGroup())}_getTotalTaxes(){return this._rowsFormArray.controls.reduce((t,e)=>{let i=parseFloat(e.get("amount")?.value);return t+(isNaN(i)?0:i)},0)}_getAmount(t,e){let i=parseFloat(t.toString());return e?i*this.total():i}_recalculateTaxes(t=!1){this._rowsFormArray.controls.forEach((e,i)=>{let c=this._getAmount(e.get("value")?.value,e.get("percentage")?.value);e.get("amount")?.patchValue(c.toFixed(2),{emitEvent:!t})})}_getRowGroup(t=null){return new ee({name:new I(t?.name||""),description:new I(t?.description||""),value:new I(t?.value||0),amount:new I(0),percentage:new I(t?.percentage||!1)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=S({type:n,selectors:[["lg-taxes-and-fees-list"]],inputs:{rows:[1,"rows"],total:[1,"total"]},outputs:{totalTaxesChanged:"totalTaxesChanged",taxesChanged:"taxesChanged"},decls:19,vars:19,consts:[[3,"formGroup"],["formArrayName","rows"],["lgCardListItem",""],["lgSelfCenter","","lgShrink","",3,"click"],[3,"level"],[3,"center","mobileMode","relaxed"],[1,"taxes",3,"formGroupName"],[1,"taxes__row"],[3,"bottom","fit"],[3,"label"],["formControlName","name",3,"placeholder"],["formControlName","description",3,"rows","placeholder"],["lgParseMath","","formControlName","value",3,"onInputChange","placeholder"],["formControlName","percentage",3,"onCheckboxChanged","customMark"],["formControlName","amount",3,"disable","placeholder"],["lgSelfCenter","","lgShrink","",3,"click","size","icon"],["aria-hidden","false","aria-label","Example home icon","fontIcon","close"]],template:function(e,i){e&1&&(o(0,"lg-gap-column")(1,"lg-card-list",0),re(2,1),N(3,lt,1,0,null,2,at),pe(),l(),o(5,"lg-button",3),v("click",function(){return i.addTxRow()}),p(6," Add row "),l(),o(7,"lg-title",4)(8,"lg-gap-row",5),p(9," Total taxes and fees "),o(10,"b"),p(11),d(12,"number"),l()()(),o(13,"lg-title",4)(14,"lg-gap-row",5),p(15," Total "),o(16,"b"),p(17),d(18,"number"),l()()()()),e&2&&(a(),r("formGroup",i.taxesForm),a(2),M(i.taxesForm.controls.rows.controls),a(2),R("success"),a(2),r("level",4),a(),r("center",!0)("mobileMode",!0)("relaxed",!0),a(3),y(_(12,13,i.totalTaxes(),"1.2-5")),a(2),r("level",4),a(),r("center",!0)("mobileMode",!0)("relaxed",!0),a(3),y(_(18,16,i.totalTaxes()+i.total(),"1.2-2")))},dependencies:[Le,Pe,$,Ne,P,Re,Fe,De,Ae,Ie,We,$e,ze,Qe,W,Oe,Xe,Ke,j,qe,L,Ue,O],styles:[".taxes__row--odd[_ngcontent-%COMP%]{--control-bg: #fff}"]})};var rt=["*"];function pt(n,t){n&1&&G(0)}var Q=class n{constructor(){}showed=T(!1);get hidden(){return this.showed()?null:!0}show=()=>{this.showed.set(!0)};hide=()=>{this.showed.set(!1)};static \u0275fac=function(e){return new(e||n)};static \u0275cmp=S({type:n,selectors:[["lg-view-show"]],hostVars:1,hostBindings:function(e,i){e&2&&ae("hidden",i.hidden)},ngContentSelectors:rt,decls:1,vars:1,template:function(e,i){e&1&&(B(),x(0,pt,1,0)),e&2&&C(i.showed()?0:-1)},encapsulation:2})};var et=[{name:"VAT",description:"Value-Added Tax applied to ingredient purchases or product sales",value:.23,percentage:!0},{name:"Delivery Fee",description:"Fee charged for delivery services",value:.1,percentage:!1}];var ct=(n,t)=>[n,t];function mt(n,t){n&1&&q(0)}function st(n,t){if(n&1&&A(0,mt,1,0,"ng-container",18),n&2){m(2);let e=k(14);r("ngTemplateOutlet",e)}}function ut(n,t){n&1&&q(0)}function dt(n,t){if(n&1&&A(0,ut,1,0,"ng-container",18),n&2){m(2);let e=k(16);r("ngTemplateOutlet",e)}}function _t(n,t){if(n&1&&(o(0,"lg-gap-row",7)(1,"lg-gap-column",11)(2,"lg-card",12)(3,"lg-gap-row",13)(4,"div"),p(5," Calculation outcome "),l(),o(6,"b"),p(7),l()()(),o(8,"lg-card",12)(9,"lg-gap-row",13)(10,"div"),p(11," One "),o(12,"b"),p(13),l()(),o(14,"b"),x(15,st,1,1,"ng-container")(16,dt,1,1,"ng-container"),l()()(),o(17,"lg-card",12)(18,"lg-gap-row",13)(19,"div"),p(20," Total price "),l(),o(21,"b"),p(22),d(23,"number"),l()()(),o(24,"lg-card",12)(25,"lg-gap-row",13)(26,"div"),p(27," Total price with taxes "),l(),o(28,"b"),p(29),d(30,"number"),l()()()(),o(31,"lg-card",14)(32,"lg-gap-column",15)(33,"lg-title",16),p(34," Price breakdown "),l(),b(35,"canvas",17),l()(),o(36,"lg-card",14)(37,"lg-gap-column",15)(38,"lg-title",16),p(39," Weight breakdown "),l(),b(40,"canvas",17),l()()()),n&2){let e,i,c,u,s=m();r("center",!0)("mobileMode",!0),a(),r("position","stretch"),a(2),r("size","small")("relaxed",!0),a(4),se(" ",s.outcome_amount()," ",(e=s.result())==null||e.calculation==null||e.calculation.recipe==null?null:e.calculation.recipe.outcome_unit," "),a(2),r("size","small")("relaxed",!0),a(4),g(" ",(i=s.result())==null||i.calculation==null||i.calculation.recipe==null?null:i.calculation.recipe.outcome_unit," "),a(2),C(s.notInGrams()?15:16),a(3),r("size","small")("relaxed",!0),a(4),g(" ",_(23,27,(c=s.result())==null||c.calculation==null?null:c.calculation.totalPrice,"1.2-2")," "),a(3),r("size","small")("relaxed",!0),a(4),g(" ",_(30,30,(((u=s.result())==null||u.calculation==null?null:u.calculation.totalPrice)||0)+s.totalTaxes(),"1.2-2")," "),a(3),r("size","small"),a(),r("level",5),a(2),r("data",s.doughnutChartData().prices)("options",s.doughnutChartOptions)("type",s.doughnutChartType),a(2),r("size","small"),a(),r("level",5),a(2),r("data",s.doughnutChartData().weight)("options",s.doughnutChartOptions)("type",s.doughnutChartType)}}function xt(n,t){if(n&1&&(p(0),d(1,"number")),n&2){let e=m(2);g(" ",_(1,1,e.totalTaxes()/e.showedOutcome(),"1.2-2")," ")}}function Ct(n,t){if(n&1&&(p(0),d(1,"number")),n&2){let e=m(2);g(" ",_(1,1,e.totalTaxes(),"1.2-2")," ")}}function gt(n,t){if(n&1&&x(0,xt,2,4)(1,Ct,2,4),n&2){let e=m();C(e.notInGrams()?0:1)}}function ft(n,t){if(n&1&&(p(0),d(1,"number")),n&2){let e,i=m(2);g(" ",_(1,1,(((e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice)||1)/(i.showedOutcome()||1),"1.2-2")," ")}}function ht(n,t){if(n&1&&(p(0),d(1,"number")),n&2){let e,i=m(2);g(" ",_(1,1,(e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice,"1.2-2")," ")}}function Tt(n,t){if(n&1&&x(0,ft,2,4)(1,ht,2,4),n&2){let e=m();C(e.notInGrams()?0:1)}}function vt(n,t){if(n&1&&(p(0),d(1,"number")),n&2){let e,i=m(2);g(" ",_(1,1,((((e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice)||1)+i.totalTaxes())/(i.showedOutcome()||1),"1.2-2")," ")}}function wt(n,t){if(n&1&&(p(0),d(1,"number")),n&2){let e,i=m(2);g(" ",_(1,1,(((e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice)||1)+i.totalTaxes(),"1.2-2")," ")}}function bt(n,t){if(n&1&&x(0,vt,2,4)(1,wt,2,4),n&2){let e=m();C(e.notInGrams()?0:1)}}function yt(n,t){}function St(n,t){if(n&1&&(p(0),d(1,"number")),n&2){let e,i=m(2);g(" ",_(1,1,((((e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice)||1)+i.totalTaxes())/i.outcome_amount(),"1.2-5")," ")}}function Rt(n,t){if(n&1&&x(0,yt,0,0)(1,St,2,4),n&2){let e=m();C(e.notInGrams()?0:1)}}function Et(n,t){if(n&1&&(o(0,"a",25),p(1),l()),n&2){let e=m().$implicit;r("routerLink",Ce(2,ct,e.type==="recipe-row"?"/recipes/edit/":"/products/edit/",e.uuid)),a(),g(" ",e.name," ")}}function Ft(n,t){if(n&1&&p(0),n&2){let e=m().$implicit;g(" ",e.name," ")}}function At(n,t){if(n&1&&(o(0,"tr",24)(1,"td"),p(2),l(),o(3,"td")(4,"div",24),x(5,Et,2,5,"a",25)(6,Ft,1,1),l()(),o(7,"td"),p(8),d(9,"number"),l(),o(10,"td"),p(11),l(),o(12,"td"),p(13),d(14,"number"),l(),o(15,"td"),p(16),d(17,"number"),l()()),n&2){let e=t.$implicit,i=t.$index;r("ngClass",e.type),a(2),y(i+1),a(2),r("ngClass","indent-"+e.indent),a(),C(e.type!=="total"?5:6),a(3),y(_(9,8,e.amount,"1.0-2")),a(3),y(e.unit),a(2),y(_(14,11,e.price_per_gram,"1.2-5")),a(3),y(_(17,14,e.total,"1.2-5"))}}function It(n,t){if(n&1&&(o(0,"table")(1,"colgroup"),b(2,"col",19)(3,"col",20)(4,"col",21)(5,"col",22)(6,"col",21)(7,"col",23),l(),o(8,"thead")(9,"tr")(10,"th"),p(11,"#"),l(),o(12,"th"),p(13,"Name"),l(),o(14,"th"),p(15,"Amount"),l(),o(16,"th"),p(17,"Unit"),l(),o(18,"th"),p(19,"Price per unit"),l(),o(20,"th"),p(21,"Total"),l()()(),o(22,"tbody"),N(23,At,18,17,"tr",24,le),l()()),n&2){let e,i=m();a(23),M((e=i.result())==null?null:e.table)}}function Dt(n,t){n&1&&(o(0,"div"),p(1,"Loading..."),l())}function kt(n,t){if(n&1){let e=E();o(0,"lg-button",26),v("click",function(){f(e);let c=m();return h(c.saveDefaultTaxTemplate())}),p(1," Save as default template "),l()}n&2&&(R("primary"),r("flat",!0)("size","small"))}function Vt(n,t){if(n&1){let e=E();o(0,"lg-button",26),v("click",function(){f(e),m();let c=k(3);return h(c.show())}),p(1," Apply template "),l()}n&2&&(R("warning"),r("flat",!0)("size","small"))}function Nt(n,t){if(n&1){let e=E();o(0,"lg-gap-row",9),x(1,Vt,2,4,"lg-button",8),o(2,"lg-view-show",null,4)(4,"lg-gap-row",27)(5,"lg-multiselect",28),_e("ngModelChange",function(c){f(e);let u=m();return de(u.taxTemplateToApply,c)||(u.taxTemplateToApply=c),h(c)}),l(),o(6,"lg-button",26),v("click",function(){f(e);let c=m();return h(c.loadTaxTemplate())}),p(7," Apply "),l()()()()}if(n&2){let e=k(3),i=m();r("center",!0),a(),C(e.showed()?-1:1),a(3),r("center",!0)("size","small"),a(),ue("ngModel",i.taxTemplateToApply),r("autoLoad",!0)("resource","taxTemplates"),a(),R("primary"),r("flat",!0)("size","small")}}var tt=class n{constructor(t,e,i,c,u){this._aRoute=t;this._calculateRecipeService=e;this._formTemplateService=i;this._injector=c;this._router=u;this._aRoute.data.pipe(U()).subscribe(s=>{this.result.set(s.result),this.outcome_amount.set(this.result()?.calculation?.outcomeAmount||0),this.showedOutcome.set(this.result()?.calculation?.outcomeAmount||0),this.loadRecipeTaxTemplate()})}doughnutChartType="pie";uuid=Je("uuid");result=T(null);doughnutChartData=J(()=>{let t=this.result(),{prices:e,weight:i,labels:c,colors:u}=t?.calculation?.ingredients?.reduce((s,w)=>(s.prices.push(w.totalPrice),s.weight.push(w.totalWeightGram),s.labels.push(w.generalName),s.colors.push(w.product_id?.ownColor??w.recipe_id?.ownColor??be()),s),{prices:[],weight:[],labels:[],colors:[]})||{prices:[],weight:[],labels:[],colors:[]};return{prices:{labels:c,datasets:[{label:"Cost",data:e,backgroundColor:u,hoverBackgroundColor:u,borderWidth:0}]},weight:{labels:c,datasets:[{label:"Amount",data:i,backgroundColor:u,hoverBackgroundColor:u,borderWidth:0}]},ingredients:t?.calculation?.ingredients||[]}});doughnutChartOptions={plugins:{legend:{display:!1}},onClick:(t,e,i)=>{}};outcome_amount=Z(0);showedOutcome=T(0);totalTaxes=T(0);notInGrams=J(()=>this.result()?.calculation?.recipe?.outcome_unit&&this.result()?.calculation?.recipe?.outcome_unit!=="gram");taxesComponent=ge(D);taxRows=T([]);taxTemplateToApply=Z();canApplyTemplates=T(!0);canSaveDefaultTemplate=T(!0);chartClicked({event:t,active:e}){console.log(t,e)}chartHovered({event:t,active:e}){console.log(t,e)}onTaxTemplateChange(t){this.linkTaxTemplate(t.name)}onOutcomeChange=t=>{this._calculateRecipeService.calculateRecipe(this.uuid(),t).then(e=>{this.result.set(e),this.showedOutcome.set(t)})};saveDefaultTaxTemplate(){this._formTemplateService.saveTemplate("tax",{name:"Default Tax Template",createdAt:new Date().toISOString(),id:new Date().toISOString(),data:this.taxesComponent()?.taxesForm.value.rows?.map(t=>({name:t.name,description:t.description,value:t.value,percentage:t.percentage}))||[]}),this.canSaveDefaultTemplate.set(!1)}loadRecipeTemplate(){return this._formTemplateService.getTemplateByName("tax",this._taxTemplateName(this.result()?.calculation?.recipe))}loadRecipeTaxTemplate(){let t=this.loadRecipeTemplate();if(t){this.taxRows.set(t.data.map(c=>({name:c.name,description:c.description,value:c.value,percentage:c.percentage})));return}let e=this._formTemplateService.getTemplateByName("tax","Default Tax Template");e?this.taxRows.set(e.data.map(c=>({name:c.name,description:c.description,value:c.value,percentage:c.percentage}))):this.taxRows.set(et);let i=this._taxTemplateName(this.result()?.calculation?.recipe);this.saveTaxTemplate(i,this.taxesComponent()?.taxesForm.value.rows??[]),this.linkTaxTemplate(i)}saveTaxTemplate(t,e){this._formTemplateService.saveTemplate("tax",{name:t,createdAt:new Date().toISOString(),id:new Date().toISOString(),data:e.map(i=>({name:i.name,description:i.description,value:i.value,percentage:i.percentage}))||[]})}loadTaxTemplate(){let t=this.taxTemplateToApply()?.name;if(!t||t===this.result()?.calculation?.recipe?.taxTemplateName)return;let e=this._formTemplateService.getTemplateByName("tax",t);e&&(this.taxRows.set(e.data.map(i=>({name:i.name,description:i.description,value:i.value,percentage:i.percentage}))),this.onTaxTemplateChange(e))}ngOnInit(){}linkTaxTemplate(t){this._calculateRecipeService.linkTaxTemplate(this.uuid(),t).then(()=>{console.log("Tax template linked")})}onTotalTaxesChanged=t=>{this.totalTaxes.set(t)};onTaxesChanged=t=>{this.saveTaxTemplate(this._taxTemplateName(this.result()?.calculation?.recipe),t)};_taxTemplateName(t){return t.name+" Tax Template"}static \u0275fac=function(e){return new(e||n)(F(Te),F(ye),F(Se),F(ie),F(ve))};static \u0275cmp=S({type:n,selectors:[["lg-calculate-recipe"]],viewQuery:function(e,i){e&1&&ce(i.taxesComponent,D,5),e&2&&me()},inputs:{outcome_amount:[1,"outcome_amount"],taxTemplateToApply:[1,"taxTemplateToApply"]},outputs:{outcome_amount:"outcome_amountChange",taxTemplateToApply:"taxTemplateToApplyChange"},features:[xe([Me])],decls:26,vars:16,consts:[["taxAmount",""],["rawAmount",""],["totalAmount",""],["perGramAmount",""],["taxTemplateForm",""],[3,"center","mobileMode"],[3,"flat","link","size"],["lgExpand","",2,"max-width","1200px",3,"center","mobileMode"],[3,"flat","size","style"],[3,"center"],[3,"taxesChanged","totalTaxesChanged","rows","total"],[3,"position"],["size","small"],[3,"size","relaxed"],["lgWidth","270px","size","small"],[3,"size"],[3,"level"],["baseChart","",3,"data","options","type"],[4,"ngTemplateOutlet"],["span","1",2,"width","1%"],["span","1",2,"width","20%"],["span","1",2,"width","5%"],["span","1",2,"width","3%"],["span","1",2,"width","7%"],[3,"ngClass"],[3,"routerLink"],[3,"click","flat","size"],[3,"center","size"],[3,"ngModelChange","ngModel","autoLoad","resource"]],template:function(e,i){if(e&1){let c=E();o(0,"lg-fade-in")(1,"lg-container")(2,"lg-gap-column")(3,"lg-gap-row",5)(4,"lg-title"),p(5),l(),o(6,"lg-button",6),p(7," Edit "),l()(),x(8,_t,41,33,"lg-gap-row",7),A(9,gt,2,1,"ng-template",null,0,V)(11,Tt,2,1,"ng-template",null,1,V)(13,bt,2,1,"ng-template",null,2,V)(15,Rt,2,1,"ng-template",null,3,V),o(17,"lg-table-card"),x(18,It,25,0,"table")(19,Dt,2,0,"div"),l(),o(20,"lg-gap-row",5)(21,"lg-title"),p(22," Taxes and fees "),l(),x(23,kt,2,4,"lg-button",8),x(24,Nt,8,11,"lg-gap-row",9),l(),o(25,"lg-taxes-and-fees-list",10),v("taxesChanged",function(s){return f(c),h(i.onTaxesChanged(s))})("totalTaxesChanged",function(s){return f(c),h(i.onTotalTaxesChanged(s))}),l()()()()}if(e&2){let c,u,s,w;a(3),r("center",!0)("mobileMode",!0),a(2),g(" ",(c=i.result())==null||c.calculation==null||c.calculation.recipe==null?null:c.calculation.recipe.name," cost calculation "),a(),R("primary"),r("flat",!0)("link","/recipes/edit/"+((u=i.result())==null||u.calculation==null||u.calculation.recipe==null?null:u.calculation.recipe.uuid))("size","small"),a(2),C(!((s=i.result())==null||s.calculation==null)&&s.calculation.totalPrice?8:-1),a(10),C(i.result()?18:19),a(2),r("center",!0)("mobileMode",!0),a(3),C(i.canSaveDefaultTemplate()?23:-1),a(),C(i.canApplyTemplates()?24:-1),a(),r("rows",i.taxRows())("total",((w=i.result())==null||w.calculation==null?null:w.calculation.totalPrice)??0)}},dependencies:[Be,L,H,fe,W,$,O,Ve,P,Ee,we,j,D,he,Q,He,Ge,Ye,z,Ze,je],styles:[`lg-number-input .lg-number-input{width:100px}
`],encapsulation:2})};export{tt as CalculateRecipeComponent};
