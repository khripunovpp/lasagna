import{a as tt}from"./chunk-RUIQWBBA.js";import{c as Q}from"./chunk-WDPFI7ZV.js";import{a as Ze}from"./chunk-5VB7RKCV.js";import{a as Je}from"./chunk-CB3XELD7.js";import{a as We,b as He,c as $e}from"./chunk-S4DK6E62.js";import{a as $}from"./chunk-XWIK56RR.js";import{a as nt}from"./chunk-WD2SLVHY.js";import{f as Ke}from"./chunk-2CBSSBS2.js";import{a as Xe,b as Ye,c as et}from"./chunk-T22XBE6G.js";import{a as qe}from"./chunk-FFDATYAX.js";import{a as Ue}from"./chunk-DWOBUQ35.js";import{a as Qe}from"./chunk-W7F36SB2.js";import{a as je}from"./chunk-R3RPCOKV.js";import{a as H}from"./chunk-U5EBB5PJ.js";import{a as j}from"./chunk-HMU5FZIU.js";import{a as z}from"./chunk-O7M42S4C.js";import{a as ze,b as W}from"./chunk-WR2UF3SH.js";import{a as Le}from"./chunk-ALZEZ7BP.js";import{a as L}from"./chunk-BC325NGK.js";import"./chunk-SNDQO5FA.js";import{f as Fe,h as Ae}from"./chunk-UOWGK46T.js";import"./chunk-M3F6BOZF.js";import{a as Ee}from"./chunk-5KSZNU56.js";import{a as Oe}from"./chunk-L3DC7GP3.js";import"./chunk-WZGWS77O.js";import{f as O,g as Ie,h as ae,i as I,j as Ve,m as De,n as ke,o as Ne,p as Me,q as Pe,r as Be,s as Ge}from"./chunk-ODQSNCKZ.js";import"./chunk-2SYRDFEF.js";import{o as be,r as Se,s as Re}from"./chunk-UQJ3VPU4.js";import"./chunk-652DFWNF.js";import{f as we,h as ye,k as G}from"./chunk-QHW4G2KK.js";import{$b as xe,Ab as N,Bb as M,Bc as ie,Cb as l,Db as r,Eb as E,Fb as se,Gb as ue,Hb as J,Ib as R,Lb as T,Mb as m,Nb as P,Ob as B,Rb as K,Sb as X,Tb as Y,Va as a,Vb as de,Wb as _e,Xb as D,Yb as c,Zb as y,_a as F,_b as g,ac as Ce,bc as ge,cc as he,db as b,dc as fe,ga as h,gc as Te,ha as f,ib as A,ja as re,jc as d,lc as _,mc as k,na as v,pb as pe,qb as p,sb as ce,sc as Z,tb as S,tc as ee,wb as x,wc as te,xb as C,xc as ne,yb as me,yc as ve}from"./chunk-VF5EQBCE.js";import"./chunk-DELOOZDJ.js";import"./chunk-2WH2EVR6.js";var ot=["*"],U=class n{constructor(){}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["lg-table-card"]],ngContentSelectors:ot,decls:4,vars:1,consts:[[3,"flat"],[1,"table"],[1,"table__scroll"]],template:function(e,i){e&1&&(P(),l(0,"lg-card",0)(1,"div",1)(2,"div",2),B(3),r()()()),e&2&&p("flat",!0)},dependencies:[z],styles:[`:host{display:flex;width:100%}.table__scroll{overflow-x:auto}table{width:100%;border-collapse:collapse;--border-color: #efefef}table thead tr{border-bottom:1px solid var(--border-color)}table thead th{text-align:left;padding:16px 24px;opacity:.4;font-size:.8em}table tbody tr{border-bottom:1px solid var(--border-color)}table tbody tr:last-child{border-bottom:none}td{padding:16px 24px}
`],encapsulation:2})};var rt=(n,t)=>t.value.name&&t.value.amount;function pt(n,t){if(n&1){let e=R();l(0,"section",6)(1,"div",7)(2,"lg-gap-row",8)(3,"small"),c(4,"Apply for all"),r(),l(5,"lg-control",9),E(6,"lg-input",10),r(),l(7,"lg-control",9),E(8,"lg-textarea",11),r(),l(9,"lg-control",9)(10,"lg-number-input",12),T("onInputChange",function(){h(e);let o=m().$index,s=m();return f(s.onTaxValueChange(o))}),r()(),l(11,"lg-control",9)(12,"lg-checkbox",13),T("onCheckboxChanged",function(){h(e);let o=m().$index,s=m();return f(s.onTaxValueChange(o))}),r()(),l(13,"lg-control",9),E(14,"lg-number-input",14),r(),l(15,"lg-button",15),T("click",function(){h(e);let o=m().$index,s=m();return f(s.deleteTxRow(o))}),E(16,"mat-icon",16),r()()()()}if(n&2){let e=m().$index;p("formGroupName",e),a(),ce("taxes__row--odd",e%2!==0),a(),p("bottom",!0)("fit",!0),a(3),p("label","Name"),a(),p("placeholder","Name"),a(),p("label","Description"),a(),p("rows",3)("placeholder","Description"),a(),p("label","Value"),a(),p("placeholder","Value"),a(),p("label","Use percentage"),a(),p("customMark","%"),a(),p("label","Amount"),a(),p("disable",!0)("placeholder","Amount"),a(),S("danger"),p("size","tiny")("icon",!0)}}function ct(n,t){n&1&&A(0,pt,17,21,"ng-template",2)}var V=class n{constructor(){}totalTaxesChanged=te();taxesChanged=te();rows=ne([]);total=ne(0);taxesForm=new ae({rows:new Pe([this._getRowGroup()])});rowsEffect=ee(()=>{this._rowsFormArray.clear(),this.rows().forEach((t,e)=>{this._rowsFormArray.push(this._getRowGroup(t))}),this.taxesForm.updateValueAndValidity(),this._recalculateTaxes()});totalTaxes=v(0);totalEffect=ee(()=>{this._recalculateTaxes()});formValues=this.taxesForm.valueChanges.pipe($());get _rowsFormArray(){return this.taxesForm.get("rows")}ngOnInit(){this.formValues.subscribe(t=>{this.totalTaxes.set(this._getTotalTaxes()),this.totalTaxesChanged.emit(this.totalTaxes()),this.taxesChanged.emit(this.taxesForm.value.rows)})}onTaxValueChange(t){let e=this._rowsFormArray.at(t),i=this._getAmount(e.value.value,e.value.percentage);e.get("amount")?.patchValue(i.toFixed(2))}deleteTxRow(t){this._rowsFormArray.removeAt(t)}addTxRow(){this._rowsFormArray.push(this._getRowGroup())}_getTotalTaxes(){return this._rowsFormArray.controls.reduce((t,e)=>{let i=parseFloat(e.get("amount")?.value);return t+(isNaN(i)?0:i)},0)}_getAmount(t,e){let i=parseFloat(t.toString());return e?i*this.total():i}_recalculateTaxes(t=!1){this._rowsFormArray.controls.forEach((e,i)=>{let o=this._getAmount(e.get("value")?.value,e.get("percentage")?.value);e.get("amount")?.patchValue(o.toFixed(2),{emitEvent:!t})})}_getRowGroup(t=null){return new ae({name:new I(t?.name||""),description:new I(t?.description||""),value:new I(t?.value||0),amount:new I(0),percentage:new I(t?.percentage||!1)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["lg-taxes-and-fees-list"]],inputs:{rows:[1,"rows"],total:[1,"total"]},outputs:{totalTaxesChanged:"totalTaxesChanged",taxesChanged:"taxesChanged"},decls:19,vars:19,consts:[[3,"formGroup"],["formArrayName","rows"],["lgCardListItem",""],["lgSelfCenter","","lgShrink","",3,"click"],[3,"level"],[3,"center","mobileMode","relaxed"],[1,"taxes",3,"formGroupName"],[1,"taxes__row"],[3,"bottom","fit"],[3,"label"],["formControlName","name",3,"placeholder"],["formControlName","description",3,"rows","placeholder"],["lgParseMath","","formControlName","value",3,"onInputChange","placeholder"],["formControlName","percentage",3,"onCheckboxChanged","customMark"],["formControlName","amount",3,"disable","placeholder"],["lgSelfCenter","","lgShrink","",3,"click","size","icon"],["aria-hidden","false","aria-label","Example home icon","fontIcon","close"]],template:function(e,i){e&1&&(l(0,"lg-gap-column")(1,"lg-card-list",0),se(2,1),N(3,ct,1,0,null,2,rt),ue(),r(),l(5,"lg-button",3),T("click",function(){return i.addTxRow()}),c(6," Add row "),r(),l(7,"lg-title",4)(8,"lg-gap-row",5),c(9," Total taxes and fees "),l(10,"b"),c(11),d(12,"number"),r()()(),l(13,"lg-title",4)(14,"lg-gap-row",5),c(15," Total "),l(16,"b"),c(17),d(18,"number"),r()()()()),e&2&&(a(),p("formGroup",i.taxesForm),a(2),M(i.taxesForm.controls.rows.controls),a(2),S("success"),a(2),p("level",4),a(),p("center",!0)("mobileMode",!0)("relaxed",!0),a(3),y(_(12,13,i.totalTaxes(),"1.2-5")),a(2),p("level",4),a(),p("center",!0)("mobileMode",!0)("relaxed",!0),a(3),y(_(18,16,i.totalTaxes()+i.total(),"1.2-2")))},dependencies:[$e,We,W,Ge,O,Ie,De,Me,ke,Ne,qe,Ue,He,Xe,H,je,tt,et,j,Ye,L,Je,G],styles:[".taxes__row--odd[_ngcontent-%COMP%]{--control-bg: #fff}"]})};var mt=["*"];function st(n,t){n&1&&B(0)}var q=class n{constructor(){}showed=v(!1);get hidden(){return this.showed()?null:!0}show=()=>{this.showed.set(!0)};hide=()=>{this.showed.set(!1)};static \u0275fac=function(e){return new(e||n)};static \u0275cmp=b({type:n,selectors:[["lg-view-show"]],hostVars:1,hostBindings:function(e,i){e&2&&pe("hidden",i.hidden)},ngContentSelectors:mt,decls:1,vars:1,template:function(e,i){e&1&&(P(),x(0,st,1,0)),e&2&&C(i.showed()?0:-1)},encapsulation:2})};var it=[{name:"VAT",description:"Value-Added Tax applied to ingredient purchases or product sales",value:.23,percentage:!0},{name:"Delivery Fee",description:"Fee charged for delivery services",value:.1,percentage:!1}];var ut=["priceChart"],dt=["weightChart"],_t=(n,t)=>[n,t];function xt(n,t){n&1&&J(0)}function Ct(n,t){if(n&1&&A(0,xt,1,0,"ng-container",20),n&2){m(2);let e=D(14);p("ngTemplateOutlet",e)}}function gt(n,t){n&1&&J(0)}function ht(n,t){if(n&1&&A(0,gt,1,0,"ng-container",20),n&2){m(2);let e=D(16);p("ngTemplateOutlet",e)}}function ft(n,t){if(n&1){let e=R();l(0,"lg-gap-row",9)(1,"lg-gap-column",13)(2,"lg-card",14)(3,"lg-gap-row",15)(4,"div"),c(5," Calculation outcome "),r(),l(6,"b"),c(7),r()()(),l(8,"lg-card",14)(9,"lg-gap-row",15)(10,"div"),c(11," One "),l(12,"b"),c(13),r()(),l(14,"b"),x(15,Ct,1,1,"ng-container")(16,ht,1,1,"ng-container"),r()()(),l(17,"lg-card",14)(18,"lg-gap-row",15)(19,"div"),c(20," Total price "),r(),l(21,"b"),c(22),d(23,"number"),r()()(),l(24,"lg-card",14)(25,"lg-gap-row",15)(26,"div"),c(27," Total price with taxes "),r(),l(28,"b"),c(29),d(30,"number"),r()()()(),l(31,"lg-card",16)(32,"lg-gap-column",17)(33,"lg-title",18),c(34," Price breakdown "),r(),l(35,"canvas",19,4),T("chartHover",function(o){h(e);let s=m();return f(s.onChartHover("price",o.event,o.active))}),r()()(),l(37,"lg-card",16)(38,"lg-gap-column",17)(39,"lg-title",18),c(40," Weight breakdown "),r(),l(41,"canvas",19,5),T("chartHover",function(o){h(e);let s=m();return f(s.onChartHover("weight",o.event,o.active))}),r()()()()}if(n&2){let e,i,o,s,u=m();p("center",!0)("mobileMode",!0),a(),p("position","stretch"),a(2),p("size","small")("relaxed",!0),a(4),xe(" ",u.outcome_amount()," ",(e=u.result())==null||e.calculation==null||e.calculation.recipe==null?null:e.calculation.recipe.outcome_unit," "),a(2),p("size","small")("relaxed",!0),a(4),g(" ",(i=u.result())==null||i.calculation==null||i.calculation.recipe==null?null:i.calculation.recipe.outcome_unit," "),a(2),C(u.notInGrams()?15:16),a(3),p("size","small")("relaxed",!0),a(4),g(" ",_(23,27,(o=u.result())==null||o.calculation==null?null:o.calculation.totalPrice,"1.2-2")," "),a(3),p("size","small")("relaxed",!0),a(4),g(" ",_(30,30,(((s=u.result())==null||s.calculation==null?null:s.calculation.totalPrice)||0)+u.totalTaxes(),"1.2-2")," "),a(3),p("size","small"),a(),p("level",5),a(2),p("data",u.doughnutChartData().prices)("options",u.doughnutChartOptions)("type",u.doughnutChartType),a(3),p("size","small"),a(),p("level",5),a(2),p("data",u.doughnutChartData().weight)("options",u.doughnutChartOptions)("type",u.doughnutChartType)}}function Tt(n,t){if(n&1&&(c(0),d(1,"number")),n&2){let e=m(2);g(" ",_(1,1,e.totalTaxes()/e.showedOutcome(),"1.2-2")," ")}}function vt(n,t){if(n&1&&(c(0),d(1,"number")),n&2){let e=m(2);g(" ",_(1,1,e.totalTaxes(),"1.2-2")," ")}}function wt(n,t){if(n&1&&x(0,Tt,2,4)(1,vt,2,4),n&2){let e=m();C(e.notInGrams()?0:1)}}function yt(n,t){if(n&1&&(c(0),d(1,"number")),n&2){let e,i=m(2);g(" ",_(1,1,(((e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice)||1)/(i.showedOutcome()||1),"1.2-2")," ")}}function bt(n,t){if(n&1&&(c(0),d(1,"number")),n&2){let e,i=m(2);g(" ",_(1,1,(e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice,"1.2-2")," ")}}function St(n,t){if(n&1&&x(0,yt,2,4)(1,bt,2,4),n&2){let e=m();C(e.notInGrams()?0:1)}}function Rt(n,t){if(n&1&&(c(0),d(1,"number")),n&2){let e,i=m(2);g(" ",_(1,1,((((e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice)||1)+i.totalTaxes())/(i.showedOutcome()||1),"1.2-2")," ")}}function Et(n,t){if(n&1&&(c(0),d(1,"number")),n&2){let e,i=m(2);g(" ",_(1,1,(((e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice)||1)+i.totalTaxes(),"1.2-2")," ")}}function Ft(n,t){if(n&1&&x(0,Rt,2,4)(1,Et,2,4),n&2){let e=m();C(e.notInGrams()?0:1)}}function At(n,t){}function It(n,t){if(n&1&&(c(0),d(1,"number")),n&2){let e,i=m(2);g(" ",_(1,1,((((e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice)||1)+i.totalTaxes())/i.outcome_amount(),"1.2-5")," ")}}function Vt(n,t){if(n&1&&x(0,At,0,0)(1,It,2,4),n&2){let e=m();C(e.notInGrams()?0:1)}}function Dt(n,t){if(n&1&&(l(0,"a",27),c(1),r()),n&2){let e=m().$implicit;p("routerLink",Te(2,_t,e.type==="recipe-row"?"/recipes/edit/":"/products/edit/",e.uuid)),a(),g(" ",e.name," ")}}function kt(n,t){if(n&1&&c(0),n&2){let e=m().$implicit;g(" ",e.name," ")}}function Nt(n,t){if(n&1&&(l(0,"tr",26)(1,"td"),c(2),r(),l(3,"td")(4,"div",26),x(5,Dt,2,5,"a",27)(6,kt,1,1),r()(),l(7,"td"),c(8),d(9,"number"),r(),l(10,"td"),c(11),r(),l(12,"td"),c(13),d(14,"number"),r(),l(15,"td"),c(16),d(17,"number"),r()()),n&2){let e=t.$implicit,i=t.$index;p("ngClass",e.type),a(2),y(i+1),a(2),p("ngClass","indent-"+e.indent),a(),C(e.type!=="total"?5:6),a(3),y(_(9,8,e.amount,"1.0-2")),a(3),y(e.unit),a(2),y(_(14,11,e.price_per_gram,"1.2-5")),a(3),y(_(17,14,e.total,"1.2-5"))}}function Mt(n,t){if(n&1&&(l(0,"table")(1,"colgroup"),E(2,"col",21)(3,"col",22)(4,"col",23)(5,"col",24)(6,"col",23)(7,"col",25),r(),l(8,"thead")(9,"tr")(10,"th"),c(11,"#"),r(),l(12,"th"),c(13,"Name"),r(),l(14,"th"),c(15,"Amount"),r(),l(16,"th"),c(17,"Unit"),r(),l(18,"th"),c(19,"Price per unit"),r(),l(20,"th"),c(21,"Total"),r()()(),l(22,"tbody"),N(23,Nt,18,17,"tr",26,me),r()()),n&2){let e,i=m();a(23),M((e=i.result())==null?null:e.table)}}function Pt(n,t){n&1&&(l(0,"div"),c(1,"Loading..."),r())}function Bt(n,t){if(n&1){let e=R();l(0,"lg-button",28),T("click",function(){h(e);let o=m();return f(o.saveDefaultTaxTemplate())}),c(1," Save as default template "),r()}n&2&&(S("primary"),p("flat",!0)("size","small"))}function Gt(n,t){if(n&1){let e=R();l(0,"lg-button",28),T("click",function(){h(e),m();let o=D(3);return f(o.show())}),c(1," Apply template "),r()}n&2&&(S("warning"),p("flat",!0)("size","small"))}function Ot(n,t){if(n&1){let e=R();l(0,"lg-gap-row",11),x(1,Gt,2,4,"lg-button",10),l(2,"lg-view-show",null,6)(4,"lg-gap-row",29)(5,"lg-multiselect",30),he("ngModelChange",function(o){h(e);let s=m();return ge(s.taxTemplateToApply,o)||(s.taxTemplateToApply=o),f(o)}),r(),l(6,"lg-button",28),T("click",function(){h(e);let o=m();return f(o.loadTaxTemplate())}),c(7," Apply "),r()()()()}if(n&2){let e=D(3),i=m();p("center",!0),a(),C(e.showed()?-1:1),a(3),p("center",!0)("size","small"),a(),Ce("ngModel",i.taxTemplateToApply),p("autoLoad",!0)("resource","taxTemplates"),a(),S("primary"),p("flat",!0)("size","small")}}var at=class n{constructor(t,e,i,o,s){this._aRoute=t;this._calculateRecipeService=e;this._formTemplateService=i;this._injector=o;this._router=s;this._aRoute.data.pipe($()).subscribe(u=>{this.result.set(u.result),this.outcome_amount.set(this.result()?.calculation?.outcomeAmount||0),this.showedOutcome.set(this.result()?.calculation?.outcomeAmount||0),this.loadRecipeTaxTemplate()})}ngAfterViewInit(){window.chartPrices=this.chartPrices,window.chartWeight=this.chartWeight}doughnutChartType="pie";uuid=Ze("uuid");result=v(null);doughnutChartData=Z(()=>{let t=this.result(),{prices:e,weight:i,labels:o,colors:s}=t?.calculation?.ingredients?.reduce((u,w)=>(u.prices.push(w.totalPrice),u.weight.push(w.totalWeightGram),u.labels.push(w.generalName),u.colors.push(w.product_id?.ownColor??w.recipe_id?.ownColor??Ee()),u),{prices:[],weight:[],labels:[],colors:[]})||{prices:[],weight:[],labels:[],colors:[]};return{prices:{labels:o,datasets:[{label:"Cost",data:e,backgroundColor:s,borderWidth:0}]},weight:{labels:o,datasets:[{label:"Amount",data:i,backgroundColor:s,borderWidth:0}]},ingredients:t?.calculation?.ingredients||[]}});onChartHover(t,e,i){if(!i?.length)return;let o=t==="price"?this.chartWeight:this.chartPrices,s=i[0].index;console.log(o?.chart,s,t),o?.chart?.update()}doughnutChartOptions={plugins:{legend:{display:!1}},onClick:(t,e,i)=>{}};chartPrices;chartWeight;outcome_amount=ie(0);showedOutcome=v(0);totalTaxes=v(0);notInGrams=Z(()=>this.result()?.calculation?.recipe?.outcome_unit&&this.result()?.calculation?.recipe?.outcome_unit!=="gram");taxesComponent=ve(V);taxRows=v([]);taxTemplateToApply=ie();canApplyTemplates=v(!0);canSaveDefaultTemplate=v(!0);chartClicked({event:t,active:e}){console.log(t,e)}chartHovered({event:t,active:e}){console.log(t,e)}onTaxTemplateChange(t){this.linkTaxTemplate(t.name)}onOutcomeChange=t=>{this._calculateRecipeService.calculateRecipe(this.uuid(),t).then(e=>{this.result.set(e),this.showedOutcome.set(t)})};saveDefaultTaxTemplate(){this._formTemplateService.saveTemplate("tax",{name:"Default Tax Template",createdAt:new Date().toISOString(),id:new Date().toISOString(),data:this.taxesComponent()?.taxesForm.value.rows?.map(t=>({name:t.name,description:t.description,value:t.value,percentage:t.percentage}))||[]}),this.canSaveDefaultTemplate.set(!1)}loadRecipeTemplate(){return this._formTemplateService.getTemplateByName("tax",this._taxTemplateName(this.result()?.calculation?.recipe))}loadRecipeTaxTemplate(){let t=this.loadRecipeTemplate();if(t){this.taxRows.set(t.data.map(o=>({name:o.name,description:o.description,value:o.value,percentage:o.percentage})));return}let e=this._formTemplateService.getTemplateByName("tax","Default Tax Template");e?this.taxRows.set(e.data.map(o=>({name:o.name,description:o.description,value:o.value,percentage:o.percentage}))):this.taxRows.set(it);let i=this._taxTemplateName(this.result()?.calculation?.recipe);this.saveTaxTemplate(i,this.taxesComponent()?.taxesForm.value.rows??[]),this.linkTaxTemplate(i)}saveTaxTemplate(t,e){this._formTemplateService.saveTemplate("tax",{name:t,createdAt:new Date().toISOString(),id:new Date().toISOString(),data:e.map(i=>({name:i.name,description:i.description,value:i.value,percentage:i.percentage}))||[]})}loadTaxTemplate(){let t=this.taxTemplateToApply()?.name;if(!t||t===this.result()?.calculation?.recipe?.taxTemplateName)return;let e=this._formTemplateService.getTemplateByName("tax",t);e&&(this.taxRows.set(e.data.map(i=>({name:i.name,description:i.description,value:i.value,percentage:i.percentage}))),this.onTaxTemplateChange(e))}ngOnInit(){}linkTaxTemplate(t){this._calculateRecipeService.linkTaxTemplate(this.uuid(),t).then(()=>{console.log("Tax template linked")})}onTotalTaxesChanged=t=>{this.totalTaxes.set(t)};onTaxesChanged=t=>{this.saveTaxTemplate(this._taxTemplateName(this.result()?.calculation?.recipe),t)};_taxTemplateName(t){return t.name+" Tax Template"}static \u0275fac=function(e){return new(e||n)(F(be),F(Fe),F(Ae),F(re),F(Se))};static \u0275cmp=b({type:n,selectors:[["lg-calculate-recipe"]],viewQuery:function(e,i){if(e&1&&(de(i.taxesComponent,V,5),K(ut,5,Q),K(dt,5,Q)),e&2){_e();let o;X(o=Y())&&(i.chartPrices=o.first),X(o=Y())&&(i.chartWeight=o.first)}},inputs:{outcome_amount:[1,"outcome_amount"],taxTemplateToApply:[1,"taxTemplateToApply"]},outputs:{outcome_amount:"outcome_amountChange",taxTemplateToApply:"taxTemplateToApplyChange"},features:[fe([Oe])],decls:26,vars:16,consts:[["taxAmount",""],["rawAmount",""],["totalAmount",""],["perGramAmount",""],["priceChart",""],["weightChart",""],["taxTemplateForm",""],[3,"center","mobileMode"],[3,"flat","link","size"],["lgExpand","",2,"max-width","1200px",3,"center","mobileMode"],[3,"flat","size","style"],[3,"center"],[3,"taxesChanged","totalTaxesChanged","rows","total"],[3,"position"],["size","small"],[3,"size","relaxed"],["lgWidth","270px","size","small"],[3,"size"],[3,"level"],["baseChart","",3,"chartHover","data","options","type"],[4,"ngTemplateOutlet"],["span","1",2,"width","1%"],["span","1",2,"width","20%"],["span","1",2,"width","5%"],["span","1",2,"width","3%"],["span","1",2,"width","7%"],[3,"ngClass"],[3,"routerLink"],[3,"click","flat","size"],[3,"center","size"],[3,"ngModelChange","ngModel","autoLoad","resource"]],template:function(e,i){if(e&1){let o=R();l(0,"lg-fade-in")(1,"lg-container")(2,"lg-gap-column")(3,"lg-gap-row",7)(4,"lg-title"),c(5),r(),l(6,"lg-button",8),c(7," Edit "),r()(),x(8,ft,43,33,"lg-gap-row",9),A(9,wt,2,1,"ng-template",null,0,k)(11,St,2,1,"ng-template",null,1,k)(13,Ft,2,1,"ng-template",null,2,k)(15,Vt,2,1,"ng-template",null,3,k),l(17,"lg-table-card"),x(18,Mt,25,0,"table")(19,Pt,2,0,"div"),r(),l(20,"lg-gap-row",7)(21,"lg-title"),c(22," Taxes and fees "),r(),x(23,Bt,2,4,"lg-button",10),x(24,Ot,8,11,"lg-gap-row",11),r(),l(25,"lg-taxes-and-fees-list",12),T("taxesChanged",function(u){return h(o),f(i.onTaxesChanged(u))})("totalTaxesChanged",function(u){return h(o),f(i.onTotalTaxesChanged(u))}),r()()()()}if(e&2){let o,s,u,w;a(3),p("center",!0)("mobileMode",!0),a(2),g(" ",(o=i.result())==null||o.calculation==null||o.calculation.recipe==null?null:o.calculation.recipe.name," cost calculation "),a(),S("primary"),p("flat",!0)("link","/recipes/edit/"+((s=i.result())==null||s.calculation==null||s.calculation.recipe==null?null:s.calculation.recipe.uuid))("size","small"),a(2),C(!((u=i.result())==null||u.calculation==null)&&u.calculation.totalPrice?8:-1),a(10),C(i.result()?18:19),a(2),p("center",!0)("mobileMode",!0),a(3),C(i.canSaveDefaultTemplate()?23:-1),a(),C(i.canApplyTemplates()?24:-1),a(),p("rows",i.taxRows())("total",((w=i.result())==null||w.calculation==null?null:w.calculation.totalPrice)??0)}},dependencies:[ze,L,U,we,H,W,G,Be,O,Ve,Re,j,V,ye,q,Ke,Le,Q,z,nt,Qe],styles:[`lg-number-input .lg-number-input{width:100px}
`],encapsulation:2})};export{at as CalculateRecipeComponent};
