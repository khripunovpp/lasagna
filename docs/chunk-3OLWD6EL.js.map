{
  "version": 3,
  "sources": ["src/app/shared/view/ui/grouping-sorting/grouping-sorting.directive.ts", "src/app/shared/view/ui/grouping-sorting/grouping-sorting.component.ts"],
  "sourcesContent": ["import {Component, Directive, effect, EventEmitter, Input, Output, signal, TemplateRef} from '@angular/core';\nimport {FlexRowComponent} from '../../layout/flex-row.component';\nimport {ButtonComponent} from '../button/button.component';\nimport {DropdownComponent} from '../../../../features/controls/dropdown/dropdown.component';\nimport {FlexColumnComponent} from '../../layout/flex-column.component';\n\n@Directive({\n  selector: '[lgGroupingSortingContainer]',\n  standalone: true,\n})\nexport class GroupingSortingContainerComponent {\n  constructor(\n    public templateRef: TemplateRef<any>,\n  ) {\n  }\n\n}\n", "import {Component, ContentChild, effect, EventEmitter, inject, Output, signal} from '@angular/core';\nimport {FlexRowComponent} from '../../layout/flex-row.component';\nimport {ButtonComponent} from '../button/button.component';\nimport {DropdownComponent} from '../../../../features/controls/dropdown/dropdown.component';\nimport {FlexColumnComponent} from '../../layout/flex-column.component';\nimport {GroupingSortingContainerComponent} from './grouping-sorting.directive';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {injectQueryParams} from '../../../helpers/route.helpers';\nimport {TranslatePipe, TranslateService} from '@ngx-translate/core';\nimport {WINDOW} from '../../../service/tokens/window.token';\n\n@Component({\n  selector: 'lg-grouping-sorting',\n  standalone: true,\n  imports: [\n    FlexRowComponent,\n    ButtonComponent,\n    DropdownComponent,\n    FlexColumnComponent,\n    TranslatePipe\n  ],\n  template: `\n    <lg-flex-row [mobileMode]=\"true\"\n                 size=\"medium\">\n      <lg-dropdown>\n        <lg-button [outlined]=\"true\"\n                   [size]=\"'small'\"\n                   [style]=\"'primary'\"\n                   lgDropdownAnchor>\n          {{ getGroupingLabel(sorting().group) }}\n        </lg-button>\n\n        <lg-flex-column [size]=\"'small'\">\n          <span>{{ 'grouping.title' | translate }}</span>\n\n          <lg-button (click)=\"onSortChange({group: 'category'})\"\n                     [flat]=\"true\"\n                     [size]=\"'small'\"\n                     [style]=\"'warning'\">\n            {{ groupingToLabel['category']  | translate }}\n          </lg-button>\n\n          <lg-button (click)=\"onSortChange({group: 'tag'})\"\n                     [flat]=\"true\"\n                     [size]=\"'small'\"\n                     [style]=\"'warning'\">\n            {{ groupingToLabel['tag']  | translate }}\n          </lg-button>\n\n          <lg-button (click)=\"onSortChange({group: 'createdAt'})\"\n                     [flat]=\"true\"\n                     [size]=\"'small'\"\n                     [style]=\"'warning'\">\n            {{ groupingToLabel['createdAt'] | translate }}\n          </lg-button>\n\n          <lg-button (click)=\"onSortChange({group: 'alphabetical'})\"\n                     [flat]=\"true\"\n                     [size]=\"'small'\"\n                     [style]=\"'warning'\">\n            {{ groupingToLabel['alphabetical'] | translate }}\n          </lg-button>\n        </lg-flex-column>\n      </lg-dropdown>\n\n      <!--      <lg-dropdown>-->\n      <!--        <lg-button [size]=\"'small'\" lgDropdownAnchor>-->\n      <!--          Sort by: {{ sorting().field }}-->\n      <!--        </lg-button>-->\n\n      <!--        <lg-gap-column [size]=\"'small'\">-->\n      <!--          <lg-button [size]=\"'small'\"-->\n      <!--                     (click)=\"onSortChange({field: 'name'})\"-->\n      <!--                     [style]=\"'warning'\"-->\n      <!--                     [flat]=\"true\">-->\n      <!--            Name-->\n      <!--          </lg-button>-->\n\n      <!--          <lg-button [size]=\"'small'\"-->\n      <!--                     (click)=\"onSortChange({field: 'createdAt'})\"-->\n      <!--                     [style]=\"'warning'\"-->\n      <!--                     [flat]=\"true\">-->\n      <!--            Date-->\n      <!--          </lg-button>-->\n      <!--        </lg-gap-column>-->\n      <!--      </lg-dropdown>-->\n\n      <lg-dropdown>\n        <lg-button [outlined]=\"true\"\n                   [size]=\"'small'\"\n                   [style]=\"'primary'\"\n                   lgDropdownAnchor>\n          {{ getGroupingDirectionLabel(sorting().direction) }}\n        </lg-button>\n\n        <lg-flex-column [size]=\"'small'\">\n          <span>{{ 'grouping.direction.title' | translate }}</span>\n\n          <lg-button (click)=\"onSortChange({direction: 'asc'})\"\n                     [flat]=\"true\"\n                     [size]=\"'small'\"\n                     [style]=\"'warning'\">\n            {{ groupingDirectionToLabel['asc'] | translate }}\n          </lg-button>\n\n          <lg-button (click)=\"onSortChange({direction: 'desc'})\"\n                     [flat]=\"true\"\n                     [size]=\"'small'\"\n                     [style]=\"'warning'\">\n            {{ groupingDirectionToLabel['desc']  | translate }}\n          </lg-button>\n        </lg-flex-column>\n      </lg-dropdown>\n    </lg-flex-row>\n  `\n})\nexport class GroupingSortingComponent {\n  constructor(\n    private translateService: TranslateService\n  ) {\n  }\n\n  readonly groupingToLabel: Record<string, string> = {\n    category: 'grouping.by-category',\n    tag: 'grouping.by-tag',\n    createdAt: 'grouping.by-creation-date',\n    alphabetical: 'grouping.by-first-letter'\n  };\n  readonly groupingDirectionToLabel: Record<string, string> = {\n    asc: 'grouping.direction.asc',\n    desc: 'grouping.direction.desc'\n  };\n  router = inject(Router);\n  aRouter = inject(ActivatedRoute);\n  @ContentChild(GroupingSortingContainerComponent) context!: GroupingSortingContainerComponent;\n\n  @Output() sortChange = new EventEmitter<{ field: string, direction: 'asc' | 'desc' | string }>();\n  @Output() groupChange = new EventEmitter<string>();\n\n  groupingParam = injectQueryParams('groupBy');\n  sortDirection = injectQueryParams<string | null>('sortDirection');\n  sortField = injectQueryParams('sortField');\n\n  defaultDirection = 'asc';\n  sorting = signal<{\n    field: string,\n    direction: 'asc' | 'desc' | string,\n    group: string\n  }>({field: 'name', direction: this.defaultDirection, group: 'category'});\n  sortingEffect = effect(() => {\n    const sort = this.sorting();\n    this.sortChange.emit(sort);\n  });\n  private readonly _window = inject(WINDOW);\n\n  ngOnInit() {\n    const params = this.aRouter.snapshot.queryParams;\n    const groupBy = this.groupingParam();\n    const sortDirection = this.sortDirection();\n    const sortField = this.sortField();\n\n    this.sorting.set({\n      field: sortField?.toString() || 'name',\n      direction: sortDirection\n        ? sortDirection === 'asc' ? 'asc' : 'desc'\n        : this.defaultDirection,\n      group: groupBy?.toString() || 'category'\n    });\n  }\n\n  onSortChange(\n    props: {\n      field?: string\n      direction?: 'asc' | 'desc'\n      group?: string\n    }\n  ) {\n    this.sorting.set({\n      field: props.field || this.sorting().field,\n      direction: props.direction || this.sorting().direction,\n      group: props.group || this.sorting().group\n    });\n    this.sortChange.emit(this.sorting());\n\n    this.router.navigate([], {\n      queryParams: {\n        sortField: props.field || this.sorting().field,\n        sortDirection: props.direction || this.sorting().direction,\n        groupBy: props.group || this.sorting().group\n      },\n      relativeTo: this.aRouter,\n      queryParamsHandling: 'merge',\n    }).then(() => {\n      // update page\n      this._window?.location.reload();\n    })\n  }\n\n  getGroupingLabel(group: string): string {\n    const key = this.groupingToLabel[group];\n    return key ? this.translateService.instant(key) : group;\n  }\n\n  getGroupingDirectionLabel(direction: string): string {\n    const key = this.groupingDirectionToLabel[direction];\n    return key ? this.translateService.instant(key) : direction;\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
