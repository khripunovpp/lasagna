import{a as $}from"./chunk-7RBAYOMD.js";import{a as Z}from"./chunk-EFUQGURE.js";import{a as Y}from"./chunk-RQOUIVSL.js";import"./chunk-XJ4QFZPO.js";import{a as X}from"./chunk-T6WLNLQD.js";import{a as K}from"./chunk-UKFGKW5Z.js";import{a as J}from"./chunk-XYWRALA2.js";import{a as x}from"./chunk-FZG57PQR.js";import"./chunk-4U4Z3QUR.js";import{a as Q}from"./chunk-FMODVMJQ.js";import"./chunk-MPFUNZLY.js";import{a as L}from"./chunk-UEOYHVW7.js";import{c as V}from"./chunk-YHID353M.js";import"./chunk-NIXUCLGK.js";import{G as B,I as k,J as O,K as M,M as G,O as j,R as W,U as q,Y as z,b as S,j as E,k as D,ma as H,oa as U,z as h}from"./chunk-JCWE4SYV.js";import{m as R}from"./chunk-JNPSWS74.js";import"./chunk-CABIONZL.js";import"./chunk-EMIJRNYJ.js";import"./chunk-FO7Q5A2R.js";import{$a as i,Bc as n,Cc as a,Db as y,Eb as _,Jb as r,Kb as d,Lb as m,Mb as w,Mc as T,Qb as P,Qc as N,Ub as v,Vb as l,eb as c,ic as p,jc as I,kc as u,la as b,lb as C,ma as A,va as f}from"./chunk-7BND6AGV.js";import"./chunk-2RGDSI3Q.js";import"./chunk-FK6H3RFT.js";import"./chunk-C6Q5SG76.js";function it(t,e){t&1&&(p(0),n(1,"translate")),t&2&&u(" ",a(1,1,"settings.category.save")," ")}function rt(t,e){t&1&&(p(0),n(1,"translate")),t&2&&u(" ",a(1,1,"settings.category.no-changes")," ")}function nt(t,e){if(t&1){let o=P();d(0,"lg-button",6),v("click",function(){b(o);let g=l();return A(g.editCategory())}),y(1,it,2,3)(2,rt,2,3),m()}if(t&2){let o=l();r("disabled",!o.form.dirty),i(),_(o.form.dirty?1:2)}}function at(t,e){t&1&&(p(0),n(1,"translate")),t&2&&u(" ",a(1,1,"settings.category.add")," ")}function dt(t,e){t&1&&(p(0),n(1,"translate")),t&2&&u(" ",a(1,1,"settings.category.enter-name")," ")}function st(t,e){if(t&1){let o=P();d(0,"lg-button",6),v("click",function(){b(o);let g=l();return A(g.addCategory())}),y(1,at,2,3)(2,dt,2,3),m()}if(t&2){let o=l();r("disabled",!o.form.dirty),i(),_(o.form.dirty?1:2)}}var F=class t{constructor(e,o){this._categoryRepository=e;this._notificationsService=o}form=new M({name:new G("",B.required)});category=f(void 0);uuid=N("");uuidEffect=T(()=>{if(!this.uuid()){this.category.set(S.empty());return}this._categoryRepository.getOne(this.uuid()).then(e=>{this.reset(e)})});reset(e){this.form.reset(E(e)),this.category.set(e),this.form.markAsPristine()}ngOnInit(){this.form.valueChanges.subscribe(e=>{this.category()?.update(D(e))})}addCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.addOne(this.category()).then(()=>{this.form.reset({name:""}),this._notificationsService.success("settings.category.added"),this.form.markAsPristine()})}editCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.updateOne(this.uuid(),this.category()).then(()=>{this._notificationsService.success("settings.category.edited"),this.form.markAsPristine()})}onEnter(){this.uuid()?this.editCategory():this.addCategory()}static \u0275fac=function(o){return new(o||t)(c(V),c(H))};static \u0275cmp=C({type:t,selectors:[["lg-add-category-form"]],inputs:{uuid:[1,"uuid"]},decls:9,vars:10,consts:[[3,"formGroup"],[3,"bottom","mobileMode"],["lgExpand","",3,"label"],["formControlName","name",3,"onEnter","placeholder"],["lgNoWrap",""],[3,"disabled"],[3,"click","disabled"]],template:function(o,s){o&1&&(d(0,"form",0)(1,"lg-flex-row",1)(2,"lg-control",2),n(3,"translate"),d(4,"lg-input",3),n(5,"translate"),v("onEnter",function(){return s.onEnter()}),m()(),d(6,"div",4),y(7,nt,3,2,"lg-button",5)(8,st,3,2,"lg-button",5),m()()()),o&2&&(r("formGroup",s.form),i(),r("bottom",!0)("mobileMode",!0),i(),r("label",a(3,6,"settings.category.name")),i(2),r("placeholder",a(5,8,"settings.category.placeholder")),i(3),_(s.uuid()?7:8))},dependencies:[z,j,k,O,W,q,Z,Y,U,x,X,$,h],encapsulation:2})};var tt=class t{constructor(e){this._aRoute=e}uuid=f("");ngOnInit(){this._aRoute.params.subscribe(e=>{this.uuid.set(e.uuid)})}static \u0275fac=function(o){return new(o||t)(c(R))};static \u0275cmp=C({type:t,selectors:[["lg-add-category"]],decls:9,vars:7,consts:[[3,"center"],[3,"uuid"]],template:function(o,s){o&1&&(d(0,"lg-fade-in")(1,"lg-container")(2,"lg-flex-row",0)(3,"lg-title"),p(4),n(5,"translate"),n(6,"translate"),m()(),d(7,"lg-card"),w(8,"lg-add-category-form",1),m()()()),o&2&&(i(2),r("center",!0),i(2),I(s.uuid()?a(5,3,"categories.edit-product"):a(6,5,"categories.add-product")),i(4),r("uuid",s.uuid()))},dependencies:[J,K,L,F,x,Q,h],encapsulation:2})};export{tt as AddCategoryComponent};
