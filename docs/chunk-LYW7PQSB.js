import{a as q,b as H,d as J,e as T}from"./chunk-X3CUQXJD.js";import{a as K}from"./chunk-V5ZKHR35.js";import{a as z,b as C,f as U,j as Q,r as j}from"./chunk-IJHR3HML.js";import{$b as D,Ab as c,F as k,Fb as S,Ib as h,Jb as f,P as V,Sa as a,Sb as O,T as m,Tb as $,Vb as u,Xa as A,Xb as p,Zb as B,_b as N,ab as g,ac as _,ea as y,f as I,fa as b,fb as R,l as L,la as d,mb as F,nb as v,pb as M,qb as E,qc as P,tc as G,uc as s,vc as W,xb as w,yb as x,zb as l}from"./chunk-RDTQHNEQ.js";var ie=(o,e)=>e.value;function re(o,e){if(o&1){let t=S();l(0,"lg-button",2),h("click",function(){let i=y(t),r=i.$implicit,ne=i.$index,oe=f();return b(oe.onClickItem(r,ne))}),u(1),c()}if(o&2){let t=e.$implicit,n=e.$index,i=e.$count,r=f();E(t.style||"default"),v("active",r.activeIndex()==n)("noLeftRadius",n===i-1)("noRightRadius",n===0)("noRadius",n!==0&&n!==i-1),a(),p(" ",t.label," ")}}var X=class o{items=s();activeIndex=d(0);onClickItem(e,t){this.activeIndex.set(t),this.writeValue(e.value),e.onClick()}value=d("");effect=P(()=>{let e=this.items()?.findIndex(t=>t.value===this.value())??-1;this.activeIndex.set(e===-1?0:e)});onChange=()=>{};onTouched=()=>{};writeValue(e){this._change(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onChangeInput(e){this._change(e.target.value)}_change(e){this.value.set(e),this.onChange(this.value())}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=g({type:o,selectors:[["lg-buttons-group"]],inputs:{items:[1,"items"]},features:[_([{provide:C,useExisting:m(()=>o),multi:!0}])],decls:3,vars:0,consts:[[1,"buttons-group"],[3,"active","style","noLeftRadius","noRightRadius","noRadius"],[3,"click","active","noLeftRadius","noRightRadius","noRadius"]],template:function(t,n){t&1&&(l(0,"div",0),w(1,re,2,7,"lg-button",1,ie),c()),t&2&&(a(),x(n.items()))},dependencies:[z],styles:[`.buttons-group{display:flex}.buttons-group lg-button{flex:1}.buttons-group lg-button button{width:100%}
`],encapsulation:2})};var se=(o,e)=>e.label;function ae(o,e){if(o&1){let t=S();l(0,"span",2),h("click",function(){let i=y(t).$implicit,r=f();return b(r.onSelect(i))}),u(1),c()}if(o&2){let t=e.$implicit,n=e.$index,i=e.$count,r=f();M("selected",t.value===r.value),F("data-last",n===i-1?!0:null),a(),p(" ",t.label," ")}}var ee=class o{constructor(){}control=s();items=[];onChangeFn;value;selectedItem;onSelect=e=>{this.applyValue(e.value)};registerOnChange(e){this.onChangeFn=e}registerOnTouched(e){}writeValue(e){this.applyValue(e)}applyValue(e){this.value=e,this.onChangeFn?.(e),this.control()?.writeValue(e)}ngOnInit(){}clearSelected(){this.value=null}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=g({type:o,selectors:[["lg-chips-list"]],inputs:{control:[1,"control"],items:"items"},features:[_([{provide:C,useExisting:m(()=>o),multi:!0}])],decls:3,vars:0,consts:[[1,"chips-list"],[1,"chip",3,"selected"],[1,"chip",3,"click"]],template:function(t,n){t&1&&(l(0,"div",0),w(1,ae,2,4,"span",1,se),c()),t&2&&(a(),x(n.items))},styles:[".chips-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.chip[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:4px 8px;border-radius:16px;font-size:.875rem;display:inline-block;cursor:pointer}.chip.selected[_ngcontent-%COMP%]{background-color:#0d59ab}"]})};function le(o,e){if(o&1&&u(0),o&2){let t=e.item;p(" ",(t==null?null:t.name)??(t==null?null:t.value)??t," ")}}function ce(o,e){if(o&1&&u(0),o&2){let t=e.item;p(" ",(t==null?null:t.name)??(t==null?null:t.value)??t," ")}}function ue(o,e){if(o&1&&u(0),o&2){let t=e.searchTerm;p(" ",t," ")}}var te=class o{constructor(e){this._selectResourcesService=e}noLoad=s(!1);resource=s("");key=s("");strict=s(!1);multi=s(!1);loadedList=d([]);onSelected=G();selectComponent=W(T);value=null;initialList=d([]);_onSearch$=new I;_currentSearchTerm=null;onChange=()=>{};onTouched=()=>{};searchFn=(e,t)=>{let n=t;return typeof n=="string"?n.toLowerCase().includes(e?.toLowerCase()??""):n.name?.toLowerCase().includes(e?.toLowerCase()??"")};compareWith=(e,t)=>{debugger;let n=e,i=t;return!0};writeValue(e){this.change(e),this.selectComponent().searchTerm=""}change(e){this.value=e,this.onChange(this.value)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onChangeInput(e){this.change(e)}onChangeSelect(e){debugger;let t=typeof e=="string"?e:e?.[this.key()];this.change(t),this.onSelected.emit(t)}onSearch(e){if(!e.term){this.writeValue("");return}this._currentSearchTerm=e.term,this.noLoad()||this._onSearch$.next(e),e.items.length===0?this.loadedList.set([{name:e.term,value:e.term}]):this.loadedList.set(e.items),this.selectComponent().searchTerm=this._capitalizeFirstLetter(e.term)}onBlur(){let e=this.selectComponent();if(e?.searchTerm){debugger;let t=e.searchTerm.trim();if(t){let n={name:t,value:t};this.loadedList.set([n]),this.change(t),this.onSelected.emit(t)}}}ngOnInit(){this._selectResourcesService.register(this.resource()),this._onSearch$.asObservable().pipe(k(300)).subscribe(e=>{this._selectResourcesService.autocomplete(this.resource(),this.key(),e.term)}),this._selectResourcesService.registryStream.pipe(V(e=>e.get(this.resource())?.stream??L([]))).subscribe(e=>{this.loadedList.set(e),!this.initialList().length&&this.initialList.set(e)})}reload(){}focus(){let e=this.selectComponent();e&&e.focus()}_capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}static \u0275fac=function(t){return new(t||o)(A(K,8))};static \u0275cmp=g({type:o,selectors:[["lg-autocomplete"]],viewQuery:function(t,n){t&1&&O(n.selectComponent,T,5),t&2&&$()},inputs:{noLoad:[1,"noLoad"],resource:[1,"resource"],key:[1,"key"],strict:[1,"strict"],multi:[1,"multi"]},outputs:{onSelected:"onSelected"},features:[_([{provide:C,useExisting:m(()=>o),multi:!0}])],decls:5,vars:8,consts:[[1,"autocomplete"],["bindLabel","name","notFoundText","Start typing to search",3,"change","blur","search","ngModelChange","addTag","bindValue","multiple","compareWith","editableSearchTerm","items","ngModel","searchFn"],["ng-label-tmp",""],["ng-option-tmp",""],["ng-tag-tmp",""]],template:function(t,n){t&1&&(l(0,"div",0)(1,"ng-select",1),h("change",function(r){return n.onChangeSelect(r)})("blur",function(){return n.onBlur()})("search",function(r){return n.onSearch(r)}),D("ngModelChange",function(r){return N(n.value,r)||(n.value=r),r}),R(2,le,1,1,"ng-template",2)(3,ce,1,1,"ng-template",3)(4,ue,1,1,"ng-template",4),c()()),t&2&&(a(),v("addTag",!0)("bindValue",n.key())("multiple",n.multi())("compareWith",n.compareWith)("editableSearchTerm",!0)("items",n.loadedList()),B("ngModel",n.value),v("searchFn",n.searchFn))},dependencies:[T,j,U,Q,q,H,J],styles:[`lg-autocomplete{display:flex;flex:1;min-width:150px}.autocomplete{flex:1}.autocomplete .ng-select.ng-select-single .ng-select-container{height:51px}.autocomplete .ng-select.ng-select-focused .ng-select-container{outline:none;box-shadow:var(--focus-shadow);border-radius:12px}.autocomplete .ng-select .ng-select-container{border:none;border-radius:12px;background-color:var(--control-bg)}.autocomplete .ng-select .ng-select-container .ng-input{top:16px!important}.autocomplete .ng-select .ng-select-container .ng-input>input{color:var(--text);font-family:inherit;font-size:inherit}.autocomplete .ng-dropdown-panel{border:none;box-shadow:0 4px 16px #0000001a;border-radius:12px;overflow:hidden}.autocomplete .ng-dropdown-panel .ng-option{padding:16px;border-radius:12px}.autocomplete .ng-arrow-wrapper,.autocomplete .ng-clear-wrapper{display:none}
`],encapsulation:2})};export{X as a,ee as b,te as c};
