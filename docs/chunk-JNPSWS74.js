import{a as gc}from"./chunk-EMIJRNYJ.js";import{a as mr,b as lc,c as hc,d as ks,e as vr,p as xi,q as _i,r as fc,t as dc,u as pc}from"./chunk-FO7Q5A2R.js";import{$ as re,$b as rc,$c as Ii,Ab as Ms,B as tt,Ba as hr,Bb as Qu,Ca as Cs,Da as Mu,E as qt,Ea as Is,Fa as ku,G as It,Ga as xs,Gc as ic,Ha as Nu,I as Es,Ia as fr,J as wn,Ka as _s,Kc as oc,L as En,La as As,M as xt,Ma as Sn,Mb as Zu,N as Rs,Na as bn,O as Tu,Oa as Lu,Oc as sc,Pa as ju,Q as Cu,Qa as Uu,Qc as ac,Ra as Fu,Sa as Bu,Ta as $u,U as Iu,Ua as zu,Ub as ec,V as Ue,Va as Xt,W as Ss,X as xe,Xc as uc,Y as fe,Ya as Hu,Yb as tc,Yc as Ci,_b as nc,_c as cc,a as wu,aa as cr,ab as dr,b as Eu,ba as xu,c as Si,ca as le,cb as Gu,d as ms,da as te,db as Os,e as vs,ea as V,eb as Ke,f as ht,fa as lr,fb as Vu,g as ze,gb as Ku,ha as _u,ia as _t,ja as Ve,jb as Wu,k as ft,kb as Ds,l as Pe,lb as qu,m as ee,mb as pr,n as ur,nb as gr,o as Ru,p as Su,pa as Rn,qa as _e,r as he,ra as bs,rb as Xu,s as ys,sa as Ts,sb as Jt,t as je,ta as Ti,tb as At,u as ws,v as bu,va as Au,vb as Ps,w as bi,wb as Ju,xa as Ou,ya as Du,za as Pu,zb as Yu}from"./chunk-7BND6AGV.js";import{a as Vf}from"./chunk-2RGDSI3Q.js";import{a as G,b as Ie,d as Hf,e as Gf}from"./chunk-C6Q5SG76.js";var Ml=Hf((ma,va)=>{"use strict";(function(t,n){typeof ma=="object"&&typeof va<"u"?va.exports=n():typeof define=="function"&&define.amd?define(n):(t=typeof globalThis<"u"?globalThis:t||self,t.Dexie=n())})(ma,function(){"use strict";var t=function(o,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(u[h]=l[h])},t(o,s)};function n(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(o,s);function u(){this.constructor=o}o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}var e=function(){return e=Object.assign||function(s){for(var u,l=1,h=arguments.length;l<h;l++){u=arguments[l];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(s[p]=u[p])}return s},e.apply(this,arguments)};function r(o,s,u){if(u||arguments.length===2)for(var l=0,h=s.length,p;l<h;l++)(p||!(l in s))&&(p||(p=Array.prototype.slice.call(s,0,l)),p[l]=s[l]);return o.concat(p||Array.prototype.slice.call(s))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,a=Object.keys,c=Array.isArray;typeof Promise<"u"&&!i.Promise&&(i.Promise=Promise);function f(o,s){return typeof s!="object"||a(s).forEach(function(u){o[u]=s[u]}),o}var d=Object.getPrototypeOf,v={}.hasOwnProperty;function w(o,s){return v.call(o,s)}function C(o,s){typeof s=="function"&&(s=s(d(o))),(typeof Reflect>"u"?a:Reflect.ownKeys)(s).forEach(function(u){N(o,u,s[u])})}var I=Object.defineProperty;function N(o,s,u,l){I(o,s,f(u&&w(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},l))}function M(o){return{from:function(s){return o.prototype=Object.create(s.prototype),N(o.prototype,"constructor",o),{extend:C.bind(null,o.prototype)}}}}var j=Object.getOwnPropertyDescriptor;function U(o,s){var u=j(o,s),l;return u||(l=d(o))&&U(l,s)}var q=[].slice;function Z(o,s,u){return q.call(o,s,u)}function ae(o,s){return s(o)}function de(o){if(!o)throw new Error("Assertion Failed")}function ne(o){i.setImmediate?setImmediate(o):setTimeout(o,0)}function ve(o,s){return o.reduce(function(u,l,h){var p=s(l,h);return p&&(u[p[0]]=p[1]),u},{})}function be(o,s){if(typeof s=="string"&&w(o,s))return o[s];if(!s)return o;if(typeof s!="string"){for(var u=[],l=0,h=s.length;l<h;++l){var p=be(o,s[l]);u.push(p)}return u}var g=s.indexOf(".");if(g!==-1){var m=o[s.substr(0,g)];return m==null?void 0:be(m,s.substr(g+1))}}function ge(o,s,u){if(!(!o||s===void 0)&&!("isFrozen"in Object&&Object.isFrozen(o)))if(typeof s!="string"&&"length"in s){de(typeof u!="string"&&"length"in u);for(var l=0,h=s.length;l<h;++l)ge(o,s[l],u[l])}else{var p=s.indexOf(".");if(p!==-1){var g=s.substr(0,p),m=s.substr(p+1);if(m==="")u===void 0?c(o)&&!isNaN(parseInt(g))?o.splice(g,1):delete o[g]:o[g]=u;else{var y=o[g];(!y||!w(o,g))&&(y=o[g]={}),ge(y,m,u)}}else u===void 0?c(o)&&!isNaN(parseInt(s))?o.splice(s,1):delete o[s]:o[s]=u}}function Je(o,s){typeof s=="string"?ge(o,s,void 0):"length"in s&&[].map.call(s,function(u){ge(o,u,void 0)})}function ke(o){var s={};for(var u in o)w(o,u)&&(s[u]=o[u]);return s}var To=[].concat;function Da(o){return To.apply([],o)}var fh="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Da([8,16,32,64].map(function(o){return["Int","Uint","Float"].map(function(s){return s+o+"Array"})}))).filter(function(o){return i[o]}),Pa=new Set(fh.map(function(o){return i[o]}));function Ma(o){var s={};for(var u in o)if(w(o,u)){var l=o[u];s[u]=!l||typeof l!="object"||Pa.has(l.constructor)?l:Ma(l)}return s}function dh(o){for(var s in o)if(w(o,s))return!1;return!0}var Wn=null;function jt(o){Wn=new WeakMap;var s=Co(o);return Wn=null,s}function Co(o){if(!o||typeof o!="object")return o;var s=Wn.get(o);if(s)return s;if(c(o)){s=[],Wn.set(o,s);for(var u=0,l=o.length;u<l;++u)s.push(Co(o[u]))}else if(Pa.has(o.constructor))s=o;else{var h=d(o);s=h===Object.prototype?{}:Object.create(h),Wn.set(o,s);for(var p in o)w(o,p)&&(s[p]=Co(o[p]))}return s}var ph={}.toString;function Io(o){return ph.call(o).slice(8,-1)}var xo=typeof Symbol<"u"?Symbol.iterator:"@@iterator",gh=typeof xo=="symbol"?function(o){var s;return o!=null&&(s=o[xo])&&s.apply(o)}:function(){return null};function Ut(o,s){var u=o.indexOf(s);return u>=0&&o.splice(u,1),u>=0}var ln={};function ut(o){var s,u,l,h;if(arguments.length===1){if(c(o))return o.slice();if(this===ln&&typeof o=="string")return[o];if(h=gh(o)){for(u=[];l=h.next(),!l.done;)u.push(l.value);return u}if(o==null)return[o];if(s=o.length,typeof s=="number"){for(u=new Array(s);s--;)u[s]=o[s];return u}return[o]}for(s=arguments.length,u=new Array(s);s--;)u[s]=arguments[s];return u}var _o=typeof Symbol<"u"?function(o){return o[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},mh=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],ka=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ao=mh.concat(ka),vh={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function hn(o,s){this.name=o,this.message=s}M(hn).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Na(o,s){return o+". Errors: "+Object.keys(s).map(function(u){return s[u].toString()}).filter(function(u,l,h){return h.indexOf(u)===l}).join(`
`)}function Xr(o,s,u,l){this.failures=s,this.failedKeys=l,this.successCount=u,this.message=Na(o,s)}M(Xr).from(hn);function fn(o,s){this.name="BulkError",this.failures=Object.keys(s).map(function(u){return s[u]}),this.failuresByPos=s,this.message=Na(o,this.failures)}M(fn).from(hn);var Oo=Ao.reduce(function(o,s){return o[s]=s+"Error",o},{}),yh=hn,J=Ao.reduce(function(o,s){var u=s+"Error";function l(h,p){this.name=u,h?typeof h=="string"?(this.message="".concat(h).concat(p?`
 `+p:""),this.inner=p||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=vh[s]||u,this.inner=null)}return M(l).from(yh),o[s]=l,o},{});J.Syntax=SyntaxError,J.Type=TypeError,J.Range=RangeError;var La=ka.reduce(function(o,s){return o[s+"Error"]=J[s],o},{});function wh(o,s){if(!o||o instanceof hn||o instanceof TypeError||o instanceof SyntaxError||!o.name||!La[o.name])return o;var u=new La[o.name](s||o.message,o);return"stack"in o&&N(u,"stack",{get:function(){return this.inner.stack}}),u}var Jr=Ao.reduce(function(o,s){return["Syntax","Type","Range"].indexOf(s)===-1&&(o[s+"Error"]=J[s]),o},{});Jr.ModifyError=Xr,Jr.DexieError=hn,Jr.BulkError=fn;function me(){}function qn(o){return o}function Eh(o,s){return o==null||o===qn?s:function(u){return s(o(u))}}function Ft(o,s){return function(){o.apply(this,arguments),s.apply(this,arguments)}}function Rh(o,s){return o===me?s:function(){var u=o.apply(this,arguments);u!==void 0&&(arguments[0]=u);var l=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var p=s.apply(this,arguments);return l&&(this.onsuccess=this.onsuccess?Ft(l,this.onsuccess):l),h&&(this.onerror=this.onerror?Ft(h,this.onerror):h),p!==void 0?p:u}}function Sh(o,s){return o===me?s:function(){o.apply(this,arguments);var u=this.onsuccess,l=this.onerror;this.onsuccess=this.onerror=null,s.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?Ft(u,this.onsuccess):u),l&&(this.onerror=this.onerror?Ft(l,this.onerror):l)}}function bh(o,s){return o===me?s:function(u){var l=o.apply(this,arguments);f(u,l);var h=this.onsuccess,p=this.onerror;this.onsuccess=null,this.onerror=null;var g=s.apply(this,arguments);return h&&(this.onsuccess=this.onsuccess?Ft(h,this.onsuccess):h),p&&(this.onerror=this.onerror?Ft(p,this.onerror):p),l===void 0?g===void 0?void 0:g:f(l,g)}}function Th(o,s){return o===me?s:function(){return s.apply(this,arguments)===!1?!1:o.apply(this,arguments)}}function Do(o,s){return o===me?s:function(){var u=o.apply(this,arguments);if(u&&typeof u.then=="function"){for(var l=this,h=arguments.length,p=new Array(h);h--;)p[h]=arguments[h];return u.then(function(){return s.apply(l,p)})}return s.apply(this,arguments)}}var Ye=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ja(o,s){Ye=o}var Xn={},Ua=100,Po=typeof Promise>"u"?[]:function(){var o=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[o,d(o),o];var s=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[s,d(s),o]}(),Fa=Po[0],Ba=Po[1],Ch=Po[2],Ih=Ba&&Ba.then,Bt=Fa&&Fa.constructor,Mo=!!Ch;function xh(){queueMicrotask(Ah)}var Jn=function(o,s){Yn.push([o,s]),Yr&&(xh(),Yr=!1)},ko=!0,Yr=!0,$t=[],Qr=[],No=qn,vt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:me,pgp:!1,env:{},finalize:me},K=vt,Yn=[],zt=0,Zr=[];function $(o){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var s=this._PSD=K;if(typeof o!="function"){if(o!==Xn)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&jo(this,this._value);return}this._state=null,this._value=null,++s.ref,za(this,o)}var Lo={get:function(){var o=K,s=ri;function u(l,h){var p=this,g=!o.global&&(o!==K||s!==ri),m=g&&!wt(),y=new $(function(E,b){Uo(p,new $a(Va(l,o,g,m),Va(h,o,g,m),E,b,o))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return u.prototype=Xn,u},set:function(o){N(this,"then",o&&o.prototype===Xn?Lo:{get:function(){return o},set:Lo.set})}};C($.prototype,{then:Lo,_then:function(o,s){Uo(this,new $a(null,null,o,s,K))},catch:function(o){if(arguments.length===1)return this.then(null,o);var s=arguments[0],u=arguments[1];return typeof s=="function"?this.then(null,function(l){return l instanceof s?u(l):ei(l)}):this.then(null,function(l){return l&&l.name===s?u(l):ei(l)})},finally:function(o){return this.then(function(s){return $.resolve(o()).then(function(){return s})},function(s){return $.resolve(o()).then(function(){return ei(s)})})},timeout:function(o,s){var u=this;return o<1/0?new $(function(l,h){var p=setTimeout(function(){return h(new J.Timeout(s))},o);u.then(l,h).finally(clearTimeout.bind(null,p))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&N($.prototype,Symbol.toStringTag,"Dexie.Promise"),vt.env=Ga();function $a(o,s,u,l,h){this.onFulfilled=typeof o=="function"?o:null,this.onRejected=typeof s=="function"?s:null,this.resolve=u,this.reject=l,this.psd=h}C($,{all:function(){var o=ut.apply(null,arguments).map(ii);return new $(function(s,u){o.length===0&&s([]);var l=o.length;o.forEach(function(h,p){return $.resolve(h).then(function(g){o[p]=g,--l||s(o)},u)})})},resolve:function(o){if(o instanceof $)return o;if(o&&typeof o.then=="function")return new $(function(u,l){o.then(u,l)});var s=new $(Xn,!0,o);return s},reject:ei,race:function(){var o=ut.apply(null,arguments).map(ii);return new $(function(s,u){o.map(function(l){return $.resolve(l).then(s,u)})})},PSD:{get:function(){return K},set:function(o){return K=o}},totalEchoes:{get:function(){return ri}},newPSD:yt,usePSD:Ht,scheduler:{get:function(){return Jn},set:function(o){Jn=o}},rejectionMapper:{get:function(){return No},set:function(o){No=o}},follow:function(o,s){return new $(function(u,l){return yt(function(h,p){var g=K;g.unhandleds=[],g.onunhandled=p,g.finalize=Ft(function(){var m=this;Oh(function(){m.unhandleds.length===0?h():p(m.unhandleds[0])})},g.finalize),o()},s,u,l)})}}),Bt&&(Bt.allSettled&&N($,"allSettled",function(){var o=ut.apply(null,arguments).map(ii);return new $(function(s){o.length===0&&s([]);var u=o.length,l=new Array(u);o.forEach(function(h,p){return $.resolve(h).then(function(g){return l[p]={status:"fulfilled",value:g}},function(g){return l[p]={status:"rejected",reason:g}}).then(function(){return--u||s(l)})})})}),Bt.any&&typeof AggregateError<"u"&&N($,"any",function(){var o=ut.apply(null,arguments).map(ii);return new $(function(s,u){o.length===0&&u(new AggregateError([]));var l=o.length,h=new Array(l);o.forEach(function(p,g){return $.resolve(p).then(function(m){return s(m)},function(m){h[g]=m,--l||u(new AggregateError(h))})})})}),Bt.withResolvers&&($.withResolvers=Bt.withResolvers));function za(o,s){try{s(function(u){if(o._state===null){if(u===o)throw new TypeError("A promise cannot be resolved with itself.");var l=o._lib&&dn();u&&typeof u.then=="function"?za(o,function(h,p){u instanceof $?u._then(h,p):u.then(h,p)}):(o._state=!0,o._value=u,Ha(o)),l&&pn()}},jo.bind(null,o))}catch(u){jo(o,u)}}function jo(o,s){if(Qr.push(s),o._state===null){var u=o._lib&&dn();s=No(s),o._state=!1,o._value=s,Dh(o),Ha(o),u&&pn()}}function Ha(o){var s=o._listeners;o._listeners=[];for(var u=0,l=s.length;u<l;++u)Uo(o,s[u]);var h=o._PSD;--h.ref||h.finalize(),zt===0&&(++zt,Jn(function(){--zt===0&&Fo()},[]))}function Uo(o,s){if(o._state===null){o._listeners.push(s);return}var u=o._state?s.onFulfilled:s.onRejected;if(u===null)return(o._state?s.resolve:s.reject)(o._value);++s.psd.ref,++zt,Jn(_h,[u,o,s])}function _h(o,s,u){try{var l,h=s._value;!s._state&&Qr.length&&(Qr=[]),l=Ye&&s._consoleTask?s._consoleTask.run(function(){return o(h)}):o(h),!s._state&&Qr.indexOf(h)===-1&&Ph(s),u.resolve(l)}catch(p){u.reject(p)}finally{--zt===0&&Fo(),--u.psd.ref||u.psd.finalize()}}function Ah(){Ht(vt,function(){dn()&&pn()})}function dn(){var o=ko;return ko=!1,Yr=!1,o}function pn(){var o,s,u;do for(;Yn.length>0;)for(o=Yn,Yn=[],u=o.length,s=0;s<u;++s){var l=o[s];l[0].apply(null,l[1])}while(Yn.length>0);ko=!0,Yr=!0}function Fo(){var o=$t;$t=[],o.forEach(function(l){l._PSD.onunhandled.call(null,l._value,l)});for(var s=Zr.slice(0),u=s.length;u;)s[--u]()}function Oh(o){function s(){o(),Zr.splice(Zr.indexOf(s),1)}Zr.push(s),++zt,Jn(function(){--zt===0&&Fo()},[])}function Dh(o){$t.some(function(s){return s._value===o._value})||$t.push(o)}function Ph(o){for(var s=$t.length;s;)if($t[--s]._value===o._value){$t.splice(s,1);return}}function ei(o){return new $(Xn,!1,o)}function ye(o,s){var u=K;return function(){var l=dn(),h=K;try{return Et(u,!0),o.apply(this,arguments)}catch(p){s&&s(p)}finally{Et(h,!1),l&&pn()}}}var Ce={awaits:0,echoes:0,id:0},Mh=0,ti=[],ni=0,ri=0,kh=0;function yt(o,s,u,l){var h=K,p=Object.create(h);p.parent=h,p.ref=0,p.global=!1,p.id=++kh,vt.env,p.env=Mo?{Promise:$,PromiseProp:{value:$,configurable:!0,writable:!0},all:$.all,race:$.race,allSettled:$.allSettled,any:$.any,resolve:$.resolve,reject:$.reject}:{},s&&f(p,s),++h.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()};var g=Ht(p,o,u,l);return p.ref===0&&p.finalize(),g}function gn(){return Ce.id||(Ce.id=++Mh),++Ce.awaits,Ce.echoes+=Ua,Ce.id}function wt(){return Ce.awaits?(--Ce.awaits===0&&(Ce.id=0),Ce.echoes=Ce.awaits*Ua,!0):!1}(""+Ih).indexOf("[native code]")===-1&&(gn=wt=me);function ii(o){return Ce.echoes&&o&&o.constructor===Bt?(gn(),o.then(function(s){return wt(),s},function(s){return wt(),Se(s)})):o}function Nh(o){++ri,(!Ce.echoes||--Ce.echoes===0)&&(Ce.echoes=Ce.awaits=Ce.id=0),ti.push(K),Et(o,!0)}function Lh(){var o=ti[ti.length-1];ti.pop(),Et(o,!1)}function Et(o,s){var u=K;if((s?Ce.echoes&&(!ni++||o!==K):ni&&(!--ni||o!==K))&&queueMicrotask(s?Nh.bind(null,o):Lh),o!==K&&(K=o,u===vt&&(vt.env=Ga()),Mo)){var l=vt.env.Promise,h=o.env;(u.global||o.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),l.all=h.all,l.race=h.race,l.resolve=h.resolve,l.reject=h.reject,h.allSettled&&(l.allSettled=h.allSettled),h.any&&(l.any=h.any))}}function Ga(){var o=i.Promise;return Mo?{Promise:o,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:o.all,race:o.race,allSettled:o.allSettled,any:o.any,resolve:o.resolve,reject:o.reject}:{}}function Ht(o,s,u,l,h){var p=K;try{return Et(o,!0),s(u,l,h)}finally{Et(p,!1)}}function Va(o,s,u,l){return typeof o!="function"?o:function(){var h=K;u&&gn(),Et(s,!0);try{return o.apply(this,arguments)}finally{Et(h,!1),l&&queueMicrotask(wt)}}}function Bo(o){Promise===Bt&&Ce.echoes===0?ni===0?o():enqueueNativeMicroTask(o):setTimeout(o,0)}var Se=$.reject;function $o(o,s,u,l){if(!o.idbdb||!o._state.openComplete&&!K.letThrough&&!o._vip){if(o._state.openComplete)return Se(new J.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return Se(new J.DatabaseClosed);o.open().catch(me)}return o._state.dbReadyPromise.then(function(){return $o(o,s,u,l)})}else{var h=o._createTransaction(s,u,o._dbSchema);try{h.create(),o._state.PR1398_maxLoop=3}catch(p){return p.name===Oo.InvalidState&&o.isOpen()&&--o._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),o.close({disableAutoOpen:!1}),o.open().then(function(){return $o(o,s,u,l)})):Se(p)}return h._promise(s,function(p,g){return yt(function(){return K.trans=h,l(p,g,h)})}).then(function(p){if(s==="readwrite")try{h.idbtrans.commit()}catch{}return s==="readonly"?p:h._completion.then(function(){return p})})}}var Ka="4.0.11",Gt="\uFFFF",zo=-1/0,ct="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wa="String expected.",mn=[],oi="__dbnames",Ho="readonly",Go="readwrite";function Vt(o,s){return o?s?function(){return o.apply(this,arguments)&&s.apply(this,arguments)}:o:s}var qa={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function si(o){return typeof o=="string"&&!/\./.test(o)?function(s){return s[o]===void 0&&o in s&&(s=jt(s),delete s[o]),s}:function(s){return s}}function Xa(){throw J.Type()}function ue(o,s){try{var u=Ja(o),l=Ja(s);if(u!==l)return u==="Array"?1:l==="Array"?-1:u==="binary"?1:l==="binary"?-1:u==="string"?1:l==="string"?-1:u==="Date"?1:l!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return o>s?1:o<s?-1:0;case"binary":return Uh(Ya(o),Ya(s));case"Array":return jh(o,s)}}catch{}return NaN}function jh(o,s){for(var u=o.length,l=s.length,h=u<l?u:l,p=0;p<h;++p){var g=ue(o[p],s[p]);if(g!==0)return g}return u===l?0:u<l?-1:1}function Uh(o,s){for(var u=o.length,l=s.length,h=u<l?u:l,p=0;p<h;++p)if(o[p]!==s[p])return o[p]<s[p]?-1:1;return u===l?0:u<l?-1:1}function Ja(o){var s=typeof o;if(s!=="object")return s;if(ArrayBuffer.isView(o))return"binary";var u=Io(o);return u==="ArrayBuffer"?"binary":u}function Ya(o){return o instanceof Uint8Array?o:ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o)}var Qa=function(){function o(){}return o.prototype._trans=function(s,u,l){var h=this._tx||K.trans,p=this.name,g=Ye&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function m(b,R,_){if(!_.schema[p])throw new J.NotFound("Table "+p+" not part of transaction");return u(_.idbtrans,_)}var y=dn();try{var E=h&&h.db._novip===this.db._novip?h===K.trans?h._promise(s,m,l):yt(function(){return h._promise(s,m,l)},{trans:h,transless:K.transless||K}):$o(this.db,s,[this.name],m);return g&&(E._consoleTask=g,E=E.catch(function(b){return console.trace(b),Se(b)})),E}finally{y&&pn()}},o.prototype.get=function(s,u){var l=this;return s&&s.constructor===Object?this.where(s).first(u):s==null?Se(new J.Type("Invalid argument to Table.get()")):this._trans("readonly",function(h){return l.core.get({trans:h,key:s}).then(function(p){return l.hook.reading.fire(p)})}).then(u)},o.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(c(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var u=a(s);if(u.length===1)return this.where(u[0]).equals(s[u[0]]);var l=this.schema.indexes.concat(this.schema.primKey).filter(function(b){if(b.compound&&u.every(function(_){return b.keyPath.indexOf(_)>=0})){for(var R=0;R<u.length;++R)if(u.indexOf(b.keyPath[R])===-1)return!1;return!0}return!1}).sort(function(b,R){return b.keyPath.length-R.keyPath.length})[0];if(l&&this.db._maxKey!==Gt){var h=l.keyPath.slice(0,u.length);return this.where(h).equals(h.map(function(b){return s[b]}))}!l&&Ye&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(u.join("+"),"]"));var p=this.schema.idxByName;function g(b,R){return ue(b,R)===0}var m=u.reduce(function(b,R){var _=b[0],L=b[1],S=p[R],T=s[R];return[_||S,_||!S?Vt(L,S&&S.multi?function(x){var P=be(x,R);return c(P)&&P.some(function(O){return g(T,O)})}:function(x){return g(T,be(x,R))}):L]},[null,null]),y=m[0],E=m[1];return y?this.where(y.name).equals(s[y.keyPath]).filter(E):l?this.filter(E):this.where(u).equals("")},o.prototype.filter=function(s){return this.toCollection().and(s)},o.prototype.count=function(s){return this.toCollection().count(s)},o.prototype.offset=function(s){return this.toCollection().offset(s)},o.prototype.limit=function(s){return this.toCollection().limit(s)},o.prototype.each=function(s){return this.toCollection().each(s)},o.prototype.toArray=function(s){return this.toCollection().toArray(s)},o.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},o.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,c(s)?"[".concat(s.join("+"),"]"):s))},o.prototype.reverse=function(){return this.toCollection().reverse()},o.prototype.mapToClass=function(s){var u=this,l=u.db,h=u.name;this.schema.mappedClass=s,s.prototype instanceof Xa&&(s=function(y){n(E,y);function E(){return y!==null&&y.apply(this,arguments)||this}return Object.defineProperty(E.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),E.prototype.table=function(){return h},E}(s));for(var p=new Set,g=s.prototype;g;g=d(g))Object.getOwnPropertyNames(g).forEach(function(y){return p.add(y)});var m=function(y){if(!y)return y;var E=Object.create(s.prototype);for(var b in y)if(!p.has(b))try{E[b]=y[b]}catch{}return E};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=m,this.hook("reading",m),s},o.prototype.defineClass=function(){function s(u){f(this,u)}return this.mapToClass(s)},o.prototype.add=function(s,u){var l=this,h=this.schema.primKey,p=h.auto,g=h.keyPath,m=s;return g&&p&&(m=si(g)(s)),this._trans("readwrite",function(y){return l.core.mutate({trans:y,type:"add",keys:u!=null?[u]:null,values:[m]})}).then(function(y){return y.numFailures?$.reject(y.failures[0]):y.lastResult}).then(function(y){if(g)try{ge(s,g,y)}catch{}return y})},o.prototype.update=function(s,u){if(typeof s=="object"&&!c(s)){var l=be(s,this.schema.primKey.keyPath);return l===void 0?Se(new J.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(l).modify(u)}else return this.where(":id").equals(s).modify(u)},o.prototype.put=function(s,u){var l=this,h=this.schema.primKey,p=h.auto,g=h.keyPath,m=s;return g&&p&&(m=si(g)(s)),this._trans("readwrite",function(y){return l.core.mutate({trans:y,type:"put",values:[m],keys:u!=null?[u]:null})}).then(function(y){return y.numFailures?$.reject(y.failures[0]):y.lastResult}).then(function(y){if(g)try{ge(s,g,y)}catch{}return y})},o.prototype.delete=function(s){var u=this;return this._trans("readwrite",function(l){return u.core.mutate({trans:l,type:"delete",keys:[s]})}).then(function(l){return l.numFailures?$.reject(l.failures[0]):void 0})},o.prototype.clear=function(){var s=this;return this._trans("readwrite",function(u){return s.core.mutate({trans:u,type:"deleteRange",range:qa})}).then(function(u){return u.numFailures?$.reject(u.failures[0]):void 0})},o.prototype.bulkGet=function(s){var u=this;return this._trans("readonly",function(l){return u.core.getMany({keys:s,trans:l}).then(function(h){return h.map(function(p){return u.hook.reading.fire(p)})})})},o.prototype.bulkAdd=function(s,u,l){var h=this,p=Array.isArray(u)?u:void 0;l=l||(p?void 0:u);var g=l?l.allKeys:void 0;return this._trans("readwrite",function(m){var y=h.schema.primKey,E=y.auto,b=y.keyPath;if(b&&p)throw new J.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(p&&p.length!==s.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var R=s.length,_=b&&E?s.map(si(b)):s;return h.core.mutate({trans:m,type:"add",keys:p,values:_,wantResults:g}).then(function(L){var S=L.numFailures,T=L.results,x=L.lastResult,P=L.failures,O=g?T:x;if(S===0)return O;throw new fn("".concat(h.name,".bulkAdd(): ").concat(S," of ").concat(R," operations failed"),P)})})},o.prototype.bulkPut=function(s,u,l){var h=this,p=Array.isArray(u)?u:void 0;l=l||(p?void 0:u);var g=l?l.allKeys:void 0;return this._trans("readwrite",function(m){var y=h.schema.primKey,E=y.auto,b=y.keyPath;if(b&&p)throw new J.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(p&&p.length!==s.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var R=s.length,_=b&&E?s.map(si(b)):s;return h.core.mutate({trans:m,type:"put",keys:p,values:_,wantResults:g}).then(function(L){var S=L.numFailures,T=L.results,x=L.lastResult,P=L.failures,O=g?T:x;if(S===0)return O;throw new fn("".concat(h.name,".bulkPut(): ").concat(S," of ").concat(R," operations failed"),P)})})},o.prototype.bulkUpdate=function(s){var u=this,l=this.core,h=s.map(function(m){return m.key}),p=s.map(function(m){return m.changes}),g=[];return this._trans("readwrite",function(m){return l.getMany({trans:m,keys:h,cache:"clone"}).then(function(y){var E=[],b=[];s.forEach(function(_,L){var S=_.key,T=_.changes,x=y[L];if(x){for(var P=0,O=Object.keys(T);P<O.length;P++){var D=O[P],k=T[D];if(D===u.schema.primKey.keyPath){if(ue(k,S)!==0)throw new J.Constraint("Cannot update primary key in bulkUpdate()")}else ge(x,D,k)}g.push(L),E.push(S),b.push(x)}});var R=E.length;return l.mutate({trans:m,type:"put",keys:E,values:b,updates:{keys:h,changeSpecs:p}}).then(function(_){var L=_.numFailures,S=_.failures;if(L===0)return R;for(var T=0,x=Object.keys(S);T<x.length;T++){var P=x[T],O=g[Number(P)];if(O!=null){var D=S[P];delete S[P],S[O]=D}}throw new fn("".concat(u.name,".bulkUpdate(): ").concat(L," of ").concat(R," operations failed"),S)})})})},o.prototype.bulkDelete=function(s){var u=this,l=s.length;return this._trans("readwrite",function(h){return u.core.mutate({trans:h,type:"delete",keys:s})}).then(function(h){var p=h.numFailures,g=h.lastResult,m=h.failures;if(p===0)return g;throw new fn("".concat(u.name,".bulkDelete(): ").concat(p," of ").concat(l," operations failed"),m)})},o}();function Qn(o){var s={},u=function(m,y){if(y){for(var E=arguments.length,b=new Array(E-1);--E;)b[E-1]=arguments[E];return s[m].subscribe.apply(null,b),o}else if(typeof m=="string")return s[m]};u.addEventType=p;for(var l=1,h=arguments.length;l<h;++l)p(arguments[l]);return u;function p(m,y,E){if(typeof m=="object")return g(m);y||(y=Th),E||(E=me);var b={subscribers:[],fire:E,subscribe:function(R){b.subscribers.indexOf(R)===-1&&(b.subscribers.push(R),b.fire=y(b.fire,R))},unsubscribe:function(R){b.subscribers=b.subscribers.filter(function(_){return _!==R}),b.fire=b.subscribers.reduce(y,E)}};return s[m]=u[m]=b,b}function g(m){a(m).forEach(function(y){var E=m[y];if(c(E))p(y,m[y][0],m[y][1]);else if(E==="asap")var b=p(y,qn,function(){for(var _=arguments.length,L=new Array(_);_--;)L[_]=arguments[_];b.subscribers.forEach(function(S){ne(function(){S.apply(null,L)})})});else throw new J.InvalidArgument("Invalid event config")})}}function Zn(o,s){return M(s).from({prototype:o}),s}function Fh(o){return Zn(Qa.prototype,function(u,l,h){this.db=o,this._tx=h,this.name=u,this.schema=l,this.hook=o._allTables[u]?o._allTables[u].hook:Qn(null,{creating:[Rh,me],reading:[Eh,qn],updating:[bh,me],deleting:[Sh,me]})})}function vn(o,s){return!(o.filter||o.algorithm||o.or)&&(s?o.justLimit:!o.replayFilter)}function Vo(o,s){o.filter=Vt(o.filter,s)}function Ko(o,s,u){var l=o.replayFilter;o.replayFilter=l?function(){return Vt(l(),s())}:s,o.justLimit=u&&!l}function Bh(o,s){o.isMatch=Vt(o.isMatch,s)}function ai(o,s){if(o.isPrimKey)return s.primaryKey;var u=s.getIndexByKeyPath(o.index);if(!u)throw new J.Schema("KeyPath "+o.index+" on object store "+s.name+" is not indexed");return u}function Za(o,s,u){var l=ai(o,s.schema);return s.openCursor({trans:u,values:!o.keysOnly,reverse:o.dir==="prev",unique:!!o.unique,query:{index:l,range:o.range}})}function ui(o,s,u,l){var h=o.replayFilter?Vt(o.filter,o.replayFilter()):o.filter;if(o.or){var p={},g=function(m,y,E){if(!h||h(y,E,function(_){return y.stop(_)},function(_){return y.fail(_)})){var b=y.primaryKey,R=""+b;R==="[object ArrayBuffer]"&&(R=""+new Uint8Array(b)),w(p,R)||(p[R]=!0,s(m,y,E))}};return Promise.all([o.or._iterate(g,u),eu(Za(o,l,u),o.algorithm,g,!o.keysOnly&&o.valueMapper)])}else return eu(Za(o,l,u),Vt(o.algorithm,h),s,!o.keysOnly&&o.valueMapper)}function eu(o,s,u,l){var h=l?function(g,m,y){return u(l(g),m,y)}:u,p=ye(h);return o.then(function(g){if(g)return g.start(function(){var m=function(){return g.continue()};(!s||s(g,function(y){return m=y},function(y){g.stop(y),m=me},function(y){g.fail(y),m=me}))&&p(g.value,g,function(y){return m=y}),m()})})}var er=function(){function o(s){this["@@propmod"]=s}return o.prototype.execute=function(s){var u,l=this["@@propmod"];if(l.add!==void 0){var h=l.add;if(c(h))return r(r([],c(s)?s:[],!0),h,!0).sort();if(typeof h=="number")return(Number(s)||0)+h;if(typeof h=="bigint")try{return BigInt(s)+h}catch{return BigInt(0)+h}throw new TypeError("Invalid term ".concat(h))}if(l.remove!==void 0){var p=l.remove;if(c(p))return c(s)?s.filter(function(m){return!p.includes(m)}).sort():[];if(typeof p=="number")return Number(s)-p;if(typeof p=="bigint")try{return BigInt(s)-p}catch{return BigInt(0)-p}throw new TypeError("Invalid subtrahend ".concat(p))}var g=(u=l.replacePrefix)===null||u===void 0?void 0:u[0];return g&&typeof s=="string"&&s.startsWith(g)?l.replacePrefix[1]+s.substring(g.length):s},o}(),$h=function(){function o(){}return o.prototype._read=function(s,u){var l=this._ctx;return l.error?l.table._trans(null,Se.bind(null,l.error)):l.table._trans("readonly",s).then(u)},o.prototype._write=function(s){var u=this._ctx;return u.error?u.table._trans(null,Se.bind(null,u.error)):u.table._trans("readwrite",s,"locked")},o.prototype._addAlgorithm=function(s){var u=this._ctx;u.algorithm=Vt(u.algorithm,s)},o.prototype._iterate=function(s,u){return ui(this._ctx,s,u,this._ctx.table.core)},o.prototype.clone=function(s){var u=Object.create(this.constructor.prototype),l=Object.create(this._ctx);return s&&f(l,s),u._ctx=l,u},o.prototype.raw=function(){return this._ctx.valueMapper=null,this},o.prototype.each=function(s){var u=this._ctx;return this._read(function(l){return ui(u,s,l,u.table.core)})},o.prototype.count=function(s){var u=this;return this._read(function(l){var h=u._ctx,p=h.table.core;if(vn(h,!0))return p.count({trans:l,query:{index:ai(h,p.schema),range:h.range}}).then(function(m){return Math.min(m,h.limit)});var g=0;return ui(h,function(){return++g,!1},l,p).then(function(){return g})}).then(s)},o.prototype.sortBy=function(s,u){var l=s.split(".").reverse(),h=l[0],p=l.length-1;function g(E,b){return b?g(E[l[b]],b-1):E[h]}var m=this._ctx.dir==="next"?1:-1;function y(E,b){var R=g(E,p),_=g(b,p);return ue(R,_)*m}return this.toArray(function(E){return E.sort(y)}).then(u)},o.prototype.toArray=function(s){var u=this;return this._read(function(l){var h=u._ctx;if(h.dir==="next"&&vn(h,!0)&&h.limit>0){var p=h.valueMapper,g=ai(h,h.table.core.schema);return h.table.core.query({trans:l,limit:h.limit,values:!0,query:{index:g,range:h.range}}).then(function(y){var E=y.result;return p?E.map(p):E})}else{var m=[];return ui(h,function(y){return m.push(y)},l,h.table.core).then(function(){return m})}},s)},o.prototype.offset=function(s){var u=this._ctx;return s<=0?this:(u.offset+=s,vn(u)?Ko(u,function(){var l=s;return function(h,p){return l===0?!0:l===1?(--l,!1):(p(function(){h.advance(l),l=0}),!1)}}):Ko(u,function(){var l=s;return function(){return--l<0}}),this)},o.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),Ko(this._ctx,function(){var u=s;return function(l,h,p){return--u<=0&&h(p),u>=0}},!0),this},o.prototype.until=function(s,u){return Vo(this._ctx,function(l,h,p){return s(l.value)?(h(p),u):!0}),this},o.prototype.first=function(s){return this.limit(1).toArray(function(u){return u[0]}).then(s)},o.prototype.last=function(s){return this.reverse().first(s)},o.prototype.filter=function(s){return Vo(this._ctx,function(u){return s(u.value)}),Bh(this._ctx,s),this},o.prototype.and=function(s){return this.filter(s)},o.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},o.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},o.prototype.desc=function(){return this.reverse()},o.prototype.eachKey=function(s){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(l,h){s(h.key,h)})},o.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},o.prototype.eachPrimaryKey=function(s){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(l,h){s(h.primaryKey,h)})},o.prototype.keys=function(s){var u=this._ctx;u.keysOnly=!u.isMatch;var l=[];return this.each(function(h,p){l.push(p.key)}).then(function(){return l}).then(s)},o.prototype.primaryKeys=function(s){var u=this._ctx;if(u.dir==="next"&&vn(u,!0)&&u.limit>0)return this._read(function(h){var p=ai(u,u.table.core.schema);return u.table.core.query({trans:h,values:!1,limit:u.limit,query:{index:p,range:u.range}})}).then(function(h){var p=h.result;return p}).then(s);u.keysOnly=!u.isMatch;var l=[];return this.each(function(h,p){l.push(p.primaryKey)}).then(function(){return l}).then(s)},o.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},o.prototype.firstKey=function(s){return this.limit(1).keys(function(u){return u[0]}).then(s)},o.prototype.lastKey=function(s){return this.reverse().firstKey(s)},o.prototype.distinct=function(){var s=this._ctx,u=s.index&&s.table.schema.idxByName[s.index];if(!u||!u.multi)return this;var l={};return Vo(this._ctx,function(h){var p=h.primaryKey.toString(),g=w(l,p);return l[p]=!0,!g}),this},o.prototype.modify=function(s){var u=this,l=this._ctx;return this._write(function(h){var p;if(typeof s=="function")p=s;else{var g=a(s),m=g.length;p=function(O){for(var D=!1,k=0;k<m;++k){var A=g[k],F=s[A],z=be(O,A);F instanceof er?(ge(O,A,F.execute(z)),D=!0):z!==F&&(ge(O,A,F),D=!0)}return D}}var y=l.table.core,E=y.schema.primaryKey,b=E.outbound,R=E.extractKey,_=200,L=u.db._options.modifyChunkSize;L&&(typeof L=="object"?_=L[y.name]||L["*"]||200:_=L);var S=[],T=0,x=[],P=function(O,D){var k=D.failures,A=D.numFailures;T+=O-A;for(var F=0,z=a(k);F<z.length;F++){var B=z[F];S.push(k[B])}};return u.clone().primaryKeys().then(function(O){var D=vn(l)&&l.limit===1/0&&(typeof s!="function"||s===Wo)&&{index:l.index,range:l.range},k=function(A){var F=Math.min(_,O.length-A);return y.getMany({trans:h,keys:O.slice(A,A+F),cache:"immutable"}).then(function(z){for(var B=[],Y=[],se=b?[]:null,H=[],oe=0;oe<F;++oe){var Q=z[oe],ce={value:jt(Q),primKey:O[A+oe]};p.call(ce,ce.value,ce)!==!1&&(ce.value==null?H.push(O[A+oe]):!b&&ue(R(Q),R(ce.value))!==0?(H.push(O[A+oe]),B.push(ce.value)):(Y.push(ce.value),b&&se.push(O[A+oe])))}return Promise.resolve(B.length>0&&y.mutate({trans:h,type:"add",values:B}).then(function(X){for(var Ee in X.failures)H.splice(parseInt(Ee),1);P(B.length,X)})).then(function(){return(Y.length>0||D&&typeof s=="object")&&y.mutate({trans:h,type:"put",keys:se,values:Y,criteria:D,changeSpec:typeof s!="function"&&s,isAdditionalChunk:A>0}).then(function(X){return P(Y.length,X)})}).then(function(){return(H.length>0||D&&s===Wo)&&y.mutate({trans:h,type:"delete",keys:H,criteria:D,isAdditionalChunk:A>0}).then(function(X){return P(H.length,X)})}).then(function(){return O.length>A+F&&k(A+_)})})};return k(0).then(function(){if(S.length>0)throw new Xr("Error modifying one or more objects",S,T,x);return O.length})})})},o.prototype.delete=function(){var s=this._ctx,u=s.range;return vn(s)&&(s.isPrimKey||u.type===3)?this._write(function(l){var h=s.table.core.schema.primaryKey,p=u;return s.table.core.count({trans:l,query:{index:h,range:p}}).then(function(g){return s.table.core.mutate({trans:l,type:"deleteRange",range:p}).then(function(m){var y=m.failures;m.lastResult,m.results;var E=m.numFailures;if(E)throw new Xr("Could not delete some values",Object.keys(y).map(function(b){return y[b]}),g-E);return g-E})})}):this.modify(Wo)},o}(),Wo=function(o,s){return s.value=null};function zh(o){return Zn($h.prototype,function(u,l){this.db=o;var h=qa,p=null;if(l)try{h=l()}catch(E){p=E}var g=u._ctx,m=g.table,y=m.hook.reading.fire;this._ctx={table:m,index:g.index,isPrimKey:!g.index||m.schema.primKey.keyPath&&g.index===m.schema.primKey.name,range:h,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:p,or:g.or,valueMapper:y!==qn?y:null}})}function Hh(o,s){return o<s?-1:o===s?0:1}function Gh(o,s){return o>s?-1:o===s?0:1}function Le(o,s,u){var l=o instanceof nu?new o.Collection(o):o;return l._ctx.error=u?new u(s):new TypeError(s),l}function yn(o){return new o.Collection(o,function(){return tu("")}).limit(0)}function Vh(o){return o==="next"?function(s){return s.toUpperCase()}:function(s){return s.toLowerCase()}}function Kh(o){return o==="next"?function(s){return s.toLowerCase()}:function(s){return s.toUpperCase()}}function Wh(o,s,u,l,h,p){for(var g=Math.min(o.length,l.length),m=-1,y=0;y<g;++y){var E=s[y];if(E!==l[y])return h(o[y],u[y])<0?o.substr(0,y)+u[y]+u.substr(y+1):h(o[y],l[y])<0?o.substr(0,y)+l[y]+u.substr(y+1):m>=0?o.substr(0,m)+s[m]+u.substr(m+1):null;h(o[y],E)<0&&(m=y)}return g<l.length&&p==="next"?o+u.substr(o.length):g<o.length&&p==="prev"?o.substr(0,u.length):m<0?null:o.substr(0,m)+l[m]+u.substr(m+1)}function ci(o,s,u,l){var h,p,g,m,y,E,b,R=u.length;if(!u.every(function(T){return typeof T=="string"}))return Le(o,Wa);function _(T){h=Vh(T),p=Kh(T),g=T==="next"?Hh:Gh;var x=u.map(function(P){return{lower:p(P),upper:h(P)}}).sort(function(P,O){return g(P.lower,O.lower)});m=x.map(function(P){return P.upper}),y=x.map(function(P){return P.lower}),E=T,b=T==="next"?"":l}_("next");var L=new o.Collection(o,function(){return Rt(m[0],y[R-1]+l)});L._ondirectionchange=function(T){_(T)};var S=0;return L._addAlgorithm(function(T,x,P){var O=T.key;if(typeof O!="string")return!1;var D=p(O);if(s(D,y,S))return!0;for(var k=null,A=S;A<R;++A){var F=Wh(O,D,m[A],y[A],g,E);F===null&&k===null?S=A+1:(k===null||g(k,F)>0)&&(k=F)}return x(k!==null?function(){T.continue(k+b)}:P),!1}),L}function Rt(o,s,u,l){return{type:2,lower:o,upper:s,lowerOpen:u,upperOpen:l}}function tu(o){return{type:1,lower:o,upper:o}}var nu=function(){function o(){}return Object.defineProperty(o.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),o.prototype.between=function(s,u,l,h){l=l!==!1,h=h===!0;try{return this._cmp(s,u)>0||this._cmp(s,u)===0&&(l||h)&&!(l&&h)?yn(this):new this.Collection(this,function(){return Rt(s,u,!l,!h)})}catch{return Le(this,ct)}},o.prototype.equals=function(s){return s==null?Le(this,ct):new this.Collection(this,function(){return tu(s)})},o.prototype.above=function(s){return s==null?Le(this,ct):new this.Collection(this,function(){return Rt(s,void 0,!0)})},o.prototype.aboveOrEqual=function(s){return s==null?Le(this,ct):new this.Collection(this,function(){return Rt(s,void 0,!1)})},o.prototype.below=function(s){return s==null?Le(this,ct):new this.Collection(this,function(){return Rt(void 0,s,!1,!0)})},o.prototype.belowOrEqual=function(s){return s==null?Le(this,ct):new this.Collection(this,function(){return Rt(void 0,s)})},o.prototype.startsWith=function(s){return typeof s!="string"?Le(this,Wa):this.between(s,s+Gt,!0,!0)},o.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):ci(this,function(u,l){return u.indexOf(l[0])===0},[s],Gt)},o.prototype.equalsIgnoreCase=function(s){return ci(this,function(u,l){return u===l[0]},[s],"")},o.prototype.anyOfIgnoreCase=function(){var s=ut.apply(ln,arguments);return s.length===0?yn(this):ci(this,function(u,l){return l.indexOf(u)!==-1},s,"")},o.prototype.startsWithAnyOfIgnoreCase=function(){var s=ut.apply(ln,arguments);return s.length===0?yn(this):ci(this,function(u,l){return l.some(function(h){return u.indexOf(h)===0})},s,Gt)},o.prototype.anyOf=function(){var s=this,u=ut.apply(ln,arguments),l=this._cmp;try{u.sort(l)}catch{return Le(this,ct)}if(u.length===0)return yn(this);var h=new this.Collection(this,function(){return Rt(u[0],u[u.length-1])});h._ondirectionchange=function(g){l=g==="next"?s._ascending:s._descending,u.sort(l)};var p=0;return h._addAlgorithm(function(g,m,y){for(var E=g.key;l(E,u[p])>0;)if(++p,p===u.length)return m(y),!1;return l(E,u[p])===0?!0:(m(function(){g.continue(u[p])}),!1)}),h},o.prototype.notEqual=function(s){return this.inAnyRange([[zo,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},o.prototype.noneOf=function(){var s=ut.apply(ln,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return Le(this,ct)}var u=s.reduce(function(l,h){return l?l.concat([[l[l.length-1][1],h]]):[[zo,h]]},null);return u.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(u,{includeLowers:!1,includeUppers:!1})},o.prototype.inAnyRange=function(s,u){var l=this,h=this._cmp,p=this._ascending,g=this._descending,m=this._min,y=this._max;if(s.length===0)return yn(this);if(!s.every(function(A){return A[0]!==void 0&&A[1]!==void 0&&p(A[0],A[1])<=0}))return Le(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",J.InvalidArgument);var E=!u||u.includeLowers!==!1,b=u&&u.includeUppers===!0;function R(A,F){for(var z=0,B=A.length;z<B;++z){var Y=A[z];if(h(F[0],Y[1])<0&&h(F[1],Y[0])>0){Y[0]=m(Y[0],F[0]),Y[1]=y(Y[1],F[1]);break}}return z===B&&A.push(F),A}var _=p;function L(A,F){return _(A[0],F[0])}var S;try{S=s.reduce(R,[]),S.sort(L)}catch{return Le(this,ct)}var T=0,x=b?function(A){return p(A,S[T][1])>0}:function(A){return p(A,S[T][1])>=0},P=E?function(A){return g(A,S[T][0])>0}:function(A){return g(A,S[T][0])>=0};function O(A){return!x(A)&&!P(A)}var D=x,k=new this.Collection(this,function(){return Rt(S[0][0],S[S.length-1][1],!E,!b)});return k._ondirectionchange=function(A){A==="next"?(D=x,_=p):(D=P,_=g),S.sort(L)},k._addAlgorithm(function(A,F,z){for(var B=A.key;D(B);)if(++T,T===S.length)return F(z),!1;return O(B)?!0:(l._cmp(B,S[T][1])===0||l._cmp(B,S[T][0])===0||F(function(){_===p?A.continue(S[T][0]):A.continue(S[T][1])}),!1)}),k},o.prototype.startsWithAnyOf=function(){var s=ut.apply(ln,arguments);return s.every(function(u){return typeof u=="string"})?s.length===0?yn(this):this.inAnyRange(s.map(function(u){return[u,u+Gt]})):Le(this,"startsWithAnyOf() only works with strings")},o}();function qh(o){return Zn(nu.prototype,function(u,l,h){if(this.db=o,this._ctx={table:u,index:l===":id"?null:l,or:h},this._cmp=this._ascending=ue,this._descending=function(p,g){return ue(g,p)},this._max=function(p,g){return ue(p,g)>0?p:g},this._min=function(p,g){return ue(p,g)<0?p:g},this._IDBKeyRange=o._deps.IDBKeyRange,!this._IDBKeyRange)throw new J.MissingAPI})}function Qe(o){return ye(function(s){return tr(s),o(s.target.error),!1})}function tr(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault()}var nr="storagemutated",qo="x-storagemutated-1",St=Qn(null,nr),Xh=function(){function o(){}return o.prototype._lock=function(){return de(!K.global),++this._reculock,this._reculock===1&&!K.global&&(K.lockOwnerFor=this),this},o.prototype._unlock=function(){if(de(!K.global),--this._reculock===0)for(K.global||(K.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var s=this._blockedFuncs.shift();try{Ht(s[1],s[0])}catch{}}return this},o.prototype._locked=function(){return this._reculock&&K.lockOwnerFor!==this},o.prototype.create=function(s){var u=this;if(!this.mode)return this;var l=this.db.idbdb,h=this.db._state.dbOpenError;if(de(!this.idbtrans),!s&&!l)switch(h&&h.name){case"DatabaseClosedError":throw new J.DatabaseClosed(h);case"MissingAPIError":throw new J.MissingAPI(h.message,h);default:throw new J.OpenFailed(h)}if(!this.active)throw new J.TransactionInactive;return de(this._completion._state===null),s=this.idbtrans=s||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):l.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),s.onerror=ye(function(p){tr(p),u._reject(s.error)}),s.onabort=ye(function(p){tr(p),u.active&&u._reject(new J.Abort(s.error)),u.active=!1,u.on("abort").fire(p)}),s.oncomplete=ye(function(){u.active=!1,u._resolve(),"mutatedParts"in s&&St.storagemutated.fire(s.mutatedParts)}),this},o.prototype._promise=function(s,u,l){var h=this;if(s==="readwrite"&&this.mode!=="readwrite")return Se(new J.ReadOnly("Transaction is readonly"));if(!this.active)return Se(new J.TransactionInactive);if(this._locked())return new $(function(g,m){h._blockedFuncs.push([function(){h._promise(s,u,l).then(g,m)},K])});if(l)return yt(function(){var g=new $(function(m,y){h._lock();var E=u(m,y,h);E&&E.then&&E.then(m,y)});return g.finally(function(){return h._unlock()}),g._lib=!0,g});var p=new $(function(g,m){var y=u(g,m,h);y&&y.then&&y.then(g,m)});return p._lib=!0,p},o.prototype._root=function(){return this.parent?this.parent._root():this},o.prototype.waitFor=function(s){var u=this._root(),l=$.resolve(s);if(u._waitingFor)u._waitingFor=u._waitingFor.then(function(){return l});else{u._waitingFor=l,u._waitingQueue=[];var h=u.idbtrans.objectStore(u.storeNames[0]);(function g(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(h.get(-1/0).onsuccess=g)})()}var p=u._waitingFor;return new $(function(g,m){l.then(function(y){return u._waitingQueue.push(ye(g.bind(null,y)))},function(y){return u._waitingQueue.push(ye(m.bind(null,y)))}).finally(function(){u._waitingFor===p&&(u._waitingFor=null)})})},o.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new J.Abort))},o.prototype.table=function(s){var u=this._memoizedTables||(this._memoizedTables={});if(w(u,s))return u[s];var l=this.schema[s];if(!l)throw new J.NotFound("Table "+s+" not part of transaction");var h=new this.db.Table(s,l,this);return h.core=this.db.core.table(s),u[s]=h,h},o}();function Jh(o){return Zn(Xh.prototype,function(u,l,h,p,g){var m=this;this.db=o,this.mode=u,this.storeNames=l,this.schema=h,this.chromeTransactionDurability=p,this.idbtrans=null,this.on=Qn(this,"complete","error","abort"),this.parent=g||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new $(function(y,E){m._resolve=y,m._reject=E}),this._completion.then(function(){m.active=!1,m.on.complete.fire()},function(y){var E=m.active;return m.active=!1,m.on.error.fire(y),m.parent?m.parent._reject(y):E&&m.idbtrans&&m.idbtrans.abort(),Se(y)})})}function Xo(o,s,u,l,h,p,g){return{name:o,keyPath:s,unique:u,multi:l,auto:h,compound:p,src:(u&&!g?"&":"")+(l?"*":"")+(h?"++":"")+ru(s)}}function ru(o){return typeof o=="string"?o:o?"["+[].join.call(o,"+")+"]":""}function Jo(o,s,u){return{name:o,primKey:s,indexes:u,mappedClass:null,idxByName:ve(u,function(l){return[l.name,l]})}}function Yh(o){return o.length===1?o[0]:o}var rr=function(o){try{return o.only([[]]),rr=function(){return[[]]},[[]]}catch{return rr=function(){return Gt},Gt}};function Yo(o){return o==null?function(){}:typeof o=="string"?Qh(o):function(s){return be(s,o)}}function Qh(o){var s=o.split(".");return s.length===1?function(u){return u[o]}:function(u){return be(u,o)}}function iu(o){return[].slice.call(o)}var Zh=0;function ir(o){return o==null?":id":typeof o=="string"?o:"[".concat(o.join("+"),"]")}function ef(o,s,u){function l(R,_){var L=iu(R.objectStoreNames);return{schema:{name:R.name,tables:L.map(function(S){return _.objectStore(S)}).map(function(S){var T=S.keyPath,x=S.autoIncrement,P=c(T),O=T==null,D={},k={name:S.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:O,compound:P,keyPath:T,autoIncrement:x,unique:!0,extractKey:Yo(T)},indexes:iu(S.indexNames).map(function(A){return S.index(A)}).map(function(A){var F=A.name,z=A.unique,B=A.multiEntry,Y=A.keyPath,se=c(Y),H={name:F,compound:se,keyPath:Y,unique:z,multiEntry:B,extractKey:Yo(Y)};return D[ir(Y)]=H,H}),getIndexByKeyPath:function(A){return D[ir(A)]}};return D[":id"]=k.primaryKey,T!=null&&(D[ir(T)]=k.primaryKey),k})},hasGetAll:L.length>0&&"getAll"in _.objectStore(L[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function h(R){if(R.type===3)return null;if(R.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var _=R.lower,L=R.upper,S=R.lowerOpen,T=R.upperOpen,x=_===void 0?L===void 0?null:s.upperBound(L,!!T):L===void 0?s.lowerBound(_,!!S):s.bound(_,L,!!S,!!T);return x}function p(R){var _=R.name;function L(x){var P=x.trans,O=x.type,D=x.keys,k=x.values,A=x.range;return new Promise(function(F,z){F=ye(F);var B=P.objectStore(_),Y=B.keyPath==null,se=O==="put"||O==="add";if(!se&&O!=="delete"&&O!=="deleteRange")throw new Error("Invalid operation type: "+O);var H=(D||k||{length:1}).length;if(D&&k&&D.length!==k.length)throw new Error("Given keys array must have same length as given values array.");if(H===0)return F({numFailures:0,failures:{},results:[],lastResult:void 0});var oe,Q=[],ce=[],X=0,Ee=function(et){++X,tr(et)};if(O==="deleteRange"){if(A.type===4)return F({numFailures:X,failures:ce,results:[],lastResult:void 0});A.type===3?Q.push(oe=B.clear()):Q.push(oe=B.delete(h(A)))}else{var De=se?Y?[k,D]:[k,null]:[D,null],Ze=De[0],Ne=De[1];if(se)for(var $e=0;$e<H;++$e)Q.push(oe=Ne&&Ne[$e]!==void 0?B[O](Ze[$e],Ne[$e]):B[O](Ze[$e])),oe.onerror=Ee;else for(var $e=0;$e<H;++$e)Q.push(oe=B[O](Ze[$e])),oe.onerror=Ee}var Ct=function(et){var ar=et.target.result;Q.forEach(function(Ge,Ri){return Ge.error!=null&&(ce[Ri]=Ge.error)}),F({numFailures:X,failures:ce,results:O==="delete"?D:Q.map(function(Ge){return Ge.result}),lastResult:ar})};oe.onerror=function(et){Ee(et),Ct(et)},oe.onsuccess=Ct})}function S(x){var P=x.trans,O=x.values,D=x.query,k=x.reverse,A=x.unique;return new Promise(function(F,z){F=ye(F);var B=D.index,Y=D.range,se=P.objectStore(_),H=B.isPrimaryKey?se:se.index(B.name),oe=k?A?"prevunique":"prev":A?"nextunique":"next",Q=O||!("openKeyCursor"in H)?H.openCursor(h(Y),oe):H.openKeyCursor(h(Y),oe);Q.onerror=Qe(z),Q.onsuccess=ye(function(ce){var X=Q.result;if(!X){F(null);return}X.___id=++Zh,X.done=!1;var Ee=X.continue.bind(X),De=X.continuePrimaryKey;De&&(De=De.bind(X));var Ze=X.advance.bind(X),Ne=function(){throw new Error("Cursor not started")},$e=function(){throw new Error("Cursor not stopped")};X.trans=P,X.stop=X.continue=X.continuePrimaryKey=X.advance=Ne,X.fail=ye(z),X.next=function(){var Ct=this,et=1;return this.start(function(){return et--?Ct.continue():Ct.stop()}).then(function(){return Ct})},X.start=function(Ct){var et=new Promise(function(Ge,Ri){Ge=ye(Ge),Q.onerror=Qe(Ri),X.fail=Ri,X.stop=function(zf){X.stop=X.continue=X.continuePrimaryKey=X.advance=$e,Ge(zf)}}),ar=function(){if(Q.result)try{Ct()}catch(Ge){X.fail(Ge)}else X.done=!0,X.start=function(){throw new Error("Cursor behind last entry")},X.stop()};return Q.onsuccess=ye(function(Ge){Q.onsuccess=ar,ar()}),X.continue=Ee,X.continuePrimaryKey=De,X.advance=Ze,ar(),et},F(X)},z)})}function T(x){return function(P){return new Promise(function(O,D){O=ye(O);var k=P.trans,A=P.values,F=P.limit,z=P.query,B=F===1/0?void 0:F,Y=z.index,se=z.range,H=k.objectStore(_),oe=Y.isPrimaryKey?H:H.index(Y.name),Q=h(se);if(F===0)return O({result:[]});if(x){var ce=A?oe.getAll(Q,B):oe.getAllKeys(Q,B);ce.onsuccess=function(Ze){return O({result:Ze.target.result})},ce.onerror=Qe(D)}else{var X=0,Ee=A||!("openKeyCursor"in oe)?oe.openCursor(Q):oe.openKeyCursor(Q),De=[];Ee.onsuccess=function(Ze){var Ne=Ee.result;if(!Ne)return O({result:De});if(De.push(A?Ne.value:Ne.primaryKey),++X===F)return O({result:De});Ne.continue()},Ee.onerror=Qe(D)}})}}return{name:_,schema:R,mutate:L,getMany:function(x){var P=x.trans,O=x.keys;return new Promise(function(D,k){D=ye(D);for(var A=P.objectStore(_),F=O.length,z=new Array(F),B=0,Y=0,se,H=function(X){var Ee=X.target;(z[Ee._pos]=Ee.result)!=null,++Y===B&&D(z)},oe=Qe(k),Q=0;Q<F;++Q){var ce=O[Q];ce!=null&&(se=A.get(O[Q]),se._pos=Q,se.onsuccess=H,se.onerror=oe,++B)}B===0&&D(z)})},get:function(x){var P=x.trans,O=x.key;return new Promise(function(D,k){D=ye(D);var A=P.objectStore(_),F=A.get(O);F.onsuccess=function(z){return D(z.target.result)},F.onerror=Qe(k)})},query:T(y),openCursor:S,count:function(x){var P=x.query,O=x.trans,D=P.index,k=P.range;return new Promise(function(A,F){var z=O.objectStore(_),B=D.isPrimaryKey?z:z.index(D.name),Y=h(k),se=Y?B.count(Y):B.count();se.onsuccess=ye(function(H){return A(H.target.result)}),se.onerror=Qe(F)})}}}var g=l(o,u),m=g.schema,y=g.hasGetAll,E=m.tables.map(function(R){return p(R)}),b={};return E.forEach(function(R){return b[R.name]=R}),{stack:"dbcore",transaction:o.transaction.bind(o),table:function(R){var _=b[R];if(!_)throw new Error("Table '".concat(R,"' not found"));return b[R]},MIN_KEY:-1/0,MAX_KEY:rr(s),schema:m}}function tf(o,s){return s.reduce(function(u,l){var h=l.create;return e(e({},u),h(u))},o)}function nf(o,s,u,l){var h=u.IDBKeyRange;u.indexedDB;var p=tf(ef(s,h,l),o.dbcore);return{dbcore:p}}function li(o,s){var u=s.db,l=nf(o._middlewares,u,o._deps,s);o.core=l.dbcore,o.tables.forEach(function(h){var p=h.name;o.core.schema.tables.some(function(g){return g.name===p})&&(h.core=o.core.table(p),o[p]instanceof o.Table&&(o[p].core=h.core))})}function hi(o,s,u,l){u.forEach(function(h){var p=l[h];s.forEach(function(g){var m=U(g,h);(!m||"value"in m&&m.value===void 0)&&(g===o.Transaction.prototype||g instanceof o.Transaction?N(g,h,{get:function(){return this.table(h)},set:function(y){I(this,h,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):g[h]=new o.Table(h,p))})})}function Qo(o,s){s.forEach(function(u){for(var l in u)u[l]instanceof o.Table&&delete u[l]})}function rf(o,s){return o._cfg.version-s._cfg.version}function of(o,s,u,l){var h=o._dbSchema;u.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=Jo("$meta",su("")[0],[]),o._storeNames.push("$meta"));var p=o._createTransaction("readwrite",o._storeNames,h);p.create(u),p._completion.catch(l);var g=p._reject.bind(p),m=K.transless||K;yt(function(){if(K.trans=p,K.transless=m,s===0)a(h).forEach(function(y){es(u,y,h[y].primKey,h[y].indexes)}),li(o,u),$.follow(function(){return o.on.populate.fire(p)}).catch(g);else return li(o,u),af(o,p,s).then(function(y){return uf(o,y,p,u)}).catch(g)})}function sf(o,s){ou(o._dbSchema,s),s.db.version%10===0&&!s.objectStoreNames.contains("$meta")&&s.db.createObjectStore("$meta").add(Math.ceil(s.db.version/10-1),"version");var u=di(o,o.idbdb,s);pi(o,o._dbSchema,s);for(var l=Zo(u,o._dbSchema),h=function(E){if(E.change.length||E.recreate)return console.warn("Unable to patch indexes of table ".concat(E.name," because it has changes on the type of index or primary key.")),{value:void 0};var b=s.objectStore(E.name);E.add.forEach(function(R){Ye&&console.debug("Dexie upgrade patch: Creating missing index ".concat(E.name,".").concat(R.src)),fi(b,R)})},p=0,g=l.change;p<g.length;p++){var m=g[p],y=h(m);if(typeof y=="object")return y.value}}function af(o,s,u){return s.storeNames.includes("$meta")?s.table("$meta").get("version").then(function(l){return l??u}):$.resolve(u)}function uf(o,s,u,l){var h=[],p=o._versions,g=o._dbSchema=di(o,o.idbdb,l),m=p.filter(function(E){return E._cfg.version>=s});if(m.length===0)return $.resolve();m.forEach(function(E){h.push(function(){var b=g,R=E._cfg.dbschema;pi(o,b,l),pi(o,R,l),g=o._dbSchema=R;var _=Zo(b,R);_.add.forEach(function(O){es(l,O[0],O[1].primKey,O[1].indexes)}),_.change.forEach(function(O){if(O.recreate)throw new J.Upgrade("Not yet support for changing primary key");var D=l.objectStore(O.name);O.add.forEach(function(k){return fi(D,k)}),O.change.forEach(function(k){D.deleteIndex(k.name),fi(D,k)}),O.del.forEach(function(k){return D.deleteIndex(k)})});var L=E._cfg.contentUpgrade;if(L&&E._cfg.version>s){li(o,l),u._memoizedTables={};var S=ke(R);_.del.forEach(function(O){S[O]=b[O]}),Qo(o,[o.Transaction.prototype]),hi(o,[o.Transaction.prototype],a(S),S),u.schema=S;var T=_o(L);T&&gn();var x,P=$.follow(function(){if(x=L(u),x&&T){var O=wt.bind(null,null);x.then(O,O)}});return x&&typeof x.then=="function"?$.resolve(x):P.then(function(){return x})}}),h.push(function(b){var R=E._cfg.dbschema;cf(R,b),Qo(o,[o.Transaction.prototype]),hi(o,[o.Transaction.prototype],o._storeNames,o._dbSchema),u.schema=o._dbSchema}),h.push(function(b){o.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(o.idbdb.version/10)===E._cfg.version?(o.idbdb.deleteObjectStore("$meta"),delete o._dbSchema.$meta,o._storeNames=o._storeNames.filter(function(R){return R!=="$meta"})):b.objectStore("$meta").put(E._cfg.version,"version"))})});function y(){return h.length?$.resolve(h.shift()(u.idbtrans)).then(y):$.resolve()}return y().then(function(){ou(g,l)})}function Zo(o,s){var u={del:[],add:[],change:[]},l;for(l in o)s[l]||u.del.push(l);for(l in s){var h=o[l],p=s[l];if(!h)u.add.push([l,p]);else{var g={name:l,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||h.primKey.auto!==p.primKey.auto)g.recreate=!0,u.change.push(g);else{var m=h.idxByName,y=p.idxByName,E=void 0;for(E in m)y[E]||g.del.push(E);for(E in y){var b=m[E],R=y[E];b?b.src!==R.src&&g.change.push(R):g.add.push(R)}(g.del.length>0||g.add.length>0||g.change.length>0)&&u.change.push(g)}}}return u}function es(o,s,u,l){var h=o.db.createObjectStore(s,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return l.forEach(function(p){return fi(h,p)}),h}function ou(o,s){a(o).forEach(function(u){s.db.objectStoreNames.contains(u)||(Ye&&console.debug("Dexie: Creating missing table",u),es(s,u,o[u].primKey,o[u].indexes))})}function cf(o,s){[].slice.call(s.db.objectStoreNames).forEach(function(u){return o[u]==null&&s.db.deleteObjectStore(u)})}function fi(o,s){o.createIndex(s.name,s.keyPath,{unique:s.unique,multiEntry:s.multi})}function di(o,s,u){var l={},h=Z(s.objectStoreNames,0);return h.forEach(function(p){for(var g=u.objectStore(p),m=g.keyPath,y=Xo(ru(m),m||"",!0,!1,!!g.autoIncrement,m&&typeof m!="string",!0),E=[],b=0;b<g.indexNames.length;++b){var R=g.index(g.indexNames[b]);m=R.keyPath;var _=Xo(R.name,m,!!R.unique,!!R.multiEntry,!1,m&&typeof m!="string",!1);E.push(_)}l[p]=Jo(p,y,E)}),l}function lf(o,s,u){o.verno=s.version/10;var l=o._dbSchema=di(o,s,u);o._storeNames=Z(s.objectStoreNames,0),hi(o,[o._allTables],a(l),l)}function hf(o,s){var u=di(o,o.idbdb,s),l=Zo(u,o._dbSchema);return!(l.add.length||l.change.some(function(h){return h.add.length||h.change.length}))}function pi(o,s,u){for(var l=u.db.objectStoreNames,h=0;h<l.length;++h){var p=l[h],g=u.objectStore(p);o._hasGetAll="getAll"in g;for(var m=0;m<g.indexNames.length;++m){var y=g.indexNames[m],E=g.index(y).keyPath,b=typeof E=="string"?E:"["+Z(E).join("+")+"]";if(s[p]){var R=s[p].idxByName[b];R&&(R.name=y,delete s[p].idxByName[b],s[p].idxByName[y]=R)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(o._hasGetAll=!1)}function su(o){return o.split(",").map(function(s,u){s=s.trim();var l=s.replace(/([&*]|\+\+)/g,""),h=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Xo(l,h||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),c(h),u===0)})}var ff=function(){function o(){}return o.prototype._parseStoresSpec=function(s,u){a(s).forEach(function(l){if(s[l]!==null){var h=su(s[l]),p=h.shift();if(p.unique=!0,p.multi)throw new J.Schema("Primary key cannot be multi-valued");h.forEach(function(g){if(g.auto)throw new J.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new J.Schema("Index must have a name and cannot be an empty string")}),u[l]=Jo(l,p,h)}})},o.prototype.stores=function(s){var u=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,s):s;var l=u._versions,h={},p={};return l.forEach(function(g){f(h,g._cfg.storesSource),p=g._cfg.dbschema={},g._parseStoresSpec(h,p)}),u._dbSchema=p,Qo(u,[u._allTables,u,u.Transaction.prototype]),hi(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],a(p),p),u._storeNames=a(p),this},o.prototype.upgrade=function(s){return this._cfg.contentUpgrade=Do(this._cfg.contentUpgrade||me,s),this},o}();function df(o){return Zn(ff.prototype,function(u){this.db=o,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ts(o,s){var u=o._dbNamesDB;return u||(u=o._dbNamesDB=new lt(oi,{addons:[],indexedDB:o,IDBKeyRange:s}),u.version(1).stores({dbnames:"name"})),u.table("dbnames")}function ns(o){return o&&typeof o.databases=="function"}function pf(o){var s=o.indexedDB,u=o.IDBKeyRange;return ns(s)?Promise.resolve(s.databases()).then(function(l){return l.map(function(h){return h.name}).filter(function(h){return h!==oi})}):ts(s,u).toCollection().primaryKeys()}function gf(o,s){var u=o.indexedDB,l=o.IDBKeyRange;!ns(u)&&s!==oi&&ts(u,l).put({name:s}).catch(me)}function mf(o,s){var u=o.indexedDB,l=o.IDBKeyRange;!ns(u)&&s!==oi&&ts(u,l).delete(s).catch(me)}function rs(o){return yt(function(){return K.letThrough=!0,o()})}function vf(){var o=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!o||!indexedDB.databases)return Promise.resolve();var s;return new Promise(function(u){var l=function(){return indexedDB.databases().finally(u)};s=setInterval(l,100),l()}).finally(function(){return clearInterval(s)})}var is;function os(o){return!("from"in o)}var Oe=function(o,s){if(this)f(this,arguments.length?{d:1,from:o,to:arguments.length>1?s:o}:{d:0});else{var u=new Oe;return o&&"d"in o&&f(u,o),u}};C(Oe.prototype,(is={add:function(o){return sr(this,o),this},addKey:function(o){return or(this,o,o),this},addKeys:function(o){var s=this;return o.forEach(function(u){return or(s,u,u)}),this},hasKey:function(o){var s=gi(this).next(o).value;return s&&ue(s.from,o)<=0&&ue(s.to,o)>=0}},is[xo]=function(){return gi(this)},is));function or(o,s,u){var l=ue(s,u);if(!isNaN(l)){if(l>0)throw RangeError();if(os(o))return f(o,{from:s,to:u,d:1});var h=o.l,p=o.r;if(ue(u,o.from)<0)return h?or(h,s,u):o.l={from:s,to:u,d:1,l:null,r:null},uu(o);if(ue(s,o.to)>0)return p?or(p,s,u):o.r={from:s,to:u,d:1,l:null,r:null},uu(o);ue(s,o.from)<0&&(o.from=s,o.l=null,o.d=p?p.d+1:1),ue(u,o.to)>0&&(o.to=u,o.r=null,o.d=o.l?o.l.d+1:1);var g=!o.r;h&&!o.l&&sr(o,h),p&&g&&sr(o,p)}}function sr(o,s){function u(l,h){var p=h.from,g=h.to,m=h.l,y=h.r;or(l,p,g),m&&u(l,m),y&&u(l,y)}os(s)||u(o,s)}function au(o,s){var u=gi(s),l=u.next();if(l.done)return!1;for(var h=l.value,p=gi(o),g=p.next(h.from),m=g.value;!l.done&&!g.done;){if(ue(m.from,h.to)<=0&&ue(m.to,h.from)>=0)return!0;ue(h.from,m.from)<0?h=(l=u.next(m.from)).value:m=(g=p.next(h.from)).value}return!1}function gi(o){var s=os(o)?null:{s:0,n:o};return{next:function(u){for(var l=arguments.length>0;s;)switch(s.s){case 0:if(s.s=1,l)for(;s.n.l&&ue(u,s.n.from)<0;)s={up:s,n:s.n.l,s:1};else for(;s.n.l;)s={up:s,n:s.n.l,s:1};case 1:if(s.s=2,!l||ue(u,s.n.to)<=0)return{value:s.n,done:!1};case 2:if(s.n.r){s.s=3,s={up:s,n:s.n.r,s:0};continue}case 3:s=s.up}return{done:!0}}}}function uu(o){var s,u,l=(((s=o.r)===null||s===void 0?void 0:s.d)||0)-(((u=o.l)===null||u===void 0?void 0:u.d)||0),h=l>1?"r":l<-1?"l":"";if(h){var p=h==="r"?"l":"r",g=e({},o),m=o[h];o.from=m.from,o.to=m.to,o[h]=m[h],g[h]=m[p],o[p]=g,g.d=cu(g)}o.d=cu(o)}function cu(o){var s=o.r,u=o.l;return(s?u?Math.max(s.d,u.d):s.d:u?u.d:0)+1}function mi(o,s){return a(s).forEach(function(u){o[u]?sr(o[u],s[u]):o[u]=Ma(s[u])}),o}function ss(o,s){return o.all||s.all||Object.keys(o).some(function(u){return s[u]&&au(s[u],o[u])})}var Kt={},as={},us=!1;function vi(o,s){mi(as,o),us||(us=!0,setTimeout(function(){us=!1;var u=as;as={},cs(u,!1)},0))}function cs(o,s){s===void 0&&(s=!1);var u=new Set;if(o.all)for(var l=0,h=Object.values(Kt);l<h.length;l++){var p=h[l];lu(p,o,u,s)}else for(var g in o){var m=/^idb\:\/\/(.*)\/(.*)\//.exec(g);if(m){var y=m[1],E=m[2],p=Kt["idb://".concat(y,"/").concat(E)];p&&lu(p,o,u,s)}}u.forEach(function(b){return b()})}function lu(o,s,u,l){for(var h=[],p=0,g=Object.entries(o.queries.query);p<g.length;p++){for(var m=g[p],y=m[0],E=m[1],b=[],R=0,_=E;R<_.length;R++){var L=_[R];ss(s,L.obsSet)?L.subscribers.forEach(function(P){return u.add(P)}):l&&b.push(L)}l&&h.push([y,b])}if(l)for(var S=0,T=h;S<T.length;S++){var x=T[S],y=x[0],b=x[1];o.queries.query[y]=b}}function yf(o){var s=o._state,u=o._deps.indexedDB;if(s.isBeingOpened||o.idbdb)return s.dbReadyPromise.then(function(){return s.dbOpenError?Se(s.dbOpenError):o});s.isBeingOpened=!0,s.dbOpenError=null,s.openComplete=!1;var l=s.openCanceller,h=Math.round(o.verno*10),p=!1;function g(){if(s.openCanceller!==l)throw new J.DatabaseClosed("db.open() was cancelled")}var m=s.dbReadyResolve,y=null,E=!1,b=function(){return new $(function(R,_){if(g(),!u)throw new J.MissingAPI;var L=o.name,S=s.autoSchema||!h?u.open(L):u.open(L,h);if(!S)throw new J.MissingAPI;S.onerror=Qe(_),S.onblocked=ye(o._fireOnBlocked),S.onupgradeneeded=ye(function(T){if(y=S.transaction,s.autoSchema&&!o._options.allowEmptyDB){S.onerror=tr,y.abort(),S.result.close();var x=u.deleteDatabase(L);x.onsuccess=x.onerror=ye(function(){_(new J.NoSuchDatabase("Database ".concat(L," doesnt exist")))})}else{y.onerror=Qe(_);var P=T.oldVersion>Math.pow(2,62)?0:T.oldVersion;E=P<1,o.idbdb=S.result,p&&sf(o,y),of(o,P/10,y,_)}},_),S.onsuccess=ye(function(){y=null;var T=o.idbdb=S.result,x=Z(T.objectStoreNames);if(x.length>0)try{var P=T.transaction(Yh(x),"readonly");if(s.autoSchema)lf(o,T,P);else if(pi(o,o._dbSchema,P),!hf(o,P)&&!p)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),T.close(),h=T.version+1,p=!0,R(b());li(o,P)}catch{}mn.push(o),T.onversionchange=ye(function(O){s.vcFired=!0,o.on("versionchange").fire(O)}),T.onclose=ye(function(O){o.on("close").fire(O)}),E&&gf(o._deps,L),R()},_)}).catch(function(R){switch(R?.name){case"UnknownError":if(s.PR1398_maxLoop>0)return s.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),b();break;case"VersionError":if(h>0)return h=0,b();break}return $.reject(R)})};return $.race([l,(typeof navigator>"u"?$.resolve():vf()).then(b)]).then(function(){return g(),s.onReadyBeingFired=[],$.resolve(rs(function(){return o.on.ready.fire(o.vip)})).then(function R(){if(s.onReadyBeingFired.length>0){var _=s.onReadyBeingFired.reduce(Do,me);return s.onReadyBeingFired=[],$.resolve(rs(function(){return _(o.vip)})).then(R)}})}).finally(function(){s.openCanceller===l&&(s.onReadyBeingFired=null,s.isBeingOpened=!1)}).catch(function(R){s.dbOpenError=R;try{y&&y.abort()}catch{}return l===s.openCanceller&&o._close(),Se(R)}).finally(function(){s.openComplete=!0,m()}).then(function(){if(E){var R={};o.tables.forEach(function(_){_.schema.indexes.forEach(function(L){L.name&&(R["idb://".concat(o.name,"/").concat(_.name,"/").concat(L.name)]=new Oe(-1/0,[[[]]]))}),R["idb://".concat(o.name,"/").concat(_.name,"/")]=R["idb://".concat(o.name,"/").concat(_.name,"/:dels")]=new Oe(-1/0,[[[]]])}),St(nr).fire(R),cs(R,!0)}return o})}function ls(o){var s=function(g){return o.next(g)},u=function(g){return o.throw(g)},l=p(s),h=p(u);function p(g){return function(m){var y=g(m),E=y.value;return y.done?E:!E||typeof E.then!="function"?c(E)?Promise.all(E).then(l,h):l(E):E.then(l,h)}}return p(s)()}function wf(o,s,u){var l=arguments.length;if(l<2)throw new J.InvalidArgument("Too few arguments");for(var h=new Array(l-1);--l;)h[l-1]=arguments[l];u=h.pop();var p=Da(h);return[o,p,u]}function hu(o,s,u,l,h){return $.resolve().then(function(){var p=K.transless||K,g=o._createTransaction(s,u,o._dbSchema,l);g.explicit=!0;var m={trans:g,transless:p};if(l)g.idbtrans=l.idbtrans;else try{g.create(),g.idbtrans._explicit=!0,o._state.PR1398_maxLoop=3}catch(R){return R.name===Oo.InvalidState&&o.isOpen()&&--o._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),o.close({disableAutoOpen:!1}),o.open().then(function(){return hu(o,s,u,null,h)})):Se(R)}var y=_o(h);y&&gn();var E,b=$.follow(function(){if(E=h.call(g,g),E)if(y){var R=wt.bind(null,null);E.then(R,R)}else typeof E.next=="function"&&typeof E.throw=="function"&&(E=ls(E))},m);return(E&&typeof E.then=="function"?$.resolve(E).then(function(R){return g.active?R:Se(new J.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):b.then(function(){return E})).then(function(R){return l&&g._resolve(),g._completion.then(function(){return R})}).catch(function(R){return g._reject(R),Se(R)})})}function yi(o,s,u){for(var l=c(o)?o.slice():[o],h=0;h<u;++h)l.push(s);return l}function Ef(o){return e(e({},o),{table:function(s){var u=o.table(s),l=u.schema,h={},p=[];function g(T,x,P){var O=ir(T),D=h[O]=h[O]||[],k=T==null?0:typeof T=="string"?1:T.length,A=x>0,F=e(e({},P),{name:A?"".concat(O,"(virtual-from:").concat(P.name,")"):P.name,lowLevelIndex:P,isVirtual:A,keyTail:x,keyLength:k,extractKey:Yo(T),unique:!A&&P.unique});if(D.push(F),F.isPrimaryKey||p.push(F),k>1){var z=k===2?T[0]:T.slice(0,k-1);g(z,x+1,P)}return D.sort(function(B,Y){return B.keyTail-Y.keyTail}),F}var m=g(l.primaryKey.keyPath,0,l.primaryKey);h[":id"]=[m];for(var y=0,E=l.indexes;y<E.length;y++){var b=E[y];g(b.keyPath,0,b)}function R(T){var x=h[ir(T)];return x&&x[0]}function _(T,x){return{type:T.type===1?2:T.type,lower:yi(T.lower,T.lowerOpen?o.MAX_KEY:o.MIN_KEY,x),lowerOpen:!0,upper:yi(T.upper,T.upperOpen?o.MIN_KEY:o.MAX_KEY,x),upperOpen:!0}}function L(T){var x=T.query.index;return x.isVirtual?e(e({},T),{query:{index:x.lowLevelIndex,range:_(T.query.range,x.keyTail)}}):T}var S=e(e({},u),{schema:e(e({},l),{primaryKey:m,indexes:p,getIndexByKeyPath:R}),count:function(T){return u.count(L(T))},query:function(T){return u.query(L(T))},openCursor:function(T){var x=T.query.index,P=x.keyTail,O=x.isVirtual,D=x.keyLength;if(!O)return u.openCursor(T);function k(A){function F(B){B!=null?A.continue(yi(B,T.reverse?o.MAX_KEY:o.MIN_KEY,P)):T.unique?A.continue(A.key.slice(0,D).concat(T.reverse?o.MIN_KEY:o.MAX_KEY,P)):A.continue()}var z=Object.create(A,{continue:{value:F},continuePrimaryKey:{value:function(B,Y){A.continuePrimaryKey(yi(B,o.MAX_KEY,P),Y)}},primaryKey:{get:function(){return A.primaryKey}},key:{get:function(){var B=A.key;return D===1?B[0]:B.slice(0,D)}},value:{get:function(){return A.value}}});return z}return u.openCursor(L(T)).then(function(A){return A&&k(A)})}});return S}})}var Rf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ef};function hs(o,s,u,l){return u=u||{},l=l||"",a(o).forEach(function(h){if(!w(s,h))u[l+h]=void 0;else{var p=o[h],g=s[h];if(typeof p=="object"&&typeof g=="object"&&p&&g){var m=Io(p),y=Io(g);m!==y?u[l+h]=s[h]:m==="Object"?hs(p,g,u,l+h+"."):p!==g&&(u[l+h]=s[h])}else p!==g&&(u[l+h]=s[h])}}),a(s).forEach(function(h){w(o,h)||(u[l+h]=s[h])}),u}function fs(o,s){return s.type==="delete"?s.keys:s.keys||s.values.map(o.extractKey)}var Sf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(o){return e(e({},o),{table:function(s){var u=o.table(s),l=u.schema.primaryKey,h=e(e({},u),{mutate:function(p){var g=K.trans,m=g.table(s).hook,y=m.deleting,E=m.creating,b=m.updating;switch(p.type){case"add":if(E.fire===me)break;return g._promise("readwrite",function(){return R(p)},!0);case"put":if(E.fire===me&&b.fire===me)break;return g._promise("readwrite",function(){return R(p)},!0);case"delete":if(y.fire===me)break;return g._promise("readwrite",function(){return R(p)},!0);case"deleteRange":if(y.fire===me)break;return g._promise("readwrite",function(){return _(p)},!0)}return u.mutate(p);function R(S){var T=K.trans,x=S.keys||fs(l,S);if(!x)throw new Error("Keys missing");return S=S.type==="add"||S.type==="put"?e(e({},S),{keys:x}):e({},S),S.type!=="delete"&&(S.values=r([],S.values,!0)),S.keys&&(S.keys=r([],S.keys,!0)),bf(u,S,x).then(function(P){var O=x.map(function(D,k){var A=P[k],F={onerror:null,onsuccess:null};if(S.type==="delete")y.fire.call(F,D,A,T);else if(S.type==="add"||A===void 0){var z=E.fire.call(F,D,S.values[k],T);D==null&&z!=null&&(D=z,S.keys[k]=D,l.outbound||ge(S.values[k],l.keyPath,D))}else{var B=hs(A,S.values[k]),Y=b.fire.call(F,B,D,A,T);if(Y){var se=S.values[k];Object.keys(Y).forEach(function(H){w(se,H)?se[H]=Y[H]:ge(se,H,Y[H])})}}return F});return u.mutate(S).then(function(D){for(var k=D.failures,A=D.results,F=D.numFailures,z=D.lastResult,B=0;B<x.length;++B){var Y=A?A[B]:x[B],se=O[B];Y==null?se.onerror&&se.onerror(k[B]):se.onsuccess&&se.onsuccess(S.type==="put"&&P[B]?S.values[B]:Y)}return{failures:k,results:A,numFailures:F,lastResult:z}}).catch(function(D){return O.forEach(function(k){return k.onerror&&k.onerror(D)}),Promise.reject(D)})})}function _(S){return L(S.trans,S.range,1e4)}function L(S,T,x){return u.query({trans:S,values:!1,query:{index:l,range:T},limit:x}).then(function(P){var O=P.result;return R({type:"delete",keys:O,trans:S}).then(function(D){return D.numFailures>0?Promise.reject(D.failures[0]):O.length<x?{failures:[],numFailures:0,lastResult:void 0}:L(S,e(e({},T),{lower:O[O.length-1],lowerOpen:!0}),x)})})}}});return h}})}};function bf(o,s,u){return s.type==="add"?Promise.resolve([]):o.getMany({trans:s.trans,keys:u,cache:"immutable"})}function fu(o,s,u){try{if(!s||s.keys.length<o.length)return null;for(var l=[],h=0,p=0;h<s.keys.length&&p<o.length;++h)ue(s.keys[h],o[p])===0&&(l.push(u?jt(s.values[h]):s.values[h]),++p);return l.length===o.length?l:null}catch{return null}}var Tf={stack:"dbcore",level:-1,create:function(o){return{table:function(s){var u=o.table(s);return e(e({},u),{getMany:function(l){if(!l.cache)return u.getMany(l);var h=fu(l.keys,l.trans._cache,l.cache==="clone");return h?$.resolve(h):u.getMany(l).then(function(p){return l.trans._cache={keys:l.keys,values:l.cache==="clone"?jt(p):p},p})},mutate:function(l){return l.type!=="add"&&(l.trans._cache=null),u.mutate(l)}})}}}};function du(o,s){return o.trans.mode==="readonly"&&!!o.subscr&&!o.trans.explicit&&o.trans.db._options.cache!=="disabled"&&!s.schema.primaryKey.outbound}function pu(o,s){switch(o){case"query":return s.values&&!s.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Cf={stack:"dbcore",level:0,name:"Observability",create:function(o){var s=o.schema.name,u=new Oe(o.MIN_KEY,o.MAX_KEY);return e(e({},o),{transaction:function(l,h,p){if(K.subscr&&h!=="readonly")throw new J.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(K.querier));return o.transaction(l,h,p)},table:function(l){var h=o.table(l),p=h.schema,g=p.primaryKey,m=p.indexes,y=g.extractKey,E=g.outbound,b=g.autoIncrement&&m.filter(function(S){return S.compound&&S.keyPath.includes(g.keyPath)}),R=e(e({},h),{mutate:function(S){var T,x,P=S.trans,O=S.mutatedParts||(S.mutatedParts={}),D=function(Q){var ce="idb://".concat(s,"/").concat(l,"/").concat(Q);return O[ce]||(O[ce]=new Oe)},k=D(""),A=D(":dels"),F=S.type,z=S.type==="deleteRange"?[S.range]:S.type==="delete"?[S.keys]:S.values.length<50?[fs(g,S).filter(function(Q){return Q}),S.values]:[],B=z[0],Y=z[1],se=S.trans._cache;if(c(B)){k.addKeys(B);var H=F==="delete"||B.length===Y.length?fu(B,se):null;H||A.addKeys(B),(H||Y)&&If(D,p,H,Y)}else if(B){var oe={from:(T=B.lower)!==null&&T!==void 0?T:o.MIN_KEY,to:(x=B.upper)!==null&&x!==void 0?x:o.MAX_KEY};A.add(oe),k.add(oe)}else k.add(u),A.add(u),p.indexes.forEach(function(Q){return D(Q.name).add(u)});return h.mutate(S).then(function(Q){return B&&(S.type==="add"||S.type==="put")&&(k.addKeys(Q.results),b&&b.forEach(function(ce){for(var X=S.values.map(function(Ne){return ce.extractKey(Ne)}),Ee=ce.keyPath.findIndex(function(Ne){return Ne===g.keyPath}),De=0,Ze=Q.results.length;De<Ze;++De)X[De][Ee]=Q.results[De];D(ce.name).addKeys(X)})),P.mutatedParts=mi(P.mutatedParts||{},O),Q})}}),_=function(S){var T,x,P=S.query,O=P.index,D=P.range;return[O,new Oe((T=D.lower)!==null&&T!==void 0?T:o.MIN_KEY,(x=D.upper)!==null&&x!==void 0?x:o.MAX_KEY)]},L={get:function(S){return[g,new Oe(S.key)]},getMany:function(S){return[g,new Oe().addKeys(S.keys)]},count:_,query:_,openCursor:_};return a(L).forEach(function(S){R[S]=function(T){var x=K.subscr,P=!!x,O=du(K,h)&&pu(S,T),D=O?T.obsSet={}:x;if(P){var k=function(H){var oe="idb://".concat(s,"/").concat(l,"/").concat(H);return D[oe]||(D[oe]=new Oe)},A=k(""),F=k(":dels"),z=L[S](T),B=z[0],Y=z[1];if(S==="query"&&B.isPrimaryKey&&!T.values?F.add(Y):k(B.name||"").add(Y),!B.isPrimaryKey)if(S==="count")F.add(u);else{var se=S==="query"&&E&&T.values&&h.query(e(e({},T),{values:!1}));return h[S].apply(this,arguments).then(function(H){if(S==="query"){if(E&&T.values)return se.then(function(X){var Ee=X.result;return A.addKeys(Ee),H});var oe=T.values?H.result.map(y):H.result;T.values?A.addKeys(oe):F.addKeys(oe)}else if(S==="openCursor"){var Q=H,ce=T.values;return Q&&Object.create(Q,{key:{get:function(){return F.addKey(Q.primaryKey),Q.key}},primaryKey:{get:function(){var X=Q.primaryKey;return F.addKey(X),X}},value:{get:function(){return ce&&A.addKey(Q.primaryKey),Q.value}}})}return H})}}return h[S].apply(this,arguments)}}),R}})}};function If(o,s,u,l){function h(p){var g=o(p.name||"");function m(E){return E!=null?p.extractKey(E):null}var y=function(E){return p.multiEntry&&c(E)?E.forEach(function(b){return g.addKey(b)}):g.addKey(E)};(u||l).forEach(function(E,b){var R=u&&m(u[b]),_=l&&m(l[b]);ue(R,_)!==0&&(R!=null&&y(R),_!=null&&y(_))})}s.indexes.forEach(h)}function gu(o,s,u){if(u.numFailures===0)return s;if(s.type==="deleteRange")return null;var l=s.keys?s.keys.length:"values"in s&&s.values?s.values.length:1;if(u.numFailures===l)return null;var h=e({},s);return c(h.keys)&&(h.keys=h.keys.filter(function(p,g){return!(g in u.failures)})),"values"in h&&c(h.values)&&(h.values=h.values.filter(function(p,g){return!(g in u.failures)})),h}function xf(o,s){return s.lower===void 0?!0:s.lowerOpen?ue(o,s.lower)>0:ue(o,s.lower)>=0}function _f(o,s){return s.upper===void 0?!0:s.upperOpen?ue(o,s.upper)<0:ue(o,s.upper)<=0}function ds(o,s){return xf(o,s)&&_f(o,s)}function mu(o,s,u,l,h,p){if(!u||u.length===0)return o;var g=s.query.index,m=g.multiEntry,y=s.query.range,E=l.schema.primaryKey,b=E.extractKey,R=g.extractKey,_=(g.lowLevelIndex||g).extractKey,L=u.reduce(function(S,T){var x=S,P=[];if(T.type==="add"||T.type==="put")for(var O=new Oe,D=T.values.length-1;D>=0;--D){var k=T.values[D],A=b(k);if(!O.hasKey(A)){var F=R(k);(m&&c(F)?F.some(function(H){return ds(H,y)}):ds(F,y))&&(O.addKey(A),P.push(k))}}switch(T.type){case"add":{var z=new Oe().addKeys(s.values?S.map(function(H){return b(H)}):S);x=S.concat(s.values?P.filter(function(H){var oe=b(H);return z.hasKey(oe)?!1:(z.addKey(oe),!0)}):P.map(function(H){return b(H)}).filter(function(H){return z.hasKey(H)?!1:(z.addKey(H),!0)}));break}case"put":{var B=new Oe().addKeys(T.values.map(function(H){return b(H)}));x=S.filter(function(H){return!B.hasKey(s.values?b(H):H)}).concat(s.values?P:P.map(function(H){return b(H)}));break}case"delete":var Y=new Oe().addKeys(T.keys);x=S.filter(function(H){return!Y.hasKey(s.values?b(H):H)});break;case"deleteRange":var se=T.range;x=S.filter(function(H){return!ds(b(H),se)});break}return x},o);return L===o?o:(L.sort(function(S,T){return ue(_(S),_(T))||ue(b(S),b(T))}),s.limit&&s.limit<1/0&&(L.length>s.limit?L.length=s.limit:o.length===s.limit&&L.length<s.limit&&(h.dirty=!0)),p?Object.freeze(L):L)}function vu(o,s){return ue(o.lower,s.lower)===0&&ue(o.upper,s.upper)===0&&!!o.lowerOpen==!!s.lowerOpen&&!!o.upperOpen==!!s.upperOpen}function Af(o,s,u,l){if(o===void 0)return s!==void 0?-1:0;if(s===void 0)return 1;var h=ue(o,s);if(h===0){if(u&&l)return 0;if(u)return 1;if(l)return-1}return h}function Of(o,s,u,l){if(o===void 0)return s!==void 0?1:0;if(s===void 0)return-1;var h=ue(o,s);if(h===0){if(u&&l)return 0;if(u)return-1;if(l)return 1}return h}function Df(o,s){return Af(o.lower,s.lower,o.lowerOpen,s.lowerOpen)<=0&&Of(o.upper,s.upper,o.upperOpen,s.upperOpen)>=0}function Pf(o,s,u,l){var h=Kt["idb://".concat(o,"/").concat(s)];if(!h)return[];var p=h.queries[u];if(!p)return[null,!1,h,null];var g=l.query?l.query.index.name:null,m=p[g||""];if(!m)return[null,!1,h,null];switch(u){case"query":var y=m.find(function(R){return R.req.limit===l.limit&&R.req.values===l.values&&vu(R.req.query.range,l.query.range)});if(y)return[y,!0,h,m];var E=m.find(function(R){var _="limit"in R.req?R.req.limit:1/0;return _>=l.limit&&(l.values?R.req.values:!0)&&Df(R.req.query.range,l.query.range)});return[E,!1,h,m];case"count":var b=m.find(function(R){return vu(R.req.query.range,l.query.range)});return[b,!!b,h,m]}}function Mf(o,s,u,l){o.subscribers.add(u),l.addEventListener("abort",function(){o.subscribers.delete(u),o.subscribers.size===0&&kf(o,s)})}function kf(o,s){setTimeout(function(){o.subscribers.size===0&&Ut(s,o)},3e3)}var Nf={stack:"dbcore",level:0,name:"Cache",create:function(o){var s=o.schema.name,u=e(e({},o),{transaction:function(l,h,p){var g=o.transaction(l,h,p);if(h==="readwrite"){var m=new AbortController,y=m.signal,E=function(b){return function(){if(m.abort(),h==="readwrite"){for(var R=new Set,_=0,L=l;_<L.length;_++){var S=L[_],T=Kt["idb://".concat(s,"/").concat(S)];if(T){var x=o.table(S),P=T.optimisticOps.filter(function(ce){return ce.trans===g});if(g._explicit&&b&&g.mutatedParts)for(var O=0,D=Object.values(T.queries.query);O<D.length;O++)for(var k=D[O],A=0,F=k.slice();A<F.length;A++){var z=F[A];ss(z.obsSet,g.mutatedParts)&&(Ut(k,z),z.subscribers.forEach(function(ce){return R.add(ce)}))}else if(P.length>0){T.optimisticOps=T.optimisticOps.filter(function(ce){return ce.trans!==g});for(var B=0,Y=Object.values(T.queries.query);B<Y.length;B++)for(var k=Y[B],se=0,H=k.slice();se<H.length;se++){var z=H[se];if(z.res!=null&&g.mutatedParts)if(b&&!z.dirty){var oe=Object.isFrozen(z.res),Q=mu(z.res,z.req,P,x,z,oe);z.dirty?(Ut(k,z),z.subscribers.forEach(function(Ee){return R.add(Ee)})):Q!==z.res&&(z.res=Q,z.promise=$.resolve({result:Q}))}else z.dirty&&Ut(k,z),z.subscribers.forEach(function(Ee){return R.add(Ee)})}}}}R.forEach(function(ce){return ce()})}}};g.addEventListener("abort",E(!1),{signal:y}),g.addEventListener("error",E(!1),{signal:y}),g.addEventListener("complete",E(!0),{signal:y})}return g},table:function(l){var h=o.table(l),p=h.schema.primaryKey,g=e(e({},h),{mutate:function(m){var y=K.trans;if(p.outbound||y.db._options.cache==="disabled"||y.explicit||y.idbtrans.mode!=="readwrite")return h.mutate(m);var E=Kt["idb://".concat(s,"/").concat(l)];if(!E)return h.mutate(m);var b=h.mutate(m);return(m.type==="add"||m.type==="put")&&(m.values.length>=50||fs(p,m).some(function(R){return R==null}))?b.then(function(R){var _=e(e({},m),{values:m.values.map(function(S,T){var x;if(R.failures[T])return S;var P=!((x=p.keyPath)===null||x===void 0)&&x.includes(".")?jt(S):e({},S);return ge(P,p.keyPath,R.results[T]),P})}),L=gu(E,_,R);E.optimisticOps.push(L),queueMicrotask(function(){return m.mutatedParts&&vi(m.mutatedParts)})}):(E.optimisticOps.push(m),m.mutatedParts&&vi(m.mutatedParts),b.then(function(R){if(R.numFailures>0){Ut(E.optimisticOps,m);var _=gu(E,m,R);_&&E.optimisticOps.push(_),m.mutatedParts&&vi(m.mutatedParts)}}),b.catch(function(){Ut(E.optimisticOps,m),m.mutatedParts&&vi(m.mutatedParts)})),b},query:function(m){var y;if(!du(K,h)||!pu("query",m))return h.query(m);var E=((y=K.trans)===null||y===void 0?void 0:y.db._options.cache)==="immutable",b=K,R=b.requery,_=b.signal,L=Pf(s,l,"query",m),S=L[0],T=L[1],x=L[2],P=L[3];if(S&&T)S.obsSet=m.obsSet;else{var O=h.query(m).then(function(D){var k=D.result;if(S&&(S.res=k),E){for(var A=0,F=k.length;A<F;++A)Object.freeze(k[A]);Object.freeze(k)}else D.result=jt(k);return D}).catch(function(D){return P&&S&&Ut(P,S),Promise.reject(D)});S={obsSet:m.obsSet,promise:O,subscribers:new Set,type:"query",req:m,dirty:!1},P?P.push(S):(P=[S],x||(x=Kt["idb://".concat(s,"/").concat(l)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),x.queries.query[m.query.index.name||""]=P)}return Mf(S,P,R,_),S.promise.then(function(D){return{result:mu(D.result,m,x?.optimisticOps,h,S,E)}})}});return g}});return u}};function wi(o,s){return new Proxy(o,{get:function(u,l,h){return l==="db"?s:Reflect.get(u,l,h)}})}var lt=function(){function o(s,u){var l=this;this._middlewares={},this.verno=0;var h=o.dependencies;this._options=u=e({addons:o.addons,autoOpen:!0,indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange,cache:"cloned"},u),this._deps={indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange};var p=u.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:me,dbReadyPromise:null,cancelOpen:me,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:u.autoOpen};g.dbReadyPromise=new $(function(y){g.dbReadyResolve=y}),g.openCanceller=new $(function(y,E){g.cancelOpen=E}),this._state=g,this.name=s,this.on=Qn(this,"populate","blocked","versionchange","close",{ready:[Do,me]}),this.on.ready.subscribe=ae(this.on.ready.subscribe,function(y){return function(E,b){o.vip(function(){var R=l._state;if(R.openComplete)R.dbOpenError||$.resolve().then(E),b&&y(E);else if(R.onReadyBeingFired)R.onReadyBeingFired.push(E),b&&y(E);else{y(E);var _=l;b||y(function L(){_.on.ready.unsubscribe(E),_.on.ready.unsubscribe(L)})}})}}),this.Collection=zh(this),this.Table=Fh(this),this.Transaction=Jh(this),this.Version=df(this),this.WhereClause=qh(this),this.on("versionchange",function(y){y.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(l.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(l.name,"'. Closing db now to resume the delete request.")),l.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(l.name,"') was blocked")):console.warn("Upgrade '".concat(l.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=rr(u.IDBKeyRange),this._createTransaction=function(y,E,b,R){return new l.Transaction(y,E,b,l._options.chromeTransactionDurability,R)},this._fireOnBlocked=function(y){l.on("blocked").fire(y),mn.filter(function(E){return E.name===l.name&&E!==l&&!E._state.vcFired}).map(function(E){return E.on("versionchange").fire(y)})},this.use(Tf),this.use(Nf),this.use(Cf),this.use(Rf),this.use(Sf);var m=new Proxy(this,{get:function(y,E,b){if(E==="_vip")return!0;if(E==="table")return function(_){return wi(l.table(_),m)};var R=Reflect.get(y,E,b);return R instanceof Qa?wi(R,m):E==="tables"?R.map(function(_){return wi(_,m)}):E==="_createTransaction"?function(){var _=R.apply(this,arguments);return wi(_,m)}:R}});this.vip=m,p.forEach(function(y){return y(l)})}return o.prototype.version=function(s){if(isNaN(s)||s<.1)throw new J.Type("Given version is not a positive number");if(s=Math.round(s*10)/10,this.idbdb||this._state.isBeingOpened)throw new J.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var u=this._versions,l=u.filter(function(h){return h._cfg.version===s})[0];return l||(l=new this.Version(s),u.push(l),u.sort(rf),l.stores({}),this._state.autoSchema=!1,l)},o.prototype._whenReady=function(s){var u=this;return this.idbdb&&(this._state.openComplete||K.letThrough||this._vip)?s():new $(function(l,h){if(u._state.openComplete)return h(new J.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen){h(new J.DatabaseClosed);return}u.open().catch(me)}u._state.dbReadyPromise.then(l,h)}).then(s)},o.prototype.use=function(s){var u=s.stack,l=s.create,h=s.level,p=s.name;p&&this.unuse({stack:u,name:p});var g=this._middlewares[u]||(this._middlewares[u]=[]);return g.push({stack:u,create:l,level:h??10,name:p}),g.sort(function(m,y){return m.level-y.level}),this},o.prototype.unuse=function(s){var u=s.stack,l=s.name,h=s.create;return u&&this._middlewares[u]&&(this._middlewares[u]=this._middlewares[u].filter(function(p){return h?p.create!==h:l?p.name!==l:!1})),this},o.prototype.open=function(){var s=this;return Ht(vt,function(){return yf(s)})},o.prototype._close=function(){var s=this._state,u=mn.indexOf(this);if(u>=0&&mn.splice(u,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new $(function(l){s.dbReadyResolve=l}),s.openCanceller=new $(function(l,h){s.cancelOpen=h}))},o.prototype.close=function(s){var u=s===void 0?{disableAutoOpen:!0}:s,l=u.disableAutoOpen,h=this._state;l?(h.isBeingOpened&&h.cancelOpen(new J.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new J.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},o.prototype.delete=function(s){var u=this;s===void 0&&(s={disableAutoOpen:!0});var l=arguments.length>0&&typeof arguments[0]!="object",h=this._state;return new $(function(p,g){var m=function(){u.close(s);var y=u._deps.indexedDB.deleteDatabase(u.name);y.onsuccess=ye(function(){mf(u._deps,u.name),p()}),y.onerror=Qe(g),y.onblocked=u._fireOnBlocked};if(l)throw new J.InvalidArgument("Invalid closeOptions argument to db.delete()");h.isBeingOpened?h.dbReadyPromise.then(m):m()})},o.prototype.backendDB=function(){return this.idbdb},o.prototype.isOpen=function(){return this.idbdb!==null},o.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},o.prototype.hasFailed=function(){return this._state.dbOpenError!==null},o.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(o.prototype,"tables",{get:function(){var s=this;return a(this._allTables).map(function(u){return s._allTables[u]})},enumerable:!1,configurable:!0}),o.prototype.transaction=function(){var s=wf.apply(this,arguments);return this._transaction.apply(this,s)},o.prototype._transaction=function(s,u,l){var h=this,p=K.trans;(!p||p.db!==this||s.indexOf("!")!==-1)&&(p=null);var g=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");var m,y;try{if(y=u.map(function(b){var R=b instanceof h.Table?b.name:b;if(typeof R!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return R}),s=="r"||s===Ho)m=Ho;else if(s=="rw"||s==Go)m=Go;else throw new J.InvalidArgument("Invalid transaction mode: "+s);if(p){if(p.mode===Ho&&m===Go)if(g)p=null;else throw new J.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");p&&y.forEach(function(b){if(p&&p.storeNames.indexOf(b)===-1)if(g)p=null;else throw new J.SubTransaction("Table "+b+" not included in parent transaction.")}),g&&p&&!p.active&&(p=null)}}catch(b){return p?p._promise(null,function(R,_){_(b)}):Se(b)}var E=hu.bind(null,this,m,y,p,l);return p?p._promise(m,E,"lock"):K.trans?Ht(K.transless,function(){return h._whenReady(E)}):this._whenReady(E)},o.prototype.table=function(s){if(!w(this._allTables,s))throw new J.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},o}(),Lf=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",jf=function(){function o(s){this._subscribe=s}return o.prototype.subscribe=function(s,u,l){return this._subscribe(!s||typeof s=="function"?{next:s,error:u,complete:l}:s)},o.prototype[Lf]=function(){return this},o}(),Ei;try{Ei={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Ei={indexedDB:null,IDBKeyRange:null}}function yu(o){var s=!1,u,l=new jf(function(h){var p=_o(o);function g(P){var O=dn();try{p&&gn();var D=yt(o,P);return p&&(D=D.finally(wt)),D}finally{O&&pn()}}var m=!1,y,E={},b={},R={get closed(){return m},unsubscribe:function(){m||(m=!0,y&&y.abort(),_&&St.storagemutated.unsubscribe(T))}};h.start&&h.start(R);var _=!1,L=function(){return Bo(x)};function S(){return ss(b,E)}var T=function(P){mi(E,P),S()&&L()},x=function(){if(!(m||!Ei.indexedDB)){E={};var P={};y&&y.abort(),y=new AbortController;var O={subscr:P,signal:y.signal,requery:L,querier:o,trans:null},D=g(O);Promise.resolve(D).then(function(k){s=!0,u=k,!(m||O.signal.aborted)&&(E={},b=P,!dh(b)&&!_&&(St(nr,T),_=!0),Bo(function(){return!m&&h.next&&h.next(k)}))},function(k){s=!1,["DatabaseClosedError","AbortError"].includes(k?.name)||m||Bo(function(){m||h.error&&h.error(k)})})}};return setTimeout(L,0),R});return l.hasValue=function(){return s},l.getValue=function(){return u},l}var Wt=lt;C(Wt,e(e({},Jr),{delete:function(o){var s=new Wt(o,{addons:[]});return s.delete()},exists:function(o){return new Wt(o,{addons:[]}).open().then(function(s){return s.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(o){try{return pf(Wt.dependencies).then(o)}catch{return Se(new J.MissingAPI)}},defineClass:function(){function o(s){f(this,s)}return o},ignoreTransaction:function(o){return K.trans?Ht(K.transless,o):o()},vip:rs,async:function(o){return function(){try{var s=ls(o.apply(this,arguments));return!s||typeof s.then!="function"?$.resolve(s):s}catch(u){return Se(u)}}},spawn:function(o,s,u){try{var l=ls(o.apply(u,s||[]));return!l||typeof l.then!="function"?$.resolve(l):l}catch(h){return Se(h)}},currentTransaction:{get:function(){return K.trans||null}},waitFor:function(o,s){var u=$.resolve(typeof o=="function"?Wt.ignoreTransaction(o):o).timeout(s||6e4);return K.trans?K.trans.waitFor(u):u},Promise:$,debug:{get:function(){return Ye},set:function(o){ja(o)}},derive:M,extend:f,props:C,override:ae,Events:Qn,on:St,liveQuery:yu,extendObservabilitySet:mi,getByKeyPath:be,setByKeyPath:ge,delByKeyPath:Je,shallowClone:ke,deepClone:jt,getObjectDiff:hs,cmp:ue,asap:ne,minKey:zo,addons:[],connections:mn,errnames:Oo,dependencies:Ei,cache:Kt,semVer:Ka,version:Ka.split(".").map(function(o){return parseInt(o)}).reduce(function(o,s,u){return o+s/Math.pow(10,u*2)})})),Wt.maxKey=rr(Wt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(St(nr,function(o){if(!bt){var s;s=new CustomEvent(qo,{detail:o}),bt=!0,dispatchEvent(s),bt=!1}}),addEventListener(qo,function(o){var s=o.detail;bt||ps(s)}));function ps(o){var s=bt;try{bt=!0,St.storagemutated.fire(o),cs(o,!0)}finally{bt=s}}var bt=!1,Tt,gs=function(){};typeof BroadcastChannel<"u"&&(gs=function(){Tt=new BroadcastChannel(qo),Tt.onmessage=function(o){return o.data&&ps(o.data)}},gs(),typeof Tt.unref=="function"&&Tt.unref(),St(nr,function(o){bt||Tt.postMessage(o)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(o){if(!lt.disableBfCache&&o.persisted){Ye&&console.debug("Dexie: handling persisted pagehide"),Tt?.close();for(var s=0,u=mn;s<u.length;s++){var l=u[s];l.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(o){!lt.disableBfCache&&o.persisted&&(Ye&&console.debug("Dexie: handling persisted pageshow"),gs(),ps({all:new Oe(-1/0,[[]])}))}));function Uf(o){return new er({add:o})}function Ff(o){return new er({remove:o})}function Bf(o,s){return new er({replacePrefix:[o,s]})}$.rejectionMapper=wh,ja(Ye);var $f=Object.freeze({__proto__:null,Dexie:lt,liveQuery:yu,Entity:Xa,cmp:ue,PropModification:er,replacePrefix:Bf,add:Uf,remove:Ff,default:lt,RangeSet:Oe,mergeRanges:sr,rangesOverlap:au});return e(lt,$f,{default:lt}),lt})});var Tn=new le(""),Us=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i,a){return this._findPluginFor(r).addEventListener(e,r,i,a)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(a=>a.supports(e)),!r)throw new fe(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||t)(te(Tn),te(At))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})(),Yt=class{_doc;constructor(n){this._doc=n}manager},Ai="ng-app-id";function mc(t){for(let n of t)n.remove()}function vc(t,n){let e=n.createElement("style");return e.textContent=t,e}function Kf(t,n,e,r){let i=t.head?.querySelectorAll(`style[${Ai}="${n}"],link[${Ai}="${n}"]`);if(i)for(let a of i)a.removeAttribute(Ai),a instanceof HTMLLinkElement?r.set(a.href.slice(a.href.lastIndexOf("/")+1),{usage:0,elements:[a]}):a.textContent&&e.set(a.textContent,{usage:0,elements:[a]})}function Ls(t,n){let e=n.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e}var Fs=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,i,a={}){this.doc=e,this.appId=r,this.nonce=i,this.isServer=dc(a),Kf(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,vc);r?.forEach(i=>this.addUsage(i,this.external,Ls))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let a=r.get(e);a?a.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(c=>this.addElement(c,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(mc(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])mc(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,vc(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,Ls(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Ai,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||t)(te(_e),te(xs),te(_s,8),te(fr))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})(),Ns={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Bs=/%COMP%/g;var wc="%COMP%",Wf=`_nghost-${wc}`,qf=`_ngcontent-${wc}`,Xf=!0,Jf=new le("",{providedIn:"root",factory:()=>Xf});function Yf(t){return qf.replace(Bs,t)}function Qf(t){return Wf.replace(Bs,t)}function Ec(t,n){return n.map(e=>e.replace(Bs,t))}var $s=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,a,c,f,d,v=null,w=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=f,this.ngZone=d,this.nonce=v,this.tracingService=w,this.platformIsServer=!1,this.defaultRenderer=new yr(e,c,d,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(e,r);return i instanceof Oi?i.applyToHost(e):i instanceof wr&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,a=i.get(r.id);if(!a){let c=this.doc,f=this.ngZone,d=this.eventManager,v=this.sharedStylesHost,w=this.removeStylesOnCompDestroy,C=this.platformIsServer,I=this.tracingService;switch(r.encapsulation){case As.Emulated:a=new Oi(d,v,r,this.appId,w,c,f,C,I);break;case As.ShadowDom:return new js(d,v,e,r,c,f,this.nonce,C,I);default:a=new wr(d,v,r,w,c,f,C,I);break}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||t)(te(Us),te(Fs),te(xs),te(Jf),te(_e),te(fr),te(At),te(_s),te(Xu,8))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})(),yr=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,e,r,i,a){this.eventManager=n,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=a}destroy(){}destroyNode=null;createElement(n,e){return e?this.doc.createElementNS(Ns[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(yc(n)?n.content:n).appendChild(e)}insertBefore(n,e,r){n&&(yc(n)?n.content:n).insertBefore(e,r)}removeChild(n,e){e.remove()}selectRootElement(n,e){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new fe(-5104,!1);return e||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,r,i){if(i){e=i+":"+e;let a=Ns[i];a?n.setAttributeNS(a,e,r):n.setAttribute(e,r)}else n.setAttribute(e,r)}removeAttribute(n,e,r){if(r){let i=Ns[r];i?n.removeAttributeNS(i,e):n.removeAttribute(`${r}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,r,i){i&(dr.DashCase|dr.Important)?n.style.setProperty(e,r,i&dr.Important?"important":""):n.style[e]=r}removeStyle(n,e,r){r&dr.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,r){n!=null&&(n[e]=r)}setValue(n,e){n.nodeValue=e}listen(n,e,r,i){if(typeof n=="string"&&(n=mr().getGlobalEventTarget(this.doc,n),!n))throw new fe(5102,!1);let a=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(a=this.tracingService.wrapEventListener(n,e,a)),this.eventManager.addEventListener(n,e,a,i)}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;n(e)===!1&&e.preventDefault()}}};function yc(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var js=class extends yr{sharedStylesHost;hostEl;shadowRoot;constructor(n,e,r,i,a,c,f,d,v){super(n,a,c,d,v),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let w=i.styles;w=Ec(i.id,w);for(let I of w){let N=document.createElement("style");f&&N.setAttribute("nonce",f),N.textContent=I,this.shadowRoot.appendChild(N)}let C=i.getExternalStyles?.();if(C)for(let I of C){let N=Ls(I,a);f&&N.setAttribute("nonce",f),this.shadowRoot.appendChild(N)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,r){return super.insertBefore(this.nodeOrShadowRoot(n),e,r)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},wr=class extends yr{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,e,r,i,a,c,f,d,v){super(n,a,c,f,d),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let w=r.styles;this.styles=v?Ec(v,w):w,this.styleUrls=r.getExternalStyles?.(v)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Oi=class extends wr{contentAttr;hostAttr;constructor(n,e,r,i,a,c,f,d,v){let w=i+"-"+r.id;super(n,e,r,a,c,f,d,v,w),this.contentAttr=Yf(w),this.hostAttr=Qf(w)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let r=super.createElement(n,e);return super.setAttribute(r,this.contentAttr,""),r}};var Di=class t extends hc{supportsDOMEvents=!0;static makeCurrent(){lc(new t)}onAndCancel(n,e,r,i){return n.addEventListener(e,r,i),()=>{n.removeEventListener(e,r,i)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=ed();return e==null?null:td(e)}resetBaseElement(){Er=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return xi(document.cookie,n)}},Er=null;function ed(){return Er=Er||document.head.querySelector("base"),Er?Er.getAttribute("href"):null}function td(t){return new URL(t,document.baseURI).pathname}var nd=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})(),Sc=(()=>{class t extends Yt{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,a){return e.addEventListener(r,i,a),()=>this.removeEventListener(e,r,i,a)}removeEventListener(e,r,i,a){return e.removeEventListener(r,i,a)}static \u0275fac=function(r){return new(r||t)(te(_e))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})(),Rc=["alt","control","meta","shift"],rd={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},id={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},bc=(()=>{class t extends Yt{constructor(e){super(e)}supports(e){return t.parseEventName(e)!=null}addEventListener(e,r,i,a){let c=t.parseEventName(r),f=t.eventCallback(c.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mr().onAndCancel(e,c.domEventName,f,a))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let a=t._normalizeKey(r.pop()),c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),Rc.forEach(v=>{let w=r.indexOf(v);w>-1&&(r.splice(w,1),c+=v+".")}),c+=a,r.length!=0||a.length===0)return null;let d={};return d.domEventName=i,d.fullKey=c,d}static matchEventFullKeyCode(e,r){let i=rd[e.key]||e.key,a="";return r.indexOf("code.")>-1&&(i=e.code,a="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Rc.forEach(c=>{if(c!==i){let f=id[c];f(e)&&(a+=c+".")}}),a+=i,a===r)}static eventCallback(e,r,i){return a=>{t.matchEventFullKeyCode(a,e)&&i.runGuarded(()=>r(a))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||t)(te(_e))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})();function od(t,n){return cc(G({rootComponent:t},sd(n)))}function sd(t){return{appProviders:[...hd,...t?.providers??[]],platformProviders:ld}}function ad(){Di.makeCurrent()}function ud(){return new Ts}function cd(){return ku(document),document}var ld=[{provide:fr,useValue:fc},{provide:Nu,useValue:ad,multi:!0},{provide:_e,useFactory:cd}];var hd=[{provide:_u,useValue:"root"},{provide:Ts,useFactory:ud},{provide:Tn,useClass:Sc,multi:!0,deps:[_e]},{provide:Tn,useClass:bc,multi:!0,deps:[_e]},$s,Fs,Us,{provide:Gu,useExisting:$s},{provide:_i,useClass:nd},[]];var In=class{},Rr=class{},Ot=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),a=e.slice(r+1).trim();this.addHeaderEntry(i,a)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new t;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(n.name,e);let i=(n.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let a=n.value;if(!a)this.headers.delete(e),this.normalizedNames.delete(e);else{let c=this.headers.get(e);if(!c)return;c=c.filter(f=>a.indexOf(f)===-1),c.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}break}}addHeaderEntry(n,e){let r=n.toLowerCase();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(n,e){let r=(Array.isArray(e)?e:[e]).map(a=>a.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var Mi=class{encodeKey(n){return Tc(n)}encodeValue(n){return Tc(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function fd(t,n){let e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let a=i.indexOf("="),[c,f]=a==-1?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,a)),n.decodeValue(i.slice(a+1))],d=e.get(c)||[];d.push(f),e.set(c,d)}),e}var dd=/%(\d[a-f0-9])/gi,pd={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Tc(t){return encodeURIComponent(t).replace(dd,(n,e)=>pd[e]??n)}function Pi(t){return`${t}`}var pt=class t{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new Mi,n.fromString){if(n.fromObject)throw new fe(2805,!1);this.map=fd(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let r=n.fromObject[e],i=Array.isArray(r)?r.map(Pi):[Pi(r)];this.map.set(e,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(r=>{let i=n[r];Array.isArray(i)?i.forEach(a=>{e.push({param:r,value:a,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new t({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(Pi(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let r=this.map.get(n.param)||[],i=r.indexOf(Pi(n.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var ki=class{map=new Map;set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function gd(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Cc(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Ic(t){return typeof Blob<"u"&&t instanceof Blob}function xc(t){return typeof FormData<"u"&&t instanceof FormData}function md(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var _c="Content-Type",Ac="Accept",Oc="X-Request-URL",Dc="text/plain",Pc="application/json",vd=`${Pc}, ${Dc}, */*`,Cn=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(n,e,r,i){this.url=e,this.method=n.toUpperCase();let a;if(gd(this.method)||i?(this.body=r!==void 0?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,this.keepalive=!!a.keepalive,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params),this.transferCache=a.transferCache),this.headers??=new Ot,this.context??=new ki,!this.params)this.params=new pt,this.urlWithParams=e;else{let c=this.params.toString();if(c.length===0)this.urlWithParams=e;else{let f=e.indexOf("?"),d=f===-1?"?":f<e.length-1?"&":"";this.urlWithParams=e+d+c}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Cc(this.body)||Ic(this.body)||xc(this.body)||md(this.body)?this.body:this.body instanceof pt?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||xc(this.body)?null:Ic(this.body)?this.body.type||null:Cc(this.body)?null:typeof this.body=="string"?Dc:this.body instanceof pt?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Pc:null}clone(n={}){let e=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,a=n.keepalive??this.keepalive,c=n.transferCache??this.transferCache,f=n.body!==void 0?n.body:this.body,d=n.withCredentials??this.withCredentials,v=n.reportProgress??this.reportProgress,w=n.headers||this.headers,C=n.params||this.params,I=n.context??this.context;return n.setHeaders!==void 0&&(w=Object.keys(n.setHeaders).reduce((N,M)=>N.set(M,n.setHeaders[M]),w)),n.setParams&&(C=Object.keys(n.setParams).reduce((N,M)=>N.set(M,n.setParams[M]),C)),new t(e,r,f,{params:C,headers:w,context:I,reportProgress:v,responseType:i,withCredentials:d,transferCache:c,keepalive:a})}},Qt=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Qt||{}),xn=class{headers;status;statusText;url;ok;type;constructor(n,e=200,r="OK"){this.headers=n.headers||new Ot,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},Ni=class t extends xn{constructor(n={}){super(n)}type=Qt.ResponseHeader;clone(n={}){return new t({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Sr=class t extends xn{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=Qt.Response;clone(n={}){return new t({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},br=class extends xn{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},yd=200,wd=204;function zs(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache,keepalive:t.keepalive}}var Mc=(()=>{class t{handler;constructor(e){this.handler=e}request(e,r,i={}){let a;if(e instanceof Cn)a=e;else{let d;i.headers instanceof Ot?d=i.headers:d=new Ot(i.headers);let v;i.params&&(i.params instanceof pt?v=i.params:v=new pt({fromObject:i.params})),a=new Cn(e,r,i.body!==void 0?i.body:null,{headers:d,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive})}let c=ee(a).pipe(It(d=>this.handler.handle(d)));if(e instanceof Cn||i.observe==="events")return c;let f=c.pipe(tt(d=>d instanceof Sr));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe(he(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new fe(2806,!1);return d.body}));case"blob":return f.pipe(he(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new fe(2807,!1);return d.body}));case"text":return f.pipe(he(d=>{if(d.body!==null&&typeof d.body!="string")throw new fe(2808,!1);return d.body}));case"json":default:return f.pipe(he(d=>d.body))}case"response":return f;default:throw new fe(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new pt().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,zs(i,r))}post(e,r,i={}){return this.request("POST",e,zs(i,r))}put(e,r,i={}){return this.request("PUT",e,zs(i,r))}static \u0275fac=function(r){return new(r||t)(te(In))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})();var Ed=new le("");function Rd(t,n){return n(t)}function Sd(t,n,e){return(r,i)=>Ve(e,()=>n(r,a=>t(a,i)))}var kc=new le(""),Nc=new le(""),Lc=new le("",{providedIn:"root",factory:()=>!0});var Li=(()=>{class t extends In{backend;injector;chain=null;pendingTasks=V(Du);contributeToStability=V(Lc);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(kc),...this.injector.get(Nc,[])]));this.chain=r.reduceRight((i,a)=>Sd(i,a,this.injector),Rd)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(En(r))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(te(Rr),te(_t))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})();var bd=/^\)\]\}',?\n/,Td=RegExp(`^${Oc}:`,"m");function Cd(t){return"responseURL"in t&&t.responseURL?t.responseURL:Td.test(t.getAllResponseHeaders())?t.getResponseHeader(Oc):null}var Hs=(()=>{class t{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new fe(-2800,!1);e.keepalive;let r=this.xhrFactory;return(r.\u0275loadImpl?Pe(r.\u0275loadImpl()):ee(null)).pipe(Ue(()=>new Si(a=>{let c=r.build();if(c.open(e.method,e.urlWithParams),e.withCredentials&&(c.withCredentials=!0),e.headers.forEach((j,U)=>c.setRequestHeader(j,U.join(","))),e.headers.has(Ac)||c.setRequestHeader(Ac,vd),!e.headers.has(_c)){let j=e.detectContentTypeHeader();j!==null&&c.setRequestHeader(_c,j)}if(e.responseType){let j=e.responseType.toLowerCase();c.responseType=j!=="json"?j:"text"}let f=e.serializeBody(),d=null,v=()=>{if(d!==null)return d;let j=c.statusText||"OK",U=new Ot(c.getAllResponseHeaders()),q=Cd(c)||e.url;return d=new Ni({headers:U,status:c.status,statusText:j,url:q}),d},w=()=>{let{headers:j,status:U,statusText:q,url:Z}=v(),ae=null;U!==wd&&(ae=typeof c.response>"u"?c.responseText:c.response),U===0&&(U=ae?yd:0);let de=U>=200&&U<300;if(e.responseType==="json"&&typeof ae=="string"){let ne=ae;ae=ae.replace(bd,"");try{ae=ae!==""?JSON.parse(ae):null}catch(ve){ae=ne,de&&(de=!1,ae={error:ve,text:ae})}}de?(a.next(new Sr({body:ae,headers:j,status:U,statusText:q,url:Z||void 0})),a.complete()):a.error(new br({error:ae,headers:j,status:U,statusText:q,url:Z||void 0}))},C=j=>{let{url:U}=v(),q=new br({error:j,status:c.status||0,statusText:c.statusText||"Unknown Error",url:U||void 0});a.error(q)},I=!1,N=j=>{I||(a.next(v()),I=!0);let U={type:Qt.DownloadProgress,loaded:j.loaded};j.lengthComputable&&(U.total=j.total),e.responseType==="text"&&c.responseText&&(U.partialText=c.responseText),a.next(U)},M=j=>{let U={type:Qt.UploadProgress,loaded:j.loaded};j.lengthComputable&&(U.total=j.total),a.next(U)};return c.addEventListener("load",w),c.addEventListener("error",C),c.addEventListener("timeout",C),c.addEventListener("abort",C),e.reportProgress&&(c.addEventListener("progress",N),f!==null&&c.upload&&c.upload.addEventListener("progress",M)),c.send(f),a.next({type:Qt.Sent}),()=>{c.removeEventListener("error",C),c.removeEventListener("abort",C),c.removeEventListener("load",w),c.removeEventListener("timeout",C),e.reportProgress&&(c.removeEventListener("progress",N),f!==null&&c.upload&&c.upload.removeEventListener("progress",M)),c.readyState!==c.DONE&&c.abort()}})))}static \u0275fac=function(r){return new(r||t)(te(_i))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})(),jc=new le(""),Id="XSRF-TOKEN",xd=new le("",{providedIn:"root",factory:()=>Id}),_d="X-XSRF-TOKEN",Ad=new le("",{providedIn:"root",factory:()=>_d}),Tr=class{},Od=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r){this.doc=e,this.cookieName=r}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=xi(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||t)(te(_e),te(xd))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})();function Dd(t,n){let e=t.url.toLowerCase();if(!V(jc)||t.method==="GET"||t.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(t);let r=V(Tr).getToken(),i=V(Ad);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),n(t)}function Pd(...t){let n=[Mc,Hs,Li,{provide:In,useExisting:Li},{provide:Rr,useFactory:()=>V(Ed,{optional:!0})??V(Hs)},{provide:kc,useValue:Dd,multi:!0},{provide:jc,useValue:!0},{provide:Tr,useClass:Od}];for(let e of t)n.push(...e.\u0275providers);return lr(n)}var Uc=(()=>{class t{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||t)(te(_e))};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var kd={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},Gs=new le(""),Fc=new le(""),Nd=(()=>{class t{events=[];overrides={};options;buildHammer(e){let r=new Hammer(e,this.options);r.get("pinch").set({enable:!0}),r.get("rotate").set({enable:!0});for(let i in this.overrides)r.get(i).set(this.overrides[i]);return r}static \u0275fac=function(r){return new(r||t)};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})(),Ld=(()=>{class t extends Yt{_config;_injector;loader;_loaderPromise=null;constructor(e,r,i,a){super(e),this._config=r,this._injector=i,this.loader=a}supports(e){return!(!kd.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader)}addEventListener(e,r,i){let a=this.manager.getZone();if(r=r.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||a.runOutsideAngular(()=>this.loader());let c=!1,f=()=>{c=!0};return a.runOutsideAngular(()=>this._loaderPromise.then(()=>{if(!window.Hammer){f=()=>{};return}c||(f=this.addEventListener(e,r,i))}).catch(()=>{f=()=>{}})),()=>{f()}}return a.runOutsideAngular(()=>{let c=this._config.buildHammer(e),f=function(d){a.runGuarded(function(){i(d)})};return c.on(r,f),()=>{c.off(r,f),typeof c.destroy=="function"&&c.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}static \u0275fac=function(r){return new(r||t)(te(_e),te(Gs),te(Rn),te(Fc,8))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})(),hv=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=pr({type:t});static \u0275inj=cr({providers:[{provide:Tn,useClass:Ld,multi:!0,deps:[_e,Gs,Rn,[new Pu,Fc]]},{provide:Gs,useClass:Nd}]})}return t})(),jd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=re({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=te(Ud),i},providedIn:"root"})}return t})(),Ud=(()=>{class t extends jd{_doc;constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case Xt.NONE:return r;case Xt.HTML:return bn(r,"HTML")?Sn(r):zu(this._doc,String(r)).toString();case Xt.STYLE:return bn(r,"Style")?Sn(r):r;case Xt.SCRIPT:if(bn(r,"Script"))return Sn(r);throw new fe(5200,!1);case Xt.URL:return bn(r,"URL")?Sn(r):$u(String(r));case Xt.RESOURCE_URL:if(bn(r,"ResourceURL"))return Sn(r);throw new fe(5201,!1);default:throw new fe(5202,!1)}}bypassSecurityTrustHtml(e){return Lu(e)}bypassSecurityTrustStyle(e){return ju(e)}bypassSecurityTrustScript(e){return Uu(e)}bypassSecurityTrustUrl(e){return Fu(e)}bypassSecurityTrustResourceUrl(e){return Bu(e)}static \u0275fac=function(r){return new(r||t)(te(_e))};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ie="primary",jr=Symbol("RouteTitle"),Xs=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function tn(t){return new Xs(t)}function Wc(t,n,e){let r=e.path.split("/");if(r.length>t.length||e.pathMatch==="full"&&(n.hasChildren()||r.length<t.length))return null;let i={};for(let a=0;a<r.length;a++){let c=r[a],f=t[a];if(c[0]===":")i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Bd(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!nt(t[e],n[e]))return!1;return!0}function nt(t,n){let e=t?Js(t):void 0,r=n?Js(n):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let a=0;a<e.length;a++)if(i=e[a],!qc(t[i],n[i]))return!1;return!0}function Js(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function qc(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let e=[...t].sort(),r=[...n].sort();return e.every((i,a)=>r[a]===i)}else return t===n}function Xc(t){return t.length>0?t[t.length-1]:null}function mt(t){return Ru(t)?t:Ju(t)?Pe(Promise.resolve(t)):ee(t)}var $d={exact:Yc,subset:Qc},Jc={exact:zd,subset:Hd,ignored:()=>!0};function Bc(t,n,e){return $d[e.paths](t.root,n.root,e.matrixParams)&&Jc[e.queryParams](t.queryParams,n.queryParams)&&!(e.fragment==="exact"&&t.fragment!==n.fragment)}function zd(t,n){return nt(t,n)}function Yc(t,n,e){if(!Zt(t.segments,n.segments)||!Fi(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!t.children[r]||!Yc(t.children[r],n.children[r],e))return!1;return!0}function Hd(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>qc(t[e],n[e]))}function Qc(t,n,e){return Zc(t,n,n.segments,e)}function Zc(t,n,e,r){if(t.segments.length>e.length){let i=t.segments.slice(0,e.length);return!(!Zt(i,e)||n.hasChildren()||!Fi(i,e,r))}else if(t.segments.length===e.length){if(!Zt(t.segments,e)||!Fi(t.segments,e,r))return!1;for(let i in n.children)if(!t.children[i]||!Qc(t.children[i],n.children[i],r))return!1;return!0}else{let i=e.slice(0,t.segments.length),a=e.slice(t.segments.length);return!Zt(t.segments,i)||!Fi(t.segments,i,r)||!t.children[ie]?!1:Zc(t.children[ie],n,a,r)}}function Fi(t,n,e){return n.every((r,i)=>Jc[e](t[i].parameters,r.parameters))}var it=class{root;queryParams;fragment;_queryParamMap;constructor(n=new pe([],{}),e={},r=null){this.root=n,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=tn(this.queryParams),this._queryParamMap}toString(){return Kd.serialize(this)}},pe=class{segments;children;parent=null;constructor(n,e){this.segments=n,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bi(this)}},Dt=class{path;parameters;_parameterMap;constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=tn(this.parameters),this._parameterMap}toString(){return tl(this)}};function Gd(t,n){return Zt(t,n)&&t.every((e,r)=>nt(e.parameters,n[r].parameters))}function Zt(t,n){return t.length!==n.length?!1:t.every((e,r)=>e.path===n[r].path)}function Vd(t,n){let e=[];return Object.entries(t.children).forEach(([r,i])=>{r===ie&&(e=e.concat(n(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ie&&(e=e.concat(n(i,r)))}),e}var Fn=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=re({token:t,factory:()=>new nn,providedIn:"root"})}return t})(),nn=class{parse(n){let e=new Qs(n);return new it(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${Cr(n.root,!0)}`,r=Xd(n.queryParams),i=typeof n.fragment=="string"?`#${Wd(n.fragment)}`:"";return`${e}${r}${i}`}},Kd=new nn;function Bi(t){return t.segments.map(n=>tl(n)).join("/")}function Cr(t,n){if(!t.hasChildren())return Bi(t);if(n){let e=t.children[ie]?Cr(t.children[ie],!1):"",r=[];return Object.entries(t.children).forEach(([i,a])=>{i!==ie&&r.push(`${i}:${Cr(a,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=Vd(t,(r,i)=>i===ie?[Cr(t.children[ie],!1)]:[`${i}:${Cr(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ie]!=null?`${Bi(t)}/${e[0]}`:`${Bi(t)}/(${e.join("//")})`}}function el(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ji(t){return el(t).replace(/%3B/gi,";")}function Wd(t){return encodeURI(t)}function Ys(t){return el(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $i(t){return decodeURIComponent(t)}function $c(t){return $i(t.replace(/\+/g,"%20"))}function tl(t){return`${Ys(t.path)}${qd(t.parameters)}`}function qd(t){return Object.entries(t).map(([n,e])=>`;${Ys(n)}=${Ys(e)}`).join("")}function Xd(t){let n=Object.entries(t).map(([e,r])=>Array.isArray(r)?r.map(i=>`${ji(e)}=${ji(i)}`).join("&"):`${ji(e)}=${ji(r)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var Jd=/^[^\/()?;#]+/;function Vs(t){let n=t.match(Jd);return n?n[0]:""}var Yd=/^[^\/()?;=#]+/;function Qd(t){let n=t.match(Yd);return n?n[0]:""}var Zd=/^[^=?&#]+/;function ep(t){let n=t.match(Zd);return n?n[0]:""}var tp=/^[^&#]+/;function np(t){let n=t.match(tp);return n?n[0]:""}var Qs=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(r[ie]=new pe(n,e)),r}parseSegment(){let n=Vs(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new fe(4009,!1);return this.capture(n),new Dt($i(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=Qd(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=Vs(this.remaining);i&&(r=i,this.capture(r))}n[$i(e)]=$i(r)}parseQueryParam(n){let e=ep(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let c=np(this.remaining);c&&(r=c,this.capture(r))}let i=$c(e),a=$c(r);if(n.hasOwnProperty(i)){let c=n[i];Array.isArray(c)||(c=[c],n[i]=c),c.push(a)}else n[i]=a}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Vs(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new fe(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):n&&(a=ie);let c=this.parseChildren();e[a]=Object.keys(c).length===1?c[ie]:new pe([],c),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new fe(4011,!1)}};function nl(t){return t.segments.length>0?new pe([],{[ie]:t}):t}function rl(t){let n={};for(let[r,i]of Object.entries(t.children)){let a=rl(i);if(r===ie&&a.segments.length===0&&a.hasChildren())for(let[c,f]of Object.entries(a.children))n[c]=f;else(a.segments.length>0||a.hasChildren())&&(n[r]=a)}let e=new pe(t.segments,n);return rp(e)}function rp(t){if(t.numberOfChildren===1&&t.children[ie]){let n=t.children[ie];return new pe(t.segments.concat(n.segments),n.children)}return t}function Pt(t){return t instanceof it}function il(t,n,e=null,r=null){let i=ol(t);return sl(i,n,e,r)}function ol(t){let n;function e(a){let c={};for(let d of a.children){let v=e(d);c[d.outlet]=v}let f=new pe(a.url,c);return a===t&&(n=f),f}let r=e(t.root),i=nl(r);return n??i}function sl(t,n,e,r){let i=t;for(;i.parent;)i=i.parent;if(n.length===0)return Ks(i,i,i,e,r);let a=ip(n);if(a.toRoot())return Ks(i,i,new pe([],{}),e,r);let c=op(a,i,t),f=c.processChildren?xr(c.segmentGroup,c.index,a.commands):ul(c.segmentGroup,c.index,a.commands);return Ks(i,c.segmentGroup,f,e,r)}function zi(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ar(t){return typeof t=="object"&&t!=null&&t.outlets}function Ks(t,n,e,r,i){let a={};r&&Object.entries(r).forEach(([d,v])=>{a[d]=Array.isArray(v)?v.map(w=>`${w}`):`${v}`});let c;t===n?c=e:c=al(t,n,e);let f=nl(rl(c));return new it(f,a,i)}function al(t,n,e){let r={};return Object.entries(t.children).forEach(([i,a])=>{a===n?r[i]=e:r[i]=al(a,n,e)}),new pe(t.segments,r)}var Hi=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,e,r){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&zi(r[0]))throw new fe(4003,!1);let i=r.find(Ar);if(i&&i!==Xc(r))throw new fe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ip(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Hi(!0,0,t);let n=0,e=!1,r=t.reduce((i,a,c)=>{if(typeof a=="object"&&a!=null){if(a.outlets){let f={};return Object.entries(a.outlets).forEach(([d,v])=>{f[d]=typeof v=="string"?v.split("/"):v}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return typeof a!="string"?[...i,a]:c===0?(a.split("/").forEach((f,d)=>{d==0&&f==="."||(d==0&&f===""?e=!0:f===".."?n++:f!=""&&i.push(f))}),i):[...i,a]},[]);return new Hi(e,n,r)}var On=class{segmentGroup;processChildren;index;constructor(n,e,r){this.segmentGroup=n,this.processChildren=e,this.index=r}};function op(t,n,e){if(t.isAbsolute)return new On(n,!0,0);if(!e)return new On(n,!1,NaN);if(e.parent===null)return new On(e,!0,0);let r=zi(t.commands[0])?0:1,i=e.segments.length-1+r;return sp(e,i,t.numberOfDoubleDots)}function sp(t,n,e){let r=t,i=n,a=e;for(;a>i;){if(a-=i,r=r.parent,!r)throw new fe(4005,!1);i=r.segments.length}return new On(r,!1,i-a)}function ap(t){return Ar(t[0])?t[0].outlets:{[ie]:t}}function ul(t,n,e){if(t??=new pe([],{}),t.segments.length===0&&t.hasChildren())return xr(t,n,e);let r=up(t,n,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let a=new pe(t.segments.slice(0,r.pathIndex),{});return a.children[ie]=new pe(t.segments.slice(r.pathIndex),t.children),xr(a,0,i)}else return r.match&&i.length===0?new pe(t.segments,{}):r.match&&!t.hasChildren()?Zs(t,n,e):r.match?xr(t,0,i):Zs(t,n,e)}function xr(t,n,e){if(e.length===0)return new pe(t.segments,{});{let r=ap(e),i={};if(Object.keys(r).some(a=>a!==ie)&&t.children[ie]&&t.numberOfChildren===1&&t.children[ie].segments.length===0){let a=xr(t.children[ie],n,e);return new pe(t.segments,a.children)}return Object.entries(r).forEach(([a,c])=>{typeof c=="string"&&(c=[c]),c!==null&&(i[a]=ul(t.children[a],n,c))}),Object.entries(t.children).forEach(([a,c])=>{r[a]===void 0&&(i[a]=c)}),new pe(t.segments,i)}}function up(t,n,e){let r=0,i=n,a={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=e.length)return a;let c=t.segments[i],f=e[r];if(Ar(f))break;let d=`${f}`,v=r<e.length-1?e[r+1]:null;if(i>0&&d===void 0)break;if(d&&v&&typeof v=="object"&&v.outlets===void 0){if(!Hc(d,v,c))return a;r+=2}else{if(!Hc(d,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Zs(t,n,e){let r=t.segments.slice(0,n),i=0;for(;i<e.length;){let a=e[i];if(Ar(a)){let d=cp(a.outlets);return new pe(r,d)}if(i===0&&zi(e[0])){let d=t.segments[n];r.push(new Dt(d.path,zc(e[0]))),i++;continue}let c=Ar(a)?a.outlets[ie]:`${a}`,f=i<e.length-1?e[i+1]:null;c&&f&&zi(f)?(r.push(new Dt(c,zc(f))),i+=2):(r.push(new Dt(c,{})),i++)}return new pe(r,{})}function cp(t){let n={};return Object.entries(t).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[e]=Zs(new pe([],{}),0,r))}),n}function zc(t){let n={};return Object.entries(t).forEach(([e,r])=>n[e]=`${r}`),n}function Hc(t,n,e){return t==e.path&&nt(n,e.parameters)}var Dn="imperative",Te=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Te||{}),Be=class{id;url;constructor(n,e){this.id=n,this.url=e}},Mt=class extends Be{type=Te.NavigationStart;navigationTrigger;restoredState;constructor(n,e,r="imperative",i=null){super(n,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},He=class extends Be{urlAfterRedirects;type=Te.NavigationEnd;constructor(n,e,r){super(n,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Me=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(Me||{}),Mn=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Mn||{}),rt=class extends Be{reason;code;type=Te.NavigationCancel;constructor(n,e,r,i){super(n,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ot=class extends Be{reason;code;type=Te.NavigationSkipped;constructor(n,e,r,i){super(n,e),this.reason=r,this.code=i}},kn=class extends Be{error;target;type=Te.NavigationError;constructor(n,e,r,i){super(n,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Or=class extends Be{urlAfterRedirects;state;type=Te.RoutesRecognized;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gi=class extends Be{urlAfterRedirects;state;type=Te.GuardsCheckStart;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vi=class extends Be{urlAfterRedirects;state;shouldActivate;type=Te.GuardsCheckEnd;constructor(n,e,r,i,a){super(n,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ki=class extends Be{urlAfterRedirects;state;type=Te.ResolveStart;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wi=class extends Be{urlAfterRedirects;state;type=Te.ResolveEnd;constructor(n,e,r,i){super(n,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qi=class{route;type=Te.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Xi=class{route;type=Te.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ji=class{snapshot;type=Te.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yi=class{snapshot;type=Te.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qi=class{snapshot;type=Te.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zi=class{snapshot;type=Te.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nn=class{routerEvent;position;anchor;type=Te.Scroll;constructor(n,e,r){this.routerEvent=n,this.position=e,this.anchor=r}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},Dr=class{},Ln=class{url;navigationBehaviorOptions;constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function lp(t){return!(t instanceof Dr)&&!(t instanceof Ln)}function hp(t,n){return t.providers&&!t._injector&&(t._injector=Ds(t.providers,n,`Route: ${t.path}`)),t._injector??n}function We(t){return t.outlet||ie}function fp(t,n){let e=t.filter(r=>We(r)===n);return e.push(...t.filter(r=>We(r)!==n)),e}function Ur(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var eo=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ur(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Bn(this.rootInjector)}},Bn=(()=>{class t{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new eo(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||t)(te(_t))};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),to=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=ea(n,this._root);return e?e.children.map(r=>r.value):[]}firstChild(n){let e=ea(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=ta(n,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return ta(n,this._root).map(e=>e.value)}};function ea(t,n){if(t===n.value)return n;for(let e of n.children){let r=ea(t,e);if(r)return r}return null}function ta(t,n){if(t===n.value)return[n];for(let e of n.children){let r=ta(t,e);if(r.length)return r.unshift(n),r}return[]}var Fe=class{value;children;constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function An(t){let n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}var Pr=class extends to{snapshot;constructor(n,e){super(n),this.snapshot=e,ca(this,n)}toString(){return this.snapshot.toString()}};function cl(t){let n=dp(t),e=new ze([new Dt("",{})]),r=new ze({}),i=new ze({}),a=new ze({}),c=new ze(""),f=new gt(e,r,a,c,i,ie,t,n.root);return f.snapshot=n.root,new Pr(new Fe(f,[]),n)}function dp(t){let n={},e={},r={},i="",a=new en([],n,r,i,e,ie,t,null,{});return new Mr("",new Fe(a,[]))}var gt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,e,r,i,a,c,f,d){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=c,this.component=f,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(he(v=>v[jr]))??ee(void 0),this.url=n,this.params=e,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(he(n=>tn(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(he(n=>tn(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function no(t,n,e="emptyOnly"){let r,{routeConfig:i}=t;return n!==null&&(e==="always"||i?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:G(G({},n.params),t.params),data:G(G({},n.data),t.data),resolve:G(G(G(G({},t.data),n.data),i?.data),t._resolvedData)}:r={params:G({},t.params),data:G({},t.data),resolve:G(G({},t.data),t._resolvedData??{})},i&&hl(i)&&(r.resolve[jr]=i.title),r}var en=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[jr]}constructor(n,e,r,i,a,c,f,d,v){this.url=n,this.params=e,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.routeConfig=d,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=tn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=tn(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},Mr=class extends to{url;constructor(n,e){super(e),this.url=n,ca(this,e)}toString(){return ll(this._root)}};function ca(t,n){n.value._routerState=t,n.children.forEach(e=>ca(t,e))}function ll(t){let n=t.children.length>0?` { ${t.children.map(ll).join(", ")} } `:"";return`${t.value}${n}`}function Ws(t){if(t.snapshot){let n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,nt(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),nt(n.params,e.params)||t.paramsSubject.next(e.params),Bd(n.url,e.url)||t.urlSubject.next(e.url),nt(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function na(t,n){let e=nt(t.params,n.params)&&Gd(t.url,n.url),r=!t.parent!=!n.parent;return e&&!r&&(!t.parent||na(t.parent,n.parent))}function hl(t){return typeof t.title=="string"||t.title===null}var fl=new le(""),la=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ie;activateEvents=new Jt;deactivateEvents=new Jt;attachEvents=new Jt;detachEvents=new Jt;routerOutletData=ac(void 0);parentContexts=V(Bn);location=V(Ku);changeDetector=V(Ci);inputBinder=V(so,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new fe(4013,!1);this._activatedRoute=e;let i=this.location,c=e.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,d=new ra(e,f,i.injector,this.routerOutletData);this.activated=i.createComponent(c,{index:i.length,injector:d,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=gr({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[hr]})}return t})(),ra=class{route;childContexts;parent;outletData;constructor(n,e,r,i){this.route=n,this.childContexts=e,this.parent=r,this.outletData=i}get(n,e){return n===gt?this.route:n===Bn?this.childContexts:n===fl?this.outletData:this.parent.get(n,e)}},so=new le("");var ha=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=qu({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Zu(0,"router-outlet")},dependencies:[la],encapsulation:2})}return t})();function fa(t){let n=t.children&&t.children.map(fa),e=n?Ie(G({},t),{children:n}):G({},t);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==ie&&(e.component=ha),e}function pp(t,n,e){let r=kr(t,n._root,e?e._root:void 0);return new Pr(r,n)}function kr(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=n.value;let i=gp(t,n,e);return new Fe(r,i)}else{if(t.shouldAttach(n.value)){let a=t.retrieve(n.value);if(a!==null){let c=a.route;return c.value._futureSnapshot=n.value,c.children=n.children.map(f=>kr(t,f)),c}}let r=mp(n.value),i=n.children.map(a=>kr(t,a));return new Fe(r,i)}}function gp(t,n,e){return n.children.map(r=>{for(let i of e.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return kr(t,r,i);return kr(t,r)})}function mp(t){return new gt(new ze(t.url),new ze(t.params),new ze(t.queryParams),new ze(t.fragment),new ze(t.data),t.outlet,t.component,t)}var jn=class{redirectTo;navigationBehaviorOptions;constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},dl="ngNavigationCancelingError";function ro(t,n){let{redirectTo:e,navigationBehaviorOptions:r}=Pt(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=pl(!1,Me.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function pl(t,n){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[dl]=!0,e.cancellationCode=n,e}function vp(t){return gl(t)&&Pt(t.url)}function gl(t){return!!t&&t[dl]}var yp=(t,n,e,r)=>he(i=>(new ia(n,i.targetRouterState,i.currentRouterState,e,r).activate(t),i)),ia=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,e,r,i,a){this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(n){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,n),Ws(this.futureState.root),this.activateChildRoutes(e,r,n)}deactivateChildRoutes(n,e,r){let i=An(e);n.children.forEach(a=>{let c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(n,e,r){let i=n.value,a=e?e.value:null;if(i===a)if(i.component){let c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(n,e,c.children)}else this.deactivateChildRoutes(n,e,r);else a&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let r=e.getContext(n.value.outlet),i=r&&n.value.component?r.children:e,a=An(n);for(let c of Object.values(a))this.deactivateRouteAndItsChildren(c,i);if(r&&r.outlet){let c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:c,route:n,contexts:f})}}deactivateRouteAndOutlet(n,e){let r=e.getContext(n.value.outlet),i=r&&n.value.component?r.children:e,a=An(n);for(let c of Object.values(a))this.deactivateRouteAndItsChildren(c,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,e,r){let i=An(e);n.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Zi(a.value.snapshot))}),n.children.length&&this.forwardEvent(new Yi(n.value.snapshot))}activateRoutes(n,e,r){let i=n.value,a=e?e.value:null;if(Ws(i),i===a)if(i.component){let c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,e,c.children)}else this.activateChildRoutes(n,e,r);else if(i.component){let c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),Ws(f.route.value),this.activateChildRoutes(n,null,c.children)}else c.attachRef=null,c.route=i,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(n,null,c.children)}else this.activateChildRoutes(n,null,r)}},io=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},Pn=class{component;route;constructor(n,e){this.component=n,this.route=e}};function wp(t,n,e){let r=t._root,i=n?n._root:null;return Ir(r,i,e,[r.value])}function Ep(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function $n(t,n){let e=Symbol(),r=n.get(t,e);return r===e?typeof t=="function"&&!xu(t)?t:n.get(t):r}function Ir(t,n,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let a=An(n);return t.children.forEach(c=>{Rp(c,a[c.value.outlet],e,r.concat([c.value]),i),delete a[c.value.outlet]}),Object.entries(a).forEach(([c,f])=>_r(f,e.getContext(c),i)),i}function Rp(t,n,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let a=t.value,c=n?n.value:null,f=e?e.getContext(t.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){let d=Sp(c,a,a.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new io(r)):(a.data=c.data,a._resolvedData=c._resolvedData),a.component?Ir(t,n,f?f.children:null,r,i):Ir(t,n,e,r,i),d&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Pn(f.outlet.component,c))}else c&&_r(n,f,i),i.canActivateChecks.push(new io(r)),a.component?Ir(t,null,f?f.children:null,r,i):Ir(t,null,e,r,i);return i}function Sp(t,n,e){if(typeof e=="function")return e(t,n);switch(e){case"pathParamsChange":return!Zt(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Zt(t.url,n.url)||!nt(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!na(t,n)||!nt(t.queryParams,n.queryParams);case"paramsChange":default:return!na(t,n)}}function _r(t,n,e){let r=An(t),i=t.value;Object.entries(r).forEach(([a,c])=>{i.component?n?_r(c,n.children.getContext(a),e):_r(c,null,e):_r(c,n,e)}),i.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new Pn(n.outlet.component,i)):e.canDeactivateChecks.push(new Pn(null,i)):e.canDeactivateChecks.push(new Pn(null,i))}function Fr(t){return typeof t=="function"}function bp(t){return typeof t=="boolean"}function Tp(t){return t&&Fr(t.canLoad)}function Cp(t){return t&&Fr(t.canActivate)}function Ip(t){return t&&Fr(t.canActivateChild)}function xp(t){return t&&Fr(t.canDeactivate)}function _p(t){return t&&Fr(t.canMatch)}function ml(t){return t instanceof Su||t?.name==="EmptyError"}var Ui=Symbol("INITIAL_VALUE");function Un(){return Ue(t=>ys(t.map(n=>n.pipe(wn(1),Iu(Ui)))).pipe(he(n=>{for(let e of n)if(e!==!0){if(e===Ui)return Ui;if(e===!1||Ap(e))return e}return!0}),tt(n=>n!==Ui),wn(1)))}function Ap(t){return Pt(t)||t instanceof jn}function Op(t,n){return je(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=e;return c.length===0&&a.length===0?ee(Ie(G({},e),{guardsResult:!0})):Dp(c,r,i,t).pipe(je(f=>f&&bp(f)?Pp(r,a,t,n):ee(f)),he(f=>Ie(G({},e),{guardsResult:f})))})}function Dp(t,n,e,r){return Pe(t).pipe(je(i=>jp(i.component,i.route,e,n,r)),xt(i=>i!==!0,!0))}function Pp(t,n,e,r){return Pe(n).pipe(It(i=>bu(kp(i.route.parent,r),Mp(i.route,r),Lp(t,i.path,e),Np(t,i.route,e))),xt(i=>i!==!0,!0))}function Mp(t,n){return t!==null&&n&&n(new Qi(t)),ee(!0)}function kp(t,n){return t!==null&&n&&n(new Ji(t)),ee(!0)}function Np(t,n,e){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(a=>bi(()=>{let c=Ur(n)??e,f=$n(a,c),d=Cp(f)?f.canActivate(n,t):Ve(c,()=>f(n,t));return mt(d).pipe(xt())}));return ee(i).pipe(Un())}function Lp(t,n,e){let r=n[n.length-1],a=n.slice(0,n.length-1).reverse().map(c=>Ep(c)).filter(c=>c!==null).map(c=>bi(()=>{let f=c.guards.map(d=>{let v=Ur(c.node)??e,w=$n(d,v),C=Ip(w)?w.canActivateChild(r,t):Ve(v,()=>w(r,t));return mt(C).pipe(xt())});return ee(f).pipe(Un())}));return ee(a).pipe(Un())}function jp(t,n,e,r,i){let a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!a||a.length===0)return ee(!0);let c=a.map(f=>{let d=Ur(n)??i,v=$n(f,d),w=xp(v)?v.canDeactivate(t,n,e,r):Ve(d,()=>v(t,n,e,r));return mt(w).pipe(xt())});return ee(c).pipe(Un())}function Up(t,n,e,r){let i=n.canLoad;if(i===void 0||i.length===0)return ee(!0);let a=i.map(c=>{let f=$n(c,t),d=Tp(f)?f.canLoad(n,e):Ve(t,()=>f(n,e));return mt(d)});return ee(a).pipe(Un(),vl(r))}function vl(t){return Eu(xe(n=>{if(typeof n!="boolean")throw ro(t,n)}),he(n=>n===!0))}function Fp(t,n,e,r){let i=n.canMatch;if(!i||i.length===0)return ee(!0);let a=i.map(c=>{let f=$n(c,t),d=_p(f)?f.canMatch(n,e):Ve(t,()=>f(n,e));return mt(d)});return ee(a).pipe(Un(),vl(r))}var Nr=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},Lr=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function _n(t){return ur(new Nr(t))}function Bp(t){return ur(new fe(4e3,!1))}function $p(t){return ur(pl(!1,Me.GuardRejected))}var oa=class{urlSerializer;urlTree;constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[ie])return Bp(`${n.redirectTo}`);i=i.children[ie]}}applyRedirectCommands(n,e,r,i,a){return zp(e,i,a).pipe(he(c=>{if(c instanceof it)throw new Lr(c);let f=this.applyRedirectCreateUrlTree(c,this.urlSerializer.parse(c),n,r);if(c[0]==="/")throw new Lr(f);return f}))}applyRedirectCreateUrlTree(n,e,r,i){let a=this.createSegmentGroup(n,e.root,r,i);return new it(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let r={};return Object.entries(n).forEach(([i,a])=>{if(typeof a=="string"&&a[0]===":"){let f=a.substring(1);r[i]=e[f]}else r[i]=a}),r}createSegmentGroup(n,e,r,i){let a=this.createSegments(n,e.segments,r,i),c={};return Object.entries(e.children).forEach(([f,d])=>{c[f]=this.createSegmentGroup(n,d,r,i)}),new pe(a,c)}createSegments(n,e,r,i){return e.map(a=>a.path[0]===":"?this.findPosParam(n,a,i):this.findOrReturn(a,r))}findPosParam(n,e,r){let i=r[e.path.substring(1)];if(!i)throw new fe(4001,!1);return i}findOrReturn(n,e){let r=0;for(let i of e){if(i.path===n.path)return e.splice(r),i;r++}return n}};function zp(t,n,e){if(typeof t=="string")return ee(t);let r=t,{queryParams:i,fragment:a,routeConfig:c,url:f,outlet:d,params:v,data:w,title:C}=n;return mt(Ve(e,()=>r({params:v,data:w,queryParams:i,fragment:a,routeConfig:c,url:f,outlet:d,title:C})))}var sa={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Hp(t,n,e,r,i){let a=yl(t,n,e);return a.matched?(r=hp(n,r),Fp(r,n,e,i).pipe(he(c=>c===!0?a:G({},sa)))):ee(a)}function yl(t,n,e){if(n.path==="**")return Gp(e);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||e.length>0)?G({},sa):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(n.matcher||Wc)(e,t,n);if(!i)return G({},sa);let a={};Object.entries(i.posParams??{}).forEach(([f,d])=>{a[f]=d.path});let c=i.consumed.length>0?G(G({},a),i.consumed[i.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function Gp(t){return{matched:!0,parameters:t.length>0?Xc(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Gc(t,n,e,r){return e.length>0&&Wp(t,e,r)?{segmentGroup:new pe(n,Kp(r,new pe(e,t.children))),slicedSegments:[]}:e.length===0&&qp(t,e,r)?{segmentGroup:new pe(t.segments,Vp(t,e,r,t.children)),slicedSegments:e}:{segmentGroup:new pe(t.segments,t.children),slicedSegments:e}}function Vp(t,n,e,r){let i={};for(let a of e)if(ao(t,n,a)&&!r[We(a)]){let c=new pe([],{});i[We(a)]=c}return G(G({},r),i)}function Kp(t,n){let e={};e[ie]=n;for(let r of t)if(r.path===""&&We(r)!==ie){let i=new pe([],{});e[We(r)]=i}return e}function Wp(t,n,e){return e.some(r=>ao(t,n,r)&&We(r)!==ie)}function qp(t,n,e){return e.some(r=>ao(t,n,r))}function ao(t,n,e){return(t.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Xp(t,n,e){return n.length===0&&!t.children[e]}var aa=class{};function Jp(t,n,e,r,i,a,c="emptyOnly"){return new ua(t,n,e,r,i,c,a).recognize()}var Yp=31,ua=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,e,r,i,a,c,f){this.injector=n,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=c,this.urlSerializer=f,this.applyRedirects=new oa(this.urlSerializer,this.urlTree)}noMatchError(n){return new fe(4002,`'${n.segmentGroup}'`)}recognize(){let n=Gc(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(he(({children:e,rootSnapshot:r})=>{let i=new Fe(r,e),a=new Mr("",i),c=il(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(c),{state:a,tree:c}}))}match(n){let e=new en([],Object.freeze({}),Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,ie,e).pipe(he(r=>({children:r,rootSnapshot:e})),qt(r=>{if(r instanceof Lr)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Nr?this.noMatchError(r):r}))}processSegmentGroup(n,e,r,i,a){return r.segments.length===0&&r.hasChildren()?this.processChildren(n,e,r,a):this.processSegment(n,e,r,r.segments,i,!0,a).pipe(he(c=>c instanceof Fe?[c]:[]))}processChildren(n,e,r,i){let a=[];for(let c of Object.keys(r.children))c==="primary"?a.unshift(c):a.push(c);return Pe(a).pipe(It(c=>{let f=r.children[c],d=fp(e,c);return this.processSegmentGroup(n,d,f,c,i)}),Cu((c,f)=>(c.push(...f),c)),Es(null),Tu(),je(c=>{if(c===null)return _n(r);let f=wl(c);return Qp(f),ee(f)}))}processSegment(n,e,r,i,a,c,f){return Pe(e).pipe(It(d=>this.processSegmentAgainstRoute(d._injector??n,e,d,r,i,a,c,f).pipe(qt(v=>{if(v instanceof Nr)return ee(null);throw v}))),xt(d=>!!d),qt(d=>{if(ml(d))return Xp(r,i,a)?ee(new aa):_n(r);throw d}))}processSegmentAgainstRoute(n,e,r,i,a,c,f,d){return We(r)!==c&&(c===ie||!ao(i,a,r))?_n(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(n,i,r,a,c,d):this.allowRedirects&&f?this.expandSegmentAgainstRouteUsingRedirect(n,i,e,r,a,c,d):_n(i)}expandSegmentAgainstRouteUsingRedirect(n,e,r,i,a,c,f){let{matched:d,parameters:v,consumedSegments:w,positionalParamSegments:C,remainingSegments:I}=yl(e,i,a);if(!d)return _n(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Yp&&(this.allowRedirects=!1));let N=new en(a,v,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,Vc(i),We(i),i.component??i._loadedComponent??null,i,Kc(i)),M=no(N,f,this.paramsInheritanceStrategy);return N.params=Object.freeze(M.params),N.data=Object.freeze(M.data),this.applyRedirects.applyRedirectCommands(w,i.redirectTo,C,N,n).pipe(Ue(U=>this.applyRedirects.lineralizeSegments(i,U)),je(U=>this.processSegment(n,r,e,U.concat(I),c,!1,f)))}matchSegmentAgainstRoute(n,e,r,i,a,c){let f=Hp(e,r,i,n,this.urlSerializer);return r.path==="**"&&(e.children={}),f.pipe(Ue(d=>d.matched?(n=r._injector??n,this.getChildConfig(n,r,i).pipe(Ue(({routes:v})=>{let w=r._loadedInjector??n,{parameters:C,consumedSegments:I,remainingSegments:N}=d,M=new en(I,C,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,Vc(r),We(r),r.component??r._loadedComponent??null,r,Kc(r)),j=no(M,c,this.paramsInheritanceStrategy);M.params=Object.freeze(j.params),M.data=Object.freeze(j.data);let{segmentGroup:U,slicedSegments:q}=Gc(e,I,N,v);if(q.length===0&&U.hasChildren())return this.processChildren(w,v,U,M).pipe(he(ae=>new Fe(M,ae)));if(v.length===0&&q.length===0)return ee(new Fe(M,[]));let Z=We(r)===a;return this.processSegment(w,v,U,q,Z?ie:a,!0,M).pipe(he(ae=>new Fe(M,ae instanceof Fe?[ae]:[])))}))):_n(e)))}getChildConfig(n,e,r){return e.children?ee({routes:e.children,injector:n}):e.loadChildren?e._loadedRoutes!==void 0?ee({routes:e._loadedRoutes,injector:e._loadedInjector}):Up(n,e,r,this.urlSerializer).pipe(je(i=>i?this.configLoader.loadChildren(n,e).pipe(xe(a=>{e._loadedRoutes=a.routes,e._loadedInjector=a.injector})):$p(e))):ee({routes:[],injector:n})}};function Qp(t){t.sort((n,e)=>n.value.outlet===ie?-1:e.value.outlet===ie?1:n.value.outlet.localeCompare(e.value.outlet))}function Zp(t){let n=t.value.routeConfig;return n&&n.path===""}function wl(t){let n=[],e=new Set;for(let r of t){if(!Zp(r)){n.push(r);continue}let i=n.find(a=>r.value.routeConfig===a.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):n.push(r)}for(let r of e){let i=wl(r.children);n.push(new Fe(r.value,i))}return n.filter(r=>!e.has(r))}function Vc(t){return t.data||{}}function Kc(t){return t.resolve||{}}function eg(t,n,e,r,i,a){return je(c=>Jp(t,n,e,r,c.extractedUrl,i,a).pipe(he(({state:f,tree:d})=>Ie(G({},c),{targetSnapshot:f,urlAfterRedirects:d}))))}function tg(t,n){return je(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return ee(e);let a=new Set(i.map(d=>d.route)),c=new Set;for(let d of a)if(!c.has(d))for(let v of El(d))c.add(v);let f=0;return Pe(c).pipe(It(d=>a.has(d)?ng(d,r,t,n):(d.data=no(d,d.parent,t).resolve,ee(void 0))),xe(()=>f++),Rs(1),je(d=>f===c.size?ee(e):ft))})}function El(t){let n=t.children.map(e=>El(e)).flat();return[t,...n]}function ng(t,n,e,r){let i=t.routeConfig,a=t._resolve;return i?.title!==void 0&&!hl(i)&&(a[jr]=i.title),bi(()=>(t.data=no(t,t.parent,e).resolve,rg(a,t,n,r).pipe(he(c=>(t._resolvedData=c,t.data=G(G({},t.data),c),null)))))}function rg(t,n,e,r){let i=Js(t);if(i.length===0)return ee({});let a={};return Pe(i).pipe(je(c=>ig(t[c],n,e,r).pipe(xt(),xe(f=>{if(f instanceof jn)throw ro(new nn,f);a[c]=f}))),Rs(1),he(()=>a),qt(c=>ml(c)?ft:ur(c)))}function ig(t,n,e,r){let i=Ur(n)??r,a=$n(t,i),c=a.resolve?a.resolve(n,e):Ve(i,()=>a(n,e));return mt(c)}function qs(t){return Ue(n=>{let e=t(n);return e?Pe(e).pipe(he(()=>n)):ee(n)})}var da=(()=>{class t{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===ie);return r}getResolvedTitleForRoute(e){return e.data[jr]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=re({token:t,factory:()=>V(Rl),providedIn:"root"})}return t})(),Rl=(()=>{class t extends da{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(te(Uc))};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),zn=new le("",{providedIn:"root",factory:()=>({})}),Br=new le(""),Sl=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=V(ic);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ee(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=mt(e.loadComponent()).pipe(he(Tl),xe(a=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=a}),En(()=>{this.componentLoaders.delete(e)})),i=new vs(r,()=>new ht).pipe(ms());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let a=bl(r,this.compiler,e,this.onLoadEndListener).pipe(En(()=>{this.childrenLoaders.delete(r)})),c=new vs(a,()=>new ht).pipe(ms());return this.childrenLoaders.set(r,c),c}static \u0275fac=function(r){return new(r||t)};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bl(t,n,e,r){return mt(t.loadChildren()).pipe(he(Tl),je(i=>i instanceof Wu||Array.isArray(i)?ee(i):Pe(n.compileModuleAsync(i))),he(i=>{r&&r(t);let a,c,f=!1;return Array.isArray(i)?(c=i,f=!0):(a=i.create(e).injector,c=a.get(Br,[],{optional:!0,self:!0}).flat()),{routes:c.map(fa),injector:a}}))}function og(t){return t&&typeof t=="object"&&"default"in t}function Tl(t){return og(t)?t.default:t}var uo=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=re({token:t,factory:()=>V(sg),providedIn:"root"})}return t})(),sg=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||t)};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Cl=new le("");var Il=new le(""),pa=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ht;transitionAbortWithErrorSubject=new ht;configLoader=V(Sl);environmentInjector=V(_t);destroyRef=V(bs);urlSerializer=V(Fn);rootContexts=V(Bn);location=V(vr);inputBindingEnabled=V(so,{optional:!0})!==null;titleStrategy=V(da);options=V(zn,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=V(uo);createViewTransition=V(Cl,{optional:!0});navigationErrorHandler=V(Il,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ee(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new qi(i)),r=i=>this.events.next(new Xi(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(Ie(G({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(e){return this.transitions=new ze(null),this.transitions.pipe(tt(r=>r!==null),Ue(r=>{let i=!1;return ee(r).pipe(Ue(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Me.SupersededByNewNavigation),ft;this.currentTransition=r,this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Ie(G({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>a.abortController.abort()};let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=a.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&f!=="reload"){let d="";return this.events.next(new ot(a.id,this.urlSerializer.serialize(a.rawUrl),d,Mn.IgnoredSameUrlNavigation)),a.resolve(!1),ft}if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return ee(a).pipe(Ue(d=>(this.events.next(new Mt(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?ft:Promise.resolve(d))),eg(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),xe(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=Ie(G({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let v=new Or(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(v)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:d,extractedUrl:v,source:w,restoredState:C,extras:I}=a,N=new Mt(d,this.urlSerializer.serialize(v),w,C);this.events.next(N);let M=cl(this.rootComponentType).snapshot;return this.currentTransition=r=Ie(G({},a),{targetSnapshot:M,urlAfterRedirects:v,extras:Ie(G({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,ee(r)}else{let d="";return this.events.next(new ot(a.id,this.urlSerializer.serialize(a.extractedUrl),d,Mn.IgnoredByUrlHandlingStrategy)),a.resolve(!1),ft}}),xe(a=>{let c=new Gi(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),he(a=>(this.currentTransition=r=Ie(G({},a),{guards:wp(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r)),Op(this.environmentInjector,a=>this.events.next(a)),xe(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw ro(this.urlSerializer,a.guardsResult);let c=new Vi(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),tt(a=>a.guardsResult?!0:(this.cancelNavigationTransition(a,"",Me.GuardRejected),!1)),qs(a=>{if(a.guards.canActivateChecks.length!==0)return ee(a).pipe(xe(c=>{let f=new Ki(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),Ue(c=>{let f=!1;return ee(c).pipe(tg(this.paramsInheritanceStrategy,this.environmentInjector),xe({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(c,"",Me.NoDataFromResolver)}}))}),xe(c=>{let f=new Wi(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}))}),qs(a=>{let c=f=>{let d=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(f.routeConfig).pipe(xe(v=>{f.component=v}),he(()=>{})));for(let v of f.children)d.push(...c(v));return d};return ys(c(a.targetSnapshot.root)).pipe(Es(null),wn(1))}),qs(()=>this.afterPreactivation()),Ue(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,f=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return f?Pe(f).pipe(he(()=>r)):ee(r)}),he(a=>{let c=pp(e.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=r=Ie(G({},a),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,r}),xe(()=>{this.events.next(new Dr)}),yp(this.rootContexts,e.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),wn(1),Ss(new Si(a=>{let c=r.abortController.signal,f=()=>a.next();return c.addEventListener("abort",f),()=>c.removeEventListener("abort",f)}).pipe(tt(()=>!i&&!r.targetRouterState),xe(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Me.Aborted)}))),xe({next:a=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new He(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),Ss(this.transitionAbortWithErrorSubject.pipe(xe(a=>{throw a}))),En(()=>{i||this.cancelNavigationTransition(r,"",Me.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),qt(a=>{if(this.destroyed)return r.resolve(!1),ft;if(i=!0,gl(a))this.events.next(new rt(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),vp(a)?this.events.next(new Ln(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new kn(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let f=Ve(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(f instanceof jn){let{message:d,cancellationCode:v}=ro(this.urlSerializer,f);this.events.next(new rt(r.id,this.urlSerializer.serialize(r.extractedUrl),d,v)),this.events.next(new Ln(f.redirectTo,f.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(f){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(f)}}return ft}))}))}cancelNavigationTransition(e,r,i){let a=new rt(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(a),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ag(t){return t!==Dn}var xl=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=re({token:t,factory:()=>V(ug),providedIn:"root"})}return t})(),oo=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},ug=(()=>{class t extends oo{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Cs(t)))(i||t)}})();static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_l=(()=>{class t{urlSerializer=V(Fn);options=V(zn,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=V(vr);urlHandlingStrategy=V(uo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new it;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:i}){let a=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,c=i??a;return c instanceof it?this.urlSerializer.serialize(c):c}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:i}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=e):this.rawUrlTree=i}routerState=cl(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=re({token:t,factory:()=>V(cg),providedIn:"root"})}return t})(),cg=(()=>{class t extends _l{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof Mt?this.updateStateMemento():e instanceof ot?this.commitTransition(r):e instanceof Or?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof Dr?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof rt&&e.code!==Me.SupersededByNewNavigation&&e.code!==Me.Redirect?this.restoreHistory(r):e instanceof kn?this.restoreHistory(r,!0):e instanceof He&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:i}){let{replaceUrl:a,state:c}=r;if(this.location.isCurrentPathEqualTo(e)||a){let f=this.browserPageId,d=G(G({},c),this.generateNgRouterState(i,f));this.location.replaceState(e,"",d)}else{let f=G(G({},c),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",f)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,a=this.currentPageId-i;a!==0?this.location.historyGo(a):this.getCurrentUrlTree()===e.finalUrl&&a===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Cs(t)))(i||t)}})();static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ga(t,n){t.events.pipe(tt(e=>e instanceof He||e instanceof rt||e instanceof kn||e instanceof ot),he(e=>e instanceof He||e instanceof ot?0:(e instanceof rt?e.code===Me.Redirect||e.code===Me.SupersededByNewNavigation:!1)?2:1),tt(e=>e!==2),wn(1)).subscribe(()=>{n()})}var lg={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Hn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=V(Ps);stateManager=V(_l);options=V(zn,{optional:!0})||{};pendingTasks=V(Ou);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=V(pa);urlSerializer=V(Fn);location=V(vr);urlHandlingStrategy=V(uo);injector=V(_t);_events=new ht;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=V(xl);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=V(Br,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!V(so,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new wu;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(i!==null&&a!==null){if(this.stateManager.handleRouterEvent(r,a),r instanceof rt&&r.code!==Me.Redirect&&r.code!==Me.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof He)this.navigated=!0;else if(r instanceof Ln){let c=r.navigationBehaviorOptions,f=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),d=G({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ag(i.source)},c);this.scheduleNavigation(f,Dn,null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}lp(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Dn,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,i)=>{this.navigateToSyncWithBrowser(e,i,r)})}navigateToSyncWithBrowser(e,r,i){let a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){let d=G({},i);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(a.state=d)}let f=this.parseUrl(e);this.scheduleNavigation(f,r,c,a).catch(d=>{this.injector.get(Ti)(d)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(fa),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:d}=r,v=d?this.currentUrlTree.fragment:c,w=null;switch(f??this.options.defaultQueryParamsHandling){case"merge":w=G(G({},this.currentUrlTree.queryParams),a);break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=a||null}w!==null&&(w=this.removeEmptyProps(w));let C;try{let I=i?i.snapshot:this.routerState.snapshot.root;C=ol(I)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),C=this.currentUrlTree.root}return sl(C,e,w,v??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=Pt(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,Dn,null,r)}navigate(e,r={skipLocationChange:!1}){return fg(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=G({},lg):r===!1?i=G({},hg):i=r,Pt(e))return Bc(this.currentUrlTree,e,i);let a=this.parseUrl(e);return Bc(this.currentUrlTree,a,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,a])=>(a!=null&&(r[i]=a),r),{})}scheduleNavigation(e,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let f,d,v;c?(f=c.resolve,d=c.reject,v=c.promise):v=new Promise((C,I)=>{f=C,d=I});let w=this.pendingTasks.add();return ga(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(w))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:a,resolve:f,reject:d,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(C=>Promise.reject(C))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fg(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new fe(4008,!1)}var co=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Au(null);get href(){return oc(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ht;applicationErrorHandler=V(Ti);options=V(zn,{optional:!0});constructor(e,r,i,a,c,f){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.locationStrategy=f,this.reactiveHref.set(V(new sc("href"),{optional:!0}));let d=c.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area"||!!(typeof customElements=="object"&&customElements.get(d)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,r=i=>i==="merge"||i==="preserve";e||=r(this.queryParamsHandling),e||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(i=>{i instanceof He&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Pt(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,a,c){let f=this.urlTree;if(f===null||this.isAnchorElement&&(e!==0||r||i||a||c||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(f,d)?.catch(v=>{this.applicationErrorHandler(v)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,r){let i=this.renderer,a=this.el.nativeElement;r!==null?i.setAttribute(a,e,r):i.removeAttribute(a,e)}get urlTree(){return this.routerLinkInput===null?null:Pt(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Ke(Hn),Ke(gt),Mu("tabindex"),Ke(Os),Ke(Is),Ke(ks))};static \u0275dir=gr({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ec("click",function(c){return i.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),r&2&&Qu("href",i.reactiveHref(),Hu)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ii],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ii],replaceUrl:[2,"replaceUrl","replaceUrl",Ii],routerLink:"routerLink"},features:[hr]})}return t})(),dg=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Jt;constructor(e,r,i,a,c){this.router=e,this.element=r,this.renderer=i,this.cdr=a,this.link=c,this.routerEventsSubscription=e.events.subscribe(f=>{f instanceof He&&this.update()})}ngAfterContentInit(){ee(this.links.changes,ee(null)).pipe(ws()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Pe(e).pipe(ws()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){let r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let r=pg(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let a=i.urlTree;return a?e.isActive(a,r):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(r){return new(r||t)(Ke(Hn),Ke(Is),Ke(Os),Ke(Ci),Ke(co,8))};static \u0275dir=gr({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,a){if(r&1&&tc(a,co,5),r&2){let c;nc(c=rc())&&(i.links=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[hr]})}return t})();function pg(t){return!!t.paths}var Al=new le(""),gg=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Dn;restoredId=0;store={};constructor(e,r,i,a,c={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,c.scrollPositionRestoration||="disabled",c.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Mt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof He?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof ot&&e.code===Mn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Nn&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(async()=>{await new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Nn(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Vu()};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})();function mg(t,...n){return lr([{provide:Br,multi:!0,useValue:t},[],{provide:gt,useFactory:vg,deps:[Hn]},{provide:Yu,multi:!0,useFactory:Eg},n.map(e=>e.\u0275providers)])}function vg(t){return t.routerState.root}function yg(t,n){return{\u0275kind:t,\u0275providers:n}}function wg(t={}){return yg(4,[{provide:Al,useFactory:()=>{let e=V(pc),r=V(At),i=V(pa),a=V(Fn);return new gg(a,i,e,r,t)}}])}function Eg(){let t=V(Rn);return n=>{let e=t.get(Ms);if(n!==e.components[0])return;let r=t.get(Hn),i=t.get(Rg);t.get(Sg)===1&&r.initialNavigation(),t.get(bg,null,{optional:!0})?.setUpPreloading(),t.get(Al,null,{optional:!0})?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Rg=new le("",{factory:()=>new ht}),Sg=new le("",{providedIn:"root",factory:()=>1});var bg=new le("");var rn=(I=>(I.PRODUCTS="productsStore",I.RECIPES="recipesStore",I.CATEGORIES="categoryStore",I.PRODUCTS_CATEGORIES="categoryProductsStore",I.RECIPES_CATEGORIES="categoryRecipesStore",I.INDICES="indicesStore",I.DOCUMENTATION="documentation",I.TAGS="tags",I.TAXES="taxes",I.SETTINGS="settings",I.INVOICES="invoices",I.CREDENTIALS="credentials",I))(rn||{});var Ol=new le("LOGGER_CONTEXT",{factory:()=>({label:"Logger",color:"#3498db"})}),Dl=new le("DISABLE_LOGGER",{factory:()=>!0});var Gn=class t{constructor(n,e){this.disableLogger=n;this.context=e;this._enabled=this.disableLogger!==!0&&uc()&&this.context?.enabled!==!1}_enabled;log(n,...e){this._print("log",n,...e)}info(n,...e){this._print("info",n,...e)}warn(n,...e){this._print("warn",n,...e)}error(n,...e){this._print("error",n,...e)}withContext(n){let e=G(G({},this.context),n);return new t(this.disableLogger,e)}_print(n,e,...r){if(!this._enabled)return;let i=this.context?.label??"Logger",c=`color: ${this.context?.color??"#3498db"}; font-weight: bold;`;console[n](`%c[${i}]`,c,e,r.length?" - ":"",...r)}static \u0275fac=function(e){return new(e||t)(te(Dl,8),te(Ol,8))};static \u0275prov=re({token:t,factory:t.\u0275fac})};var Ny=new le("UserLanguage");var Pl=new le("DB_NAME");var lo=Gf(Ml(),1),kl=Symbol.for("Dexie"),ho=globalThis[kl]||(globalThis[kl]=lo.default);if(lo.default.semVer!==ho.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${lo.default.semVer} and ${ho.semVer}`);var{liveQuery:Fy,mergeRanges:By,rangesOverlap:$y,RangeSet:zy,cmp:Hy,Entity:Gy,PropModification:Vy,replacePrefix:Ky,add:Wy,remove:qy}=ho;var Nl=ho;var Ll=[{version:1,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryStore:"++uuid,name"}},{version:2,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryStore:"++uuid,name",categoryProductsStore:"++uuid,name"},update:t=>new Promise(async n=>{let e=await t.table("categoryStore").toArray(),r=t.table("categoryProductsStore");await Promise.all(e.map(i=>r.add(i))),await t.table("categoryStore").clear()})},{version:3,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:4,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:5,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"},update:t=>new Promise(async n=>{let e=[{uuid:"\u0423\u043A\u0441\u0443\u0441\u044B",name:"\u0423\u043A\u0441\u0443\u0441\u044B"}],r=["\u0421\u0438\u0440\u043E\u043F\u044B \u0438 \u043F\u0440\u043E\u043F\u0438\u0442\u043A\u0438"],i=[{old:"\u0420\u0430\u0437\u0440\u044B\u0445\u043B\u0438\u0442\u0435\u043B\u0438 \u0438 \u0441\u0442\u0430\u0431\u0438\u043B\u0438\u0437\u0430\u0442\u043E\u0440\u044B",new:"\u0420\u0430\u0437\u0440\u044B\u0445\u043B\u0438\u0442\u0435\u043B\u0438 \u0438 \u0441\u043E\u0434\u044B"}],a=t.table("categoryProductsStore"),c=await a.toArray(),f=c.filter(v=>r.includes(v.name)).map(v=>v.uuid),d=c.filter(v=>i.map(w=>w.old).includes(v.name));await Promise.all(d.map(v=>{let w=i.find(C=>C.old===v.name)?.new;return a.update(v.uuid,{name:w})})),await Promise.all(f.map(v=>a.delete(v))),await Promise.all(e.map(v=>a.add(v)))})},{version:6,schema:{productsStore:"++uuid,name",recipesStore:"++uuid,name,source",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name"}},{version:7,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name,source",categoryProductsStore:"++uuid,name,color,system",categoryRecipesStore:"++uuid,name,system"},update:t=>new Promise(async n=>{let e=t.table("categoryProductsStore"),r=await e.toArray();await Promise.all(r.map(c=>c.system===void 0?e.update(c.uuid,{system:!1}):Promise.resolve()));let i=t.table("categoryRecipesStore"),a=await i.toArray();await Promise.all(a.map(c=>c.system===void 0?i.update(c.uuid,{system:!1}):Promise.resolve())),n()})},{version:8,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name,color,system",categoryRecipesStore:"++uuid,name,system"},update:t=>{let n=["productsStore","recipesStore","categoryProductsStore","categoryRecipesStore"];return Promise.all([new Promise(async e=>{let r=t.table("categoryProductsStore"),i=await r.toArray(),a=t.table("productsStore"),c=await a.toArray();await Promise.all(c.map(f=>{let d=i.find(v=>v.uuid===f.category_id);return d?a.update(f.uuid,{category_id:d.name}):Promise.resolve()})),await Promise.all(i.map(f=>r.update(f.uuid,{uuid:f.name}))),e()}),new Promise(async e=>{let r=t.table("categoryRecipesStore"),i=await r.toArray(),a=t.table("recipesStore"),c=await a.toArray();await Promise.all(c.map(f=>{let d=i.find(v=>v.uuid===f.category_id);return d?a.update(f.uuid,{category_id:d.name}):Promise.resolve()})),await Promise.all(i.map(f=>r.update(f.uuid,{uuid:f.name}))),e()})]).then(()=>{})}},{version:9,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid"}},{version:10,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key"}},{version:11,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name"}},{version:12,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name",taxes:"++uuid"}},{version:13,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name",taxes:"++uuid",settings:"++key"}},{version:14,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name",taxes:"++uuid",settings:"++key",invoices:"++uuid"}},{version:15,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name",taxes:"++uuid",settings:"++key",invoices:"++uuid",credentials:"++uuid"}},{version:16,schema:{productsStore:"++uuid,name,source",recipesStore:"++uuid,name",categoryProductsStore:"++uuid,name",categoryRecipesStore:"++uuid,name",indicesStore:"++uuid",documentation:"++key",tags:"++name",taxes:"++uuid",settings:"++key",invoices:"++uuid",credentials:"++uuid,type"}}];var ya={product_id:"productsStore.uuid",recipe_id:"recipesStore.uuid",tags:"tags.uuid",invoice_id:"invoices.uuid",credential_id:"credentials.uuid"};var W;function Ae(t,n,e){let r=typeof e,i=typeof t;if(r!=="undefined"){if(i!=="undefined"){if(e){if(i==="function"&&r===i)return function(f){return t(e(f))};if(n=t.constructor,n===e.constructor){if(n===Array)return e.concat(t);if(n===Map){var a=new Map(e);for(var c of t)a.set(c[0],c[1]);return a}if(n===Set){c=new Set(e);for(a of t.values())c.add(a);return c}}}return t}return e}return i==="undefined"?n:t}function Re(){return Object.create(null)}function qe(t){return typeof t=="string"}function Gr(t){return typeof t=="object"}function Tg(t){let n=[];for(let e of t.keys())n.push(e);return n}function Vr(t,n){if(qe(n))t=t[n];else for(let e=0;t&&e<n.length;e++)t=t[n[e]];return t}function Cg(t){let n=0;for(let e=0,r;e<t.length;e++)(r=t[e])&&n<r.length&&(n=r.length);return n}var Ig=/[^\p{L}\p{N}]+/u,xg=/(\d{3})/g,_g=/(\D)(\d{3})/g,Ag=/(\d{3})(\D)/g,jl=/[\u0300-\u036f]/g;function Kr(t={}){if(!this||this.constructor!==Kr)return new Kr(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}W=Kr.prototype;W.assign=function(t){this.normalize=Ae(t.normalize,!0,this.normalize);let n=t.include,e=n||t.exclude||t.split,r;if(e||e===""){if(typeof e=="object"&&e.constructor!==RegExp){let i="";r=!n,n||(i+="\\p{Z}"),e.letter&&(i+="\\p{L}"),e.number&&(i+="\\p{N}",r=!!n),e.symbol&&(i+="\\p{S}"),e.punctuation&&(i+="\\p{P}"),e.control&&(i+="\\p{C}"),(e=e.char)&&(i+=typeof e=="object"?e.join(""):e);try{this.split=new RegExp("["+(n?"^":"")+i+"]+","u")}catch{this.split=/\s+/}}else this.split=e,r=e===!1||2>"a1a".split(e).length;this.numeric=Ae(t.numeric,r)}else{try{this.split=Ae(this.split,Ig)}catch{this.split=/\s+/}this.numeric=Ae(t.numeric,Ae(this.numeric,!0))}if(this.prepare=Ae(t.prepare,null,this.prepare),this.finalize=Ae(t.finalize,null,this.finalize),e=t.filter,this.filter=typeof e=="function"?e:Ae(e&&new Set(e),null,this.filter),this.dedupe=Ae(t.dedupe,!0,this.dedupe),this.matcher=Ae((e=t.matcher)&&new Map(e),null,this.matcher),this.mapper=Ae((e=t.mapper)&&new Map(e),null,this.mapper),this.stemmer=Ae((e=t.stemmer)&&new Map(e),null,this.stemmer),this.replacer=Ae(t.replacer,null,this.replacer),this.minlength=Ae(t.minlength,1,this.minlength),this.maxlength=Ae(t.maxlength,1024,this.maxlength),this.rtl=Ae(t.rtl,!1,this.rtl),(this.cache=e=Ae(t.cache,!0,this.cache))&&(this.H=null,this.S=typeof e=="number"?e:2e5,this.B=new Map,this.G=new Map,this.L=this.K=128),this.h="",this.M=null,this.A="",this.N=null,this.matcher)for(let i of this.matcher.keys())this.h+=(this.h?"|":"")+i;if(this.stemmer)for(let i of this.stemmer.keys())this.A+=(this.A?"|":"")+i;return this};W.addStemmer=function(t,n){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,n),this.A+=(this.A?"|":"")+t,this.N=null,this.cache&&sn(this),this};W.addFilter=function(t){return typeof t=="function"?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&sn(this),this};W.addMapper=function(t,n){return typeof t=="object"?this.addReplacer(t,n):1<t.length?this.addMatcher(t,n):(this.mapper||(this.mapper=new Map),this.mapper.set(t,n),this.cache&&sn(this),this)};W.addMatcher=function(t,n){return typeof t=="object"?this.addReplacer(t,n):2>t.length&&(this.dedupe||this.mapper)?this.addMapper(t,n):(this.matcher||(this.matcher=new Map),this.matcher.set(t,n),this.h+=(this.h?"|":"")+t,this.M=null,this.cache&&sn(this),this)};W.addReplacer=function(t,n){return typeof t=="string"?this.addMatcher(t,n):(this.replacer||(this.replacer=[]),this.replacer.push(t,n),this.cache&&sn(this),this)};W.encode=function(t,n){if(this.cache&&t.length<=this.K)if(this.H){if(this.B.has(t))return this.B.get(t)}else this.H=setTimeout(sn,50,this);this.normalize&&(typeof this.normalize=="function"?t=this.normalize(t):t=jl?t.normalize("NFKD").replace(jl,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&3<t.length&&(t=t.replace(_g,"$1 $2").replace(Ag,"$1 $2").replace(xg,"$1 "));let e=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer),r=[],i=Re(),a,c,f=this.split||this.split===""?t.split(this.split):[t];for(let v=0,w,C;v<f.length;v++)if((w=C=f[v])&&!(w.length<this.minlength||w.length>this.maxlength)){if(n){if(i[w])continue;i[w]=1}else{if(a===w)continue;a=w}if(e)r.push(w);else if(!this.filter||(typeof this.filter=="function"?this.filter(w):!this.filter.has(w))){if(this.cache&&w.length<=this.L)if(this.H){var d=this.G.get(w);if(d||d===""){d&&r.push(d);continue}}else this.H=setTimeout(sn,50,this);if(this.stemmer){this.N||(this.N=new RegExp("(?!^)("+this.A+")$"));let I;for(;I!==w&&2<w.length;)I=w,w=w.replace(this.N,N=>this.stemmer.get(N))}if(w&&(this.mapper||this.dedupe&&1<w.length)){d="";for(let I=0,N="",M,j;I<w.length;I++)M=w.charAt(I),M===N&&this.dedupe||((j=this.mapper&&this.mapper.get(M))||j===""?j===N&&this.dedupe||!(N=j)||(d+=j):d+=N=M);w=d}if(this.matcher&&1<w.length&&(this.M||(this.M=new RegExp("("+this.h+")","g")),w=w.replace(this.M,I=>this.matcher.get(I))),w&&this.replacer)for(d=0;w&&d<this.replacer.length;d+=2)w=w.replace(this.replacer[d],this.replacer[d+1]);if(this.cache&&C.length<=this.L&&(this.G.set(C,w),this.G.size>this.S&&(this.G.clear(),this.L=this.L/1.1|0)),w){if(w!==C)if(n){if(i[w])continue;i[w]=1}else{if(c===w)continue;c=w}r.push(w)}}}return this.finalize&&(r=this.finalize(r)||r),this.cache&&t.length<=this.K&&(this.B.set(t,r),this.B.size>this.S&&(this.B.clear(),this.K=this.K/1.1|0)),r};function sn(t){t.H=null,t.B.clear(),t.G.clear()}var Vn,$r;async function Og(t){t=t.data;var n=t.task;let e=t.id,r=t.args;switch(n){case"init":$r=t.options||{},(n=t.factory)?(Function("return "+n)()(self),Vn=new self.FlexSearch.Index($r),delete self.FlexSearch):Vn=new at($r),postMessage({id:e});break;default:let i;n==="export"&&(r[1]?(r[0]=$r.export,r[2]=0,r[3]=1):r=null),n==="import"?r[0]&&(t=await $r.import.call(Vn,r[0]),Vn.import(r[0],t)):(i=r&&Vn[n].apply(Vn,r))&&i.then&&(i=await i),postMessage(n==="search"?{id:e,msg:i}:{id:e})}}function xa(t){zr.call(t,"add"),zr.call(t,"append"),zr.call(t,"search"),zr.call(t,"update"),zr.call(t,"remove")}var Sa,Ul,go;function Dg(){Sa=go=0}function zr(t){this[t+"Async"]=function(){let n=arguments;var e=n[n.length-1];let r;if(typeof e=="function"&&(r=e,delete n[n.length-1]),Sa?go||(go=Date.now()-Ul>=this.priority*this.priority*3):(Sa=setTimeout(Dg,0),Ul=Date.now()),go){let a=this;return new Promise(c=>{setTimeout(function(){c(a[t+"Async"].apply(a,n))},0)})}let i=this[t].apply(this,n);return e=i.then?i:new Promise(a=>a(i)),r&&e.then(r),e}}var Kn=0;function Wr(t={}){function n(c){function f(d){d=d.data||d;let v=d.id,w=v&&i.h[v];w&&(w(d.msg),delete i.h[v])}if(this.worker=c,this.h=Re(),this.worker)return r?this.worker.on("message",f):this.worker.onmessage=f,t.config?new Promise(function(d){i.h[++Kn]=function(){d(i),1e9<Kn&&(Kn=0)},i.worker.postMessage({id:Kn,task:"init",factory:e,options:t})}):(this.worker.postMessage({task:"init",factory:e,options:t}),this.priority=t.priority||4,this)}if(!this||this.constructor!==Wr)return new Wr(t);let e=typeof self<"u"?self._factory:typeof window<"u"?window._factory:null;e&&(e=e.toString());let r=typeof window>"u",i=this,a=Pg(e,r,t.worker);return a.then?a.then(function(c){return n.call(i,c)}):n.call(this,a)}Nt("add");Nt("append");Nt("search");Nt("update");Nt("remove");Nt("clear");Nt("export");Nt("import");xa(Wr.prototype);function Nt(t){Wr.prototype[t]=function(){let n=this,e=[].slice.call(arguments);var r=e[e.length-1];let i;return typeof r=="function"&&(i=r,e.pop()),r=new Promise(function(a){t==="export"&&typeof e[0]=="function"&&(e[0]=null),n.h[++Kn]=a,n.worker.postMessage({task:t,id:Kn,args:e})}),i?(r.then(i),this):r}}function Pg(t,n,e){return n?typeof module<"u"?new(Vf()).Worker(__dirname+"/worker/node.js"):import("./chunk-K7AAVQ3W.js").then(function(r){return new r.Worker(import.meta.dirname+"/node/node.mjs")}):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+Og.toString()],{type:"text/javascript"}))):new window.Worker(typeof e=="string"?e:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js"),{type:"module"})}function _a(t,n=0){let e=[],r=[];n&&(n=25e4/n*5e3|0);for(let i of t.entries())r.push(i),r.length===n&&(e.push(r),r=[]);return r.length&&e.push(r),e}function Aa(t,n){n||(n=new Map);for(let e=0,r;e<t.length;e++)r=t[e],n.set(r[0],r[1]);return n}function Xl(t,n=0){let e=[],r=[];n&&(n=25e4/n*1e3|0);for(let i of t.entries())r.push([i[0],_a(i[1])[0]]),r.length===n&&(e.push(r),r=[]);return r.length&&e.push(r),e}function Jl(t,n){n||(n=new Map);for(let e=0,r,i;e<t.length;e++)r=t[e],i=n.get(r[0]),n.set(r[0],Aa(r[1],i));return n}function Yl(t){let n=[],e=[];for(let r of t.keys())e.push(r),e.length===25e4&&(n.push(e),e=[]);return e.length&&n.push(e),n}function Ql(t,n){n||(n=new Set);for(let e=0;e<t.length;e++)n.add(t[e]);return n}function mo(t,n,e,r,i,a,c=0){let f=r&&r.constructor===Array;var d=f?r.shift():r;if(!d)return this.export(t,n,i,a+1);if((d=t((n?n+".":"")+(c+1)+"."+e,JSON.stringify(d)))&&d.then){let v=this;return d.then(function(){return mo.call(v,t,n,e,f?r:null,i,a,c+1)})}return mo.call(this,t,n,e,f?r:null,i,a,c+1)}function Fl(t,n){let e="";for(let r of t.entries()){t=r[0];let i=r[1],a="";for(let c=0,f;c<i.length;c++){f=i[c]||[""];let d="";for(let v=0;v<f.length;v++)d+=(d?",":"")+(n==="string"?'"'+f[v]+'"':f[v]);d="["+d+"]",a+=(a?",":"")+d}a='["'+t+'",['+a+"]]",e+=(e?",":"")+a}return e}function Bl(t,n,e,r){let i=[];for(let a=0,c;a<t.index.length;a++)if(c=t.index[a],n>=c.length)n-=c.length;else{n=c[r?"splice":"slice"](n,e);let f=n.length;if(f&&(i=i.length?i.concat(n):n,e-=f,r&&(t.length-=f),!e))break;n=0}return i}function an(t){if(!this||this.constructor!==an)return new an(t);this.index=t?[t]:[],this.length=t?t.length:0;let n=this;return new Proxy([],{get(e,r){if(r==="length")return n.length;if(r==="push")return function(i){n.index[n.index.length-1].push(i),n.length++};if(r==="pop")return function(){if(n.length)return n.length--,n.index[n.index.length-1].pop()};if(r==="indexOf")return function(i){let a=0;for(let c=0,f,d;c<n.index.length;c++){if(f=n.index[c],d=f.indexOf(i),0<=d)return a+d;a+=f.length}return-1};if(r==="includes")return function(i){for(let a=0;a<n.index.length;a++)if(n.index[a].includes(i))return!0;return!1};if(r==="slice")return function(i,a){return Bl(n,i||0,a||n.length,!1)};if(r==="splice")return function(i,a){return Bl(n,i||0,a||n.length,!0)};if(r==="constructor")return Array;if(typeof r!="symbol")return(e=n.index[r/2**31|0])&&e[r]},set(e,r,i){return e=r/2**31|0,(n.index[e]||(n.index[e]=[]))[r]=i,n.length++,!0}})}an.prototype.clear=function(){this.index.length=0};an.prototype.destroy=function(){this.proxy=this.index=null};an.prototype.push=function(){};function st(t=8){if(!this||this.constructor!==st)return new st(t);this.index=Re(),this.h=[],this.size=0,32<t?(this.B=eh,this.A=BigInt(t)):(this.B=Zl,this.A=t)}st.prototype.get=function(t){let n=this.index[this.B(t)];return n&&n.get(t)};st.prototype.set=function(t,n){var e=this.B(t);let r=this.index[e];r?(e=r.size,r.set(t,n),(e-=r.size)&&this.size++):(this.index[e]=r=new Map([[t,n]]),this.h.push(r),this.size++)};function Xe(t=8){if(!this||this.constructor!==Xe)return new Xe(t);this.index=Re(),this.h=[],this.size=0,32<t?(this.B=eh,this.A=BigInt(t)):(this.B=Zl,this.A=t)}Xe.prototype.add=function(t){var n=this.B(t);let e=this.index[n];e?(n=e.size,e.add(t),(n-=e.size)&&this.size++):(this.index[n]=e=new Set([t]),this.h.push(e),this.size++)};W=st.prototype;W.has=Xe.prototype.has=function(t){let n=this.index[this.B(t)];return n&&n.has(t)};W.delete=Xe.prototype.delete=function(t){let n=this.index[this.B(t)];n&&n.delete(t)&&this.size--};W.clear=Xe.prototype.clear=function(){this.index=Re(),this.h=[],this.size=0};W.values=Xe.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let n of this.h[t].values())yield n};W.keys=Xe.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let n of this.h[t].keys())yield n};W.entries=Xe.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let n of this.h[t].entries())yield n};function Zl(t){let n=2**this.A-1;if(typeof t=="number")return t&n;let e=0,r=this.A+1;for(let i=0;i<t.length;i++)e=(e*r^t.charCodeAt(i))&n;return this.A===32?e+2**31:e}function eh(t){let n=BigInt(2)**this.A-BigInt(1);var e=typeof t;if(e==="bigint")return t&n;if(e==="number")return BigInt(t)&n;e=BigInt(0);let r=this.A+BigInt(1);for(let i=0;i<t.length;i++)e=(e*r^BigInt(t.charCodeAt(i)))&n;return e}un.prototype.add=function(t,n,e){if(Gr(t)&&(n=t,t=Vr(n,this.key)),n&&(t||t===0)){if(!e&&this.reg.has(t))return this.update(t,n);for(let f=0,d;f<this.field.length;f++){d=this.F[f];var r=this.index.get(this.field[f]);if(typeof d=="function"){var i=d(n);i&&r.add(t,i,!1,!0)}else i=d.I,(!i||i(n))&&(d.constructor===String?d=[""+d]:qe(d)&&(d=[d]),Ta(n,d,this.J,0,r,t,d[0],e))}if(this.tag)for(r=0;r<this.D.length;r++){var a=this.D[r];i=this.tag.get(this.R[r]);let f=Re();if(typeof a=="function"){if(a=a(n),!a)continue}else{var c=a.I;if(c&&!c(n))continue;a.constructor===String&&(a=""+a),a=Vr(n,a)}if(i&&a){qe(a)&&(a=[a]);for(let d=0,v,w;d<a.length;d++)if(v=a[d],!f[v]&&(f[v]=1,(c=i.get(v))?w=c:i.set(v,w=[]),!e||!w.includes(t))){if(w.length===2**31-1){if(c=new an(w),this.fastupdate)for(let C of this.reg.values())C.includes(w)&&(C[C.indexOf(w)]=c);i.set(v,w=c)}w.push(t),this.fastupdate&&((c=this.reg.get(t))?c.push(w):this.reg.set(t,[w]))}}}if(this.store&&(!e||!this.store.has(t))){let f;if(this.C){f=Re();for(let d=0,v;d<this.C.length;d++){if(v=this.C[d],(e=v.I)&&!e(n))continue;let w;if(typeof v=="function"){if(w=v(n),!w)continue;v=[v.V]}else if(qe(v)||v.constructor===String){f[v]=n[v];continue}ba(n,f,v,0,v[0],w)}}this.store.set(t,f||n)}this.worker&&(this.fastupdate||this.reg.add(t))}return this};function ba(t,n,e,r,i,a){if(t=t[i],r===e.length-1)n[i]=a||t;else if(t)if(t.constructor===Array)for(n=n[i]=Array(t.length),i=0;i<t.length;i++)ba(t,n,e,r,i);else n=n[i]||(n[i]=Re()),i=e[++r],ba(t,n,e,r,i)}function Ta(t,n,e,r,i,a,c,f){if(t=t[c])if(r===n.length-1){if(t.constructor===Array){if(e[r]){for(n=0;n<t.length;n++)i.add(a,t[n],!0,!0);return}t=t.join(" ")}i.add(a,t,f,!0)}else if(t.constructor===Array)for(c=0;c<t.length;c++)Ta(t,n,e,r,i,a,c,f);else c=n[++r],Ta(t,n,e,r,i,a,c,f);else i.db&&i.remove(a)}function th(t,n,e,r,i,a,c){let f=t.length,d=[],v,w;v=Re();for(let C=0,I,N,M,j;C<n;C++)for(let U=0;U<f;U++)if(M=t[U],C<M.length&&(I=M[C]))for(let q=0;q<I.length;q++){if(N=I[q],(w=v[N])?v[N]++:(w=0,v[N]=1),j=d[w]||(d[w]=[]),!c){let Z=C+(U||!i?0:a||0);j=j[Z]||(j[Z]=[])}if(j.push(N),c&&e&&w===f-1&&j.length-r===e)return r?j.slice(r):j}if(t=d.length)if(i)d=1<d.length?nh(d,e,r,c,a):(d=d[0]).length>e||r?d.slice(r,e+r):d;else{if(t<f)return[];if(d=d[t-1],e||r)if(c)(d.length>e||r)&&(d=d.slice(r,e+r));else{i=[];for(let C=0,I;C<d.length;C++)if(I=d[C],I.length>r)r-=I.length;else if((I.length>e||r)&&(I=I.slice(r,e+r),e-=I.length,r&&(r-=I.length)),i.push(I),!e)break;d=1<i.length?[].concat.apply([],i):i[0]}}return d}function nh(t,n,e,r,i){let a=[],c=Re(),f;var d=t.length;let v;if(r){for(i=d-1;0<=i;i--)if(v=(r=t[i])&&r.length){for(d=0;d<v;d++)if(f=r[d],!c[f]){if(c[f]=1,e)e--;else if(a.push(f),a.length===n)return a}}}else for(let w=d-1,C,I=0;0<=w;w--){C=t[w];for(let N=0;N<C.length;N++)if(v=(r=C[N])&&r.length){for(let M=0;M<v;M++)if(f=r[M],!c[f])if(c[f]=1,e)e--;else{let j=(N+(w<d-1&&i||0))/(w+1)|0;if((a[j]||(a[j]=[])).push(f),++I===n)return a}}}return a}function Mg(t,n,e){let r=Re(),i=[];for(let a=0,c;a<n.length;a++){c=n[a];for(let f=0;f<c.length;f++)r[c[f]]=1}if(e)for(let a=0,c;a<t.length;a++)c=t[a],r[c]&&(i.push(c),r[c]=0);else for(let a=0,c,f;a<t.result.length;a++)for(c=t.result[a],n=0;n<c.length;n++)f=c[n],r[f]&&((i[a]||(i[a]=[])).push(f),r[f]=0);return i}function Oa(t,n,e,r){if(!t.length)return t;if(t.length===1)return t=t[0],t=e||t.length>n?n?t.slice(e,e+n):t.slice(e):t,r?kt.call(this,t):t;let i=[];for(let a=0,c,f;a<t.length;a++)if((c=t[a])&&(f=c.length)){if(e){if(e>=f){e-=f;continue}e<f&&(c=n?c.slice(e,e+n):c.slice(e),f=c.length,e=0)}if(f>n&&(c=c.slice(0,n),f=n),!i.length&&f>=n)return r?kt.call(this,c):c;if(i.push(c),n-=f,!n)break}return i=1<i.length?[].concat.apply([],i):i[0],r?kt.call(this,i):i}function wo(t,n,e){var r=e[0];if(r.then)return Promise.all(e).then(function(w){return t[n].apply(t,w)});if(r[0]&&r[0].index)return t[n].apply(t,r);r=[];let i=[],a=0,c=0,f,d,v;for(let w=0,C;w<e.length;w++)if(C=e[w]){let I;if(C.constructor===we)I=C.result;else if(C.constructor===Array)I=C;else if(a=C.limit||0,c=C.offset||0,v=C.suggest,d=C.resolve,f=C.enrich&&d,C.index)C.resolve=!1,I=C.index.search(C).result,C.resolve=d;else if(C.and)I=t.and(C.and);else if(C.or)I=t.or(C.or);else if(C.xor)I=t.xor(C.xor);else if(C.not)I=t.not(C.not);else continue;if(I.then)i.push(I);else if(I.length)r[w]=I;else if(!v&&(n==="and"||n==="xor")){r=[];break}}return{O:r,P:i,limit:a,offset:c,enrich:f,resolve:d,suggest:v}}we.prototype.or=function(){let{O:t,P:n,limit:e,offset:r,enrich:i,resolve:a}=wo(this,"or",arguments);return rh.call(this,t,n,e,r,i,a)};function rh(t,n,e,r,i,a){if(n.length){let c=this;return Promise.all(n).then(function(f){t=[];for(let d=0,v;d<f.length;d++)(v=f[d]).length&&(t[d]=v);return rh.call(c,t,[],e,r,i,a)})}return t.length&&(this.result.length&&t.push(this.result),2>t.length?this.result=t[0]:(this.result=nh(t,e,r,!1,this.h),r=0)),a?this.resolve(e,r,i):this}we.prototype.and=function(){let t=this.result.length,n,e,r,i;if(!t){let a=arguments[0];a&&(t=!!a.suggest,i=a.resolve,n=a.limit,e=a.offset,r=a.enrich&&i)}if(t){let{O:a,P:c,limit:f,offset:d,enrich:v,resolve:w,suggest:C}=wo(this,"and",arguments);return ih.call(this,a,c,f,d,v,w,C)}return i?this.resolve(n,e,r):this};function ih(t,n,e,r,i,a,c){if(n.length){let f=this;return Promise.all(n).then(function(d){t=[];for(let v=0,w;v<d.length;v++)(w=d[v]).length&&(t[v]=w);return ih.call(f,t,[],e,r,i,a,c)})}if(t.length)if(this.result.length&&t.unshift(this.result),2>t.length)this.result=t[0];else{if(n=Cg(t))return this.result=th(t,n,e,r,c,this.h,a),a?i?kt.call(this.index,this.result):this.result:this;this.result=[]}else c||(this.result=t);return a?this.resolve(e,r,i):this}we.prototype.xor=function(){let{O:t,P:n,limit:e,offset:r,enrich:i,resolve:a,suggest:c}=wo(this,"xor",arguments);return oh.call(this,t,n,e,r,i,a,c)};function oh(t,n,e,r,i,a,c){if(n.length){let f=this;return Promise.all(n).then(function(d){t=[];for(let v=0,w;v<d.length;v++)(w=d[v]).length&&(t[v]=w);return oh.call(f,t,[],e,r,i,a,c)})}if(t.length)if(this.result.length&&t.unshift(this.result),2>t.length)this.result=t[0];else return this.result=kg.call(this,t,e,r,a,this.h),a?i?kt.call(this.index,this.result):this.result:this;else c||(this.result=t);return a?this.resolve(e,r,i):this}function kg(t,n,e,r,i){let a=[],c=Re(),f=0;for(let d=0,v;d<t.length;d++)if(v=t[d]){f<v.length&&(f=v.length);for(let w=0,C;w<v.length;w++)if(C=v[w])for(let I=0,N;I<C.length;I++)N=C[I],c[N]=c[N]?2:1}for(let d=0,v,w=0;d<f;d++)for(let C=0,I;C<t.length;C++)if((I=t[C])&&(v=I[d])){for(let N=0,M;N<v.length;N++)if(M=v[N],c[M]===1)if(e)e--;else if(r){if(a.push(M),a.length===n)return a}else{let j=d+(C?i:0);if(a[j]||(a[j]=[]),a[j].push(M),++w===n)return a}}return a}we.prototype.not=function(){let{O:t,P:n,limit:e,offset:r,enrich:i,resolve:a,suggest:c}=wo(this,"not",arguments);return sh.call(this,t,n,e,r,i,a,c)};function sh(t,n,e,r,i,a,c){if(n.length){let f=this;return Promise.all(n).then(function(d){t=[];for(let v=0,w;v<d.length;v++)(w=d[v]).length&&(t[v]=w);return sh.call(f,t,[],e,r,i,a,c)})}if(t.length&&this.result.length)this.result=Ng.call(this,t,e,r,a);else if(a)return this.resolve(e,r,i);return a?i?kt.call(this.index,this.result):this.result:this}function Ng(t,n,e,r){let i=[];t=new Set(t.flat().flat());for(let a=0,c,f=0;a<this.result.length;a++)if(c=this.result[a]){for(let d=0,v;d<c.length;d++)if(v=c[d],!t.has(v)){if(e)e--;else if(r){if(i.push(v),i.length===n)return i}else if(i[a]||(i[a]=[]),i[a].push(v),++f===n)return i}}return i}function we(t){if(!this||this.constructor!==we)return new we(t);if(t&&t.index)return t.resolve=!1,this.index=t.index,this.h=t.boost||0,this.result=t.index.search(t).result,this;this.index=null,this.result=t||[],this.h=0}we.prototype.limit=function(t){if(this.result.length){let n=[];for(let e=0,r;e<this.result.length;e++)if(r=this.result[e])if(r.length<=t){if(n[e]=r,t-=r.length,!t)break}else{n[e]=r.slice(0,t);break}this.result=n}return this};we.prototype.offset=function(t){if(this.result.length){let n=[];for(let e=0,r;e<this.result.length;e++)(r=this.result[e])&&(r.length<=t?t-=r.length:(n[e]=r.slice(t),t=0));this.result=n}return this};we.prototype.boost=function(t){return this.h+=t,this};we.prototype.resolve=function(t,n,e){let r=this.result,i=this.index;return this.result=this.index=null,r.length?(typeof t=="object"&&(e=t.enrich,n=t.offset,t=t.limit),Oa.call(i,r,t||100,n,e)):r};Re();un.prototype.search=function(t,n,e,r){e||(!n&&Gr(t)?(e=t,t=""):Gr(n)&&(e=n,n=0));let i=[];var a=[];let c;var f;let d,v,w,C=0;var I=!0;let N;if(e){e.constructor===Array&&(e={index:e}),t=e.query||t,c=e.pluck,d=e.merge,v=c||e.field||(v=e.index)&&(v.index?null:v),w=this.tag&&e.tag;var M=e.suggest;I=e.resolve!==!1,I||c||!(v=v||this.field)||(qe(v)?c=v:(v.constructor===Array&&v.length===1&&(v=v[0]),c=v.field||v.index)),N=(f=this.store&&e.enrich&&I)&&e.highlight,n=e.limit||n;var j=e.offset||0;if(n||(n=100),w&&(!this.db||!r)){w.constructor!==Array&&(w=[w]);var U=[];for(let de=0,ne;de<w.length;de++)if(ne=w[de],ne.field&&ne.tag){var q=ne.tag;if(q.constructor===Array)for(var Z=0;Z<q.length;Z++)U.push(ne.field,q[Z]);else U.push(ne.field,q)}else{q=Object.keys(ne);for(let ve=0,be,ge;ve<q.length;ve++)if(be=q[ve],ge=ne[be],ge.constructor===Array)for(Z=0;Z<ge.length;Z++)U.push(be,ge[Z]);else U.push(be,ge)}if(w=U,!t){if(I=[],U.length)for(a=0;a<U.length;a+=2){if(this.db){if(M=this.index.get(U[a]),!M)continue;I.push(M=M.db.tag(U[a+1],n,j,f))}else M=Lg.call(this,U[a],U[a+1],n,j,f);i.push({field:U[a],tag:U[a+1],result:M})}return I.length?Promise.all(I).then(function(de){for(let ne=0;ne<de.length;ne++)i[ne].result=de[ne];return i}):i}}v&&v.constructor!==Array&&(v=[v])}v||(v=this.field),U=!r&&(this.worker||this.db)&&[];let ae;for(let de=0,ne,ve,be;de<v.length;de++){if(ve=v[de],this.db&&this.tag&&!this.F[de])continue;let ge;if(qe(ve)||(ge=ve,ve=ge.field,t=ge.query||t,n=ge.limit||n,j=ge.offset||j,M=ge.suggest||M,f=this.store&&(ge.enrich||f)),r)ne=r[de];else if(q=ge||e,Z=this.index.get(ve),w&&(this.db&&(q.tag=w,ae=Z.db.support_tag_search,q.field=v),ae||(q.enrich=!1)),U){U[de]=Z.search(t,n,q),q&&f&&(q.enrich=f);continue}else ne=Z.search(t,n,q),q&&f&&(q.enrich=f);if(be=ne&&(I?ne.length:ne.result.length),w&&be){if(q=[],Z=0,this.db&&r){if(!ae)for(let Je=v.length;Je<r.length;Je++){let ke=r[Je];if(ke&&ke.length)Z++,q.push(ke);else if(!M)return I?i:new we(i)}}else for(let Je=0,ke,To;Je<w.length;Je+=2){if(ke=this.tag.get(w[Je]),!ke){if(M)continue;return I?i:new we(i)}if(To=(ke=ke&&ke.get(w[Je+1]))&&ke.length)Z++,q.push(ke);else if(!M)return I?i:new we(i)}if(Z){if(ne=Mg(ne,q,I),be=ne.length,!be&&!M)return I?ne:new we(ne);Z--}}if(be)a[C]=ve,i.push(ne),C++;else if(v.length===1)return I?i:new we(i)}if(U){if(this.db&&w&&w.length&&!ae)for(f=0;f<w.length;f+=2){if(a=this.index.get(w[f]),!a){if(M)continue;return I?i:new we(i)}U.push(a.db.tag(w[f+1],n,j,!1))}let de=this;return Promise.all(U).then(function(ne){return ne.length?de.search(t,n,e,ne):ne})}if(!C)return I?i:new we(i);if(c&&(!f||!this.store))return i[0];for(U=[],j=0;j<a.length;j++){if(M=i[j],f&&M.length&&typeof M[0].doc>"u"&&(this.db?U.push(M=this.index.get(this.field[0]).db.enrich(M)):M=kt.call(this,M)),c)return I?N?wa(t,M,this.index,c,N):M:new we(M);i[j]={field:a[j],result:M}}if(f&&this.db&&U.length){let de=this;return Promise.all(U).then(function(ne){for(let ve=0;ve<ne.length;ve++)i[ve].result=ne[ve];return d?$l(i):N?wa(t,i,de.index,c,N):i})}return d?$l(i):N?wa(t,i,this.index,c,N):i};function wa(t,n,e,r,i){let a,c;for(let d=0,v,w,C;d<n.length;d++){let I;if(r)I=n,C=r;else{var f=n[d];if(C=f.field,!C)continue;I=f.result}w=e.get(C),v=w.encoder,f=w.tokenize,v!==a&&(a=v,c=a.encode(t));for(let N=0;N<I.length;N++){let M="",j=Vr(I[N].doc,C).split(/\s+/);for(let U=0,q,Z;U<j.length;U++){q=j[U],Z=v.encode(q),Z=1<Z.length?Z.join(" "):Z[0];let ae;if(Z&&q)for(let de=0,ne;de<c.length;de++)if(ne=c[de],f==="strict"){if(Z===ne){M+=(M?" ":"")+i.replace("$1",q),ae=!0;break}}else{let ve=Z.indexOf(ne);if(-1<ve){M+=(M?" ":"")+q.substring(0,ve)+i.replace("$1",q.substring(ve,ve+ne.length))+q.substring(ve+ne.length),ae=!0;break}}ae||(M+=(M?" ":"")+j[U])}I[N].highlight=M}if(r)break}return n}function $l(t){let n=[],e=Re();for(let r=0,i,a;r<t.length;r++){i=t[r],a=i.result;for(let c=0,f,d,v;c<a.length;c++)d=a[c],typeof d!="object"&&(d={id:d}),f=d.id,(v=e[f])?v.push(i.field):(d.field=e[f]=[i.field],n.push(d))}return n}function Lg(t,n,e,r,i){if(t=this.tag.get(t),!t)return[];if((n=(t=t&&t.get(n))&&t.length-r)&&0<n)return(n>e||r)&&(t=t.slice(r,r+e)),i&&(t=kt.call(this,t)),t}function kt(t){if(!this||!this.store)return t;let n=Array(t.length);for(let e=0,r;e<t.length;e++)r=t[e],n[e]={id:r,doc:this.store.get(r)};return n}function un(t){if(!this||this.constructor!==un)return new un(t);let n=t.document||t.doc||t,e,r;if(this.F=[],this.field=[],this.J=[],this.key=(e=n.key||n.id)&&vo(e,this.J)||"id",(r=t.keystore||0)&&(this.keystore=r),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?r?new Xe(r):new Set:r?new st(r):new Map,this.C=(e=n.store||null)&&e&&e!==!0&&[],this.store=e&&(r?new st(r):new Map),this.cache=(e=t.cache||null)&&new cn(e),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=jg.call(this,t,n),this.tag=null,(e=n.tag)&&(typeof e=="string"&&(e=[e]),e.length)){this.tag=new Map,this.D=[],this.R=[];for(let i=0,a,c;i<e.length;i++){if(a=e[i],c=a.field||a,!c)throw Error("The tag field from the document descriptor is undefined.");a.custom?this.D[i]=a.custom:(this.D[i]=vo(c,this.J),a.filter&&(typeof this.D[i]=="string"&&(this.D[i]=new String(this.D[i])),this.D[i].I=a.filter)),this.R[i]=c,this.tag.set(c,new Map)}}if(this.worker){this.fastupdate=!1;let i=[];for(let a of this.index.values())a.then&&i.push(a);if(i.length){let a=this;return Promise.all(i).then(function(c){let f=new Map,d=0;for(let w of a.index.entries()){let C=w[0];var v=w[1];if(v.then){v=i[d].encoder||{};let I=f.get(v);I||(I=v.encode?v:new Kr(v),f.set(v,I)),v=c[d],v.encoder=I,a.index.set(C,v),d++}}return a})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}W=un.prototype;W.mount=function(t){let n=this.field;if(this.tag)for(let a=0,c;a<this.R.length;a++){c=this.R[a];var e=void 0;this.index.set(c,e=new at({},this.reg)),n===this.field&&(n=n.slice(0)),n.push(c),e.tag=this.tag.get(c)}e=[];let r={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let a=0,c,f;a<n.length;a++){r.field=f=n[a],c=this.index.get(f);let d=new t.constructor(t.id,r);d.id=t.id,e[a]=d.mount(c),c.document=!0,a?c.bypass=!0:c.store=this.store}let i=this;return this.db=Promise.all(e).then(function(){i.db=!0})};W.commit=async function(t,n){let e=[];for(let r of this.index.values())e.push(r.commit(t,n));await Promise.all(e),this.reg.clear()};W.destroy=function(){let t=[];for(let n of this.index.values())t.push(n.destroy());return Promise.all(t)};function jg(t,n){let e=new Map,r=n.index||n.field||n;qe(r)&&(r=[r]);for(let i=0,a,c;i<r.length;i++){if(a=r[i],qe(a)||(c=a,a=a.field),c=Gr(c)?Object.assign({},t,c):t,this.worker){let f=new Wr(c);f.encoder=c.encoder,e.set(a,f)}this.worker||e.set(a,new at(c,this.reg)),c.custom?this.F[i]=c.custom:(this.F[i]=vo(a,this.J),c.filter&&(typeof this.F[i]=="string"&&(this.F[i]=new String(this.F[i])),this.F[i].I=c.filter)),this.field[i]=a}if(this.C){t=n.store,qe(t)&&(t=[t]);for(let i=0,a,c;i<t.length;i++)a=t[i],c=a.field||a,a.custom?(this.C[i]=a.custom,a.custom.V=c):(this.C[i]=vo(c,this.J),a.filter&&(typeof this.C[i]=="string"&&(this.C[i]=new String(this.C[i])),this.C[i].I=a.filter))}return e}function vo(t,n){let e=t.split(":"),r=0;for(let i=0;i<e.length;i++)t=e[i],t[t.length-1]==="]"&&(t=t.substring(0,t.length-2))&&(n[r]=!0),t&&(e[r++]=t);return r<e.length&&(e.length=r),1<r?e:e[0]}W.append=function(t,n){return this.add(t,n,!0)};W.update=function(t,n){return this.remove(t).add(t,n)};W.remove=function(t){Gr(t)&&(t=Vr(t,this.key));for(var n of this.index.values())n.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let e of this.tag.values())for(let r of e){n=r[0];let i=r[1],a=i.indexOf(t);-1<a&&(1<i.length?i.splice(a,1):e.delete(n))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this};W.clear=function(){let t=[];for(let n of this.index.values()){let e=n.clear();e.then&&t.push(e)}if(this.tag)for(let n of this.tag.values())n.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this};W.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)};W.cleanup=function(){for(let t of this.index.values())t.cleanup();return this};W.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(n){return n[0]&&n[0].doc||null}):this.store.get(t)||null};W.set=function(t,n){return typeof t=="object"&&(n=t,t=Vr(n,this.key)),this.store.set(t,n),this};W.searchCache=ah;W.export=function(t,n,e=0,r=0){if(e<this.field.length){let c=this.field[e];if((n=this.index.get(c).export(t,c,e,r=1))&&n.then){let f=this;return n.then(function(){return f.export(t,c,e+1)})}return this.export(t,c,e+1)}let i,a;switch(r){case 0:i="reg",a=Yl(this.reg),n=null;break;case 1:i="tag",a=this.tag&&Xl(this.tag,this.reg.size),n=null;break;case 2:i="doc",a=this.store&&_a(this.store),n=null;break;default:return}return mo.call(this,t,n,i,a,e,r)};W.import=function(t,n){var e=t.split(".");e[e.length-1]==="json"&&e.pop();let r=2<e.length?e[0]:"";if(e=2<e.length?e[2]:e[1],this.worker&&r)return this.index.get(r).import(t);if(n){if(typeof n=="string"&&(n=JSON.parse(n)),r)return this.index.get(r).import(e,n);switch(e){case"reg":this.fastupdate=!1,this.reg=Ql(n,this.reg);for(let i=0,a;i<this.field.length;i++)a=this.index.get(this.field[i]),a.fastupdate=!1,a.reg=this.reg;if(this.worker){n=[];for(let i of this.index.values())n.push(i.import(t));return Promise.all(n)}break;case"tag":this.tag=Jl(n,this.tag);break;case"doc":this.store=Aa(n,this.store)}}};xa(un.prototype);function ah(t,n,e){let r=(typeof t=="object"?""+t.query:t).toLowerCase();this.cache||(this.cache=new cn);let i=this.cache.get(r);if(!i){if(i=this.search(t,n,e),i.then){let a=this;i.then(function(c){return a.cache.set(r,c),c})}this.cache.set(r,i)}return i}function cn(t){this.limit=t&&t!==!0?t:1e3,this.cache=new Map,this.h=""}cn.prototype.set=function(t,n){this.cache.set(this.h=t,n),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)};cn.prototype.get=function(t){let n=this.cache.get(t);return n&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,n)),n};cn.prototype.remove=function(t){for(let n of this.cache){let e=n[0];n[1].includes(t)&&this.cache.delete(e)}};cn.prototype.clear=function(){this.cache.clear(),this.h=""};var zl={normalize:!1,numeric:!1,dedupe:!1},fo={},Ea=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),Hl=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),Gl=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],Vl={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,\u00DF:2,d:3,t:3,l:4,m:5,n:5,r:6},Ug={Exact:zl,Default:fo,Normalize:fo,LatinBalance:{mapper:Ea},LatinAdvanced:{mapper:Ea,matcher:Hl,replacer:Gl},LatinExtra:{mapper:Ea,replacer:Gl.concat([/(?!^)[aeo]/g,""]),matcher:Hl},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let e=0;e<t.length;e++){var n=t[e];let r=n.charAt(0),i=Vl[r];for(let a=1,c;a<n.length&&(c=n.charAt(a),c==="h"||c==="w"||!(c=Vl[c])||c===i||(r+=c,i=c,r.length!==4));a++);t[e]=r}}},CJK:{split:""},LatinExact:zl,LatinDefault:fo,LatinSimple:fo};at.prototype.remove=function(t,n){let e=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(e){if(this.fastupdate){for(let r=0,i;r<e.length;r++)if(i=e[r])if(2>i.length)i.pop();else{let a=i.indexOf(t);a===e.length-1?i.pop():i.splice(a,1)}}else qr(this.map,t),this.depth&&qr(this.ctx,t);n||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.T&&uh(this)),this.cache&&this.cache.remove(t),this};function qr(t,n){let e=0;var r=typeof n>"u";if(t.constructor===Array){for(let i=0,a,c;i<t.length;i++)if((a=t[i])&&a.length)if(r)e++;else if(c=a.indexOf(n),0<=c){1<a.length?(a.splice(c,1),e++):delete t[i];break}else e++}else for(let i of t.entries()){r=i[0];let a=qr(i[1],n);a?e+=a:t.delete(r)}return e}var Fg={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};at.prototype.add=function(t,n,e,r){if(n&&(t||t===0)){if(!r&&!e&&this.reg.has(t))return this.update(t,n);r=this.depth,n=this.encoder.encode(n,!r);let v=n.length;if(v){let w=Re(),C=Re(),I=this.resolution;for(let N=0;N<v;N++){let M=n[this.rtl?v-1-N:N];var i=M.length;if(i&&(r||!C[M])){var a=this.score?this.score(n,M,N,null,0):po(I,v,N),c="";switch(this.tokenize){case"full":if(2<i){for(let j=0,U;j<i;j++)for(a=i;a>j;a--){c=M.substring(j,a),U=this.rtl?i-1-j:j;var f=this.score?this.score(n,M,N,c,U):po(I,v,N,i,U);Hr(this,C,c,f,t,e)}break}case"bidirectional":case"reverse":if(1<i){for(f=i-1;0<f;f--){c=M[this.rtl?i-1-f:f]+c;var d=this.score?this.score(n,M,N,c,f):po(I,v,N,i,f);Hr(this,C,c,d,t,e)}c=""}case"forward":if(1<i){for(f=0;f<i;f++)c+=M[this.rtl?i-1-f:f],Hr(this,C,c,a,t,e);break}default:if(Hr(this,C,M,a,t,e),r&&1<v&&N<v-1){for(i=Re(),c=this.U,a=M,f=Math.min(r+1,this.rtl?N+1:v-N),i[a]=1,d=1;d<f;d++)if((M=n[this.rtl?v-1-N-d:N+d])&&!i[M]){i[M]=1;let j=this.score?this.score(n,a,N,M,d-1):po(c+(v/2>c?0:1),v,N,f-1,d-1),U=this.bidirectional&&M>a;Hr(this,w,U?a:M,j,t,e,U?M:a)}}}}}this.fastupdate||this.reg.add(t)}else n=""}return this.db&&(n||this.commit_task.push({del:t}),this.T&&uh(this)),this};function Hr(t,n,e,r,i,a,c){let f=c?t.ctx:t.map,d;if((!n[e]||c&&!(d=n[e])[c])&&(c?(n=d||(n[e]=Re()),n[c]=1,(d=f.get(c))?f=d:f.set(c,f=new Map)):n[e]=1,(d=f.get(e))?f=d:f.set(e,f=d=[]),f=f[r]||(f[r]=[]),!a||!f.includes(i))){if(f.length===2**31-1){if(n=new an(f),t.fastupdate)for(let v of t.reg.values())v.includes(f)&&(v[v.indexOf(f)]=n);d[r]=f=n}f.push(i),t.fastupdate&&((r=t.reg.get(i))?r.push(f):t.reg.set(i,[f]))}}function po(t,n,e,r,i){return e&&1<t?n+(r||0)<=t?e+(i||0):(t-1)/(n+(r||0))*(e+(i||0))+1|0:0}at.prototype.search=function(t,n,e){e||(n||typeof t!="object"?typeof n=="object"&&(e=n,n=0):(e=t,t=""));let r=[],i,a,c,f=0,d,v,w,C,I;e?(t=e.query||t,n=e.limit||n,f=e.offset||0,a=e.context,c=e.suggest,I=(d=e.resolve!==!1)&&e.enrich,w=e.boost,C=e.resolution,v=this.db&&e.tag):d=this.resolve,a=this.depth&&a!==!1;let N=this.encoder.encode(t,!a);if(i=N.length,n=n||(d?100:0),i===1)return Wl.call(this,N[0],"",n,f,d,I,v);if(i===2&&a&&!c)return Wl.call(this,N[1],N[0],n,f,d,I,v);let M=Re(),j=0,U;if(a&&(U=N[0],j=1),C||C===0||(C=U?this.U:this.resolution),this.db){if(this.db.search&&(t=this.db.search(this,N,n,f,c,d,I,v),t!==!1))return t;let q=this;return async function(){for(let Z,ae;j<i;j++){if((ae=N[j])&&!M[ae]){if(M[ae]=1,Z=await Ca(q,ae,U,0,0,!1,!1),Z=ql(Z,r,c,C)){r=Z;break}U&&(c&&Z&&r.length||(U=ae))}c&&U&&j===i-1&&!r.length&&(C=q.resolution,U="",j=-1,M=Re())}return Kl(r,C,n,f,c,w,d)}()}for(let q,Z;j<i;j++){if((Z=N[j])&&!M[Z]){if(M[Z]=1,q=Ca(this,Z,U,0,0,!1,!1),q=ql(q,r,c,C)){r=q;break}U&&(c&&q&&r.length||(U=Z))}c&&U&&j===i-1&&!r.length&&(C=this.resolution,U="",j=-1,M=Re())}return Kl(r,C,n,f,c,w,d)};function Kl(t,n,e,r,i,a,c){let f=t.length,d=t;if(1<f)d=th(t,n,e,r,i,a,c);else if(f===1)return c?Oa.call(null,t[0],e,r):new we(t[0]);return c?d:new we(d)}function Wl(t,n,e,r,i,a,c){return t=Ca(this,t,n,e,r,i,a,c),this.db?t.then(function(f){return i?f||[]:new we(f)}):t&&t.length?i?Oa.call(this,t,e,r):new we(t):i?[]:new we}function ql(t,n,e,r){let i=[];if(t&&t.length){if(t.length<=r){n.push(t);return}for(let a=0,c;a<r;a++)(c=t[a])&&(i[a]=c);if(i.length){n.push(i);return}}if(!e)return i}function Ca(t,n,e,r,i,a,c,f){let d;return e&&(d=t.bidirectional&&n>e)&&(d=e,e=n,n=d),t.db?t.db.get(n,e,r,i,a,c,f):(t=e?(t=t.ctx.get(e))&&t.get(n):t.map.get(n),t)}function at(t,n){if(!this||this.constructor!==at)return new at(t);if(t){var e=qe(t)?t:t.preset;e&&(t=Object.assign({},Fg[e],t))}else t={};e=t.context;let r=e===!0?{depth:1}:e||{},i=qe(t.encoder)?Ug[t.encoder]:t.encode||t.encoder||{};this.encoder=i.encode?i:typeof i=="object"?new Kr(i):{encode:i},this.resolution=t.resolution||9,this.tokenize=e=(e=t.tokenize)&&e!=="default"&&e!=="exact"&&e||"strict",this.depth=e==="strict"&&r.depth||0,this.bidirectional=r.bidirectional!==!1,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(e=t.keystore||0)&&(this.keystore=e),this.map=e?new st(e):new Map,this.ctx=e?new st(e):new Map,this.reg=n||(this.fastupdate?e?new st(e):new Map:e?new Xe(e):new Set),this.U=r.resolution||3,this.rtl=i.rtl||t.rtl||!1,this.cache=(e=t.cache||null)&&new cn(e),this.resolve=t.resolve!==!1,(e=t.db)&&(this.db=this.mount(e)),this.T=t.commit!==!1,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}W=at.prototype;W.mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)};W.commit=function(t,n){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this,t,n)};W.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()};function uh(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t,void 0,void 0)},1))}W.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db&&(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[{clear:!0}]),this};W.append=function(t,n){return this.add(t,n,!0)};W.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)};W.update=function(t,n){let e=this,r=this.remove(t);return r&&r.then?r.then(()=>e.add(t,n)):this.add(t,n)};W.cleanup=function(){return this.fastupdate?(qr(this.map),this.depth&&qr(this.ctx),this):this};W.searchCache=ah;W.export=function(t,n,e=0,r=0){let i,a;switch(r){case 0:i="reg",a=Yl(this.reg);break;case 1:i="cfg",a=null;break;case 2:i="map",a=_a(this.map,this.reg.size);break;case 3:i="ctx",a=Xl(this.ctx,this.reg.size);break;default:return}return mo.call(this,t,n,i,a,e,r)};W.import=function(t,n){if(n)switch(typeof n=="string"&&(n=JSON.parse(n)),t=t.split("."),t[t.length-1]==="json"&&t.pop(),t.length===3&&t.shift(),t=1<t.length?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=Ql(n,this.reg);break;case"map":this.map=Aa(n,this.map);break;case"ctx":this.ctx=Jl(n,this.ctx)}};W.serialize=function(t=!0){let n="",e="",r="";if(this.reg.size){let a;for(var i of this.reg.keys())a||(a=typeof i),n+=(n?",":"")+(a==="string"?'"'+i+'"':i);n="index.reg=new Set(["+n+"]);",e=Fl(this.map,a),e="index.map=new Map(["+e+"]);";for(let c of this.ctx.entries()){i=c[0];let f=Fl(c[1],a);f="new Map(["+f+"])",f='["'+i+'",'+f+"]",r+=(r?",":"")+f}r="index.ctx=new Map(["+r+"]);"}return t?"function inject(index){"+n+e+r+"}":n+e+r};xa(at.prototype);var ch=typeof window<"u"&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),yo=["map","ctx","tag","reg","cfg"],on=Re();function Ia(t,n={}){if(!this||this.constructor!==Ia)return new Ia(t,n);typeof t=="object"&&(n=t,t=t.name),t||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(t?":"+t.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=n.field?n.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=n.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}W=Ia.prototype;W.mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())};W.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist(),on[t.id]||(on[t.id]=[]),on[t.id].push(t.field);let n=ch.open(t.id,1);return n.onupgradeneeded=function(){let e=t.db=this.result;for(let r=0,i;r<yo.length;r++){i=yo[r];for(let a=0,c;a<on[t.id].length;a++)c=on[t.id][a],e.objectStoreNames.contains(i+(i!=="reg"&&c?":"+c:""))||e.createObjectStore(i+(i!=="reg"&&c?":"+c:""))}},t.db=Lt(n,function(e){t.db=e,t.db.onversionchange=function(){t.close()}})};W.close=function(){this.db&&this.db.close(),this.db=null};W.destroy=function(){let t=ch.deleteDatabase(this.id);return Lt(t)};W.clear=function(){let t=[];for(let e=0,r;e<yo.length;e++){r=yo[e];for(let i=0,a;i<on[this.id].length;i++)a=on[this.id][i],t.push(r+(r!=="reg"&&a?":"+a:""))}let n=this.db.transaction(t,"readwrite");for(let e=0;e<t.length;e++)n.objectStore(t[e]).clear();return Lt(n)};W.get=function(t,n,e=0,r=0,i=!0,a=!1){t=this.db.transaction((n?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((n?"ctx":"map")+(this.field?":"+this.field:"")).get(n?n+":"+t:t);let c=this;return Lt(t).then(function(f){let d=[];if(!f||!f.length)return d;if(i){if(!e&&!r&&f.length===1)return f[0];for(let v=0,w;v<f.length;v++)if((w=f[v])&&w.length){if(r>=w.length){r-=w.length;continue}let C=e?r+Math.min(w.length-r,e):w.length;for(let I=r;I<C;I++)d.push(w[I]);if(r=0,d.length===e)break}return a?c.enrich(d):d}return f})};W.tag=function(t,n=0,e=0,r=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);let i=this;return Lt(t).then(function(a){return!a||!a.length||e>=a.length?[]:!n&&!e?a:(a=a.slice(e,e+n),r?i.enrich(a):a)})};W.enrich=function(t){typeof t!="object"&&(t=[t]);let n=this.db.transaction("reg","readonly").objectStore("reg"),e=[];for(let r=0;r<t.length;r++)e[r]=Lt(n.get(t[r]));return Promise.all(e).then(function(r){for(let i=0;i<r.length;i++)r[i]={id:t[i],doc:r[i]?JSON.parse(r[i]):null};return r})};W.has=function(t){return t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t),Lt(t).then(function(n){return!!n})};W.search=null;W.info=function(){};W.transaction=function(t,n,e){t+=t!=="reg"&&this.field?":"+this.field:"";let r=this.h[t+":"+n];if(r)return e.call(this,r);let i=this.db.transaction(t,n);this.h[t+":"+n]=r=i.objectStore(t);let a=e.call(this,r);return this.h[t+":"+n]=null,Lt(i).finally(function(){return i=r=null,a})};W.commit=async function(t,n,e){if(n)await this.clear(),t.commit_task=[];else{let r=t.commit_task;t.commit_task=[];for(let i=0,a;i<r.length;i++)if(a=r[i],a.clear){await this.clear(),n=!0;break}else r[i]=a.del;n||(e||(r=r.concat(Tg(t.reg))),r.length&&await this.remove(r))}t.reg.size&&(await this.transaction("map","readwrite",function(r){for(let i of t.map){let a=i[0],c=i[1];c.length&&(n?r.put(c,a):r.get(a).onsuccess=function(){let f=this.result;var d;if(f&&f.length){let v=Math.max(f.length,c.length);for(let w=0,C,I;w<v;w++)if((I=c[w])&&I.length){if((C=f[w])&&C.length)for(d=0;d<I.length;d++)C.push(I[d]);else f[w]=I;d=1}}else f=c,d=1;d&&r.put(f,a)})}}),await this.transaction("ctx","readwrite",function(r){for(let i of t.ctx){let a=i[0],c=i[1];for(let f of c){let d=f[0],v=f[1];v.length&&(n?r.put(v,a+":"+d):r.get(a+":"+d).onsuccess=function(){let w=this.result;var C;if(w&&w.length){let I=Math.max(w.length,v.length);for(let N=0,M,j;N<I;N++)if((j=v[N])&&j.length){if((M=w[N])&&M.length)for(C=0;C<j.length;C++)M.push(j[C]);else w[N]=j;C=1}}else w=v,C=1;C&&r.put(w,a+":"+d)})}}}),t.store?await this.transaction("reg","readwrite",function(r){for(let i of t.store){let a=i[0],c=i[1];r.put(typeof c=="object"?JSON.stringify(c):1,a)}}):t.bypass||await this.transaction("reg","readwrite",function(r){for(let i of t.reg.keys())r.put(1,i)}),t.tag&&await this.transaction("tag","readwrite",function(r){for(let i of t.tag){let a=i[0],c=i[1];c.length&&(r.get(a).onsuccess=function(){let f=this.result;f=f&&f.length?f.concat(c):c,r.put(f,a)})}}),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())};function Ra(t,n,e){let r=t.value,i,a=0;for(let c=0,f;c<r.length;c++){if(f=e?r:r[c]){for(let d=0,v,w;d<n.length;d++)if(w=n[d],v=f.indexOf(w),0<=v)if(i=1,1<f.length)f.splice(v,1);else{r[c]=[];break}a+=f.length}if(e)break}a?i&&t.update(r):t.delete(),t.continue()}W.remove=function(t){return typeof t!="object"&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(n){n.openCursor().onsuccess=function(){let e=this.result;e&&Ra(e,t)}}),this.transaction("ctx","readwrite",function(n){n.openCursor().onsuccess=function(){let e=this.result;e&&Ra(e,t)}}),this.transaction("tag","readwrite",function(n){n.openCursor().onsuccess=function(){let e=this.result;e&&Ra(e,t,!0)}}),this.transaction("reg","readwrite",function(n){for(let e=0;e<t.length;e++)n.delete(t[e])})])};function Lt(t,n){return new Promise((e,r)=>{t.onsuccess=t.oncomplete=function(){n&&n(this.result),n=null,e(this.result)},t.onerror=t.onblocked=r,t=null})}var lh=un;var Eo=class t{constructor(){}indices={};async initIndex(n,e,r){console.log(`FlexsearchIndexService: Initializing index for ${e}`,{fields:r}),this.indices[e]=this.createIndex(r),console.log(`FlexsearchIndexService: Index created for ${e}`)}async search(n,e,r){let i=this.indices[n];if(i){console.log(`FlexsearchIndexService: Searching in ${n} for "${e}"`);let a=await i.searchAsync(e,G({limit:10,enrich:!0},r));return console.log(`FlexsearchIndexService: Search results for ${n}`,{index:i,query:e,results:a,resultsCount:Array.isArray(a)?a.length:"unknown",flatResults:a.flatMap(c=>G({},c))}),a.flatMap(c=>G({},c))}console.warn(`FlexsearchIndexService: No index found for table ${n}`)}getIndex(n){let e=this.indices[n];return console.log(`FlexsearchIndexService: Getting index for ${n}`,{exists:!!e}),e}async addToIndex(n,e){let r=this.indices[n];r?(r.add(e),console.log(`FlexsearchIndexService: Added record to index ${n}`,{uuid:e.uuid,record:e})):console.warn(`FlexsearchIndexService: No index found for table ${n}`)}async importIndex(n,e){try{let r=this.indices[n];if(!e||e.trim()===""){console.warn(`FlexsearchIndexService: Empty index data for table ${n}`);return}let i=JSON.parse(e);if(console.log(`FlexsearchIndexService: Importing index for ${n}`,{chunksCount:i?.length}),r&&i&&i.length>0){for(let a of i)await r.import(a.key,a.data);console.log(`FlexsearchIndexService: Successfully imported index for ${n}`)}else console.warn(`FlexsearchIndexService: No index or data for import in ${n}`)}catch(r){throw console.error(`FlexsearchIndexService: Error importing index for table ${n}:`,r),new Error(`Error importing index for table ${n}: ${r}`)}}async exportIndex(n){let e=this.indices[n];if(!e)throw new Error(`No index found for table ${n}`);let r=[];return await e.export((i,a)=>{r.push({key:i.toString(),data:a})}),console.log(`FlexsearchIndexService: Exported index for ${n}`,{chunksCount:r.length,dataLength:JSON.stringify(r).length}),r.length===0?(console.warn(`FlexsearchIndexService: No data to export for table ${n}`),""):JSON.stringify(r)}async removeFromIndex(n,e){let r=this.indices[n];if(r)if(Array.isArray(e)){for(let i of e)r.remove(i);console.log(`FlexsearchIndexService: Removed ${e.length} records from index ${n}`)}else r.remove(e),console.log(`FlexsearchIndexService: Removed record from index ${n}`,{uuid:e.uuid});else console.warn(`FlexsearchIndexService: No index found for table ${n} when removing record`)}async clearIndex(n){this.indices[n]?(delete this.indices[n],console.log(`FlexsearchIndexService: Cleared index for ${n}`)):console.warn(`FlexsearchIndexService: No index found for table ${n} when clearing`)}async removeIndex(n){this.indices[n]?(delete this.indices[n],console.log(`FlexsearchIndexService: Removed index for ${n}`)):console.warn(`FlexsearchIndexService: No index found for table ${n} when removing`)}createIndex(n){console.log("FlexsearchIndexService: Creating index with fields:",n);let e=new lh({tokenize:"forward",cache:!0,document:{id:"uuid",index:n}});return console.log("FlexsearchIndexService: Index created successfully"),e}static \u0275fac=function(e){return new(e||t)};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ro=class{canHandle(n,e){return n==="documentation"&&e.some(r=>r.key==="data"&&Array.isArray(r.value))}transform(n){let e=n.find(r=>r.key==="data");return e?.value?e.value.map(r=>({uuid:r.path,title:r.title||"",html:r.html||"",path:r.path||"",language:r.language||"en",name:r.name||""})):[]}getName(){return"DocumentationIndexHandler"}};var So=class{canHandle(n,e){return!0}transform(n){return n}getName(){return"DefaultIndexHandler"}};var bo=class t{constructor(){this.initializeHandlers()}logger=V(Gn).withContext({color:"#ff6b6b",label:"IndexHandlers"});handlers={};defaultHandler;registerHandler(n,e){this.handlers[n]=e,this.logger.log(`Registered handler for table: ${n}`,{handler:e.getName()})}transformData(n,e){let r=performance.now(),i=this.getHandler(n,e),a=i.transform(e),c=performance.now();return this.logger.log(`Transformed data for table: ${n}`,{handler:i.getName(),originalCount:e.length,transformedCount:a.length,timeMs:(c-r).toFixed(2)}),{table:n,data:a,handlerName:i.getName()}}getRegisteredHandlers(){return Object.keys(this.handlers)}hasSpecificHandler(n){return n in this.handlers}initializeHandlers(){this.registerHandler("documentation",new Ro),this.defaultHandler=new So,this.logger.log("Index handlers initialized",{handlers:Object.keys(this.handlers),defaultHandler:this.defaultHandler.getName()})}getHandler(n,e){let r=this.handlers[n];return r&&r.canHandle(n,e)?r:this.defaultHandler}static \u0275fac=function(e){return new(e||t)};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})};var hh=class t extends Nl{constructor(e,r,i){super(i);this.flexsearchIndexService=e;this.indexHandlersManager=r;let a=new Set;for(let c of Ll){if(a.has(c.version))throw new Error(`Duplicate migration version: ${c.version}`);a.add(c.version);let f=this.version(c.version).stores(c.schema);c.update&&f.upgrade(c.update),this.logger.log(`Migration ${c.version} applied`)}}_loggerClass=V(Gn);logger=this._loggerClass.withContext({color:"#7f81fb",label:"IndexDB"});cacheLogger=this._loggerClass.withContext({color:"#7fc3fb",label:"IndexDB:Cache"});indexLogger=this._loggerClass.withContext({color:"#7fdb7f",label:"IndexDB:Index"});_cache=new Map;#e={invoices:["uuid","name","prefix","invoice_number","credential_from_string","credential_to_string","full_invoice_number","searchable_text"],documentation:["title","html","path","language","name"]};async initIndexes(){try{let e=["productsStore","recipesStore","categoryProductsStore","categoryRecipesStore","tags","taxes","documentation","settings","invoices","credentials"];for(let r of e)await this.initIndex(r);this.logger.log("All indexes initialized successfully")}catch(e){this.logger.error("Error initializing indexes:",e)}}async initIndex(e){try{this.indexLogger.log(`Initializing index for table: ${e}`),await this.flexsearchIndexService.initIndex(this.getStore(e),e,this.#e[e]||["name","uuid"]);let r=await this.getOne("indicesStore",e);if(r)this.indexLogger.log(`Importing existing index for table: ${e}`),await this.flexsearchIndexService.importIndex(e,r.indexData);else{this.indexLogger.log(`Creating new index for table: ${e}`);let i=await this.getAll(e);if(this.indexLogger.log(`Found ${i.length} items in table: ${e}`,{data:i.slice(0,2)}),i.length>0){let a=this.indexHandlersManager.transformData(e,i);for(let c of a.data)await this.flexsearchIndexService.addToIndex(e,c);if(this.indexLogger.log(`Indexed ${a.data.length} items for ${e}`,{handler:a.handlerName}),a.data.length>0)try{await this.saveIndex(e)}catch(c){this.indexLogger.error(`Error saving index for table ${e}:`,c)}else this.indexLogger.log(`No data to index for table: ${e}, skipping save`)}else this.indexLogger.log(`No data found for table: ${e}, skipping index creation`)}}catch(r){this.indexLogger.error(`Error initializing index for table ${e}:`,r)}}async saveIndex(e){try{if(this.flexsearchIndexService.getIndex(e)){let i=await this.flexsearchIndexService.exportIndex(e);if(i&&i.length>0){this.indexLogger.log(e,"Saving index data:",{dataLength:i.length,dataPreview:i.substring(0,100)});let a={table:e,indexData:i};await this.replaceData("indicesStore",e,a),this.indexLogger.log(e,"Index data saved successfully",{newData:a})}else{this.indexLogger.warn(e,"No data to save for index");try{await this.remove("indicesStore",e)}catch{}}}else{this.indexLogger.error("No index data found for table:",e);return}}catch(r){this.indexLogger.error("Error saving index:",r)}}async getOne(e,r,i=!0){if(i){let c=this._getCache(e,r);if(c)return this.cacheLogger.log(e,"Got one item from cache:",{uuid:r,cache:c}),c}let a=await this[e].get(r);return this.logger.log(e,"Got one item from store:",{response:a}),i&&this._putCache(e,r,a),a}async getOneWithRelations(e,r){let i=await this.getOne(e,r,!1);if(!i)return Promise.resolve({data:null,relations:{}});let a={},c=await this._collectRelations(i,a);return this._putRelationsInto(i,c),this.logger.log(e,"Got one item from store with all relations:",{item:i,relations:a}),{data:i,relations:a}}async getMany(e,r){let a=await this[e].where("uuid").anyOf(r).toArray();return this.logger.log(e,"Got many:",{result:a}),a}async getManyWithRelations(e,r){let a=await this[e].where("uuid").anyOf(r).toArray(),c={};for(let f of a){let d=await this._collectRelations(f,c);this._putRelationsInto(f,d)}return{data:a,relations:c}}async getAll(e){return this[e].toArray()}async getAllWithRelations(e){let r=await this.getAll(e),i={};for(let a of r){let c=await this._collectRelations(a,i);this._putRelationsInto(a,c)}return{data:r,relations:i}}async addData(e,r,i){try{let a=i||this._generateUuid(),c=Ie(G({},r),{uuid:a});if(await this[e].put(c),e==="indicesStore")return a;await this.flexsearchIndexService.addToIndex(e,c);try{await this.saveIndex(e)}catch(f){this.logger.error(`Error saving index for ${e}:`,f)}return this._putCache(e,a,r),a}catch(a){throw a}}async replaceData(e,r,i){let a=Ie(G({},i),{uuid:r}),c=this._getCache(e,r);if(c&&(this.cacheLogger.log(e,"Flushing cache for item:",{uuid:r,cache:c}),this._removeCache(e,r)),await this[e].put(a),e!=="indicesStore"){await this.flexsearchIndexService.addToIndex(e,a);try{await this.saveIndex(e)}catch(f){this.logger.error(`Error saving index for ${e}:`,f)}this._putCache(e,r,i)}}async replaceManyData(e,r){let i=r.map(a=>Ie(G({},a),{uuid:a.uuid||this._generateUuid()}));if(await this[e].bulkPut(i),e!=="indicesStore"){for(let a of i)await this.flexsearchIndexService.addToIndex(e,a),this._putCache(e,a.uuid,a);if(i.length>0)try{await this.saveIndex(e)}catch(a){this.logger.error(`Error saving index for ${e}:`,a)}}}async search(e,r,i){let a=await this[e].where(r).equals(i).toArray();return this.logger.log(e,"Search result:",{indexField:r,value:i,result:a}),a}async filter(e,r,i,a=!1){return this[e].filter(c=>a?c[r]===i:c[r]?.toLowerCase().includes(i.toLowerCase())).toArray()}getStore(e){return this[e]}async getLength(e){return this[e].count()}async remove(e,r){let i=this._getCache(e,r);if(await this[e].delete(r),e!=="indicesStore"){i&&(this.cacheLogger.log(e,"Flushing cache for item:",{uuid:r,cache:i}),this._removeCache(e,r)),await this.flexsearchIndexService.removeFromIndex(e,r);try{await this.saveIndex(e)}catch(a){this.logger.error(`Error saving index for ${e}:`,a)}}}async removeMany(e,r){if(await this[e].bulkDelete(r),e!=="indicesStore"){for(let i of r)this._removeCache(e,i);if(await this.flexsearchIndexService.removeFromIndex(e,r),r.length>0)try{await this.saveIndex(e)}catch(i){this.logger.error(`Error saving index for ${e}:`,i)}}}async clear(e){await this[e].clear(),this._dropCache(e),e!=="indicesStore"&&await this._resetIndex(e)}async balkAdd(e,r,i=!0){this.logger.log(`Bulk adding ${r.length} items to ${e}`,{autoUUID:i});let a=r.map(c=>Ie(G({},c),{uuid:i?this._generateUuid():c.uuid||this._generateUuid()}));if(await this[e].bulkPut(a),e!=="indicesStore"){this.logger.log(`Adding ${a.length} items to index for ${e}`);for(let c of a)await this.flexsearchIndexService.addToIndex(e,c),this._putCache(e,c.uuid,c);if(a.length>0)try{await this.saveIndex(e)}catch(c){this.logger.error(`Error saving index for ${e}:`,c)}this.logger.log(`Successfully bulk added ${a.length} items to ${e}`)}}async uniqueKeys(e,r){return this[e].orderBy(r).uniqueKeys()}async getVersion(){return this.idbdb.version}async restoreAllData(e){let r=Object.values(rn).filter(i=>i!=="indicesStore");for(let i of r){let a=e.find(c=>c.store===i);a&&(await this.clear(i),await this.balkAdd(i,a.data,!1))}try{await this.initIndexes()}catch(i){this.logger.error("Error initializing indexes after restore:",i)}}async flushCache(){this._cache.clear(),await this.clear("indicesStore"),this.cacheLogger.log("Cache flushed")}async _collectRelations(e,r={}){let i=Object.entries(e??{});for(let[a,c]of i)if(Array.isArray(c))for(let f of e[a]){let d=await this._collectRelations(f,r)}else{let f=ya[a];if(f&&c){let{tableName:d,key:v}=this._parseRelations(f),w=await this.getOneWithRelations(d,c),C={[c]:w.data};r[a]=G(G({},r[a]||{}),C)}}return r}_putRelationsInto(e,r={}){let i=Object.entries(e??{});for(let[a,c]of i)if(Array.isArray(c))for(let f of e[a])this._putRelationsInto(f,r);else{let f=r[a];if(!ya[a])continue;e[a]=f?.[e[a]]}}_generateUuid(){return gc()}async _resetIndex(e){await this.flexsearchIndexService.clearIndex(e)}_putCache(e,r,i){if(e==="indicesStore")return;this._cache.has(e)||this._cache.set(e,new Map);let a=this._cache.get(e);a?(a.set(r,i),this.cacheLogger.log(e,"Put item in cache:",{uuid:r,value:i})):this.cacheLogger.warn(e,"Cache not initialized for store:",e)}_getCache(e,r){let i=this._cache.get(e);if(i?.has(r))return this.cacheLogger.log(e,"Got item from cache:",{uuid:r}),i.get(r);this.cacheLogger.warn(e,"Item not found in cache:",{uuid:r})}_removeCache(e,r){let i=this._cache.get(e);i&&i.has(r)&&(i.delete(r),this.cacheLogger.log(e,"Removed item from cache:",{uuid:r}))}_dropCache(e){this._cache.has(e)?(this._cache.delete(e),this.cacheLogger.log(e,"Cache dropped for store:",e)):this.cacheLogger.warn(e,"Cache not found for store:",e)}_parseRelations(e){let[r,i]=e.split(".");return{tableName:r,key:i}}static \u0275fac=function(r){return new(r||t)(te(Eo),te(bo),te(Pl))};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})};export{$s as a,od as b,br as c,Mc as d,Pd as e,hv as f,jd as g,Mt as h,He as i,rt as j,kn as k,Wi as l,gt as m,la as n,jn as o,Hn as p,co as q,dg as r,mg as s,wg as t,rn as u,Fy as v,Pl as w,Ol as x,Dl as y,Gn as z,Eo as A,hh as B,Ny as C};
