import{a as Se,b as Re}from"./chunk-BHIWAIVW.js";import{a as He}from"./chunk-YZ2LZRC6.js";import{a as qe}from"./chunk-22YBPVIV.js";import"./chunk-MTXPURWW.js";import"./chunk-I3ATFEPW.js";import{a as Ve,b as je}from"./chunk-F56BMA2L.js";import{a as ze}from"./chunk-SCFN6F3R.js";import{a as q}from"./chunk-3QIAGCJF.js";import{a as Ie}from"./chunk-UJQWE6GX.js";import{f as Qe}from"./chunk-X5RNHUB6.js";import{a as Ue}from"./chunk-BRBPHBEH.js";import{a as J,b as K,c as Je}from"./chunk-IP4PHEBX.js";import{a as $e}from"./chunk-OW4OSQWU.js";import{a as We}from"./chunk-6FEXET2L.js";import{a as U,g as Q,h as Me,i as ae,j as I,k as De,n as Ne,o as ke,p as Be,q as Oe,r as Pe,s as Ge,t as Le}from"./chunk-TP72K2HT.js";import{a as $}from"./chunk-C3YIVVSQ.js";import{a as Ae,b as Fe,c as H}from"./chunk-UYEJDPNH.js";import"./chunk-VPC2COZP.js";import"./chunk-YSLWWUVN.js";import{a as Ee}from"./chunk-LVIA722N.js";import{a as W}from"./chunk-2ZEJWSE3.js";import"./chunk-SNDQO5FA.js";import{o as ye,s as be}from"./chunk-B3CZXN5N.js";import{f as ve,h as we,k as j}from"./chunk-IZT3LVRQ.js";import{$b as L,Ab as a,Bb as r,Cb as E,Db as de,Eb as _e,Fb as F,Gb as b,Jb as w,Kb as m,Lb as O,Mb as P,Ta as o,Tb as xe,Ub as Ce,Vb as y,Wb as p,Xb as S,Ya as D,Yb as f,_b as G,ac as z,bb as R,bc as ge,db as ce,ec as fe,fa as u,ga as d,gb as v,hc as C,ia as re,jc as g,kc as N,ma as h,nb as pe,ob as c,pb as me,qb as se,qc as Te,rb as A,rc as te,ub as _,uc as ne,vb as x,vc as ie,wb as ue,wc as he,yb as k,zb as B,zc as oe}from"./chunk-PNZYYIKS.js";import"./chunk-DELOOZDJ.js";import"./chunk-2WH2EVR6.js";var Ye=["*"],X=class t{constructor(){}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=R({type:t,selectors:[["lg-table-card"]],ngContentSelectors:Ye,decls:4,vars:1,consts:[[3,"flat"],[1,"table"],[1,"table__scroll"]],template:function(e,i){e&1&&(O(),a(0,"lg-card",0)(1,"div",1)(2,"div",2),P(3),r()()()),e&2&&c("flat",!0)},dependencies:[Fe],styles:[`:host{display:flex;width:100%}.table__scroll{overflow-x:auto}table{width:100%;border-collapse:collapse;--border-color: #efefef}table thead tr{border-bottom:1px solid var(--border-color)}table thead th{text-align:left;padding:16px 24px;opacity:.4;font-size:.8em}table tbody tr{border-bottom:1px solid var(--border-color)}table tbody tr:last-child{border-bottom:none}td{padding:16px 24px}
`],encapsulation:2})};var Z=class t{constructor(){}selfAlign="center";static \u0275fac=function(e){return new(e||t)};static \u0275dir=ce({type:t,selectors:[["","lgSelfCenter",""]],hostVars:2,hostBindings:function(e,i){e&2&&me("align-self",i.selfAlign)}})};var et=(t,n)=>n.value.name&&n.value.amount;function tt(t,n){if(t&1){let e=b();a(0,"section",6)(1,"div",7)(2,"lg-gap-row",8)(3,"small"),p(4,"Apply for all"),r(),a(5,"lg-control",9),E(6,"lg-input",10),r(),a(7,"lg-control",9),E(8,"lg-textarea",11),r(),a(9,"lg-control",9)(10,"lg-number-input",12),w("onInputChange",function(){u(e);let l=m().$index,s=m();return d(s.onTaxValueChange(l))}),r()(),a(11,"lg-control",9)(12,"lg-checkbox",13),w("onCheckboxChanged",function(){u(e);let l=m().$index,s=m();return d(s.onTaxValueChange(l))}),r()(),a(13,"lg-control",9),E(14,"lg-number-input",14),r(),a(15,"lg-button",15),w("click",function(){u(e);let l=m().$index,s=m();return d(s.deleteTxRow(l))}),E(16,"mat-icon",16),r()()()()}if(t&2){let e=m().$index;c("formGroupName",e),o(),se("taxes__row--odd",e%2!==0),o(),c("bottom",!0)("fit",!0),o(3),c("label","Name"),o(),c("placeholder","Name"),o(),c("label","Description"),o(),c("rows",3)("placeholder","Description"),o(),c("label","Value"),o(),c("placeholder","Value"),o(),c("label","Use percentage"),o(),c("customMark","%"),o(),c("label","Amount"),o(),c("disable",!0)("placeholder","Amount"),o(),A("danger"),c("size","tiny")("icon",!0)}}function nt(t,n){t&1&&v(0,tt,17,21,"ng-template",2)}var V=class t{constructor(){}totalTaxesChanged=ne();taxesChanged=ne();rows=ie([]);total=ie(0);taxesForm=new ae({rows:new Pe([this._getRowGroup()])});rowsEffect=te(()=>{this._rowsFormArray.clear(),this.rows().forEach((n,e)=>{this._rowsFormArray.push(this._getRowGroup(n))}),this.taxesForm.updateValueAndValidity(),this._recalculateTaxes()});totalTaxes=h(0);totalEffect=te(()=>{this._recalculateTaxes()});formValues=this.taxesForm.valueChanges.pipe(q());get _rowsFormArray(){return this.taxesForm.get("rows")}ngOnInit(){this.formValues.subscribe(n=>{this.totalTaxes.set(this._getTotalTaxes()),this.totalTaxesChanged.emit(this.totalTaxes()),this.taxesChanged.emit(this.taxesForm.value.rows)})}onTaxValueChange(n){let e=this._rowsFormArray.at(n),i=this._getAmount(e.value.value,e.value.percentage);e.get("amount")?.patchValue(i.toFixed(2))}deleteTxRow(n){this._rowsFormArray.removeAt(n)}addTxRow(){this._rowsFormArray.push(this._getRowGroup())}_getTotalTaxes(){return this._rowsFormArray.controls.reduce((n,e)=>{let i=parseFloat(e.get("amount")?.value);return n+(isNaN(i)?0:i)},0)}_getAmount(n,e){let i=parseFloat(n.toString());return e?i*this.total():i}_recalculateTaxes(n=!1){this._rowsFormArray.controls.forEach((e,i)=>{let l=this._getAmount(e.get("value")?.value,e.get("percentage")?.value);e.get("amount")?.patchValue(l.toFixed(2),{emitEvent:!n})})}_getRowGroup(n=null){return new ae({name:new I(n?.name||""),description:new I(n?.description||""),value:new I(n?.value||0),amount:new I(0),percentage:new I(n?.percentage||!1)})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=R({type:t,selectors:[["lg-taxes-and-fees-list"]],inputs:{rows:[1,"rows"],total:[1,"total"]},outputs:{totalTaxesChanged:"totalTaxesChanged",taxesChanged:"taxesChanged"},decls:19,vars:19,consts:[[3,"formGroup"],["formArrayName","rows"],["lgCardListItem",""],["lgSelfCenter","","lgShrink","",3,"click"],[3,"level"],[3,"center","mobileMode","relaxed"],[1,"taxes",3,"formGroupName"],[1,"taxes__row"],[3,"bottom","fit"],[3,"label"],["formControlName","name",3,"placeholder"],["formControlName","description",3,"rows","placeholder"],["lgParseMath","","formControlName","value",3,"onInputChange","placeholder"],["formControlName","percentage",3,"onCheckboxChanged","customMark"],["formControlName","amount",3,"disable","placeholder"],["lgSelfCenter","","lgShrink","",3,"click","size","icon"],["aria-hidden","false","aria-label","Example home icon","fontIcon","close"]],template:function(e,i){e&1&&(a(0,"lg-gap-column")(1,"lg-card-list",0),de(2,1),k(3,nt,1,0,null,2,et),_e(),r(),a(5,"lg-button",3),w("click",function(){return i.addTxRow()}),p(6," Add row "),r(),a(7,"lg-title",4)(8,"lg-gap-row",5),p(9," Total taxes and fees "),a(10,"b"),p(11),C(12,"number"),r()()(),a(13,"lg-title",4)(14,"lg-gap-row",5),p(15," Total "),a(16,"b"),p(17),C(18,"number"),r()()()()),e&2&&(o(),c("formGroup",i.taxesForm),o(2),B(i.taxesForm.controls.rows.controls),o(2),A("success"),o(2),c("level",4),o(),c("center",!0)("mobileMode",!0)("relaxed",!0),o(3),S(g(12,13,i.totalTaxes(),"1.2-5")),o(2),c("level",4),o(),c("center",!0)("mobileMode",!0)("relaxed",!0),o(3),S(g(18,16,i.totalTaxes()+i.total(),"1.2-2")))},dependencies:[je,Ve,H,Le,Q,Me,Ne,Oe,ke,Be,$e,We,ze,J,U,Ie,Z,Je,$,K,W,He,j],styles:[".taxes__row--odd[_ngcontent-%COMP%]{--control-bg: #fff}"]})};var it=["*"];function ot(t,n){t&1&&P(0)}var ee=class t{constructor(){}showed=h(!1);get hidden(){return this.showed()?null:!0}show=()=>{this.showed.set(!0)};hide=()=>{this.showed.set(!1)};static \u0275fac=function(e){return new(e||t)};static \u0275cmp=R({type:t,selectors:[["lg-view-show"]],hostVars:1,hostBindings:function(e,i){e&2&&pe("hidden",i.hidden)},ngContentSelectors:it,decls:1,vars:1,template:function(e,i){e&1&&(O(),_(0,ot,1,0)),e&2&&x(i.showed()?0:-1)},encapsulation:2})};var Ke=[{name:"VAT",description:"Value-Added Tax applied to ingredient purchases or product sales",value:.23,percentage:!0},{name:"Delivery Fee",description:"Fee charged for delivery services",value:.1,percentage:!1}];var at=(t,n)=>[t,n];function lt(t,n){t&1&&F(0)}function rt(t,n){t&1&&F(0)}function ct(t,n){t&1&&F(0)}function pt(t,n){if(t&1){let e=b();a(0,"lg-gap-column",11)(1,"lg-gap-row",12)(2,"div"),p(3," Calculation outcome: "),r(),a(4,"div")(5,"lg-number-input",13),z("ngModelChange",function(l){u(e);let s=m(2);return L(s.outcome_amount,l)||(s.outcome_amount=l),d(l)}),r()(),a(6,"b"),p(7),r()(),a(8,"lg-gap-row",14)(9,"div"),p(10," one "),a(11,"b"),p(12),r()(),a(13,"div"),p(14," costs: "),v(15,lt,1,0,"ng-container",15),p(16," ( "),v(17,rt,1,0,"ng-container",15),p(18," + "),v(19,ct,1,0,"ng-container",15),p(20," of taxes and fees) "),r()()()}if(t&2){let e,i,l=m(2),s=y(10),T=y(12),M=y(14);c("size","small"),o(),c("size","small")("center",!0),o(4),G("ngModel",l.outcome_amount),c("placeholder","Amount"),o(2),f(" ",(e=l.result())==null||e.calculation==null||e.calculation.recipe==null?null:e.calculation.recipe.outcome_unit," "),o(),c("size","small")("mobileMode",!0),o(4),f(" ",(i=l.result())==null||i.calculation==null||i.calculation.recipe==null?null:i.calculation.recipe.outcome_unit," "),o(3),c("ngTemplateOutlet",M),o(2),c("ngTemplateOutlet",T),o(2),c("ngTemplateOutlet",s)}}function mt(t,n){t&1&&F(0)}function st(t,n){t&1&&F(0)}function ut(t,n){t&1&&F(0)}function dt(t,n){t&1&&F(0)}function _t(t,n){if(t&1){let e=b();a(0,"lg-gap-row",12)(1,"div"),p(2," Calculation outcome: "),r(),a(3,"div")(4,"lg-number-input",16),z("ngModelChange",function(l){u(e);let s=m(2);return L(s.outcome_amount,l)||(s.outcome_amount=l),d(l)}),w("onInputChange",function(l){u(e);let s=m(2);return d(s.onOutcomeChange(l))}),r()(),a(5,"div"),p(6," costs: "),v(7,mt,1,0,"ng-container",15),p(8," ( "),v(9,st,1,0,"ng-container",15),p(10," + "),v(11,ut,1,0,"ng-container",15),p(12," of taxes and fees) "),r(),a(13,"div"),p(14," per gram: "),v(15,dt,1,0,"ng-container",15),r()()}if(t&2){let e=m(2),i=y(10),l=y(12),s=y(14),T=y(16);c("size","small")("center",!0),o(4),G("ngModel",e.outcome_amount),c("placeholder","Amount"),o(3),c("ngTemplateOutlet",s),o(2),c("ngTemplateOutlet",l),o(2),c("ngTemplateOutlet",i),o(4),c("ngTemplateOutlet",T)}}function xt(t,n){if(t&1&&(a(0,"lg-gap-row",7),_(1,pt,21,12,"lg-gap-column",11)(2,_t,16,8,"lg-gap-row",12),r()),t&2){let e=m();c("center",!0),o(),x(e.notInGrams()?1:2)}}function Ct(t,n){if(t&1&&(p(0),C(1,"number")),t&2){let e=m(2);f(" ",g(1,1,e.totalTaxes()/e.showedOutcome(),"1.2-2")," ")}}function gt(t,n){if(t&1&&(p(0),C(1,"number")),t&2){let e=m(2);f(" ",g(1,1,e.totalTaxes(),"1.2-2")," ")}}function ft(t,n){if(t&1&&_(0,Ct,2,4)(1,gt,2,4),t&2){let e=m();x(e.notInGrams()?0:1)}}function Tt(t,n){if(t&1&&(p(0),C(1,"number")),t&2){let e,i=m(2);f(" ",g(1,1,(((e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice)||1)/(i.showedOutcome()||1),"1.2-2")," ")}}function ht(t,n){if(t&1&&(p(0),C(1,"number")),t&2){let e,i=m(2);f(" ",g(1,1,(e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice,"1.2-2")," ")}}function vt(t,n){if(t&1&&_(0,Tt,2,4)(1,ht,2,4),t&2){let e=m();x(e.notInGrams()?0:1)}}function wt(t,n){if(t&1&&(p(0),C(1,"number")),t&2){let e,i=m(2);f(" ",g(1,1,((((e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice)||1)+i.totalTaxes())/(i.showedOutcome()||1),"1.2-2")," ")}}function yt(t,n){if(t&1&&(p(0),C(1,"number")),t&2){let e,i=m(2);f(" ",g(1,1,(((e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice)||1)+i.totalTaxes(),"1.2-2")," ")}}function bt(t,n){if(t&1&&_(0,wt,2,4)(1,yt,2,4),t&2){let e=m();x(e.notInGrams()?0:1)}}function St(t,n){}function Rt(t,n){if(t&1&&(p(0),C(1,"number")),t&2){let e,i=m(2);f(" ",g(1,1,((((e=i.result())==null||e.calculation==null?null:e.calculation.totalPrice)||1)+i.totalTaxes())/i.outcome_amount(),"1.2-5")," ")}}function At(t,n){if(t&1&&_(0,St,0,0)(1,Rt,2,4),t&2){let e=m();x(e.notInGrams()?0:1)}}function Ft(t,n){if(t&1&&(a(0,"a",23),p(1),r()),t&2){let e=m().$implicit;c("routerLink",fe(2,at,e.type==="recipe-row"?"/recipes/edit/":"/products/edit/",e.uuid)),o(),f(" ",e.name," ")}}function Et(t,n){if(t&1&&p(0),t&2){let e=m().$implicit;f(" ",e.name," ")}}function It(t,n){if(t&1&&(a(0,"tr",22)(1,"td"),p(2),r(),a(3,"td")(4,"div",22),_(5,Ft,2,5,"a",23)(6,Et,1,1),r()(),a(7,"td"),p(8),C(9,"number"),r(),a(10,"td"),p(11),r(),a(12,"td"),p(13),C(14,"number"),r(),a(15,"td"),p(16),C(17,"number"),r()()),t&2){let e=n.$implicit,i=n.$index;c("ngClass",e.type),o(2),S(i+1),o(2),c("ngClass","indent-"+e.indent),o(),x(e.type!=="total"?5:6),o(3),S(g(9,8,e.amount,"1.0-2")),o(3),S(e.unit),o(2),S(g(14,11,e.price_per_gram,"1.2-5")),o(3),S(g(17,14,e.total,"1.2-5"))}}function Vt(t,n){if(t&1&&(a(0,"table")(1,"colgroup"),E(2,"col",17)(3,"col",18)(4,"col",19)(5,"col",20)(6,"col",19)(7,"col",21),r(),a(8,"thead")(9,"tr")(10,"th"),p(11,"#"),r(),a(12,"th"),p(13,"Name"),r(),a(14,"th"),p(15,"Amount"),r(),a(16,"th"),p(17,"Unit"),r(),a(18,"th"),p(19,"Price per unit"),r(),a(20,"th"),p(21,"Total"),r()()(),a(22,"tbody"),k(23,It,18,17,"tr",22,ue),r()()),t&2){let e,i=m();o(23),B((e=i.result())==null?null:e.table)}}function Mt(t,n){t&1&&(a(0,"div"),p(1,"Loading..."),r())}function Dt(t,n){if(t&1){let e=b();a(0,"lg-button",24),w("click",function(){u(e);let l=m();return d(l.saveDefaultTaxTemplate())}),p(1," Save as default template "),r()}t&2&&(A("primary"),c("flat",!0)("size","small"))}function Nt(t,n){if(t&1){let e=b();a(0,"lg-button",24),w("click",function(){u(e),m();let l=y(3);return d(l.show())}),p(1," Apply template "),r()}t&2&&(A("warning"),c("flat",!0)("size","small"))}function kt(t,n){if(t&1){let e=b();a(0,"lg-gap-row",9),_(1,Nt,2,4,"lg-button",8),a(2,"lg-view-show",null,4)(4,"lg-gap-row",25)(5,"lg-multiselect",26),z("ngModelChange",function(l){u(e);let s=m();return L(s.taxTemplateToApply,l)||(s.taxTemplateToApply=l),d(l)}),r(),a(6,"lg-button",24),w("click",function(){u(e);let l=m();return d(l.loadTaxTemplate())}),p(7," Apply "),r()()()()}if(t&2){let e=y(3),i=m();c("center",!0),o(),x(e.showed()?-1:1),o(3),c("center",!0)("size","small"),o(),G("ngModel",i.taxTemplateToApply),c("autoLoad",!0)("resource","taxTemplates"),o(),A("primary"),c("flat",!0)("size","small")}}var Xe=class t{constructor(n,e,i,l){this._aRoute=n;this._calculateRecipeService=e;this._formTemplateService=i;this._injector=l;this._aRoute.data.pipe(q()).subscribe(s=>{this.result.set(s.result),this.outcome_amount.set(this.result()?.calculation?.outcomeAmount||0),this.showedOutcome.set(this.result()?.calculation?.outcomeAmount||0),this.loadRecipeTaxTemplate()})}uuid=qe("uuid");result=h(null);outcome_amount=oe(0);showedOutcome=h(0);totalTaxes=h(0);notInGrams=Te(()=>this.result()?.calculation?.recipe?.outcome_unit&&this.result()?.calculation?.recipe?.outcome_unit!=="gram");taxesComponent=he(V);taxRows=h([]);taxTemplateToApply=oe();canApplyTemplates=h(!0);canSaveDefaultTemplate=h(!0);onTaxTemplateChange(n){this.linkTaxTemplate(n.name)}onOutcomeChange=n=>{this._calculateRecipeService.calculateRecipe(this.uuid(),n).then(e=>{this.result.set(e),this.showedOutcome.set(n)})};saveDefaultTaxTemplate(){this._formTemplateService.saveTemplate("tax",{name:"Default Tax Template",createdAt:new Date().toISOString(),id:new Date().toISOString(),data:this.taxesComponent()?.taxesForm.value.rows?.map(n=>({name:n.name,description:n.description,value:n.value,percentage:n.percentage}))||[]}),this.canSaveDefaultTemplate.set(!1)}loadRecipeTemplate(){return this._formTemplateService.getTemplateByName("tax",this._taxTemplateName(this.result()?.calculation?.recipe))}loadRecipeTaxTemplate(){let n=this.loadRecipeTemplate();if(n){this.taxRows.set(n.data.map(l=>({name:l.name,description:l.description,value:l.value,percentage:l.percentage})));return}let e=this._formTemplateService.getTemplateByName("tax","Default Tax Template");e?this.taxRows.set(e.data.map(l=>({name:l.name,description:l.description,value:l.value,percentage:l.percentage}))):this.taxRows.set(Ke);let i=this._taxTemplateName(this.result()?.calculation?.recipe);this.saveTaxTemplate(i,this.taxesComponent()?.taxesForm.value.rows??[]),this.linkTaxTemplate(i)}saveTaxTemplate(n,e){this._formTemplateService.saveTemplate("tax",{name:n,createdAt:new Date().toISOString(),id:new Date().toISOString(),data:e.map(i=>({name:i.name,description:i.description,value:i.value,percentage:i.percentage}))||[]})}loadTaxTemplate(){let n=this.taxTemplateToApply()?.name;if(!n||n===this.result()?.calculation?.recipe?.taxTemplateName)return;let e=this._formTemplateService.getTemplateByName("tax",n);e&&(this.taxRows.set(e.data.map(i=>({name:i.name,description:i.description,value:i.value,percentage:i.percentage}))),this.onTaxTemplateChange(e))}ngOnInit(){}linkTaxTemplate(n){this._calculateRecipeService.linkTaxTemplate(this.uuid(),n).then(()=>{console.log("Tax template linked")})}onTotalTaxesChanged=n=>{this.totalTaxes.set(n)};onTaxesChanged=n=>{this.saveTaxTemplate(this._taxTemplateName(this.result()?.calculation?.recipe),n)};_taxTemplateName(n){return n.name+" Tax Template"}static \u0275fac=function(e){return new(e||t)(D(ye),D(Se),D(Re),D(re))};static \u0275cmp=R({type:t,selectors:[["lg-calculate-recipe"]],viewQuery:function(e,i){e&1&&xe(i.taxesComponent,V,5),e&2&&Ce()},inputs:{outcome_amount:[1,"outcome_amount"],taxTemplateToApply:[1,"taxTemplateToApply"]},outputs:{outcome_amount:"outcome_amountChange",taxTemplateToApply:"taxTemplateToApplyChange"},features:[ge([Ue])],decls:26,vars:16,consts:[["taxAmount",""],["rawAmount",""],["totalAmount",""],["perGramAmount",""],["taxTemplateForm",""],[3,"center","mobileMode"],[3,"flat","link","size"],[2,"--control-bg","white",3,"center"],[3,"flat","size","style"],[3,"center"],[3,"taxesChanged","totalTaxesChanged","rows","total"],[3,"size"],[3,"size","center"],["lgParseMath","",3,"ngModelChange","ngModel","placeholder"],[3,"size","mobileMode"],[4,"ngTemplateOutlet"],["lgParseMath","",3,"ngModelChange","onInputChange","ngModel","placeholder"],["span","1",2,"width","1%"],["span","1",2,"width","20%"],["span","1",2,"width","5%"],["span","1",2,"width","3%"],["span","1",2,"width","7%"],[3,"ngClass"],[3,"routerLink"],[3,"click","flat","size"],[3,"center","size"],[3,"ngModelChange","ngModel","autoLoad","resource"]],template:function(e,i){if(e&1){let l=b();a(0,"lg-fade-in")(1,"lg-container")(2,"lg-gap-column")(3,"lg-gap-row",5)(4,"lg-title"),p(5),r(),a(6,"lg-button",6),p(7," Edit "),r()(),_(8,xt,3,2,"lg-gap-row",7),v(9,ft,2,1,"ng-template",null,0,N)(11,vt,2,1,"ng-template",null,1,N)(13,bt,2,1,"ng-template",null,2,N)(15,At,2,1,"ng-template",null,3,N),a(17,"lg-table-card"),_(18,Vt,25,0,"table")(19,Mt,2,0,"div"),r(),a(20,"lg-gap-row",5)(21,"lg-title"),p(22," Taxes and fees "),r(),_(23,Dt,2,4,"lg-button",8),_(24,kt,8,11,"lg-gap-row",9),r(),a(25,"lg-taxes-and-fees-list",10),w("taxesChanged",function(T){return u(l),d(i.onTaxesChanged(T))})("totalTaxesChanged",function(T){return u(l),d(i.onTotalTaxesChanged(T))}),r()()()()}if(e&2){let l,s,T,M;o(3),c("center",!0)("mobileMode",!0),o(2),f(" ",(l=i.result())==null||l.calculation==null||l.calculation.recipe==null?null:l.calculation.recipe.name," cost calculation "),o(),A("primary"),c("flat",!0)("link","/recipes/edit/"+((s=i.result())==null||s.calculation==null||s.calculation.recipe==null?null:s.calculation.recipe.uuid))("size","small"),o(2),x(!((T=i.result())==null||T.calculation==null)&&T.calculation.totalPrice?8:-1),o(10),x(i.result()?18:19),o(2),c("center",!0)("mobileMode",!0),o(3),x(i.canSaveDefaultTemplate()?23:-1),o(),x(i.canApplyTemplates()?24:-1),o(),c("rows",i.taxRows())("total",((M=i.result())==null||M.calculation==null?null:M.calculation.totalPrice)??0)}},dependencies:[Ae,W,X,ve,U,H,j,J,Ge,Q,De,K,be,$,V,we,ee,Qe,Ee],styles:[`lg-number-input .lg-number-input{width:100px}
`],encapsulation:2})};export{Xe as CalculateRecipeComponent};
