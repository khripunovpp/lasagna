import{a as Q,b as U,c as j,d as C}from"./chunk-KCVY67SS.js";import{B as f,H as D,M as B,V as z,_ as W}from"./chunk-U47E73UL.js";import{Ab as V,G as S,Hb as I,Ib as F,Jb as O,Kb as p,Lb as u,Pc as E,Qb as M,Qc as r,Rc as $,U as T,Ub as h,Vb as v,Z as m,_a as c,bc as N,cc as P,db as k,ec as y,f as w,fc as R,ic as a,ka as x,kb as d,kc as l,la as L,m as b,pb as A,ua as _,vc as g}from"./chunk-NHWKWTII.js";var K=(o,e)=>e.label;function X(o,e){if(o&1){let t=M();p(0,"span",2),h("click",function(){let i=x(t).$implicit,s=v();return L(s.onSelect(i))}),a(1),u()}if(o&2){let t=e.$implicit,n=e.$index,i=e.$count,s=v();y("--chip-color",t.color),R("selected",t.value===s.value),V("data-last",n===i-1?!0:null),c(),l(" ",t.label," ")}}var G=class o{constructor(){}chipColor="#007bff";control=r();items=[];onChangeFn;value;selectedItem;onSelect=e=>{this.applyValue(e.value)};registerOnChange(e){this.onChangeFn=e}registerOnTouched(e){}writeValue(e){this.applyValue(e)}applyValue(e){this.value=e,this.onChangeFn?.(e),this.control()?.writeValue(e)}ngOnInit(){}clearSelected(){this.value=null}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=d({type:o,selectors:[["lg-chips-list"]],hostVars:2,hostBindings:function(t,n){t&2&&y("--chip-color",n.chipColor)},inputs:{control:[1,"control"],items:"items"},features:[g([{provide:f,useExisting:m(()=>o),multi:!0}])],decls:3,vars:0,consts:[[1,"chips-list"],[1,"chip",3,"--chip-color","selected"],[1,"chip",3,"click"]],template:function(t,n){t&1&&(p(0,"div",0),I(1,X,2,6,"span",1,K),u()),t&2&&(c(),F(n.items))},styles:[".chips-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.chip[_ngcontent-%COMP%]{background-color:var(--chip-color);color:#fff;padding:4px 8px;border-radius:16px;font-size:.875rem;display:inline-block;cursor:pointer;transition:all .2s;transition-timing-function:cubic-bezier(.47,1.64,.41,.8)}.chip.selected[_ngcontent-%COMP%]{opacity:.5}.chip[_ngcontent-%COMP%]:hover{transform:scale(1.1)}"]})};function Y(o,e){if(o&1&&a(0),o&2){let t=e.item;l(" ",(t==null?null:t.name)??(t==null?null:t.value)??t," ")}}function Z(o,e){if(o&1&&a(0),o&2){let t=e.item;l(" ",(t==null?null:t.name)??(t==null?null:t.value)??t," ")}}function ee(o,e){if(o&1&&a(0),o&2){let t=e.searchTerm;l(" ",t," ")}}var H=class o{constructor(e){this._selectResourcesService=e}placeholder="";noLoad=r(!1);resource=r("");key=r("");appendTo=r("");strict=r(!1);multi=r(!1);loadedList=_([]);onSelected=E();selectComponent=$(C);value=null;initialList=_([]);_onSearch$=new w;_currentSearchTerm=null;onChange=()=>{};onTouched=()=>{};searchFn=(e,t)=>{let n=t;return typeof n=="string"?n.toLowerCase().includes(e?.toLowerCase()??""):n.name?.toLowerCase().includes(e?.toLowerCase()??"")};compareWith=(e,t)=>{let n=e,i=t;return!e||!t?!1:typeof n!="string"&&typeof i!="string"?n?.name===i?.name||n?.uuid===i?.uuid:typeof n=="string"&&typeof i!="string"?n===i?.name||n===i?.uuid:typeof n!="string"&&typeof i=="string"?n?.name===i||n?.uuid===i:!1};writeValue(e){this.change(e),this.selectComponent().searchTerm=""}change(e){this.value=e,this.onChange(this.value)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onChangeInput(e){this.change(e)}onChangeSelect(e){let t=typeof e=="string"?e:e?.[this.key()];this.change(t),this.onSelected.emit(t)}onSearch(e){if(!e.term){this.writeValue("");return}this._currentSearchTerm=e.term,this.noLoad()||this._onSearch$.next(e),e.items.length===0?this.loadedList.set([{name:e.term,value:e.term}]):this.loadedList.set(e.items),this.selectComponent().searchTerm=this._capitalizeFirstLetter(e.term)}onBlur(){let e=this.selectComponent();if(e?.searchTerm){let t=e.searchTerm.trim();if(t){let n={name:t,value:t};this.loadedList.set([n]),this.change(t),this.onSelected.emit(t)}}}ngOnInit(){this._selectResourcesService.register(this.resource()),this._onSearch$.asObservable().pipe(S(300)).subscribe(e=>{this._selectResourcesService.autocomplete(this.resource(),this.key(),e.term)}),this._selectResourcesService.registryStream.pipe(T(e=>e.get(this.resource())?.stream??b([]))).subscribe(e=>{this.loadedList.set(e),!this.initialList().length&&this.initialList.set(e)})}reload(){}focus(){let e=this.selectComponent();e&&e.focus()}_capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}static \u0275fac=function(t){return new(t||o)(k(W,8))};static \u0275cmp=d({type:o,selectors:[["lg-autocomplete"]],viewQuery:function(t,n){t&1&&N(n.selectComponent,C,5),t&2&&P()},inputs:{placeholder:"placeholder",noLoad:[1,"noLoad"],resource:[1,"resource"],key:[1,"key"],appendTo:[1,"appendTo"],strict:[1,"strict"],multi:[1,"multi"]},outputs:{onSelected:"onSelected"},features:[g([{provide:f,useExisting:m(()=>o),multi:!0}])],decls:5,vars:10,consts:[[1,"autocomplete"],["bindLabel","name","notFoundText","Start typing to search",3,"blur","change","search","addTag","bindValue","appendTo","compareWith","editableSearchTerm","items","multiple","ngModel","placeholder","searchFn"],["ng-label-tmp",""],["ng-option-tmp",""],["ng-tag-tmp",""]],template:function(t,n){t&1&&(p(0,"div",0)(1,"ng-select",1),h("blur",function(){return n.onBlur()})("change",function(s){return n.onChangeSelect(s)})("search",function(s){return n.onSearch(s)}),A(2,Y,1,1,"ng-template",2)(3,Z,1,1,"ng-template",3)(4,ee,1,1,"ng-template",4),u()()),t&2&&(c(),O("addTag",!0)("bindValue",n.key())("appendTo",n.appendTo())("compareWith",n.compareWith)("editableSearchTerm",!0)("items",n.loadedList())("multiple",n.multi())("ngModel",n.value)("placeholder",n.placeholder)("searchFn",n.searchFn))},dependencies:[C,z,D,B,Q,U,j],styles:[`lg-autocomplete{display:flex;flex:1;min-width:150px}.autocomplete{flex:1;width:100%}.autocomplete .ng-select.ng-select-single .ng-select-container{height:51px}.autocomplete .ng-select.ng-select-focused .ng-select-container{outline:none;box-shadow:var(--focus-shadow);border-radius:12px}.autocomplete .ng-select .ng-select-container{border:none;border-radius:12px;background-color:var(--control-bg)}.autocomplete .ng-select .ng-select-container .ng-input{top:16px!important;padding-right:10px!important}.autocomplete .ng-select .ng-select-container .ng-input>input{color:var(--text);font-family:inherit;font-size:inherit}.autocomplete .ng-dropdown-panel{border:none;box-shadow:0 4px 16px #0000001a;border-radius:12px;overflow:hidden}.autocomplete .ng-dropdown-panel .ng-option{padding:16px;border-radius:12px}.autocomplete .ng-arrow-wrapper,.autocomplete .ng-clear-wrapper{display:none}
`],encapsulation:2})};export{G as a,H as b};
