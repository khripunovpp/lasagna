import{B as f,d as p}from"./chunk-GUTFF4HQ.js";import{_ as l,ca as c,g as s,q as a}from"./chunk-NHWKWTII.js";var m=class r{constructor(t,o){this._http=t;this._indexedDB=o}docs$=new s([]);tree$=new s([]);async init(){let t=await a(this._http.get("./docs/meta.json")),d=(await this._indexedDB.getAll("documentation"))?.find(e=>e.key==="meta")?.value;if(!d||new Date(t.updatedAt)>new Date(d.updatedAt)){let[e,i]=await Promise.all([a(this._http.get("./docs/data.json")),a(this._http.get("./docs/tree.json"))]);await this._indexedDB.balkAdd("documentation",[{key:"meta",value:t},{key:"data",value:e},{key:"tree",value:i}]),this.docs$.next(e),this.tree$.next(i)}else{let e=await this._indexedDB.getAll("documentation"),i=e?.find(n=>n.key==="tree")?.value,h=e?.find(n=>n.key==="data")?.value;this.tree$.next(i),this.docs$.next(h)}}getDocs(){return this.docs$.asObservable()}getTree(){return this.tree$.asObservable()}async getDocByPath(t){}static \u0275fac=function(o){return new(o||r)(c(p),c(f))};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};export{m as a};
