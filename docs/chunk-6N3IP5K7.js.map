{
  "version": 3,
  "sources": ["src/app/features/onboarding/onboarding.component.ts", "src/app/features/home/view/application/application.component.ts", "src/app/features/home/view/application/application.component.html"],
  "sourcesContent": ["import {Component, computed, inject} from '@angular/core';\n\nimport {Router} from '@angular/router';\nimport {ButtonComponent} from '../../shared/view/ui/button/button.component';\nimport {TitleComponent} from '../../shared/view/layout/title.component';\nimport {OnboardingService} from '../onboarding/onboarding.service';\nimport {FlexColumnComponent} from '../../shared/view/layout/flex-column.component';\nimport {TranslatePipe} from '@ngx-translate/core';\nimport {APP_SERVER_IS_RU} from '../../shared/service/tokens/app-server-region.token';\n\ninterface OnboardingStep {\n  key: string;\n  label: string;\n  description: string;\n  done: boolean;\n  action: () => void;\n}\n\n@Component({\n  selector: 'lg-onboarding',\n  standalone: true,\n  imports: [\n    ButtonComponent,\n    TitleComponent,\n    FlexColumnComponent,\n    TranslatePipe\n],\n  template: `\n    @if (!allDone()) {\n      <section class=\"onboarding\">\n        <lg-flex-column size=\"medium\">\n          <lg-title [level]=\"4\">{{ 'onboarding.title' | translate }}</lg-title>\n\n          <p class=\"no-margin text-wrap\">{{ 'onboarding.about' | translate }}</p>\n\n          <p class=\"no-margin text-wrap\">{{ 'onboarding.welcome' | translate }}</p>\n\n          <lg-flex-column [size]=\"'medium'\">\n            @for (step of steps(); track step.key) {\n              <div class=\"onboarding__step\"\n                   [class.onboarding__step--done]=\"step.done\"\n                   [class.onboarding__step--disabled]=\"!step.done && !isCurrentStep(step)\">\n                <div class=\"onboarding__step-content\">\n                  <span class=\"onboarding__step-label\">{{ step.label | translate }}</span>\n                  <span class=\"onboarding__step-desc\">{{ step.description | translate }}</span>\n                </div>\n\n                <lg-button [disabled]=\"step.done || !isCurrentStep(step)\"\n                           [style]=\"step.done ? 'secondary' : 'primary'\"\n                           (onClick)=\"step.action()\">\n                  @if (step.done) {\n                    {{ 'onboarding.done' | translate }}\n                  } @else if (isCurrentStep(step)) {\n                    {{ 'onboarding.go' | translate }}\n                  } @else {\n                    {{ 'onboarding.unavailable' | translate }}\n                  }\n                </lg-button>\n              </div>\n            }\n          </lg-flex-column>\n        </lg-flex-column>\n      </section>\n    }\n  `,\n  styles: [\n    `:host {\n      display: block;\n    }\n\n    .onboarding__step {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      gap: 8px;\n      background: var(--onboarding-bg);\n      border-radius: 16px;\n      padding: 16px;\n      border: 1px solid var(--onboarding-border);\n      transition: background 0.2s;\n\n      @media screen and (max-width: 600px) {\n        flex-direction: column;\n\n        lg-button {\n          align-self: flex-end;\n        }\n      }\n    }\n\n    .onboarding__step--done {\n\n      .onboarding__step-content {\n        opacity: 0.5;\n      }\n    }\n\n    .onboarding__step--disabled .onboarding__step-content {\n      opacity: 0.5;\n    }\n\n    .onboarding__step-content {\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n    }\n\n    .onboarding__step-label {\n      font-weight: 600;\n    }\n\n    .onboarding__step-desc {\n      color: var(--onboarding-text);\n    }\n    `\n  ]\n})\nexport class OnboardingComponent {\n  // Текущий активный шаг (первый незавершённый)\n  currentStep = computed(() => {\n    return this.steps().find(step => !step.done);\n  });\n  private _router = inject(Router);\n  private _onboarding = inject(OnboardingService);\n  // Используем сигнал из сервиса напрямую\n  allDone = this._onboarding.isOnboardingComplete;\n  private readonly _isRuRegion = inject(APP_SERVER_IS_RU);\n  steps = computed<OnboardingStep[]>(() => {\n    const settingsItems = {\n      key: 'settings',\n      label: 'onboarding.settings.label',\n      description: 'onboarding.settings.description',\n      done: this._onboarding.isSettingsDone(),\n      action: () => this.goToSettings()\n    };\n\n    const steps: OnboardingStep[] = [\n      {\n        key: 'product',\n        label: 'onboarding.product.label',\n        description: 'onboarding.product.description',\n        done: this._onboarding.isProductDone(),\n        action: () => this.goToAddProduct()\n      },\n      {\n        key: 'recipe',\n        label: 'onboarding.recipe.label',\n        description: 'onboarding.recipe.description',\n        done: this._onboarding.isRecipeDone(),\n        action: () => this.goToAddRecipe()\n      },\n      {\n        key: 'faq',\n        label: 'onboarding.faq.label',\n        description: 'onboarding.faq.description',\n        done: this._onboarding.isFaqDone(),\n        action: () => this.goToFaq()\n      },\n    ];\n\n    return this._isRuRegion ? steps : [settingsItems].concat(steps);\n  });\n\n  // Проверка, является ли шаг текущим активным\n  isCurrentStep(step: OnboardingStep): boolean {\n    return !step.done && step.key === this.currentStep()?.key;\n  }\n\n  goToSettings() {\n    this._router.navigate(['/settings']);\n  }\n\n  goToFaq() {\n    this._router.navigate(['/documents']);\n  }\n\n  goToAddProduct() {\n    this._router.navigate(['/products/add']);\n  }\n\n  goToAddRecipe() {\n    this._router.navigate(['/recipes/add']);\n  }\n}\n", "import {Component, inject} from '@angular/core';\nimport {ContainerComponent} from '../../../../shared/view/layout/container.component';\nimport {CardComponent} from '../../../../shared/view/ui/card/card.component';\nimport {TitleComponent} from '../../../../shared/view/layout/title.component';\nimport {FadeInComponent} from '../../../../shared/view/ui/fade-in.component';\nimport {LastEditedRecipesComponent} from '../last-edited-recipes/last-edited-recipes.component';\nimport {LastEditedProductsComponent} from '../last-edited-products/last-edited-products.component';\nimport {FlexRowComponent} from '../../../../shared/view/layout/flex-row.component';\nimport {TranslatePipe} from '@ngx-translate/core';\nimport {ProductsRepository, RecipesRepository} from '../../../../shared/service/repositories';\nimport {AsyncPipe} from '@angular/common';\nimport {OnboardingComponent} from '../../../onboarding/onboarding.component';\nimport {OnboardingService} from '../../../onboarding/onboarding.service';\n\n\n@Component({\n  selector: 'app-application',\n  templateUrl: './application.component.html',\n  styleUrl: './application.component.scss',\n  imports: [\n    ContainerComponent,\n    CardComponent,\n    TitleComponent,\n    FadeInComponent,\n    LastEditedRecipesComponent,\n    LastEditedProductsComponent,\n    FlexRowComponent,\n    TranslatePipe,\n    AsyncPipe,\n    OnboardingComponent\n  ],\n})\nexport class ApplicationComponent {\n  title = 'lasagna';\n  recipes = inject(RecipesRepository);\n  products = inject(ProductsRepository);\n  private _onboardingService = inject(OnboardingService);\n  // Используем сигнал из сервиса напрямую\n  isOnboardingComplete = this._onboardingService.isOnboardingComplete;\n}\n", "<lg-fade-in>\n  <lg-container>\n    <lg-title>{{ 'main.title' | translate }}</lg-title>\n\n    @if (!isOnboardingComplete()) {\n      <lg-card>\n        <lg-onboarding></lg-onboarding>\n      </lg-card>\n    }\n\n    @defer {\n      <lg-flex-row [mobileMode]=\"true\"\n                   [top]=\"true\"\n                   [wrap]=\"true\"\n                   cols=\"2\">\n        @if (recipes.length|async) {\n          <lg-card>\n            <lg-last-edited-recipes></lg-last-edited-recipes>\n          </lg-card>\n        }\n\n        @if (products.length|async) {\n          <lg-card>\n            <lg-last-edited-products></lg-last-edited-products>\n          </lg-card>\n        }\n      </lg-flex-row>\n    } @error {\n      {{'main.defer-load-error' | translate }}\n    }\n  </lg-container>\n</lg-fade-in>\n"],
  "mappings": "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",
  "names": []
}
