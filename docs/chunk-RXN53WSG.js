import{a as te}from"./chunk-3XWLM6KQ.js";import{a as ee}from"./chunk-6MKBKDFP.js";import{a as $}from"./chunk-IFILGF77.js";import"./chunk-CEPNEZXV.js";import{a as Z}from"./chunk-C5H2I4FC.js";import{a as Q}from"./chunk-EIVKJBV7.js";import{a as L}from"./chunk-TBBEROLX.js";import{a as h}from"./chunk-U5RG623K.js";import"./chunk-4U4Z3QUR.js";import{a as X}from"./chunk-VPY63KRA.js";import"./chunk-MPFUNZLY.js";import{a as U}from"./chunk-O2QGAP6D.js";import{b as P,j as K}from"./chunk-F7IPTZBX.js";import"./chunk-JIYA5WDW.js";import{G as k,I as M,J as j,K as O,M as G,O as W,R as q,U as z,Y as H,f as D,m as V,ma as J,n as B,oa as Y,z as R}from"./chunk-SCGAETAM.js";import{m as N,p as E}from"./chunk-J6CDYHKM.js";import"./chunk-CABIONZL.js";import"./chunk-EMIJRNYJ.js";import"./chunk-ZA7VU5CB.js";import{$a as o,Cc as n,Db as y,Dc as a,Fb as _,Kb as r,Lb as c,Mb as s,Nb as S,Nc as w,Rb as A,Rc as T,Vb as v,Wb as u,eb as m,jc as d,kc as I,la as b,lb as C,lc as g,ma as F,va as f}from"./chunk-X5WXA3YI.js";import"./chunk-2RGDSI3Q.js";import"./chunk-FK6H3RFT.js";import"./chunk-C6Q5SG76.js";function ae(e,i){e&1&&(d(0),n(1,"translate")),e&2&&g(" ",a(1,1,"settings.category.save")," ")}function pe(e,i){e&1&&(d(0),n(1,"translate")),e&2&&g(" ",a(1,1,"settings.category.no-changes")," ")}function ce(e,i){if(e&1){let t=A();c(0,"lg-button",6),v("click",function(){b(t);let l=u();return F(l.editCategory())}),y(1,ae,2,3)(2,pe,2,3),s()}if(e&2){let t=u();r("disabled",!t.form.dirty),o(),_(t.form.dirty?1:2)}}function se(e,i){e&1&&(d(0),n(1,"translate")),e&2&&g(" ",a(1,1,"settings.category.add")," ")}function me(e,i){e&1&&(d(0),n(1,"translate")),e&2&&g(" ",a(1,1,"settings.category.enter-name")," ")}function de(e,i){if(e&1){let t=A();c(0,"lg-button",6),v("click",function(){b(t);let l=u();return F(l.addCategory())}),y(1,se,2,3)(2,me,2,3),s()}if(e&2){let t=u();r("disabled",!t.form.dirty),o(),_(t.form.dirty?1:2)}}var x=class e{constructor(i,t,p,l){this._categoryRepository=i;this._selectResourcesService=t;this._router=p;this._notificationsService=l}form=new O({name:new G("",k.required)});category=f(void 0);uuid=T("");uuidEffect=w(()=>{if(!this.uuid()){this.category.set(D.empty());return}this._categoryRepository.getOne(this.uuid()).then(i=>{this.form.reset(V(i)),this.category.set(i),this.form.markAsPristine()})});ngOnInit(){this.form.valueChanges.subscribe(i=>{this.category()?.update(B(i))})}addCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.addCategory(this.category()).then(()=>{this.form.reset({name:""}),this._notificationsService.success("settings.category.added"),this.form.markAsPristine()})}editCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.editCategory(this.uuid(),this.category()).then(()=>{this._notificationsService.success("settings.category.edited"),this.form.markAsPristine()})}onEnter(){this.uuid()?this.editCategory():this.addCategory()}static \u0275fac=function(t){return new(t||e)(m(P),m(K),m(E),m(J))};static \u0275cmp=C({type:e,selectors:[["lg-add-category-recipe-form"]],inputs:{uuid:[1,"uuid"]},decls:9,vars:10,consts:[[3,"formGroup"],[3,"bottom","mobileMode"],["lgExpand","",3,"label"],["formControlName","name",3,"onEnter","placeholder"],["lgNoWrap",""],[3,"disabled"],[3,"click","disabled"]],template:function(t,p){t&1&&(c(0,"form",0)(1,"lg-flex-row",1)(2,"lg-control",2),n(3,"translate"),c(4,"lg-input",3),n(5,"translate"),v("onEnter",function(){return p.onEnter()}),s()(),c(6,"div",4),y(7,ce,3,2,"lg-button",5)(8,de,3,2,"lg-button",5),s()()()),t&2&&(r("formGroup",p.form),o(),r("bottom",!0)("mobileMode",!0),o(),r("label",a(3,6,"settings.category.name")),o(2),r("placeholder",a(5,8,"settings.category.placeholder")),o(3),_(p.uuid()?7:8))},dependencies:[H,W,M,j,q,z,$,ee,Y,h,Z,te,R],encapsulation:2})};var ie=class e{constructor(i){this._aRoute=i}uuid=f("");ngOnInit(){this._aRoute.params.subscribe(i=>{this.uuid.set(i.uuid)})}static \u0275fac=function(t){return new(t||e)(m(N))};static \u0275cmp=C({type:e,selectors:[["lg-add-category-recipe"]],decls:9,vars:7,consts:[[3,"center"],[3,"uuid"]],template:function(t,p){t&1&&(c(0,"lg-fade-in")(1,"lg-container")(2,"lg-flex-row",0)(3,"lg-title"),d(4),n(5,"translate"),n(6,"translate"),s()(),c(7,"lg-card"),S(8,"lg-add-category-recipe-form",1),s()()()),t&2&&(o(2),r("center",!0),o(2),I(p.uuid()?a(5,3,"categories.edit-recipe"):a(6,5,"categories.add-recipe")),o(4),r("uuid",p.uuid()))},dependencies:[X,L,h,U,x,Q,R],encapsulation:2})};export{ie as AddCategoryRecipeComponent};
