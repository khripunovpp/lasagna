import{a as it}from"./chunk-XW7PSHXX.js";import{a as re,b as le}from"./chunk-UNGG2BEL.js";import{a as at,b as rt,c as lt}from"./chunk-SEXVTIMW.js";import{a as $,c as ct}from"./chunk-OEFCFFOM.js";import{a as ot}from"./chunk-UZBYRUYP.js";import{a as nt}from"./chunk-KYYDJ2CN.js";import"./chunk-C4ZIA7Z2.js";import{a as He,b as Je,e as G,f as Qe,g as ve,h as O,i as ne,k as Xe,l as Ye,m as Ze,n as Ke,o as et,p as oe,q as tt}from"./chunk-32O7IJMM.js";import{a as ie}from"./chunk-NTM2FENS.js";import{a as ae}from"./chunk-NEKHWACR.js";import{a as ce}from"./chunk-XVXTNF3J.js";import{a as qe,b as te}from"./chunk-AYZPP7UL.js";import{f as Ue,i as ze}from"./chunk-VHR6F3YK.js";import{Ab as Pe,Bb as Ve,Cb as A,Db as N,Dc as Le,Eb as C,Fb as m,Fc as Be,Gb as Z,Hb as K,Hc as We,Nc as $e,Pb as E,Qb as l,Rb as M,Sb as g,Ta as i,Ub as Ce,Vb as xe,W as Re,Wb as he,Xb as Ne,Ya as fe,Z as Se,Zb as Ge,_ as Fe,a as q,ab as I,ac as D,b as H,ca as ge,cb as J,cc as P,da as Ie,dc as U,eb as x,f as R,ia as Ae,ic as Oe,j as ke,ja as w,jc as be,ka as T,lb as s,lc as ee,mb as Q,mc as z,nb as Me,oa as Ee,ob as W,oc as je,pa as F,rb as h,sb as b,tb as De,vb as X,wb as Y,xb as a,yb as r,zb as V}from"./chunk-EXR2ZECX.js";var pt=["*"],ue=class n{constructor(){}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["lg-table-card"]],ngContentSelectors:pt,decls:4,vars:1,consts:[[3,"flat"],[1,"table"],[1,"table__scroll"]],template:function(e,o){e&1&&(Z(),a(0,"lg-card",0)(1,"div",1)(2,"div",2),K(3),r()()()),e&2&&s("flat",!0)},dependencies:[qe],styles:[`:host{display:flex;width:100%}.table__scroll{overflow-x:auto}table{width:100%;border-collapse:collapse;--border-color: #efefef}table thead tr{border-bottom:1px solid var(--border-color)}table thead th{text-align:left;padding:16px 24px;opacity:.4;font-size:.8em}table tbody tr{border-bottom:1px solid var(--border-color)}table tbody tr:last-child{border-bottom:none}td{padding:16px 24px}
`],encapsulation:2})};var dt=["*"];function _t(n,t){if(n&1&&l(0),n&2){let e=m();g(" ",e.customMark()," ")}}var se=class n{constructor(){}value=!1;customMark=z("");onKeydown(t){t.preventDefault(),this.onChangeCheckbox(!this.value)}onCheckboxChanged=ee();onChange=()=>{};onTouched=()=>{};writeValue(t){this._change(t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}onChangeCheckbox(t){this._change(t)}_change(t){this.value=t,this.onChange(this.value),this.onCheckboxChanged.emit(this.value)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["lg-checkbox"]],hostBindings:function(e,o){e&1&&C("keydown.enter",function(u){return o.onKeydown(u)})("keydown.space",function(u){return o.onKeydown(u)})},inputs:{customMark:[1,"customMark"]},outputs:{onCheckboxChanged:"onCheckboxChanged"},features:[Ne([{provide:He,useExisting:Se(()=>n),multi:!0}])],ngContentSelectors:dt,decls:5,vars:2,consts:[["tabindex","0",1,"lg-checkbox"],["type","checkbox",1,"checkbox",3,"ngModelChange","ngModel"],[1,"lg-checkbox__mark"]],template:function(e,o){e&1&&(Z(),a(0,"label",0)(1,"input",1),C("ngModelChange",function(u){return o.onChangeCheckbox(u)}),r(),a(2,"span",2),h(3,_t,1,1),r(),K(4),r()),e&2&&(i(),s("ngModel",o.value),i(2),b(o.customMark()?3:-1))},dependencies:[oe,Je,G,ne],styles:[`.lg-checkbox{display:flex;border-radius:12px}.lg-checkbox:focus-within{outline-color:var(--active-color)}.lg-checkbox__mark{display:flex;align-items:center;justify-content:center;width:51px;height:51px;border-radius:12px;background-color:var(--control-bg);opacity:.2;cursor:pointer;transition:all .2s ease-in-out}.lg-checkbox__mark:hover{opacity:1}.checkbox{display:none}.checkbox:checked+.lg-checkbox__mark{background-color:var(--control-bg-selected);opacity:1;font-weight:700}
`],encapsulation:2})};var me=class n{constructor(){}flex="0 1 auto";static \u0275fac=function(e){return new(e||n)};static \u0275dir=J({type:n,selectors:[["","lgShrink",""]],hostVars:2,hostBindings:function(e,o){e&2&&Q("flex",o.flex)}})};var pe=class n{constructor(){}selfAlign="center";static \u0275fac=function(e){return new(e||n)};static \u0275dir=J({type:n,selectors:[["","lgSelfCenter",""]],hostVars:2,hostBindings:function(e,o){e&2&&Q("align-self",o.selfAlign)}})};function we(n){n||(Ae(we),n=Ie(Ee));let t=new ke(e=>n.onDestroy(e.next.bind(e)));return e=>e.pipe(Re(t))}var gt=(n,t)=>t.value.name;function ft(n,t){if(n&1){let e=N();a(0,"section",6)(1,"div",7)(2,"lg-gap-row",8)(3,"small"),l(4,"Apply for all"),r(),a(5,"lg-control",9),V(6,"lg-input",10),r(),a(7,"lg-control",9),V(8,"lg-input",11),r(),a(9,"lg-control",9)(10,"lg-number-input",12),C("onInputChange",function(){w(e);let c=m().$index,u=m();return T(u.onTaxValueChange(c))}),r()(),a(11,"lg-control",9)(12,"lg-checkbox",13),C("onCheckboxChanged",function(){w(e);let c=m().$index,u=m();return T(u.onTaxValueChange(c))}),r()(),a(13,"lg-control",9),V(14,"lg-number-input",14),r(),a(15,"lg-button",15),C("click",function(){w(e);let c=m().$index,u=m();return T(u.deleteTxRow(c))}),V(16,"mat-icon",16),r()()()()}if(n&2){let e=m().$index;s("formGroupName",e),i(),Me("taxes__row--odd",e%2!==0),i(),s("bottom",!0)("fit",!0),i(3),s("label","Name"),i(),s("placeholder","Name"),i(),s("label","Description"),i(),s("placeholder","Description"),i(),s("label","Value"),i(),s("placeholder","Value"),i(),s("label","Use percentage"),i(),s("customMark","%"),i(),s("label","Amount"),i(),s("disabled",!0)("placeholder","Amount"),i(),W("danger"),s("size","small")("icon",!0)}}function Ct(n,t){n&1&&x(0,ft,17,20,"ng-template",2)}var de=class n{constructor(){}totalTaxesChanged=ee();rows=z([{name:"VAT",description:"Value-Added Tax applied to ingredient purchases or product sales",value:.2,amount:0,percentage:!0},{name:"Income Tax",description:"Tax on profit from selling the final product",value:.15,amount:0,percentage:!0},{name:"Import Duty",description:"Customs fee on imported ingredients or packaging",value:50,amount:0,percentage:!1},{name:"Sales Commission",description:"Fee paid to marketplaces or resellers per unit sold",value:.1,amount:0,percentage:!0},{name:"Certification Fee",description:"Cost of food certification, sanitation checks, or licensing",value:100,amount:0,percentage:!1}]);total=z(0);taxesForm=new ve({rows:new et([this._getRowGroup()])});rowsEffect=be(()=>{this._rowsFormArray.clear(),this.rows().forEach((t,e)=>{this._rowsFormArray.push(this._getRowGroup(t))})});totalTaxes=F(0);totalEffect=be(()=>{this._recalculateTaxes()});formValues=this.taxesForm.valueChanges.pipe(we());get _rowsFormArray(){return this.taxesForm.get("rows")}ngOnInit(){this.formValues.subscribe(t=>{this.totalTaxes.set(this._getTotalTaxes()),this.totalTaxesChanged.emit(this.totalTaxes())})}onTaxValueChange(t){let e=this._rowsFormArray.at(t),o=this._getAmount(e.value.value,e.value.percentage);e.get("amount")?.patchValue(o.toFixed(2))}deleteTxRow(t){this._rowsFormArray.removeAt(t)}addTxRow(){this._rowsFormArray.push(this._getRowGroup())}_getTotalTaxes(){return this._rowsFormArray.controls.reduce((t,e)=>{let o=parseFloat(e.get("amount")?.value);return t+(isNaN(o)?0:o)},0)}_getAmount(t,e){let o=parseFloat(t.toString());return e?o*this.total():o}_recalculateTaxes(t=!1){this._rowsFormArray.controls.forEach((e,o)=>{let c=this._getAmount(e.get("value")?.value,e.get("percentage")?.value);e.get("amount")?.patchValue(c.toFixed(2),{emitEvent:!t})})}_getRowGroup(t=null){return new ve({name:new O(t?.name||""),description:new O(t?.description||""),value:new O(t?.value||0),amount:new O(0),percentage:new O(t?.percentage||!1)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["lg-taxes-and-fees-list"]],inputs:{rows:[1,"rows"],total:[1,"total"]},outputs:{totalTaxesChanged:"totalTaxesChanged"},decls:12,vars:6,consts:[[3,"formGroup"],["formArrayName","rows"],["lgCardListItem",""],[3,"level"],[3,"center","mobileMode","relaxed"],["lgSelfCenter","","lgShrink","",3,"click"],[1,"taxes",3,"formGroupName"],[1,"taxes__row"],[3,"bottom","fit"],[3,"label"],["formControlName","name",3,"placeholder"],["formControlName","description",3,"placeholder"],["lgParseMath","","formControlName","value",3,"onInputChange","placeholder"],["formControlName","percentage",3,"onCheckboxChanged","customMark"],["formControlName","amount",3,"disabled","placeholder"],["lgSelfCenter","","lgShrink","",3,"click","size","icon"],["aria-hidden","false","aria-label","Example home icon","fontIcon","close"]],template:function(e,o){e&1&&(a(0,"lg-gap-column")(1,"lg-card-list",0),Pe(2,1),X(3,Ct,1,0,null,2,gt),Ve(),r(),a(5,"lg-title",3)(6,"lg-gap-row",4),l(7," Total taxes and fees "),a(8,"b"),l(9),r()()(),a(10,"lg-button",5),C("click",function(){return o.addTxRow()}),l(11," Add tax "),r()()),e&2&&(i(),s("formGroup",o.taxesForm),i(2),Y(o.taxesForm.controls.rows.controls),i(2),s("level",4),i(),s("center",!0)("mobileMode",!0)("relaxed",!0),i(3),M(o.totalTaxes()))},dependencies:[rt,at,ce,tt,G,Qe,Xe,Ke,Ye,Ze,ot,nt,se,re,ae,lt,pe,me,ie,le,te],styles:[".taxes__row--odd[_ngcontent-%COMP%]{--control-bg: #fff}"]})};var _e=class n{constructor(t,e){this._recipeRepository=t;this._productRepository=e}calculation;calculateRecipe(t,e=0){return new Promise((o,c)=>R(this,null,function*(){let u=[],p=0,f=0;yield this._recipeRepository.getOne(t).then(k=>R(this,null,function*(){let v=(e||k?.outcome_amount||1)/(k?.outcome_amount||1),{table:y,totalAmount:_,totalWeight:d}=yield this._makeIngredientTable(k,v);p+=_||0,f+=d||0,u.push(...y),u.push(this._makeTotal(p,f)),o({recipe:k,result:u,total:p,totalWeight:f})}))}))}getRecipe(t){return R(this,null,function*(){if(!t)return;let e=yield this._recipeRepository.getOne(t);if(!e)return;let o=0;return e.outcome_unit&&e.outcome_amount?o=e.outcome_amount:o=e?.ingredients?.reduce((c,u)=>{if(u.unit!=="gram")return c;let p=$(u.amount)||0;return c+p},0)??0,H(q({totalAmountInGrams:o||0},e),{pricePerUnit:0})})}_makeRecipeSubTable(t,e=0){return R(this,null,function*(){return new Promise((o,c)=>R(this,null,function*(){let u=[],p=0,f=0,k=t.amount;yield this.getRecipe(t.recipe_id).then(v=>R(this,null,function*(){let y=k/(v?.totalAmountInGrams||1),_=yield this._makeIngredientTable(v,e);_.table=_.table.map((S,Te)=>{let mt=(S.amount||0)*(e||1)*y;return H(q({},S),{amount:parseFloat((mt||0).toFixed(5)),total:parseFloat((S.total?S.total*y:0).toFixed(5)),indent:S.indent+1})});let d=_.totalAmount?_.totalAmount/_.totalWeight:0,L=(v?.totalAmountInGrams||0)*e*y,B=_.totalAmount*y;u.push(this._makeRecipeCaption({name:v?.name||"Unknown recipe",price_per_gram:d,amount:L,total:B,unit:t.unit,uuid:v?.uuid||""})),u.push(..._.table),f+=B,p+=_.totalWeight*y,o({table:u,totalAmount:f,totalWeight:p})}))}))})}_makeIngredientTable(t,e=0){let o=[],c=0,u=0;return Promise.all(t?.ingredients.map((p,f)=>R(this,null,function*(){let k=p.recipe_id,v=p.product_id,y=p.name;if(!k&&!v&&!y){let _=p.amount;return}if(k){let _=yield this._makeRecipeSubTable(p,e);o.push(..._.table),u+=_.totalAmount,c+=_.totalWeight}else if(v){let _=yield this._productRepository.getOne(p.product_id).then(d=>R(this,null,function*(){if(!d){o.push(this._makeRow({name:"Unknown product",price_per_gram:void 0,amount:p.amount*(e||1),total:void 0,uuid:d?.uuid||""}));return}if(!d?.price){o.push(this._makeRow({name:d.name,price_per_gram:0,amount:p.amount*(e||1),total:0,uuid:d?.uuid||""}));return}if(!d?.amount){o.push(this._makeRow({name:d.name,price_per_gram:0,amount:p.amount*(e||1),total:0,uuid:d?.uuid||""}));return}let L=p.amount*(e||1),B=($(d.price)||1)/($(d.amount)||1),S=B*($(L)||1),Te=d.unit==="gram"||!d.unit;o.push(this._makeRow({name:d.name,price_per_gram:B,amount:L,total:S,unit:d.unit,uuid:d?.uuid||""})),u+=S,Te&&(c+=+L)}))}else y&&(o.push(this._makeRow({name:p.name,price_per_gram:void 0,amount:p.amount*(e||1),total:void 0,uuid:""})),c+=+p.amount*(e||1))}))??[]).then(()=>({table:o,totalAmount:u,totalWeight:c}))}_makeRow(t){return{name:t.name,price_per_gram:parseFloat(t.price_per_gram?.toFixed(5)??"0"),amount:t.amount,total:parseFloat(t.total?.toFixed(5)??"0"),unit:t.unit||"gram",indent:t.indent??0,type:"row",uuid:t.uuid}}_makeCaption(t){return{name:t,unit:void 0,price_per_gram:void 0,amount:void 0,total:void 0,indent:0,type:"caption"}}_makeRecipeCaption(t){return{name:t.name,price_per_gram:parseFloat(t.price_per_gram.toFixed(5)),amount:t.amount,total:parseFloat(t.total.toFixed(2)),unit:t.unit||"gram",indent:0,type:"recipe-row",uuid:t.uuid}}_makeTotal(t,e){return{name:"Total (without taxes and fees)",amount:e,unit:"gram",price_per_gram:parseFloat((t/e).toFixed(5)),total:parseFloat(t.toFixed(2)),indent:0,type:"total"}}static \u0275fac=function(e){return new(e||n)(ge(it),ge(ct))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})};var ht=(n,t)=>[n,t];function bt(n,t){n&1&&A(0)}function vt(n,t){n&1&&A(0)}function yt(n,t){n&1&&A(0)}function wt(n,t){if(n&1){let e=N();a(0,"lg-gap-row",8)(1,"lg-gap-row",9)(2,"div"),l(3," Calculation outcome: "),r(),a(4,"div")(5,"lg-number-input",10),he("ngModelChange",function(c){w(e);let u=m(2);return xe(u.outcome_amount,c)||(u.outcome_amount=c),T(c)}),C("onInputChange",function(c){w(e);let u=m(2);return T(u.onOutcomeChange(c))}),r()(),a(6,"b"),l(7),r()(),a(8,"lg-gap-row",11)(9,"div"),l(10," one "),a(11,"b"),l(12),r()(),a(13,"div"),l(14," costs: "),x(15,bt,1,0,"ng-container",12),l(16," ( "),x(17,vt,1,0,"ng-container",12),l(18," + "),x(19,yt,1,0,"ng-container",12),l(20," of taxes and fees) "),r()()()}if(n&2){let e,o,c=m(2),u=E(11),p=E(13),f=E(15);s("fit",!0)("center",!0)("mobileMode",!0),i(),s("size","small")("center",!0),i(4),Ce("ngModel",c.outcome_amount),s("placeholder","Amount"),i(2),g(" ",(e=c.result())==null||e.recipe==null?null:e.recipe.outcome_unit," "),i(),s("size","small")("mobileMode",!0),i(4),g(" ",(o=c.result())==null||o.recipe==null?null:o.recipe.outcome_unit," "),i(3),s("ngTemplateOutlet",f),i(2),s("ngTemplateOutlet",p),i(2),s("ngTemplateOutlet",u)}}function Tt(n,t){n&1&&A(0)}function kt(n,t){n&1&&A(0)}function Rt(n,t){n&1&&A(0)}function St(n,t){n&1&&A(0)}function Ft(n,t){if(n&1){let e=N();a(0,"lg-gap-row",9)(1,"div"),l(2," Calculation outcome: "),r(),a(3,"div")(4,"lg-number-input",10),he("ngModelChange",function(c){w(e);let u=m(2);return xe(u.outcome_amount,c)||(u.outcome_amount=c),T(c)}),C("onInputChange",function(c){w(e);let u=m(2);return T(u.onOutcomeChange(c))}),r()(),a(5,"div"),l(6," costs: "),x(7,Tt,1,0,"ng-container",12),l(8," ( "),x(9,kt,1,0,"ng-container",12),l(10," + "),x(11,Rt,1,0,"ng-container",12),l(12," of taxes and fees) "),r(),a(13,"div"),l(14," per gram: "),x(15,St,1,0,"ng-container",12),r()()}if(n&2){let e=m(2),o=E(11),c=E(13),u=E(15),p=E(17);s("size","small")("center",!0),i(4),Ce("ngModel",e.outcome_amount),s("placeholder","Amount"),i(3),s("ngTemplateOutlet",u),i(2),s("ngTemplateOutlet",c),i(2),s("ngTemplateOutlet",o),i(4),s("ngTemplateOutlet",p)}}function It(n,t){if(n&1&&(a(0,"lg-gap-row",6),h(1,wt,21,14,"lg-gap-row",8)(2,Ft,16,8,"lg-gap-row",9),r()),n&2){let e=m();s("center",!0),i(),b(e.notInGrams()?1:2)}}function At(n,t){if(n&1&&(l(0),D(1,"number")),n&2){let e=m(2);g(" ",P(1,1,e.totalTaxes()/e.showedOutcome(),"1.2-2")," ")}}function Et(n,t){if(n&1&&(l(0),D(1,"number")),n&2){let e=m(2);g(" ",P(1,1,e.totalTaxes(),"1.2-2")," ")}}function Mt(n,t){if(n&1&&h(0,At,2,4)(1,Et,2,4),n&2){let e=m();b(e.notInGrams()?0:1)}}function Dt(n,t){if(n&1&&(l(0),D(1,"number")),n&2){let e,o=m(2);g(" ",P(1,1,(((e=o.result())==null?null:e.total)||1)/(o.showedOutcome()||1),"1.2-2")," ")}}function Pt(n,t){if(n&1&&(l(0),D(1,"number")),n&2){let e,o=m(2);g(" ",P(1,1,(e=o.result())==null?null:e.total,"1.2-2")," ")}}function Vt(n,t){if(n&1&&h(0,Dt,2,4)(1,Pt,2,4),n&2){let e=m();b(e.notInGrams()?0:1)}}function Nt(n,t){if(n&1&&(l(0),D(1,"number")),n&2){let e,o=m(2);g(" ",P(1,1,((((e=o.result())==null?null:e.total)||1)+o.totalTaxes())/(o.showedOutcome()||1),"1.2-2")," ")}}function Gt(n,t){if(n&1&&(l(0),D(1,"number")),n&2){let e,o=m(2);g(" ",P(1,1,(((e=o.result())==null?null:e.total)||1)+o.totalTaxes(),"1.2-2")," ")}}function Ot(n,t){if(n&1&&h(0,Nt,2,4)(1,Gt,2,4),n&2){let e=m();b(e.notInGrams()?0:1)}}function jt(n,t){}function Lt(n,t){if(n&1&&(l(0),D(1,"number")),n&2){let e,o=m(2);g(" ",P(1,1,((((e=o.result())==null?null:e.total)||1)+o.totalTaxes())/o.outcome_amount(),"1.2-2")," ")}}function Bt(n,t){if(n&1&&h(0,jt,0,0)(1,Lt,2,4),n&2){let e=m();b(e.notInGrams()?0:1)}}function Wt(n,t){if(n&1&&(a(0,"a",19),l(1),r()),n&2){let e=m().$implicit;s("routerLink",Ge(2,ht,e.type==="recipe-row"?"/edit-recipe/":"/edit-product/",e.uuid)),i(),g(" ",e.name," ")}}function Ut(n,t){if(n&1&&l(0),n&2){let e=m().$implicit;g(" ",e.name," ")}}function zt(n,t){if(n&1&&(a(0,"tr",18)(1,"td"),l(2),r(),a(3,"td")(4,"span",18),h(5,Wt,2,5,"a",19)(6,Ut,1,1),r()(),a(7,"td"),l(8),r(),a(9,"td"),l(10),r(),a(11,"td"),l(12),r(),a(13,"td"),l(14),r()()),n&2){let e=t.$implicit,o=t.$index;s("ngClass",e.type),i(2),M(o+1),i(2),s("ngClass","indent-"+e.indent),i(),b(e.type!=="total"?5:6),i(3),M(e.amount),i(2),M(e.unit),i(2),M(e.price_per_gram),i(2),M(e.total)}}function $t(n,t){if(n&1&&(a(0,"table")(1,"colgroup"),V(2,"col",13)(3,"col",14)(4,"col",15)(5,"col",16)(6,"col",15)(7,"col",17),r(),a(8,"thead")(9,"tr")(10,"th"),l(11,"#"),r(),a(12,"th"),l(13,"Name"),r(),a(14,"th"),l(15,"Amount"),r(),a(16,"th"),l(17,"Unit"),r(),a(18,"th"),l(19,"Price per unit"),r(),a(20,"th"),l(21,"Total"),r()()(),a(22,"tbody"),X(23,zt,15,8,"tr",18,De),r()()),n&2){let e,o=m();i(23),Y((e=o.result())==null?null:e.result)}}function qt(n,t){n&1&&(a(0,"div"),l(1,"Loading..."),r())}var st=class n{constructor(t,e){this._aRoute=t;this._calculateRecipeService=e}uuid=F("");result=F(null);outcome_amount=je(0);showedOutcome=F(0);totalTaxes=F(0);onOutcomeChange=t=>{this._calculateRecipeService.calculateRecipe(this.uuid(),t).then(e=>{this.result.set(e),this.showedOutcome.set(t)})};notInGrams=Oe(()=>this.result()?.recipe?.outcome_unit&&this.result()?.recipe?.outcome_unit!=="gram");ngOnInit(){this._aRoute.params.subscribe(t=>{this.uuid.set(t.uuid),this._calculateRecipeService.calculateRecipe(t.uuid).then(e=>{this.result.set(e),this.outcome_amount.set(e?.recipe?.outcome_amount||0),this.showedOutcome.set(e?.recipe?.outcome_amount||0)})})}onTotalTaxesChanged=t=>{this.totalTaxes.set(t)};static \u0275fac=function(e){return new(e||n)(fe(Ue),fe(_e))};static \u0275cmp=I({type:n,selectors:[["lg-calculate-recipe"]],inputs:{outcome_amount:[1,"outcome_amount"]},outputs:{outcome_amount:"outcome_amountChange"},decls:24,vars:16,consts:[["taxAmount",""],["rawAmount",""],["totalAmount",""],["perGramAmount",""],[3,"center","mobileMode"],[3,"flat","link","size"],[3,"center"],[3,"totalTaxesChanged","total"],[3,"fit","center","mobileMode"],[3,"size","center"],["lgParseMath","",3,"ngModelChange","onInputChange","ngModel","placeholder"],[3,"size","mobileMode"],[4,"ngTemplateOutlet"],["span","1",2,"width","1%"],["span","1",2,"width","20%"],["span","1",2,"width","5%"],["span","1",2,"width","3%"],["span","1",2,"width","7%"],[3,"ngClass"],["target","_blank",3,"routerLink"]],template:function(e,o){if(e&1){let c=N();a(0,"lg-container")(1,"lg-gap-column")(2,"lg-gap-row",4)(3,"lg-title"),l(4),r(),a(5,"lg-button",5),l(6," Edit "),r(),a(7,"lg-button",5),l(8," Back to list "),r()(),h(9,It,3,2,"lg-gap-row",6),x(10,Mt,2,1,"ng-template",null,0,U)(12,Vt,2,1,"ng-template",null,1,U)(14,Ot,2,1,"ng-template",null,2,U)(16,Bt,2,1,"ng-template",null,3,U),a(18,"lg-table-card"),h(19,$t,25,0,"table")(20,qt,2,0,"div"),r(),a(21,"lg-title"),l(22," Taxes and fees "),r(),a(23,"lg-taxes-and-fees-list",7),C("totalTaxesChanged",function(p){return w(c),T(o.onTotalTaxesChanged(p))}),r()()()}if(e&2){let c,u,p,f;i(2),s("center",!0)("mobileMode",!0),i(2),g(" ",(c=o.result())==null||c.recipe==null?null:c.recipe.name," cost calculation "),i(),W("primary"),s("flat",!0)("link","/edit-recipe/"+((u=o.result())==null||u.recipe==null?null:u.recipe.uuid))("size","small"),i(2),W("warning"),s("flat",!0)("link","/recipes")("size","small"),i(2),b((p=o.result())!=null&&p.total?9:-1),i(10),b(o.result()?19:20),i(4),s("total",((f=o.result())==null?null:f.total)??0)}},dependencies:[$e,te,ue,Le,ae,ce,We,re,oe,G,ne,le,ze,ie,de,Be],styles:[`:host{--control-bg: #fff}lg-number-input .lg-number-input{width:100px}
`],encapsulation:2})};export{st as CalculateRecipeComponent};
