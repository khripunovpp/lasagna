import{b as a}from"./chunk-3LOOR6LV.js";import{M as c,P as u,a as o,b as d,f as t}from"./chunk-EBX4ADAM.js";var m=class n{constructor(e){this._indexDbService=e}addRecipe(e){return t(this,null,function*(){return this._indexDbService.addData("recipesStore",e)})}getRecipes(){return this._indexDbService.getAll("recipesStore").then(e=>e.toSorted((i,r)=>i.name.localeCompare(r.name)))}getOne(e){return t(this,null,function*(){return new Promise((i,r)=>t(this,null,function*(){if(!e){i(void 0);return}e=e.uuid||e,yield this._indexDbService.getOne("recipesStore",e).then(p=>{i(this.recipeFromDTO(p))})}))})}editRecipe(e,i){return this._indexDbService.replaceData("recipesStore",e,i)}deleteRecipe(e){return this._indexDbService.remove("recipesStore",e)}ingredientToDto(e){return{name:e.name,amount:e.amount,unit:e.unit,product_id:e.product_id?.uuid,recipe_id:e.recipe_id?.uuid,uuid:e.uuid}}recipeFromDTO(e){return{name:e.name,description:e.description,outcome_amount:e.outcome_amount,outcome_unit:e.outcome_unit,uuid:e.uuid,ingredients:e.ingredients.map(i=>d(o({},i),{product_id:i.product_id?{uuid:i.product_id}:void 0,recipe_id:i.recipe_id?{uuid:i.recipe_id}:void 0})),taxTemplateName:e.taxTemplateName}}recipeToDto(e){return{name:e.name,description:e.description,outcome_amount:e.outcome_amount,outcome_unit:e.outcome_unit,uuid:e.uuid,ingredients:e.ingredients.map(i=>this.ingredientToDto(i)),taxTemplateName:e.taxTemplateName}}static \u0275fac=function(i){return new(i||n)(u(a))};static \u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})};export{m as a};
