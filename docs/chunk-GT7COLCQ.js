import{J as m,L as i,R as u,U as c,Z as s,_ as a,i as b,vb as v}from"./chunk-AWPX63HX.js";function y(n){n||(c(y),n=u(s));let e=new b(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(m(e))}function p(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&c(p);let l=t?e?.injector?.get(s)??u(s):null,d=g(e?.equal),o;e?.requireSync?o=a({kind:0},{equal:d}):o=a({kind:1,value:e?.initialValue},{equal:d});let f=n.subscribe({next:r=>o.set({kind:1,value:r}),error:r=>{o.set({kind:2,error:r})}});if(e?.requireSync&&o().kind===0)throw new i(601,!1);return l?.onDestroy(f.unsubscribe.bind(f)),v(()=>{let r=o();switch(r.kind){case 1:return r.value;case 2:throw r.error;case 0:throw new i(601,!1)}},{equal:e?.equal})}function g(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}export{y as a,p as b};
