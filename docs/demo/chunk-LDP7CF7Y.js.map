{
  "version": 3,
  "sources": ["src/app/shared/view/ui/focus-trap.directive.ts"],
  "sourcesContent": ["// focus-trap.directive.ts\nimport {AfterViewInit, Directive, ElementRef, HostListener, OnDestroy} from '@angular/core';\n\n@Directive({\n  selector: '[lgFocusTrap]',\n  standalone: true,\n})\nexport class FocusTrapDirective implements AfterViewInit {\n  constructor(\n    private el: ElementRef\n    ) {}\n\n  ngAfterViewInit() {\n    this.trapFocus(this.el.nativeElement);\n  }\n\n  trapFocus(element: HTMLElement) {\n    element.addEventListener('keydown', function(e) {\n      const getActiveElement = () => {\n        if (document.activeElement?.shadowRoot) { return document.activeElement.shadowRoot.activeElement; }\n        else { return document.activeElement; }\n      };\n\n      const isTabPressed = e.keyCode === 9; // isTabPressed\n      if (!isTabPressed) return;\n\n      const focusableEls1 = element.querySelectorAll(\n        'a[href], button, textarea, input[type=\"text\"],' +\n        'input[type=\"radio\"], input[type=\"checkbox\"], select'\n      );\n      const focusableEls = Array.from(focusableEls1).filter( (el: any) => !el.disabled);\n      const firstFocusableEl: any = focusableEls[0];\n      const lastFocusableEl: any = focusableEls[focusableEls.length - 1];\n\n      if ( e.shiftKey ) /* shift + tab */ {\n        if (getActiveElement() === firstFocusableEl) {\n          lastFocusableEl.focus();\n          e.preventDefault();\n        }\n      } else /* tab */ {\n        if (getActiveElement() === lastFocusableEl) {\n          firstFocusableEl.focus();\n          e.preventDefault();\n        }\n      }\n    });\n  }\n}\n"],
  "mappings": ";;;;;;;;;AAOM,IAAO,qBAAP,MAAO,oBAAkB;EAEnB;EADV,YACU,IAAc;AAAd,SAAA,KAAA;EACL;EAEL,kBAAe;AACb,SAAK,UAAU,KAAK,GAAG,aAAa;EACtC;EAEA,UAAU,SAAoB;AAC5B,YAAQ,iBAAiB,WAAW,SAAS,GAAC;AAC5C,YAAM,mBAAmB,MAAK;AAC5B,YAAI,SAAS,eAAe,YAAY;AAAE,iBAAO,SAAS,cAAc,WAAW;QAAe,OAC7F;AAAE,iBAAO,SAAS;QAAe;MACxC;AAEA,YAAM,eAAe,EAAE,YAAY;AACnC,UAAI,CAAC;AAAc;AAEnB,YAAM,gBAAgB,QAAQ,iBAC5B,mGACqD;AAEvD,YAAM,eAAe,MAAM,KAAK,aAAa,EAAE,OAAQ,CAAC,OAAY,CAAC,GAAG,QAAQ;AAChF,YAAM,mBAAwB,aAAa,CAAC;AAC5C,YAAM,kBAAuB,aAAa,aAAa,SAAS,CAAC;AAEjE,UAAK,EAAE,UAA6B;AAClC,YAAI,iBAAgB,MAAO,kBAAkB;AAC3C,0BAAgB,MAAK;AACrB,YAAE,eAAc;QAClB;MACF,OAAiB;AACf,YAAI,iBAAgB,MAAO,iBAAiB;AAC1C,2BAAiB,MAAK;AACtB,YAAE,eAAc;QAClB;MACF;IACF,CAAC;EACH;;qCAvCW,qBAAkB,4BAAA,UAAA,CAAA;EAAA;yEAAlB,qBAAkB,WAAA,CAAA,CAAA,IAAA,eAAA,EAAA,CAAA,EAAA,CAAA;;;sEAAlB,oBAAkB,CAAA;UAJ9B;WAAU;MACT,UAAU;MACV,YAAY;KACb;;;",
  "names": []
}
