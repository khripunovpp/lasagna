import{a as Z}from"./chunk-VQHC6PFZ.js";import{b as U,c as X}from"./chunk-4WXVQTO3.js";import{a as _}from"./chunk-ETPBTK6B.js";import{a as Q}from"./chunk-NVFEA3DU.js";import{a as L}from"./chunk-P6RB7BRR.js";import{a as J}from"./chunk-YJU6N6KC.js";import{a as K}from"./chunk-F35XVR6T.js";import"./chunk-X4OHOYN7.js";import{a as P}from"./chunk-5NZRDCXS.js";import{a as G,d as O,f as j,g as M,h as W,i as q,k as B,m as Y,p as z,s as H}from"./chunk-QUOF2WSA.js";import{a as T,b as D,c as y}from"./chunk-EZZ7OFHX.js";import{a as I}from"./chunk-HG4USQGA.js";import{a as k}from"./chunk-XINH5I7V.js";import{a as V}from"./chunk-WG6RLDGA.js";import"./chunk-SNDQO5FA.js";import{o as w,r as E}from"./chunk-GRZ5ELRS.js";import"./chunk-AUMTO3XJ.js";import{Ab as m,Bb as A,Fb as F,Ib as C,Jb as p,Sa as i,Vb as c,Xa as d,Xb as b,ab as u,ac as R,ea as h,fa as x,la as l,nb as n,qc as S,tb as f,ub as g,uc as N,zb as a}from"./chunk-RDTQHNEQ.js";import"./chunk-DELOOZDJ.js";import"./chunk-2WH2EVR6.js";function it(e,o){e&1&&c(0," Save category ")}function rt(e,o){e&1&&c(0," No changes ")}function nt(e,o){if(e&1){let t=F();a(0,"lg-button",6),C("click",function(){h(t);let s=p();return x(s.editCategory())}),f(1,it,1,0)(2,rt,1,0),m()}if(e&2){let t=p();n("disabled",!t.form.dirty),i(),g(t.form.dirty?1:2)}}function at(e,o){e&1&&c(0," Add category ")}function mt(e,o){e&1&&c(0," Enter a name ")}function dt(e,o){if(e&1){let t=F();a(0,"lg-button",6),C("click",function(){h(t);let s=p();return x(s.addCategory())}),f(1,at,1,0)(2,mt,1,0),m()}if(e&2){let t=p();n("disabled",!t.form.dirty),i(),g(t.form.dirty?1:2)}}var v=class e{constructor(o,t,r,s){this._categoryRepository=o;this._selectResourcesService=t;this._router=r;this._notificationsService=s}form=new W({name:new q("",O.required)});category=l(void 0);uuid=N("");uuidEffect=S(()=>{if(!this.uuid()){this.category.set(I.empty());return}this._categoryRepository.getOne(this.uuid()).then(o=>{this.form.reset(U(o)),this.category.set(o),this.form.markAsPristine()})});ngOnInit(){this.form.valueChanges.subscribe(o=>{this.category()?.update(X(o))})}addCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.addOne(this.category()).then(()=>{this.form.reset({}),this._notificationsService.success("Category added"),this.form.markAsPristine()})}editCategory(){return!this.category()||!this.form.dirty?Promise.resolve():this._categoryRepository.updateOne(this.uuid(),this.category()).then(()=>{this._notificationsService.success("Category edited"),this.form.markAsPristine()})}onEnter(){this.uuid()?this.editCategory():this.addCategory()}static \u0275fac=function(t){return new(t||e)(d(P),d(_),d(E),d(K))};static \u0275cmp=u({type:e,selectors:[["lg-add-category-form"]],inputs:{uuid:[1,"uuid"]},features:[R([{provide:_,useClass:_}])],decls:7,vars:4,consts:[[3,"formGroup"],[3,"bottom"],["label","Name","lgExpand",""],["formControlName","name",3,"onEnter","placeholder"],["lgNoWrap",""],[3,"disabled"],[3,"click","disabled"]],template:function(t,r){t&1&&(a(0,"form",0)(1,"lg-gap-row",1)(2,"lg-control",2)(3,"lg-input",3),C("onEnter",function(){return r.onEnter()}),m()(),a(4,"div",4),f(5,nt,3,2,"lg-button",5)(6,dt,3,2,"lg-button",5),m()()()),t&2&&(n("formGroup",r.form),i(),n("bottom",!0),i(2),n("placeholder","Your category name"),i(2),g(r.uuid()?5:6))},dependencies:[H,B,j,M,Y,z,L,Q,G,y,J,Z],encapsulation:2})};var $=class e{constructor(o){this._aRoute=o}uuid=l("");ngOnInit(){this._aRoute.params.subscribe(o=>{this.uuid.set(o.uuid)})}static \u0275fac=function(t){return new(t||e)(d(w))};static \u0275cmp=u({type:e,selectors:[["lg-add-category"]],decls:7,vars:3,consts:[[3,"center"],[3,"uuid"]],template:function(t,r){t&1&&(a(0,"lg-fade-in")(1,"lg-container")(2,"lg-gap-row",0)(3,"lg-title"),c(4),m()(),a(5,"lg-card"),A(6,"lg-add-category-form",1),m()()()),t&2&&(i(2),n("center",!0),i(2),b("",r.uuid()?"Edit":"Add"," product category"),i(2),n("uuid",r.uuid()))},dependencies:[T,D,V,v,y,k],encapsulation:2})};export{$ as AddCategoryComponent};
