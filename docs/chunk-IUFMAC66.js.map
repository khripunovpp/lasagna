{
  "version": 3,
  "sources": ["src/app/features/settings/view/categories/category-product/list/category-list.component.ts"],
  "sourcesContent": ["import {Component, EventEmitter, inject, OnInit, Output} from '@angular/core';\nimport {ButtonComponent} from '../../../../../../shared/view/ui/button/button.component';\nimport {FlexRowComponent} from '../../../../../../shared/view/layout/flex-row.component';\nimport {MatIcon} from '@angular/material/icon';\nimport {CardListComponent} from '../../../../../../shared/view/ui/card/card-list.component';\nimport {CardListItemDirective} from '../../../../../../shared/view/ui/card/card-list-item.directive';\nimport {FadeInComponent} from '../../../../../../shared/view/ui/fade-in.component';\nimport {CategoryProductsRepository} from '../../../../../../shared/service/repositories';\nimport {NotificationsService} from '../../../../../../shared/service/services';\nimport {CategoryProduct} from '../../../../service/models/CategoryProduct';\nimport {TranslatePipe} from '@ngx-translate/core';\nimport {ExpandDirective} from '../../../../../../shared/view/directives/expand.directive';\nimport {errorHandler} from '../../../../../../shared/helpers';\nimport {defer} from 'rxjs';\nimport {AsyncPipe} from '@angular/common';\nimport {FlexColumnComponent} from '../../../../../../shared/view/layout/flex-column.component';\nimport {IS_CLIENT} from '../../../../../../shared/service/tokens/isClient.token';\n\n@Component({\n  selector: 'lg-category-list',\n  standalone: true,\n  template: `\n    <lg-fade-in>\n      <lg-flex-column [size]=\"'small'\">\n        <div class=\"text-small\">{{ 'categories.products.title' | translate }}</div>\n\n        <lg-card-list style=\"--card-list-bg: var(--control-bg)\">\n          @let cats = (categories | async) ?? [];\n          @for (category of cats; track i; let i = $index) {\n            <ng-template lgCardListItem>\n              <lg-flex-row [center]=\"true\">\n                <div lgExpand (click)=\"onEdit.emit(category.uuid)\" style=\"cursor: pointer;\">\n                  {{ category.name }}\n                </div>\n\n                <lg-button [style]=\"'danger'\"\n                           [size]=\"'tiny'\"\n                           [icon]=\"true\"\n                           (click)=\"deleteCategory(category)\">\n                  <mat-icon aria-hidden=\"false\" aria-label=\"Delete\"\n                            fontIcon=\"close\"></mat-icon>\n                </lg-button>\n              </lg-flex-row>\n            </ng-template>\n          }\n        </lg-card-list>\n      </lg-flex-column>\n    </lg-fade-in>\n  `,\n  imports: [\n    FlexRowComponent,\n    ButtonComponent,\n    MatIcon,\n    CardListComponent,\n    CardListItemDirective,\n    FadeInComponent,\n    TranslatePipe,\n    ExpandDirective,\n    AsyncPipe,\n    FlexColumnComponent\n  ],\n  styles: [\n    `:host {\n      display: block;\n    }\n    `\n  ]\n})\nexport class CategoryListComponent\n  implements OnInit {\n  constructor(\n    public categoryRepository: CategoryProductsRepository,\n    private _notificationsService: NotificationsService,\n  ) {\n\n  }\n\n  @Output() onEdit = new EventEmitter<string>();\n  categories = defer(() => this.categoryRepository.categories$);\n  isClient = inject(IS_CLIENT);\n\n  deleteCategory(\n    category: CategoryProduct,\n  ) {\n    if (!category.uuid) {\n      return Promise.resolve()\n    }\n    return this.categoryRepository.deleteOne(category.uuid)\n      .then(() => {\n        this.loadCategory();\n        this._notificationsService.success('categories.deleted');\n      })\n      .catch(e => {\n        this._notificationsService.error(errorHandler(e));\n      });\n  }\n\n  ngOnInit() {\n    if (!this.isClient) {\n      return;\n    }\n    this.loadCategory();\n  }\n\n  async loadCategory() {\n    try {\n      await this.categoryRepository.loadAll();\n    } catch (e) {\n      this._notificationsService.error(errorHandler(e));\n    }\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
